(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const x of c)if(x.type==="childList")for(const f of x.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(c){const x={};return c.integrity&&(x.integrity=c.integrity),c.referrerPolicy&&(x.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?x.credentials="include":c.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function l(c){if(c.ep)return;c.ep=!0;const x=n(c);fetch(c.href,x)}})();function Sp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p0={exports:{}},_l={},g0={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aa=Symbol.for("react.element"),Rp=Symbol.for("react.portal"),$p=Symbol.for("react.fragment"),Mp=Symbol.for("react.strict_mode"),Up=Symbol.for("react.profiler"),Op=Symbol.for("react.provider"),zp=Symbol.for("react.context"),Vp=Symbol.for("react.forward_ref"),Hp=Symbol.for("react.suspense"),_p=Symbol.for("react.memo"),Yp=Symbol.for("react.lazy"),ru=Symbol.iterator;function qp(t){return t===null||typeof t!="object"?null:(t=ru&&t[ru]||t["@@iterator"],typeof t=="function"?t:null)}var y0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f0=Object.assign,b0={};function Nn(t,r,n){this.props=t,this.context=r,this.refs=b0,this.updater=n||y0}Nn.prototype.isReactComponent={};Nn.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};Nn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function j0(){}j0.prototype=Nn.prototype;function Mi(t,r,n){this.props=t,this.context=r,this.refs=b0,this.updater=n||y0}var Ui=Mi.prototype=new j0;Ui.constructor=Mi;f0(Ui,Nn.prototype);Ui.isPureReactComponent=!0;var su=Array.isArray,N0=Object.prototype.hasOwnProperty,Oi={current:null},v0={key:!0,ref:!0,__self:!0,__source:!0};function w0(t,r,n){var l,c={},x=null,f=null;if(r!=null)for(l in r.ref!==void 0&&(f=r.ref),r.key!==void 0&&(x=""+r.key),r)N0.call(r,l)&&!v0.hasOwnProperty(l)&&(c[l]=r[l]);var v=arguments.length-2;if(v===1)c.children=n;else if(1<v){for(var P=Array(v),$=0;$<v;$++)P[$]=arguments[$+2];c.children=P}if(t&&t.defaultProps)for(l in v=t.defaultProps,v)c[l]===void 0&&(c[l]=v[l]);return{$$typeof:Aa,type:t,key:x,ref:f,props:c,_owner:Oi.current}}function Wp(t,r){return{$$typeof:Aa,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function zi(t){return typeof t=="object"&&t!==null&&t.$$typeof===Aa}function Gp(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return r[n]})}var nu=/\/+/g;function oo(t,r){return typeof t=="object"&&t!==null&&t.key!=null?Gp(""+t.key):r.toString(36)}function ol(t,r,n,l,c){var x=typeof t;(x==="undefined"||x==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(x){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case Aa:case Rp:f=!0}}if(f)return f=t,c=c(f),t=l===""?"."+oo(f,0):l,su(c)?(n="",t!=null&&(n=t.replace(nu,"$&/")+"/"),ol(c,r,n,"",function($){return $})):c!=null&&(zi(c)&&(c=Wp(c,n+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(nu,"$&/")+"/")+t)),r.push(c)),1;if(f=0,l=l===""?".":l+":",su(t))for(var v=0;v<t.length;v++){x=t[v];var P=l+oo(x,v);f+=ol(x,r,n,P,c)}else if(P=qp(t),typeof P=="function")for(t=P.call(t),v=0;!(x=t.next()).done;)x=x.value,P=l+oo(x,v++),f+=ol(x,r,n,P,c);else if(x==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return f}function Oa(t,r,n){if(t==null)return t;var l=[],c=0;return ol(t,l,"","",function(x){return r.call(n,x,c++)}),l}function Qp(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},il={transition:null},Kp={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:il,ReactCurrentOwner:Oi};function P0(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Oa,forEach:function(t,r,n){Oa(t,function(){r.apply(this,arguments)},n)},count:function(t){var r=0;return Oa(t,function(){r++}),r},toArray:function(t){return Oa(t,function(r){return r})||[]},only:function(t){if(!zi(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=Nn;Me.Fragment=$p;Me.Profiler=Up;Me.PureComponent=Mi;Me.StrictMode=Mp;Me.Suspense=Hp;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kp;Me.act=P0;Me.cloneElement=function(t,r,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var l=f0({},t.props),c=t.key,x=t.ref,f=t._owner;if(r!=null){if(r.ref!==void 0&&(x=r.ref,f=Oi.current),r.key!==void 0&&(c=""+r.key),t.type&&t.type.defaultProps)var v=t.type.defaultProps;for(P in r)N0.call(r,P)&&!v0.hasOwnProperty(P)&&(l[P]=r[P]===void 0&&v!==void 0?v[P]:r[P])}var P=arguments.length-2;if(P===1)l.children=n;else if(1<P){v=Array(P);for(var $=0;$<P;$++)v[$]=arguments[$+2];l.children=v}return{$$typeof:Aa,type:t.type,key:c,ref:x,props:l,_owner:f}};Me.createContext=function(t){return t={$$typeof:zp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Op,_context:t},t.Consumer=t};Me.createElement=w0;Me.createFactory=function(t){var r=w0.bind(null,t);return r.type=t,r};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:Vp,render:t}};Me.isValidElement=zi;Me.lazy=function(t){return{$$typeof:Yp,_payload:{_status:-1,_result:t},_init:Qp}};Me.memo=function(t,r){return{$$typeof:_p,type:t,compare:r===void 0?null:r}};Me.startTransition=function(t){var r=il.transition;il.transition={};try{t()}finally{il.transition=r}};Me.unstable_act=P0;Me.useCallback=function(t,r){return Vt.current.useCallback(t,r)};Me.useContext=function(t){return Vt.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};Me.useEffect=function(t,r){return Vt.current.useEffect(t,r)};Me.useId=function(){return Vt.current.useId()};Me.useImperativeHandle=function(t,r,n){return Vt.current.useImperativeHandle(t,r,n)};Me.useInsertionEffect=function(t,r){return Vt.current.useInsertionEffect(t,r)};Me.useLayoutEffect=function(t,r){return Vt.current.useLayoutEffect(t,r)};Me.useMemo=function(t,r){return Vt.current.useMemo(t,r)};Me.useReducer=function(t,r,n){return Vt.current.useReducer(t,r,n)};Me.useRef=function(t){return Vt.current.useRef(t)};Me.useState=function(t){return Vt.current.useState(t)};Me.useSyncExternalStore=function(t,r,n){return Vt.current.useSyncExternalStore(t,r,n)};Me.useTransition=function(){return Vt.current.useTransition()};Me.version="18.3.1";g0.exports=Me;var Ee=g0.exports;const C0=Sp(Ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=Ee,Zp=Symbol.for("react.element"),Xp=Symbol.for("react.fragment"),Bp=Object.prototype.hasOwnProperty,eg=Jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tg={key:!0,ref:!0,__self:!0,__source:!0};function F0(t,r,n){var l,c={},x=null,f=null;n!==void 0&&(x=""+n),r.key!==void 0&&(x=""+r.key),r.ref!==void 0&&(f=r.ref);for(l in r)Bp.call(r,l)&&!tg.hasOwnProperty(l)&&(c[l]=r[l]);if(t&&t.defaultProps)for(l in r=t.defaultProps,r)c[l]===void 0&&(c[l]=r[l]);return{$$typeof:Zp,type:t,key:x,ref:f,props:c,_owner:eg.current}}_l.Fragment=Xp;_l.jsx=F0;_l.jsxs=F0;p0.exports=_l;var e=p0.exports,Yo={},A0={exports:{}},tr={},k0={exports:{}},D0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(me,Fe){var ke=me.length;me.push(Fe);e:for(;0<ke;){var Je=ke-1>>>1,Ze=me[Je];if(0<c(Ze,Fe))me[Je]=Fe,me[ke]=Ze,ke=Je;else break e}}function n(me){return me.length===0?null:me[0]}function l(me){if(me.length===0)return null;var Fe=me[0],ke=me.pop();if(ke!==Fe){me[0]=ke;e:for(var Je=0,Ze=me.length,Er=Ze>>>1;Je<Er;){var sr=2*(Je+1)-1,hr=me[sr],it=sr+1,Ft=me[it];if(0>c(hr,ke))it<Ze&&0>c(Ft,hr)?(me[Je]=Ft,me[it]=ke,Je=it):(me[Je]=hr,me[sr]=ke,Je=sr);else if(it<Ze&&0>c(Ft,ke))me[Je]=Ft,me[it]=ke,Je=it;else break e}}return Fe}function c(me,Fe){var ke=me.sortIndex-Fe.sortIndex;return ke!==0?ke:me.id-Fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;t.unstable_now=function(){return x.now()}}else{var f=Date,v=f.now();t.unstable_now=function(){return f.now()-v}}var P=[],$=[],te=1,ee=null,Z=3,le=!1,ae=!1,oe=!1,De=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(me){for(var Fe=n($);Fe!==null;){if(Fe.callback===null)l($);else if(Fe.startTime<=me)l($),Fe.sortIndex=Fe.expirationTime,r(P,Fe);else break;Fe=n($)}}function se(me){if(oe=!1,H(me),!ae)if(n(P)!==null)ae=!0,Nt(ue);else{var Fe=n($);Fe!==null&&We(se,Fe.startTime-me)}}function ue(me,Fe){ae=!1,oe&&(oe=!1,V(ye),ye=-1),le=!0;var ke=Z;try{for(H(Fe),ee=n(P);ee!==null&&(!(ee.expirationTime>Fe)||me&&!jt());){var Je=ee.callback;if(typeof Je=="function"){ee.callback=null,Z=ee.priorityLevel;var Ze=Je(ee.expirationTime<=Fe);Fe=t.unstable_now(),typeof Ze=="function"?ee.callback=Ze:ee===n(P)&&l(P),H(Fe)}else l(P);ee=n(P)}if(ee!==null)var Er=!0;else{var sr=n($);sr!==null&&We(se,sr.startTime-Fe),Er=!1}return Er}finally{ee=null,Z=ke,le=!1}}var pe=!1,ge=null,ye=-1,He=5,Ie=-1;function jt(){return!(t.unstable_now()-Ie<He)}function $t(){if(ge!==null){var me=t.unstable_now();Ie=me;var Fe=!0;try{Fe=ge(!0,me)}finally{Fe?O():(pe=!1,ge=null)}}else pe=!1}var O;if(typeof D=="function")O=function(){D($t)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Le=ce.port2;ce.port1.onmessage=$t,O=function(){Le.postMessage(null)}}else O=function(){De($t,0)};function Nt(me){ge=me,pe||(pe=!0,O())}function We(me,Fe){ye=De(function(){me(t.unstable_now())},Fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(me){me.callback=null},t.unstable_continueExecution=function(){ae||le||(ae=!0,Nt(ue))},t.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):He=0<me?Math.floor(1e3/me):5},t.unstable_getCurrentPriorityLevel=function(){return Z},t.unstable_getFirstCallbackNode=function(){return n(P)},t.unstable_next=function(me){switch(Z){case 1:case 2:case 3:var Fe=3;break;default:Fe=Z}var ke=Z;Z=Fe;try{return me()}finally{Z=ke}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(me,Fe){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var ke=Z;Z=me;try{return Fe()}finally{Z=ke}},t.unstable_scheduleCallback=function(me,Fe,ke){var Je=t.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Je+ke:Je):ke=Je,me){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=ke+Ze,me={id:te++,callback:Fe,priorityLevel:me,startTime:ke,expirationTime:Ze,sortIndex:-1},ke>Je?(me.sortIndex=ke,r($,me),n(P)===null&&me===n($)&&(oe?(V(ye),ye=-1):oe=!0,We(se,ke-Je))):(me.sortIndex=Ze,r(P,me),ae||le||(ae=!0,Nt(ue))),me},t.unstable_shouldYield=jt,t.unstable_wrapCallback=function(me){var Fe=Z;return function(){var ke=Z;Z=Fe;try{return me.apply(this,arguments)}finally{Z=ke}}}})(D0);k0.exports=D0;var rg=k0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg=Ee,er=rg;function de(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)r+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T0=new Set,da={};function Ts(t,r){hn(t,r),hn(t+"Capture",r)}function hn(t,r){for(da[t]=r,t=0;t<r.length;t++)T0.add(r[t])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qo=Object.prototype.hasOwnProperty,ng=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,au={},lu={};function ag(t){return qo.call(lu,t)?!0:qo.call(au,t)?!1:ng.test(t)?lu[t]=!0:(au[t]=!0,!1)}function lg(t,r,n,l){if(n!==null&&n.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return l?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function og(t,r,n,l){if(r===null||typeof r>"u"||lg(t,r,n,l))return!0;if(l)return!1;if(n!==null)switch(n.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Ht(t,r,n,l,c,x,f){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=t,this.type=r,this.sanitizeURL=x,this.removeEmptyString=f}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];Tt[r]=new Ht(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vi=/[\-:]([a-z])/g;function Hi(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Vi,Hi);Tt[r]=new Ht(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Vi,Hi);Tt[r]=new Ht(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Vi,Hi);Tt[r]=new Ht(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function _i(t,r,n,l){var c=Tt.hasOwnProperty(r)?Tt[r]:null;(c!==null?c.type!==0:l||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(og(r,n,c,l)&&(n=null),l||c===null?ag(r)&&(n===null?t.removeAttribute(r):t.setAttribute(r,""+n)):c.mustUseProperty?t[c.propertyName]=n===null?c.type===3?!1:"":n:(r=c.attributeName,l=c.attributeNamespace,n===null?t.removeAttribute(r):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,l?t.setAttributeNS(l,r,n):t.setAttribute(r,n))))}var Wr=sg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,za=Symbol.for("react.element"),Ks=Symbol.for("react.portal"),Js=Symbol.for("react.fragment"),Yi=Symbol.for("react.strict_mode"),Wo=Symbol.for("react.profiler"),L0=Symbol.for("react.provider"),E0=Symbol.for("react.context"),qi=Symbol.for("react.forward_ref"),Go=Symbol.for("react.suspense"),Qo=Symbol.for("react.suspense_list"),Wi=Symbol.for("react.memo"),Kr=Symbol.for("react.lazy"),I0=Symbol.for("react.offscreen"),ou=Symbol.iterator;function zn(t){return t===null||typeof t!="object"?null:(t=ou&&t[ou]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,io;function Zn(t){if(io===void 0)try{throw Error()}catch(n){var r=n.stack.trim().match(/\n( *(at )?)/);io=r&&r[1]||""}return`
`+io+t}var co=!1;function xo(t,r){if(!t||co)return"";co=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch($){var l=$}Reflect.construct(t,[],r)}else{try{r.call()}catch($){l=$}t.call(r.prototype)}else{try{throw Error()}catch($){l=$}t()}}catch($){if($&&l&&typeof $.stack=="string"){for(var c=$.stack.split(`
`),x=l.stack.split(`
`),f=c.length-1,v=x.length-1;1<=f&&0<=v&&c[f]!==x[v];)v--;for(;1<=f&&0<=v;f--,v--)if(c[f]!==x[v]){if(f!==1||v!==1)do if(f--,v--,0>v||c[f]!==x[v]){var P=`
`+c[f].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=f&&0<=v);break}}}finally{co=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zn(t):""}function ig(t){switch(t.tag){case 5:return Zn(t.type);case 16:return Zn("Lazy");case 13:return Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 2:case 15:return t=xo(t.type,!1),t;case 11:return t=xo(t.type.render,!1),t;case 1:return t=xo(t.type,!0),t;default:return""}}function Ko(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Js:return"Fragment";case Ks:return"Portal";case Wo:return"Profiler";case Yi:return"StrictMode";case Go:return"Suspense";case Qo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case E0:return(t.displayName||"Context")+".Consumer";case L0:return(t._context.displayName||"Context")+".Provider";case qi:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wi:return r=t.displayName||null,r!==null?r:Ko(t.type)||"Memo";case Kr:r=t._payload,t=t._init;try{return Ko(t(r))}catch{}}return null}function cg(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ko(r);case 8:return r===Yi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function S0(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function dg(t){var r=S0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,x=n.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return c.call(this)},set:function(f){l=""+f,x.call(this,f)}}),Object.defineProperty(t,r,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(f){l=""+f},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Va(t){t._valueTracker||(t._valueTracker=dg(t))}function R0(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var n=r.getValue(),l="";return t&&(l=S0(t)?t.checked?"true":"false":t.value),t=l,t!==n?(r.setValue(t),!0):!1}function bl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jo(t,r){var n=r.checked;return ot({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iu(t,r){var n=r.defaultValue==null?"":r.defaultValue,l=r.checked!=null?r.checked:r.defaultChecked;n=cs(r.value!=null?r.value:n),t._wrapperState={initialChecked:l,initialValue:n,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function $0(t,r){r=r.checked,r!=null&&_i(t,"checked",r,!1)}function Zo(t,r){$0(t,r);var n=cs(r.value),l=r.type;if(n!=null)l==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(l==="submit"||l==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Xo(t,r.type,n):r.hasOwnProperty("defaultValue")&&Xo(t,r.type,cs(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function cu(t,r,n){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var l=r.type;if(!(l!=="submit"&&l!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,n||r===t.value||(t.value=r),t.defaultValue=r}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xo(t,r,n){(r!=="number"||bl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xn=Array.isArray;function on(t,r,n,l){if(t=t.options,r){r={};for(var c=0;c<n.length;c++)r["$"+n[c]]=!0;for(n=0;n<t.length;n++)c=r.hasOwnProperty("$"+t[n].value),t[n].selected!==c&&(t[n].selected=c),c&&l&&(t[n].defaultSelected=!0)}else{for(n=""+cs(n),r=null,c=0;c<t.length;c++){if(t[c].value===n){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}r!==null||t[c].disabled||(r=t[c])}r!==null&&(r.selected=!0)}}function Bo(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(de(91));return ot({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function du(t,r){var n=r.value;if(n==null){if(n=r.children,r=r.defaultValue,n!=null){if(r!=null)throw Error(de(92));if(Xn(n)){if(1<n.length)throw Error(de(93));n=n[0]}r=n}r==null&&(r=""),n=r}t._wrapperState={initialValue:cs(n)}}function M0(t,r){var n=cs(r.value),l=cs(r.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),r.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),l!=null&&(t.defaultValue=""+l)}function xu(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function U0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ei(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?U0(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ha,O0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,n,l,c){MSApp.execUnsafeLocalFunction(function(){return t(r,n,l,c)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Ha=Ha||document.createElement("div"),Ha.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function xa(t,r){if(r){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=r;return}}t.textContent=r}var ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xg=["Webkit","ms","Moz","O"];Object.keys(ta).forEach(function(t){xg.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ta[r]=ta[t]})});function z0(t,r,n){return r==null||typeof r=="boolean"||r===""?"":n||typeof r!="number"||r===0||ta.hasOwnProperty(t)&&ta[t]?(""+r).trim():r+"px"}function V0(t,r){t=t.style;for(var n in r)if(r.hasOwnProperty(n)){var l=n.indexOf("--")===0,c=z0(n,r[n],l);n==="float"&&(n="cssFloat"),l?t.setProperty(n,c):t[n]=c}}var mg=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ti(t,r){if(r){if(mg[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(de(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(de(61))}if(r.style!=null&&typeof r.style!="object")throw Error(de(62))}}function ri(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var si=null;function Gi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ni=null,cn=null,dn=null;function mu(t){if(t=Ta(t)){if(typeof ni!="function")throw Error(de(280));var r=t.stateNode;r&&(r=Ql(r),ni(t.stateNode,t.type,r))}}function H0(t){cn?dn?dn.push(t):dn=[t]:cn=t}function _0(){if(cn){var t=cn,r=dn;if(dn=cn=null,mu(t),r)for(t=0;t<r.length;t++)mu(r[t])}}function Y0(t,r){return t(r)}function q0(){}var mo=!1;function W0(t,r,n){if(mo)return t(r,n);mo=!0;try{return Y0(t,r,n)}finally{mo=!1,(cn!==null||dn!==null)&&(q0(),_0())}}function ma(t,r){var n=t.stateNode;if(n===null)return null;var l=Ql(n);if(l===null)return null;n=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(de(231,r,typeof n));return n}var ai=!1;if(Hr)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){ai=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{ai=!1}function ug(t,r,n,l,c,x,f,v,P){var $=Array.prototype.slice.call(arguments,3);try{r.apply(n,$)}catch(te){this.onError(te)}}var ra=!1,jl=null,Nl=!1,li=null,hg={onError:function(t){ra=!0,jl=t}};function pg(t,r,n,l,c,x,f,v,P){ra=!1,jl=null,ug.apply(hg,arguments)}function gg(t,r,n,l,c,x,f,v,P){if(pg.apply(this,arguments),ra){if(ra){var $=jl;ra=!1,jl=null}else throw Error(de(198));Nl||(Nl=!0,li=$)}}function Ls(t){var r=t,n=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(n=r.return),t=r.return;while(t)}return r.tag===3?n:null}function G0(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function uu(t){if(Ls(t)!==t)throw Error(de(188))}function yg(t){var r=t.alternate;if(!r){if(r=Ls(t),r===null)throw Error(de(188));return r!==t?null:t}for(var n=t,l=r;;){var c=n.return;if(c===null)break;var x=c.alternate;if(x===null){if(l=c.return,l!==null){n=l;continue}break}if(c.child===x.child){for(x=c.child;x;){if(x===n)return uu(c),t;if(x===l)return uu(c),r;x=x.sibling}throw Error(de(188))}if(n.return!==l.return)n=c,l=x;else{for(var f=!1,v=c.child;v;){if(v===n){f=!0,n=c,l=x;break}if(v===l){f=!0,l=c,n=x;break}v=v.sibling}if(!f){for(v=x.child;v;){if(v===n){f=!0,n=x,l=c;break}if(v===l){f=!0,l=x,n=c;break}v=v.sibling}if(!f)throw Error(de(189))}}if(n.alternate!==l)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?t:r}function Q0(t){return t=yg(t),t!==null?K0(t):null}function K0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=K0(t);if(r!==null)return r;t=t.sibling}return null}var J0=er.unstable_scheduleCallback,hu=er.unstable_cancelCallback,fg=er.unstable_shouldYield,bg=er.unstable_requestPaint,ht=er.unstable_now,jg=er.unstable_getCurrentPriorityLevel,Qi=er.unstable_ImmediatePriority,Z0=er.unstable_UserBlockingPriority,vl=er.unstable_NormalPriority,Ng=er.unstable_LowPriority,X0=er.unstable_IdlePriority,Yl=null,Tr=null;function vg(t){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Yl,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:Cg,wg=Math.log,Pg=Math.LN2;function Cg(t){return t>>>=0,t===0?32:31-(wg(t)/Pg|0)|0}var _a=64,Ya=4194304;function Bn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wl(t,r){var n=t.pendingLanes;if(n===0)return 0;var l=0,c=t.suspendedLanes,x=t.pingedLanes,f=n&268435455;if(f!==0){var v=f&~c;v!==0?l=Bn(v):(x&=f,x!==0&&(l=Bn(x)))}else f=n&~c,f!==0?l=Bn(f):x!==0&&(l=Bn(x));if(l===0)return 0;if(r!==0&&r!==l&&!(r&c)&&(c=l&-l,x=r&-r,c>=x||c===16&&(x&4194240)!==0))return r;if(l&4&&(l|=n&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=l;0<r;)n=31-vr(r),c=1<<n,l|=t[n],r&=~c;return l}function Fg(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ag(t,r){for(var n=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,x=t.pendingLanes;0<x;){var f=31-vr(x),v=1<<f,P=c[f];P===-1?(!(v&n)||v&l)&&(c[f]=Fg(v,r)):P<=r&&(t.expiredLanes|=v),x&=~v}}function oi(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function B0(){var t=_a;return _a<<=1,!(_a&4194240)&&(_a=64),t}function uo(t){for(var r=[],n=0;31>n;n++)r.push(t);return r}function ka(t,r,n){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-vr(r),t[r]=n}function kg(t,r){var n=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var l=t.eventTimes;for(t=t.expirationTimes;0<n;){var c=31-vr(n),x=1<<c;r[c]=0,l[c]=-1,t[c]=-1,n&=~x}}function Ki(t,r){var n=t.entangledLanes|=r;for(t=t.entanglements;n;){var l=31-vr(n),c=1<<l;c&r|t[l]&r&&(t[l]|=r),n&=~c}}var qe=0;function eh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var th,Ji,rh,sh,nh,ii=!1,qa=[],ts=null,rs=null,ss=null,ua=new Map,ha=new Map,Zr=[],Dg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pu(t,r){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":ua.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(r.pointerId)}}function Hn(t,r,n,l,c,x){return t===null||t.nativeEvent!==x?(t={blockedOn:r,domEventName:n,eventSystemFlags:l,nativeEvent:x,targetContainers:[c]},r!==null&&(r=Ta(r),r!==null&&Ji(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,c!==null&&r.indexOf(c)===-1&&r.push(c),t)}function Tg(t,r,n,l,c){switch(r){case"focusin":return ts=Hn(ts,t,r,n,l,c),!0;case"dragenter":return rs=Hn(rs,t,r,n,l,c),!0;case"mouseover":return ss=Hn(ss,t,r,n,l,c),!0;case"pointerover":var x=c.pointerId;return ua.set(x,Hn(ua.get(x)||null,t,r,n,l,c)),!0;case"gotpointercapture":return x=c.pointerId,ha.set(x,Hn(ha.get(x)||null,t,r,n,l,c)),!0}return!1}function ah(t){var r=js(t.target);if(r!==null){var n=Ls(r);if(n!==null){if(r=n.tag,r===13){if(r=G0(n),r!==null){t.blockedOn=r,nh(t.priority,function(){rh(n)});return}}else if(r===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cl(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var n=ci(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var l=new n.constructor(n.type,n);si=l,n.target.dispatchEvent(l),si=null}else return r=Ta(n),r!==null&&Ji(r),t.blockedOn=n,!1;r.shift()}return!0}function gu(t,r,n){cl(t)&&n.delete(r)}function Lg(){ii=!1,ts!==null&&cl(ts)&&(ts=null),rs!==null&&cl(rs)&&(rs=null),ss!==null&&cl(ss)&&(ss=null),ua.forEach(gu),ha.forEach(gu)}function _n(t,r){t.blockedOn===r&&(t.blockedOn=null,ii||(ii=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,Lg)))}function pa(t){function r(c){return _n(c,t)}if(0<qa.length){_n(qa[0],t);for(var n=1;n<qa.length;n++){var l=qa[n];l.blockedOn===t&&(l.blockedOn=null)}}for(ts!==null&&_n(ts,t),rs!==null&&_n(rs,t),ss!==null&&_n(ss,t),ua.forEach(r),ha.forEach(r),n=0;n<Zr.length;n++)l=Zr[n],l.blockedOn===t&&(l.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)ah(n),n.blockedOn===null&&Zr.shift()}var xn=Wr.ReactCurrentBatchConfig,Pl=!0;function Eg(t,r,n,l){var c=qe,x=xn.transition;xn.transition=null;try{qe=1,Zi(t,r,n,l)}finally{qe=c,xn.transition=x}}function Ig(t,r,n,l){var c=qe,x=xn.transition;xn.transition=null;try{qe=4,Zi(t,r,n,l)}finally{qe=c,xn.transition=x}}function Zi(t,r,n,l){if(Pl){var c=ci(t,r,n,l);if(c===null)wo(t,r,l,Cl,n),pu(t,l);else if(Tg(c,t,r,n,l))l.stopPropagation();else if(pu(t,l),r&4&&-1<Dg.indexOf(t)){for(;c!==null;){var x=Ta(c);if(x!==null&&th(x),x=ci(t,r,n,l),x===null&&wo(t,r,l,Cl,n),x===c)break;c=x}c!==null&&l.stopPropagation()}else wo(t,r,l,null,n)}}var Cl=null;function ci(t,r,n,l){if(Cl=null,t=Gi(l),t=js(t),t!==null)if(r=Ls(t),r===null)t=null;else if(n=r.tag,n===13){if(t=G0(r),t!==null)return t;t=null}else if(n===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Cl=t,null}function lh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jg()){case Qi:return 1;case Z0:return 4;case vl:case Ng:return 16;case X0:return 536870912;default:return 16}default:return 16}}var Br=null,Xi=null,dl=null;function oh(){if(dl)return dl;var t,r=Xi,n=r.length,l,c="value"in Br?Br.value:Br.textContent,x=c.length;for(t=0;t<n&&r[t]===c[t];t++);var f=n-t;for(l=1;l<=f&&r[n-l]===c[x-l];l++);return dl=c.slice(t,1<l?1-l:void 0)}function xl(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Wa(){return!0}function yu(){return!1}function rr(t){function r(n,l,c,x,f){this._reactName=n,this._targetInst=c,this.type=l,this.nativeEvent=x,this.target=f,this.currentTarget=null;for(var v in t)t.hasOwnProperty(v)&&(n=t[v],this[v]=n?n(x):x[v]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Wa:yu,this.isPropagationStopped=yu,this}return ot(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),r}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=rr(vn),Da=ot({},vn,{view:0,detail:0}),Sg=rr(Da),ho,po,Yn,ql=ot({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ec,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yn&&(Yn&&t.type==="mousemove"?(ho=t.screenX-Yn.screenX,po=t.screenY-Yn.screenY):po=ho=0,Yn=t),ho)},movementY:function(t){return"movementY"in t?t.movementY:po}}),fu=rr(ql),Rg=ot({},ql,{dataTransfer:0}),$g=rr(Rg),Mg=ot({},Da,{relatedTarget:0}),go=rr(Mg),Ug=ot({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Og=rr(Ug),zg=ot({},vn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vg=rr(zg),Hg=ot({},vn,{data:0}),bu=rr(Hg),_g={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wg(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=qg[t])?!!r[t]:!1}function ec(){return Wg}var Gg=ot({},Da,{key:function(t){if(t.key){var r=_g[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=xl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ec,charCode:function(t){return t.type==="keypress"?xl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qg=rr(Gg),Kg=ot({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=rr(Kg),Jg=ot({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ec}),Zg=rr(Jg),Xg=ot({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bg=rr(Xg),ey=ot({},ql,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ty=rr(ey),ry=[9,13,27,32],tc=Hr&&"CompositionEvent"in window,sa=null;Hr&&"documentMode"in document&&(sa=document.documentMode);var sy=Hr&&"TextEvent"in window&&!sa,ih=Hr&&(!tc||sa&&8<sa&&11>=sa),Nu=" ",vu=!1;function ch(t,r){switch(t){case"keyup":return ry.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zs=!1;function ny(t,r){switch(t){case"compositionend":return dh(r);case"keypress":return r.which!==32?null:(vu=!0,Nu);case"textInput":return t=r.data,t===Nu&&vu?null:t;default:return null}}function ay(t,r){if(Zs)return t==="compositionend"||!tc&&ch(t,r)?(t=oh(),dl=Xi=Br=null,Zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ih&&r.locale!=="ko"?null:r.data;default:return null}}var ly={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ly[t.type]:r==="textarea"}function xh(t,r,n,l){H0(l),r=Fl(r,"onChange"),0<r.length&&(n=new Bi("onChange","change",null,n,l),t.push({event:n,listeners:r}))}var na=null,ga=null;function oy(t){vh(t,0)}function Wl(t){var r=en(t);if(R0(r))return t}function iy(t,r){if(t==="change")return r}var mh=!1;if(Hr){var yo;if(Hr){var fo="oninput"in document;if(!fo){var Pu=document.createElement("div");Pu.setAttribute("oninput","return;"),fo=typeof Pu.oninput=="function"}yo=fo}else yo=!1;mh=yo&&(!document.documentMode||9<document.documentMode)}function Cu(){na&&(na.detachEvent("onpropertychange",uh),ga=na=null)}function uh(t){if(t.propertyName==="value"&&Wl(ga)){var r=[];xh(r,ga,t,Gi(t)),W0(oy,r)}}function cy(t,r,n){t==="focusin"?(Cu(),na=r,ga=n,na.attachEvent("onpropertychange",uh)):t==="focusout"&&Cu()}function dy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wl(ga)}function xy(t,r){if(t==="click")return Wl(r)}function my(t,r){if(t==="input"||t==="change")return Wl(r)}function uy(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Pr=typeof Object.is=="function"?Object.is:uy;function ya(t,r){if(Pr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var n=Object.keys(t),l=Object.keys(r);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var c=n[l];if(!qo.call(r,c)||!Pr(t[c],r[c]))return!1}return!0}function Fu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Au(t,r){var n=Fu(t);t=0;for(var l;n;){if(n.nodeType===3){if(l=t+n.textContent.length,t<=r&&l>=r)return{node:n,offset:r-t};t=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fu(n)}}function hh(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?hh(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function ph(){for(var t=window,r=bl();r instanceof t.HTMLIFrameElement;){try{var n=typeof r.contentWindow.location.href=="string"}catch{n=!1}if(n)t=r.contentWindow;else break;r=bl(t.document)}return r}function rc(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function hy(t){var r=ph(),n=t.focusedElem,l=t.selectionRange;if(r!==n&&n&&n.ownerDocument&&hh(n.ownerDocument.documentElement,n)){if(l!==null&&rc(n)){if(r=l.start,t=l.end,t===void 0&&(t=r),"selectionStart"in n)n.selectionStart=r,n.selectionEnd=Math.min(t,n.value.length);else if(t=(r=n.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var c=n.textContent.length,x=Math.min(l.start,c);l=l.end===void 0?x:Math.min(l.end,c),!t.extend&&x>l&&(c=l,l=x,x=c),c=Au(n,x);var f=Au(n,l);c&&f&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(r=r.createRange(),r.setStart(c.node,c.offset),t.removeAllRanges(),x>l?(t.addRange(r),t.extend(f.node,f.offset)):(r.setEnd(f.node,f.offset),t.addRange(r)))}}for(r=[],t=n;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<r.length;n++)t=r[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var py=Hr&&"documentMode"in document&&11>=document.documentMode,Xs=null,di=null,aa=null,xi=!1;function ku(t,r,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xi||Xs==null||Xs!==bl(l)||(l=Xs,"selectionStart"in l&&rc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),aa&&ya(aa,l)||(aa=l,l=Fl(di,"onSelect"),0<l.length&&(r=new Bi("onSelect","select",null,r,n),t.push({event:r,listeners:l}),r.target=Xs)))}function Ga(t,r){var n={};return n[t.toLowerCase()]=r.toLowerCase(),n["Webkit"+t]="webkit"+r,n["Moz"+t]="moz"+r,n}var Bs={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},bo={},gh={};Hr&&(gh=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Gl(t){if(bo[t])return bo[t];if(!Bs[t])return t;var r=Bs[t],n;for(n in r)if(r.hasOwnProperty(n)&&n in gh)return bo[t]=r[n];return t}var yh=Gl("animationend"),fh=Gl("animationiteration"),bh=Gl("animationstart"),jh=Gl("transitionend"),Nh=new Map,Du="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,r){Nh.set(t,r),Ts(r,[t])}for(var jo=0;jo<Du.length;jo++){var No=Du[jo],gy=No.toLowerCase(),yy=No[0].toUpperCase()+No.slice(1);xs(gy,"on"+yy)}xs(yh,"onAnimationEnd");xs(fh,"onAnimationIteration");xs(bh,"onAnimationStart");xs("dblclick","onDoubleClick");xs("focusin","onFocus");xs("focusout","onBlur");xs(jh,"onTransitionEnd");hn("onMouseEnter",["mouseout","mouseover"]);hn("onMouseLeave",["mouseout","mouseover"]);hn("onPointerEnter",["pointerout","pointerover"]);hn("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function Tu(t,r,n){var l=t.type||"unknown-event";t.currentTarget=n,gg(l,r,void 0,t),t.currentTarget=null}function vh(t,r){r=(r&4)!==0;for(var n=0;n<t.length;n++){var l=t[n],c=l.event;l=l.listeners;e:{var x=void 0;if(r)for(var f=l.length-1;0<=f;f--){var v=l[f],P=v.instance,$=v.currentTarget;if(v=v.listener,P!==x&&c.isPropagationStopped())break e;Tu(c,v,$),x=P}else for(f=0;f<l.length;f++){if(v=l[f],P=v.instance,$=v.currentTarget,v=v.listener,P!==x&&c.isPropagationStopped())break e;Tu(c,v,$),x=P}}}if(Nl)throw t=li,Nl=!1,li=null,t}function et(t,r){var n=r[gi];n===void 0&&(n=r[gi]=new Set);var l=t+"__bubble";n.has(l)||(wh(r,t,2,!1),n.add(l))}function vo(t,r,n){var l=0;r&&(l|=4),wh(n,t,l,r)}var Qa="_reactListening"+Math.random().toString(36).slice(2);function fa(t){if(!t[Qa]){t[Qa]=!0,T0.forEach(function(n){n!=="selectionchange"&&(fy.has(n)||vo(n,!1,t),vo(n,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Qa]||(r[Qa]=!0,vo("selectionchange",!1,r))}}function wh(t,r,n,l){switch(lh(r)){case 1:var c=Eg;break;case 4:c=Ig;break;default:c=Zi}n=c.bind(null,r,n,t),c=void 0,!ai||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(r,n,{capture:!0,passive:c}):t.addEventListener(r,n,!0):c!==void 0?t.addEventListener(r,n,{passive:c}):t.addEventListener(r,n,!1)}function wo(t,r,n,l,c){var x=l;if(!(r&1)&&!(r&2)&&l!==null)e:for(;;){if(l===null)return;var f=l.tag;if(f===3||f===4){var v=l.stateNode.containerInfo;if(v===c||v.nodeType===8&&v.parentNode===c)break;if(f===4)for(f=l.return;f!==null;){var P=f.tag;if((P===3||P===4)&&(P=f.stateNode.containerInfo,P===c||P.nodeType===8&&P.parentNode===c))return;f=f.return}for(;v!==null;){if(f=js(v),f===null)return;if(P=f.tag,P===5||P===6){l=x=f;continue e}v=v.parentNode}}l=l.return}W0(function(){var $=x,te=Gi(n),ee=[];e:{var Z=Nh.get(t);if(Z!==void 0){var le=Bi,ae=t;switch(t){case"keypress":if(xl(n)===0)break e;case"keydown":case"keyup":le=Qg;break;case"focusin":ae="focus",le=go;break;case"focusout":ae="blur",le=go;break;case"beforeblur":case"afterblur":le=go;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=$g;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Zg;break;case yh:case fh:case bh:le=Og;break;case jh:le=Bg;break;case"scroll":le=Sg;break;case"wheel":le=ty;break;case"copy":case"cut":case"paste":le=Vg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ju}var oe=(r&4)!==0,De=!oe&&t==="scroll",V=oe?Z!==null?Z+"Capture":null:Z;oe=[];for(var D=$,H;D!==null;){H=D;var se=H.stateNode;if(H.tag===5&&se!==null&&(H=se,V!==null&&(se=ma(D,V),se!=null&&oe.push(ba(D,se,H)))),De)break;D=D.return}0<oe.length&&(Z=new le(Z,ae,null,n,te),ee.push({event:Z,listeners:oe}))}}if(!(r&7)){e:{if(Z=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",Z&&n!==si&&(ae=n.relatedTarget||n.fromElement)&&(js(ae)||ae[_r]))break e;if((le||Z)&&(Z=te.window===te?te:(Z=te.ownerDocument)?Z.defaultView||Z.parentWindow:window,le?(ae=n.relatedTarget||n.toElement,le=$,ae=ae?js(ae):null,ae!==null&&(De=Ls(ae),ae!==De||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(le=null,ae=$),le!==ae)){if(oe=fu,se="onMouseLeave",V="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(oe=ju,se="onPointerLeave",V="onPointerEnter",D="pointer"),De=le==null?Z:en(le),H=ae==null?Z:en(ae),Z=new oe(se,D+"leave",le,n,te),Z.target=De,Z.relatedTarget=H,se=null,js(te)===$&&(oe=new oe(V,D+"enter",ae,n,te),oe.target=H,oe.relatedTarget=De,se=oe),De=se,le&&ae)t:{for(oe=le,V=ae,D=0,H=oe;H;H=Ws(H))D++;for(H=0,se=V;se;se=Ws(se))H++;for(;0<D-H;)oe=Ws(oe),D--;for(;0<H-D;)V=Ws(V),H--;for(;D--;){if(oe===V||V!==null&&oe===V.alternate)break t;oe=Ws(oe),V=Ws(V)}oe=null}else oe=null;le!==null&&Lu(ee,Z,le,oe,!1),ae!==null&&De!==null&&Lu(ee,De,ae,oe,!0)}}e:{if(Z=$?en($):window,le=Z.nodeName&&Z.nodeName.toLowerCase(),le==="select"||le==="input"&&Z.type==="file")var ue=iy;else if(wu(Z))if(mh)ue=my;else{ue=dy;var pe=cy}else(le=Z.nodeName)&&le.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ue=xy);if(ue&&(ue=ue(t,$))){xh(ee,ue,n,te);break e}pe&&pe(t,Z,$),t==="focusout"&&(pe=Z._wrapperState)&&pe.controlled&&Z.type==="number"&&Xo(Z,"number",Z.value)}switch(pe=$?en($):window,t){case"focusin":(wu(pe)||pe.contentEditable==="true")&&(Xs=pe,di=$,aa=null);break;case"focusout":aa=di=Xs=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,ku(ee,n,te);break;case"selectionchange":if(py)break;case"keydown":case"keyup":ku(ee,n,te)}var ge;if(tc)e:{switch(t){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Zs?ch(t,n)&&(ye="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(ye="onCompositionStart");ye&&(ih&&n.locale!=="ko"&&(Zs||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Zs&&(ge=oh()):(Br=te,Xi="value"in Br?Br.value:Br.textContent,Zs=!0)),pe=Fl($,ye),0<pe.length&&(ye=new bu(ye,t,null,n,te),ee.push({event:ye,listeners:pe}),ge?ye.data=ge:(ge=dh(n),ge!==null&&(ye.data=ge)))),(ge=sy?ny(t,n):ay(t,n))&&($=Fl($,"onBeforeInput"),0<$.length&&(te=new bu("onBeforeInput","beforeinput",null,n,te),ee.push({event:te,listeners:$}),te.data=ge))}vh(ee,r)})}function ba(t,r,n){return{instance:t,listener:r,currentTarget:n}}function Fl(t,r){for(var n=r+"Capture",l=[];t!==null;){var c=t,x=c.stateNode;c.tag===5&&x!==null&&(c=x,x=ma(t,n),x!=null&&l.unshift(ba(t,x,c)),x=ma(t,r),x!=null&&l.push(ba(t,x,c))),t=t.return}return l}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lu(t,r,n,l,c){for(var x=r._reactName,f=[];n!==null&&n!==l;){var v=n,P=v.alternate,$=v.stateNode;if(P!==null&&P===l)break;v.tag===5&&$!==null&&(v=$,c?(P=ma(n,x),P!=null&&f.unshift(ba(n,P,v))):c||(P=ma(n,x),P!=null&&f.push(ba(n,P,v)))),n=n.return}f.length!==0&&t.push({event:r,listeners:f})}var by=/\r\n?/g,jy=/\u0000|\uFFFD/g;function Eu(t){return(typeof t=="string"?t:""+t).replace(by,`
`).replace(jy,"")}function Ka(t,r,n){if(r=Eu(r),Eu(t)!==r&&n)throw Error(de(425))}function Al(){}var mi=null,ui=null;function hi(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var pi=typeof setTimeout=="function"?setTimeout:void 0,Ny=typeof clearTimeout=="function"?clearTimeout:void 0,Iu=typeof Promise=="function"?Promise:void 0,vy=typeof queueMicrotask=="function"?queueMicrotask:typeof Iu<"u"?function(t){return Iu.resolve(null).then(t).catch(wy)}:pi;function wy(t){setTimeout(function(){throw t})}function Po(t,r){var n=r,l=0;do{var c=n.nextSibling;if(t.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(l===0){t.removeChild(c),pa(r);return}l--}else n!=="$"&&n!=="$?"&&n!=="$!"||l++;n=c}while(n);pa(r)}function ns(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Su(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(r===0)return t;r--}else n==="/$"&&r++}t=t.previousSibling}return null}var wn=Math.random().toString(36).slice(2),Dr="__reactFiber$"+wn,ja="__reactProps$"+wn,_r="__reactContainer$"+wn,gi="__reactEvents$"+wn,Py="__reactListeners$"+wn,Cy="__reactHandles$"+wn;function js(t){var r=t[Dr];if(r)return r;for(var n=t.parentNode;n;){if(r=n[_r]||n[Dr]){if(n=r.alternate,r.child!==null||n!==null&&n.child!==null)for(t=Su(t);t!==null;){if(n=t[Dr])return n;t=Su(t)}return r}t=n,n=t.parentNode}return null}function Ta(t){return t=t[Dr]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function en(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function Ql(t){return t[ja]||null}var yi=[],tn=-1;function ms(t){return{current:t}}function tt(t){0>tn||(t.current=yi[tn],yi[tn]=null,tn--)}function Ke(t,r){tn++,yi[tn]=t.current,t.current=r}var ds={},Rt=ms(ds),Gt=ms(!1),Cs=ds;function pn(t,r){var n=t.type.contextTypes;if(!n)return ds;var l=t.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===r)return l.__reactInternalMemoizedMaskedChildContext;var c={},x;for(x in n)c[x]=r[x];return l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=c),c}function Qt(t){return t=t.childContextTypes,t!=null}function kl(){tt(Gt),tt(Rt)}function Ru(t,r,n){if(Rt.current!==ds)throw Error(de(168));Ke(Rt,r),Ke(Gt,n)}function Ph(t,r,n){var l=t.stateNode;if(r=r.childContextTypes,typeof l.getChildContext!="function")return n;l=l.getChildContext();for(var c in l)if(!(c in r))throw Error(de(108,cg(t)||"Unknown",c));return ot({},n,l)}function Dl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,Cs=Rt.current,Ke(Rt,t),Ke(Gt,Gt.current),!0}function $u(t,r,n){var l=t.stateNode;if(!l)throw Error(de(169));n?(t=Ph(t,r,Cs),l.__reactInternalMemoizedMergedChildContext=t,tt(Gt),tt(Rt),Ke(Rt,t)):tt(Gt),Ke(Gt,n)}var Ur=null,Kl=!1,Co=!1;function Ch(t){Ur===null?Ur=[t]:Ur.push(t)}function Fy(t){Kl=!0,Ch(t)}function us(){if(!Co&&Ur!==null){Co=!0;var t=0,r=qe;try{var n=Ur;for(qe=1;t<n.length;t++){var l=n[t];do l=l(!0);while(l!==null)}Ur=null,Kl=!1}catch(c){throw Ur!==null&&(Ur=Ur.slice(t+1)),J0(Qi,us),c}finally{qe=r,Co=!1}}return null}var rn=[],sn=0,Tl=null,Ll=0,ir=[],cr=0,Fs=null,Or=1,zr="";function fs(t,r){rn[sn++]=Ll,rn[sn++]=Tl,Tl=t,Ll=r}function Fh(t,r,n){ir[cr++]=Or,ir[cr++]=zr,ir[cr++]=Fs,Fs=t;var l=Or;t=zr;var c=32-vr(l)-1;l&=~(1<<c),n+=1;var x=32-vr(r)+c;if(30<x){var f=c-c%5;x=(l&(1<<f)-1).toString(32),l>>=f,c-=f,Or=1<<32-vr(r)+c|n<<c|l,zr=x+t}else Or=1<<x|n<<c|l,zr=t}function sc(t){t.return!==null&&(fs(t,1),Fh(t,1,0))}function nc(t){for(;t===Tl;)Tl=rn[--sn],rn[sn]=null,Ll=rn[--sn],rn[sn]=null;for(;t===Fs;)Fs=ir[--cr],ir[cr]=null,zr=ir[--cr],ir[cr]=null,Or=ir[--cr],ir[cr]=null}var Bt=null,Xt=null,rt=!1,Nr=null;function Ah(t,r){var n=dr(5,null,null,0);n.elementType="DELETED",n.stateNode=r,n.return=t,r=t.deletions,r===null?(t.deletions=[n],t.flags|=16):r.push(n)}function Mu(t,r){switch(t.tag){case 5:var n=t.type;return r=r.nodeType!==1||n.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Bt=t,Xt=ns(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Bt=t,Xt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(n=Fs!==null?{id:Or,overflow:zr}:null,t.memoizedState={dehydrated:r,treeContext:n,retryLane:1073741824},n=dr(18,null,null,0),n.stateNode=r,n.return=t,t.child=n,Bt=t,Xt=null,!0):!1;default:return!1}}function fi(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bi(t){if(rt){var r=Xt;if(r){var n=r;if(!Mu(t,r)){if(fi(t))throw Error(de(418));r=ns(n.nextSibling);var l=Bt;r&&Mu(t,r)?Ah(l,n):(t.flags=t.flags&-4097|2,rt=!1,Bt=t)}}else{if(fi(t))throw Error(de(418));t.flags=t.flags&-4097|2,rt=!1,Bt=t}}}function Uu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function Ja(t){if(t!==Bt)return!1;if(!rt)return Uu(t),rt=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!hi(t.type,t.memoizedProps)),r&&(r=Xt)){if(fi(t))throw kh(),Error(de(418));for(;r;)Ah(t,r),r=ns(r.nextSibling)}if(Uu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(r===0){Xt=ns(t.nextSibling);break e}r--}else n!=="$"&&n!=="$!"&&n!=="$?"||r++}t=t.nextSibling}Xt=null}}else Xt=Bt?ns(t.stateNode.nextSibling):null;return!0}function kh(){for(var t=Xt;t;)t=ns(t.nextSibling)}function gn(){Xt=Bt=null,rt=!1}function ac(t){Nr===null?Nr=[t]:Nr.push(t)}var Ay=Wr.ReactCurrentBatchConfig;function qn(t,r,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var l=n.stateNode}if(!l)throw Error(de(147,t));var c=l,x=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===x?r.ref:(r=function(f){var v=c.refs;f===null?delete v[x]:v[x]=f},r._stringRef=x,r)}if(typeof t!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,t))}return t}function Za(t,r){throw t=Object.prototype.toString.call(r),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Ou(t){var r=t._init;return r(t._payload)}function Dh(t){function r(V,D){if(t){var H=V.deletions;H===null?(V.deletions=[D],V.flags|=16):H.push(D)}}function n(V,D){if(!t)return null;for(;D!==null;)r(V,D),D=D.sibling;return null}function l(V,D){for(V=new Map;D!==null;)D.key!==null?V.set(D.key,D):V.set(D.index,D),D=D.sibling;return V}function c(V,D){return V=is(V,D),V.index=0,V.sibling=null,V}function x(V,D,H){return V.index=H,t?(H=V.alternate,H!==null?(H=H.index,H<D?(V.flags|=2,D):H):(V.flags|=2,D)):(V.flags|=1048576,D)}function f(V){return t&&V.alternate===null&&(V.flags|=2),V}function v(V,D,H,se){return D===null||D.tag!==6?(D=Eo(H,V.mode,se),D.return=V,D):(D=c(D,H),D.return=V,D)}function P(V,D,H,se){var ue=H.type;return ue===Js?te(V,D,H.props.children,se,H.key):D!==null&&(D.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Kr&&Ou(ue)===D.type)?(se=c(D,H.props),se.ref=qn(V,D,H),se.return=V,se):(se=fl(H.type,H.key,H.props,null,V.mode,se),se.ref=qn(V,D,H),se.return=V,se)}function $(V,D,H,se){return D===null||D.tag!==4||D.stateNode.containerInfo!==H.containerInfo||D.stateNode.implementation!==H.implementation?(D=Io(H,V.mode,se),D.return=V,D):(D=c(D,H.children||[]),D.return=V,D)}function te(V,D,H,se,ue){return D===null||D.tag!==7?(D=Ps(H,V.mode,se,ue),D.return=V,D):(D=c(D,H),D.return=V,D)}function ee(V,D,H){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Eo(""+D,V.mode,H),D.return=V,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case za:return H=fl(D.type,D.key,D.props,null,V.mode,H),H.ref=qn(V,null,D),H.return=V,H;case Ks:return D=Io(D,V.mode,H),D.return=V,D;case Kr:var se=D._init;return ee(V,se(D._payload),H)}if(Xn(D)||zn(D))return D=Ps(D,V.mode,H,null),D.return=V,D;Za(V,D)}return null}function Z(V,D,H,se){var ue=D!==null?D.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return ue!==null?null:v(V,D,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case za:return H.key===ue?P(V,D,H,se):null;case Ks:return H.key===ue?$(V,D,H,se):null;case Kr:return ue=H._init,Z(V,D,ue(H._payload),se)}if(Xn(H)||zn(H))return ue!==null?null:te(V,D,H,se,null);Za(V,H)}return null}function le(V,D,H,se,ue){if(typeof se=="string"&&se!==""||typeof se=="number")return V=V.get(H)||null,v(D,V,""+se,ue);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case za:return V=V.get(se.key===null?H:se.key)||null,P(D,V,se,ue);case Ks:return V=V.get(se.key===null?H:se.key)||null,$(D,V,se,ue);case Kr:var pe=se._init;return le(V,D,H,pe(se._payload),ue)}if(Xn(se)||zn(se))return V=V.get(H)||null,te(D,V,se,ue,null);Za(D,se)}return null}function ae(V,D,H,se){for(var ue=null,pe=null,ge=D,ye=D=0,He=null;ge!==null&&ye<H.length;ye++){ge.index>ye?(He=ge,ge=null):He=ge.sibling;var Ie=Z(V,ge,H[ye],se);if(Ie===null){ge===null&&(ge=He);break}t&&ge&&Ie.alternate===null&&r(V,ge),D=x(Ie,D,ye),pe===null?ue=Ie:pe.sibling=Ie,pe=Ie,ge=He}if(ye===H.length)return n(V,ge),rt&&fs(V,ye),ue;if(ge===null){for(;ye<H.length;ye++)ge=ee(V,H[ye],se),ge!==null&&(D=x(ge,D,ye),pe===null?ue=ge:pe.sibling=ge,pe=ge);return rt&&fs(V,ye),ue}for(ge=l(V,ge);ye<H.length;ye++)He=le(ge,V,ye,H[ye],se),He!==null&&(t&&He.alternate!==null&&ge.delete(He.key===null?ye:He.key),D=x(He,D,ye),pe===null?ue=He:pe.sibling=He,pe=He);return t&&ge.forEach(function(jt){return r(V,jt)}),rt&&fs(V,ye),ue}function oe(V,D,H,se){var ue=zn(H);if(typeof ue!="function")throw Error(de(150));if(H=ue.call(H),H==null)throw Error(de(151));for(var pe=ue=null,ge=D,ye=D=0,He=null,Ie=H.next();ge!==null&&!Ie.done;ye++,Ie=H.next()){ge.index>ye?(He=ge,ge=null):He=ge.sibling;var jt=Z(V,ge,Ie.value,se);if(jt===null){ge===null&&(ge=He);break}t&&ge&&jt.alternate===null&&r(V,ge),D=x(jt,D,ye),pe===null?ue=jt:pe.sibling=jt,pe=jt,ge=He}if(Ie.done)return n(V,ge),rt&&fs(V,ye),ue;if(ge===null){for(;!Ie.done;ye++,Ie=H.next())Ie=ee(V,Ie.value,se),Ie!==null&&(D=x(Ie,D,ye),pe===null?ue=Ie:pe.sibling=Ie,pe=Ie);return rt&&fs(V,ye),ue}for(ge=l(V,ge);!Ie.done;ye++,Ie=H.next())Ie=le(ge,V,ye,Ie.value,se),Ie!==null&&(t&&Ie.alternate!==null&&ge.delete(Ie.key===null?ye:Ie.key),D=x(Ie,D,ye),pe===null?ue=Ie:pe.sibling=Ie,pe=Ie);return t&&ge.forEach(function($t){return r(V,$t)}),rt&&fs(V,ye),ue}function De(V,D,H,se){if(typeof H=="object"&&H!==null&&H.type===Js&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case za:e:{for(var ue=H.key,pe=D;pe!==null;){if(pe.key===ue){if(ue=H.type,ue===Js){if(pe.tag===7){n(V,pe.sibling),D=c(pe,H.props.children),D.return=V,V=D;break e}}else if(pe.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Kr&&Ou(ue)===pe.type){n(V,pe.sibling),D=c(pe,H.props),D.ref=qn(V,pe,H),D.return=V,V=D;break e}n(V,pe);break}else r(V,pe);pe=pe.sibling}H.type===Js?(D=Ps(H.props.children,V.mode,se,H.key),D.return=V,V=D):(se=fl(H.type,H.key,H.props,null,V.mode,se),se.ref=qn(V,D,H),se.return=V,V=se)}return f(V);case Ks:e:{for(pe=H.key;D!==null;){if(D.key===pe)if(D.tag===4&&D.stateNode.containerInfo===H.containerInfo&&D.stateNode.implementation===H.implementation){n(V,D.sibling),D=c(D,H.children||[]),D.return=V,V=D;break e}else{n(V,D);break}else r(V,D);D=D.sibling}D=Io(H,V.mode,se),D.return=V,V=D}return f(V);case Kr:return pe=H._init,De(V,D,pe(H._payload),se)}if(Xn(H))return ae(V,D,H,se);if(zn(H))return oe(V,D,H,se);Za(V,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,D!==null&&D.tag===6?(n(V,D.sibling),D=c(D,H),D.return=V,V=D):(n(V,D),D=Eo(H,V.mode,se),D.return=V,V=D),f(V)):n(V,D)}return De}var yn=Dh(!0),Th=Dh(!1),El=ms(null),Il=null,nn=null,lc=null;function oc(){lc=nn=Il=null}function ic(t){var r=El.current;tt(El),t._currentValue=r}function ji(t,r,n){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===n)break;t=t.return}}function mn(t,r){Il=t,lc=nn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Wt=!0),t.firstContext=null)}function mr(t){var r=t._currentValue;if(lc!==t)if(t={context:t,memoizedValue:r,next:null},nn===null){if(Il===null)throw Error(de(308));nn=t,Il.dependencies={lanes:0,firstContext:t}}else nn=nn.next=t;return r}var Ns=null;function cc(t){Ns===null?Ns=[t]:Ns.push(t)}function Lh(t,r,n,l){var c=r.interleaved;return c===null?(n.next=n,cc(r)):(n.next=c.next,c.next=n),r.interleaved=n,Yr(t,l)}function Yr(t,r){t.lanes|=r;var n=t.alternate;for(n!==null&&(n.lanes|=r),n=t,t=t.return;t!==null;)t.childLanes|=r,n=t.alternate,n!==null&&(n.childLanes|=r),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jr=!1;function dc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Eh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function as(t,r,n){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,Oe&2){var c=l.pending;return c===null?r.next=r:(r.next=c.next,c.next=r),l.pending=r,Yr(t,n)}return c=l.interleaved,c===null?(r.next=r,cc(l)):(r.next=c.next,c.next=r),l.interleaved=r,Yr(t,n)}function ml(t,r,n){if(r=r.updateQueue,r!==null&&(r=r.shared,(n&4194240)!==0)){var l=r.lanes;l&=t.pendingLanes,n|=l,r.lanes=n,Ki(t,n)}}function zu(t,r){var n=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var c=null,x=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};x===null?c=x=f:x=x.next=f,n=n.next}while(n!==null);x===null?c=x=r:x=x.next=r}else c=x=r;n={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:x,shared:l.shared,effects:l.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=r:t.next=r,n.lastBaseUpdate=r}function Sl(t,r,n,l){var c=t.updateQueue;Jr=!1;var x=c.firstBaseUpdate,f=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var P=v,$=P.next;P.next=null,f===null?x=$:f.next=$,f=P;var te=t.alternate;te!==null&&(te=te.updateQueue,v=te.lastBaseUpdate,v!==f&&(v===null?te.firstBaseUpdate=$:v.next=$,te.lastBaseUpdate=P))}if(x!==null){var ee=c.baseState;f=0,te=$=P=null,v=x;do{var Z=v.lane,le=v.eventTime;if((l&Z)===Z){te!==null&&(te=te.next={eventTime:le,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var ae=t,oe=v;switch(Z=r,le=n,oe.tag){case 1:if(ae=oe.payload,typeof ae=="function"){ee=ae.call(le,ee,Z);break e}ee=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=oe.payload,Z=typeof ae=="function"?ae.call(le,ee,Z):ae,Z==null)break e;ee=ot({},ee,Z);break e;case 2:Jr=!0}}v.callback!==null&&v.lane!==0&&(t.flags|=64,Z=c.effects,Z===null?c.effects=[v]:Z.push(v))}else le={eventTime:le,lane:Z,tag:v.tag,payload:v.payload,callback:v.callback,next:null},te===null?($=te=le,P=ee):te=te.next=le,f|=Z;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;Z=v,v=Z.next,Z.next=null,c.lastBaseUpdate=Z,c.shared.pending=null}}while(!0);if(te===null&&(P=ee),c.baseState=P,c.firstBaseUpdate=$,c.lastBaseUpdate=te,r=c.shared.interleaved,r!==null){c=r;do f|=c.lane,c=c.next;while(c!==r)}else x===null&&(c.shared.lanes=0);ks|=f,t.lanes=f,t.memoizedState=ee}}function Vu(t,r,n){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var l=t[r],c=l.callback;if(c!==null){if(l.callback=null,l=n,typeof c!="function")throw Error(de(191,c));c.call(l)}}}var La={},Lr=ms(La),Na=ms(La),va=ms(La);function vs(t){if(t===La)throw Error(de(174));return t}function xc(t,r){switch(Ke(va,r),Ke(Na,t),Ke(Lr,La),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ei(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ei(r,t)}tt(Lr),Ke(Lr,r)}function fn(){tt(Lr),tt(Na),tt(va)}function Ih(t){vs(va.current);var r=vs(Lr.current),n=ei(r,t.type);r!==n&&(Ke(Na,t),Ke(Lr,n))}function mc(t){Na.current===t&&(tt(Lr),tt(Na))}var at=ms(0);function Rl(t){for(var r=t;r!==null;){if(r.tag===13){var n=r.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Fo=[];function uc(){for(var t=0;t<Fo.length;t++)Fo[t]._workInProgressVersionPrimary=null;Fo.length=0}var ul=Wr.ReactCurrentDispatcher,Ao=Wr.ReactCurrentBatchConfig,As=0,lt=null,ft=null,Pt=null,$l=!1,la=!1,wa=0,ky=0;function Et(){throw Error(de(321))}function hc(t,r){if(r===null)return!1;for(var n=0;n<r.length&&n<t.length;n++)if(!Pr(t[n],r[n]))return!1;return!0}function pc(t,r,n,l,c,x){if(As=x,lt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ul.current=t===null||t.memoizedState===null?Ey:Iy,t=n(l,c),la){x=0;do{if(la=!1,wa=0,25<=x)throw Error(de(301));x+=1,Pt=ft=null,r.updateQueue=null,ul.current=Sy,t=n(l,c)}while(la)}if(ul.current=Ml,r=ft!==null&&ft.next!==null,As=0,Pt=ft=lt=null,$l=!1,r)throw Error(de(300));return t}function gc(){var t=wa!==0;return wa=0,t}function kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?lt.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function ur(){if(ft===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var r=Pt===null?lt.memoizedState:Pt.next;if(r!==null)Pt=r,ft=t;else{if(t===null)throw Error(de(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Pt===null?lt.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Pa(t,r){return typeof r=="function"?r(t):r}function ko(t){var r=ur(),n=r.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var l=ft,c=l.baseQueue,x=n.pending;if(x!==null){if(c!==null){var f=c.next;c.next=x.next,x.next=f}l.baseQueue=c=x,n.pending=null}if(c!==null){x=c.next,l=l.baseState;var v=f=null,P=null,$=x;do{var te=$.lane;if((As&te)===te)P!==null&&(P=P.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),l=$.hasEagerState?$.eagerState:t(l,$.action);else{var ee={lane:te,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};P===null?(v=P=ee,f=l):P=P.next=ee,lt.lanes|=te,ks|=te}$=$.next}while($!==null&&$!==x);P===null?f=l:P.next=v,Pr(l,r.memoizedState)||(Wt=!0),r.memoizedState=l,r.baseState=f,r.baseQueue=P,n.lastRenderedState=l}if(t=n.interleaved,t!==null){c=t;do x=c.lane,lt.lanes|=x,ks|=x,c=c.next;while(c!==t)}else c===null&&(n.lanes=0);return[r.memoizedState,n.dispatch]}function Do(t){var r=ur(),n=r.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var l=n.dispatch,c=n.pending,x=r.memoizedState;if(c!==null){n.pending=null;var f=c=c.next;do x=t(x,f.action),f=f.next;while(f!==c);Pr(x,r.memoizedState)||(Wt=!0),r.memoizedState=x,r.baseQueue===null&&(r.baseState=x),n.lastRenderedState=x}return[x,l]}function Sh(){}function Rh(t,r){var n=lt,l=ur(),c=r(),x=!Pr(l.memoizedState,c);if(x&&(l.memoizedState=c,Wt=!0),l=l.queue,yc(Uh.bind(null,n,l,t),[t]),l.getSnapshot!==r||x||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,Ca(9,Mh.bind(null,n,l,c,r),void 0,null),Ct===null)throw Error(de(349));As&30||$h(n,r,c)}return c}function $h(t,r,n){t.flags|=16384,t={getSnapshot:r,value:n},r=lt.updateQueue,r===null?(r={lastEffect:null,stores:null},lt.updateQueue=r,r.stores=[t]):(n=r.stores,n===null?r.stores=[t]:n.push(t))}function Mh(t,r,n,l){r.value=n,r.getSnapshot=l,Oh(r)&&zh(t)}function Uh(t,r,n){return n(function(){Oh(r)&&zh(t)})}function Oh(t){var r=t.getSnapshot;t=t.value;try{var n=r();return!Pr(t,n)}catch{return!0}}function zh(t){var r=Yr(t,1);r!==null&&wr(r,t,1,-1)}function Hu(t){var r=kr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:t},r.queue=t,t=t.dispatch=Ly.bind(null,lt,t),[r.memoizedState,t]}function Ca(t,r,n,l){return t={tag:t,create:r,destroy:n,deps:l,next:null},r=lt.updateQueue,r===null?(r={lastEffect:null,stores:null},lt.updateQueue=r,r.lastEffect=t.next=t):(n=r.lastEffect,n===null?r.lastEffect=t.next=t:(l=n.next,n.next=t,t.next=l,r.lastEffect=t)),t}function Vh(){return ur().memoizedState}function hl(t,r,n,l){var c=kr();lt.flags|=t,c.memoizedState=Ca(1|r,n,void 0,l===void 0?null:l)}function Jl(t,r,n,l){var c=ur();l=l===void 0?null:l;var x=void 0;if(ft!==null){var f=ft.memoizedState;if(x=f.destroy,l!==null&&hc(l,f.deps)){c.memoizedState=Ca(r,n,x,l);return}}lt.flags|=t,c.memoizedState=Ca(1|r,n,x,l)}function _u(t,r){return hl(8390656,8,t,r)}function yc(t,r){return Jl(2048,8,t,r)}function Hh(t,r){return Jl(4,2,t,r)}function _h(t,r){return Jl(4,4,t,r)}function Yh(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function qh(t,r,n){return n=n!=null?n.concat([t]):null,Jl(4,4,Yh.bind(null,r,t),n)}function fc(){}function Wh(t,r){var n=ur();r=r===void 0?null:r;var l=n.memoizedState;return l!==null&&r!==null&&hc(r,l[1])?l[0]:(n.memoizedState=[t,r],t)}function Gh(t,r){var n=ur();r=r===void 0?null:r;var l=n.memoizedState;return l!==null&&r!==null&&hc(r,l[1])?l[0]:(t=t(),n.memoizedState=[t,r],t)}function Qh(t,r,n){return As&21?(Pr(n,r)||(n=B0(),lt.lanes|=n,ks|=n,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function Dy(t,r){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var l=Ao.transition;Ao.transition={};try{t(!1),r()}finally{qe=n,Ao.transition=l}}function Kh(){return ur().memoizedState}function Ty(t,r,n){var l=os(t);if(n={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null},Jh(t))Zh(r,n);else if(n=Lh(t,r,n,l),n!==null){var c=zt();wr(n,t,l,c),Xh(n,r,l)}}function Ly(t,r,n){var l=os(t),c={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jh(t))Zh(r,c);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var f=r.lastRenderedState,v=x(f,n);if(c.hasEagerState=!0,c.eagerState=v,Pr(v,f)){var P=r.interleaved;P===null?(c.next=c,cc(r)):(c.next=P.next,P.next=c),r.interleaved=c;return}}catch{}finally{}n=Lh(t,r,c,l),n!==null&&(c=zt(),wr(n,t,l,c),Xh(n,r,l))}}function Jh(t){var r=t.alternate;return t===lt||r!==null&&r===lt}function Zh(t,r){la=$l=!0;var n=t.pending;n===null?r.next=r:(r.next=n.next,n.next=r),t.pending=r}function Xh(t,r,n){if(n&4194240){var l=r.lanes;l&=t.pendingLanes,n|=l,r.lanes=n,Ki(t,n)}}var Ml={readContext:mr,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},Ey={readContext:mr,useCallback:function(t,r){return kr().memoizedState=[t,r===void 0?null:r],t},useContext:mr,useEffect:_u,useImperativeHandle:function(t,r,n){return n=n!=null?n.concat([t]):null,hl(4194308,4,Yh.bind(null,r,t),n)},useLayoutEffect:function(t,r){return hl(4194308,4,t,r)},useInsertionEffect:function(t,r){return hl(4,2,t,r)},useMemo:function(t,r){var n=kr();return r=r===void 0?null:r,t=t(),n.memoizedState=[t,r],t},useReducer:function(t,r,n){var l=kr();return r=n!==void 0?n(r):r,l.memoizedState=l.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},l.queue=t,t=t.dispatch=Ty.bind(null,lt,t),[l.memoizedState,t]},useRef:function(t){var r=kr();return t={current:t},r.memoizedState=t},useState:Hu,useDebugValue:fc,useDeferredValue:function(t){return kr().memoizedState=t},useTransition:function(){var t=Hu(!1),r=t[0];return t=Dy.bind(null,t[1]),kr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,n){var l=lt,c=kr();if(rt){if(n===void 0)throw Error(de(407));n=n()}else{if(n=r(),Ct===null)throw Error(de(349));As&30||$h(l,r,n)}c.memoizedState=n;var x={value:n,getSnapshot:r};return c.queue=x,_u(Uh.bind(null,l,x,t),[t]),l.flags|=2048,Ca(9,Mh.bind(null,l,x,n,r),void 0,null),n},useId:function(){var t=kr(),r=Ct.identifierPrefix;if(rt){var n=zr,l=Or;n=(l&~(1<<32-vr(l)-1)).toString(32)+n,r=":"+r+"R"+n,n=wa++,0<n&&(r+="H"+n.toString(32)),r+=":"}else n=ky++,r=":"+r+"r"+n.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Iy={readContext:mr,useCallback:Wh,useContext:mr,useEffect:yc,useImperativeHandle:qh,useInsertionEffect:Hh,useLayoutEffect:_h,useMemo:Gh,useReducer:ko,useRef:Vh,useState:function(){return ko(Pa)},useDebugValue:fc,useDeferredValue:function(t){var r=ur();return Qh(r,ft.memoizedState,t)},useTransition:function(){var t=ko(Pa)[0],r=ur().memoizedState;return[t,r]},useMutableSource:Sh,useSyncExternalStore:Rh,useId:Kh,unstable_isNewReconciler:!1},Sy={readContext:mr,useCallback:Wh,useContext:mr,useEffect:yc,useImperativeHandle:qh,useInsertionEffect:Hh,useLayoutEffect:_h,useMemo:Gh,useReducer:Do,useRef:Vh,useState:function(){return Do(Pa)},useDebugValue:fc,useDeferredValue:function(t){var r=ur();return ft===null?r.memoizedState=t:Qh(r,ft.memoizedState,t)},useTransition:function(){var t=Do(Pa)[0],r=ur().memoizedState;return[t,r]},useMutableSource:Sh,useSyncExternalStore:Rh,useId:Kh,unstable_isNewReconciler:!1};function br(t,r){if(t&&t.defaultProps){r=ot({},r),t=t.defaultProps;for(var n in t)r[n]===void 0&&(r[n]=t[n]);return r}return r}function Ni(t,r,n,l){r=t.memoizedState,n=n(l,r),n=n==null?r:ot({},r,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zl={isMounted:function(t){return(t=t._reactInternals)?Ls(t)===t:!1},enqueueSetState:function(t,r,n){t=t._reactInternals;var l=zt(),c=os(t),x=Vr(l,c);x.payload=r,n!=null&&(x.callback=n),r=as(t,x,c),r!==null&&(wr(r,t,c,l),ml(r,t,c))},enqueueReplaceState:function(t,r,n){t=t._reactInternals;var l=zt(),c=os(t),x=Vr(l,c);x.tag=1,x.payload=r,n!=null&&(x.callback=n),r=as(t,x,c),r!==null&&(wr(r,t,c,l),ml(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var n=zt(),l=os(t),c=Vr(n,l);c.tag=2,r!=null&&(c.callback=r),r=as(t,c,l),r!==null&&(wr(r,t,l,n),ml(r,t,l))}};function Yu(t,r,n,l,c,x,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,x,f):r.prototype&&r.prototype.isPureReactComponent?!ya(n,l)||!ya(c,x):!0}function Bh(t,r,n){var l=!1,c=ds,x=r.contextType;return typeof x=="object"&&x!==null?x=mr(x):(c=Qt(r)?Cs:Rt.current,l=r.contextTypes,x=(l=l!=null)?pn(t,c):ds),r=new r(n,x),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Zl,t.stateNode=r,r._reactInternals=t,l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=x),r}function qu(t,r,n,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(n,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(n,l),r.state!==t&&Zl.enqueueReplaceState(r,r.state,null)}function vi(t,r,n,l){var c=t.stateNode;c.props=n,c.state=t.memoizedState,c.refs={},dc(t);var x=r.contextType;typeof x=="object"&&x!==null?c.context=mr(x):(x=Qt(r)?Cs:Rt.current,c.context=pn(t,x)),c.state=t.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Ni(t,r,x,n),c.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(r=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),r!==c.state&&Zl.enqueueReplaceState(c,c.state,null),Sl(t,n,c,l),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function bn(t,r){try{var n="",l=r;do n+=ig(l),l=l.return;while(l);var c=n}catch(x){c=`
Error generating stack: `+x.message+`
`+x.stack}return{value:t,source:r,stack:c,digest:null}}function To(t,r,n){return{value:t,source:null,stack:n??null,digest:r??null}}function wi(t,r){try{console.error(r.value)}catch(n){setTimeout(function(){throw n})}}var Ry=typeof WeakMap=="function"?WeakMap:Map;function ep(t,r,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var l=r.value;return n.callback=function(){Ol||(Ol=!0,Ii=l),wi(t,r)},n}function tp(t,r,n){n=Vr(-1,n),n.tag=3;var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var c=r.value;n.payload=function(){return l(c)},n.callback=function(){wi(t,r)}}var x=t.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){wi(t,r),typeof l!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var f=r.stack;this.componentDidCatch(r.value,{componentStack:f!==null?f:""})}),n}function Wu(t,r,n){var l=t.pingCache;if(l===null){l=t.pingCache=new Ry;var c=new Set;l.set(r,c)}else c=l.get(r),c===void 0&&(c=new Set,l.set(r,c));c.has(n)||(c.add(n),t=Ky.bind(null,t,r,n),r.then(t,t))}function Gu(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Qu(t,r,n,l,c){return t.mode&1?(t.flags|=65536,t.lanes=c,t):(t===r?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(r=Vr(-1,1),r.tag=2,as(n,r,1))),n.lanes|=1),t)}var $y=Wr.ReactCurrentOwner,Wt=!1;function Ot(t,r,n,l){r.child=t===null?Th(r,null,n,l):yn(r,t.child,n,l)}function Ku(t,r,n,l,c){n=n.render;var x=r.ref;return mn(r,c),l=pc(t,r,n,l,x,c),n=gc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c,qr(t,r,c)):(rt&&n&&sc(r),r.flags|=1,Ot(t,r,l,c),r.child)}function Ju(t,r,n,l,c){if(t===null){var x=n.type;return typeof x=="function"&&!Fc(x)&&x.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(r.tag=15,r.type=x,rp(t,r,x,l,c)):(t=fl(n.type,null,l,r,r.mode,c),t.ref=r.ref,t.return=r,r.child=t)}if(x=t.child,!(t.lanes&c)){var f=x.memoizedProps;if(n=n.compare,n=n!==null?n:ya,n(f,l)&&t.ref===r.ref)return qr(t,r,c)}return r.flags|=1,t=is(x,l),t.ref=r.ref,t.return=r,r.child=t}function rp(t,r,n,l,c){if(t!==null){var x=t.memoizedProps;if(ya(x,l)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=l=x,(t.lanes&c)!==0)t.flags&131072&&(Wt=!0);else return r.lanes=t.lanes,qr(t,r,c)}return Pi(t,r,n,l,c)}function sp(t,r,n){var l=r.pendingProps,c=l.children,x=t!==null?t.memoizedState:null;if(l.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(ln,Zt),Zt|=n;else{if(!(n&1073741824))return t=x!==null?x.baseLanes|n:n,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ke(ln,Zt),Zt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=x!==null?x.baseLanes:n,Ke(ln,Zt),Zt|=l}else x!==null?(l=x.baseLanes|n,r.memoizedState=null):l=n,Ke(ln,Zt),Zt|=l;return Ot(t,r,c,n),r.child}function np(t,r){var n=r.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(r.flags|=512,r.flags|=2097152)}function Pi(t,r,n,l,c){var x=Qt(n)?Cs:Rt.current;return x=pn(r,x),mn(r,c),n=pc(t,r,n,l,x,c),l=gc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c,qr(t,r,c)):(rt&&l&&sc(r),r.flags|=1,Ot(t,r,n,c),r.child)}function Zu(t,r,n,l,c){if(Qt(n)){var x=!0;Dl(r)}else x=!1;if(mn(r,c),r.stateNode===null)pl(t,r),Bh(r,n,l),vi(r,n,l,c),l=!0;else if(t===null){var f=r.stateNode,v=r.memoizedProps;f.props=v;var P=f.context,$=n.contextType;typeof $=="object"&&$!==null?$=mr($):($=Qt(n)?Cs:Rt.current,$=pn(r,$));var te=n.getDerivedStateFromProps,ee=typeof te=="function"||typeof f.getSnapshotBeforeUpdate=="function";ee||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==l||P!==$)&&qu(r,f,l,$),Jr=!1;var Z=r.memoizedState;f.state=Z,Sl(r,l,f,c),P=r.memoizedState,v!==l||Z!==P||Gt.current||Jr?(typeof te=="function"&&(Ni(r,n,te,l),P=r.memoizedState),(v=Jr||Yu(r,n,v,l,Z,P,$))?(ee||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=P),f.props=l,f.state=P,f.context=$,l=v):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Eh(t,r),v=r.memoizedProps,$=r.type===r.elementType?v:br(r.type,v),f.props=$,ee=r.pendingProps,Z=f.context,P=n.contextType,typeof P=="object"&&P!==null?P=mr(P):(P=Qt(n)?Cs:Rt.current,P=pn(r,P));var le=n.getDerivedStateFromProps;(te=typeof le=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==ee||Z!==P)&&qu(r,f,l,P),Jr=!1,Z=r.memoizedState,f.state=Z,Sl(r,l,f,c);var ae=r.memoizedState;v!==ee||Z!==ae||Gt.current||Jr?(typeof le=="function"&&(Ni(r,n,le,l),ae=r.memoizedState),($=Jr||Yu(r,n,$,l,Z,ae,P)||!1)?(te||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,ae,P),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,ae,P)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&Z===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Z===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ae),f.props=l,f.state=ae,f.context=P,l=$):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&Z===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Z===t.memoizedState||(r.flags|=1024),l=!1)}return Ci(t,r,n,l,x,c)}function Ci(t,r,n,l,c,x){np(t,r);var f=(r.flags&128)!==0;if(!l&&!f)return c&&$u(r,n,!1),qr(t,r,x);l=r.stateNode,$y.current=r;var v=f&&typeof n.getDerivedStateFromError!="function"?null:l.render();return r.flags|=1,t!==null&&f?(r.child=yn(r,t.child,null,x),r.child=yn(r,null,v,x)):Ot(t,r,v,x),r.memoizedState=l.state,c&&$u(r,n,!0),r.child}function ap(t){var r=t.stateNode;r.pendingContext?Ru(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Ru(t,r.context,!1),xc(t,r.containerInfo)}function Xu(t,r,n,l,c){return gn(),ac(c),r.flags|=256,Ot(t,r,n,l),r.child}var Fi={dehydrated:null,treeContext:null,retryLane:0};function Ai(t){return{baseLanes:t,cachePool:null,transitions:null}}function lp(t,r,n){var l=r.pendingProps,c=at.current,x=!1,f=(r.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(c&2)!==0),v?(x=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),Ke(at,c&1),t===null)return bi(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(f=l.children,t=l.fallback,x?(l=r.mode,x=r.child,f={mode:"hidden",children:f},!(l&1)&&x!==null?(x.childLanes=0,x.pendingProps=f):x=eo(f,l,0,null),t=Ps(t,l,n,null),x.return=r,t.return=r,x.sibling=t,r.child=x,r.child.memoizedState=Ai(n),r.memoizedState=Fi,t):bc(r,f));if(c=t.memoizedState,c!==null&&(v=c.dehydrated,v!==null))return My(t,r,f,l,v,c,n);if(x){x=l.fallback,f=r.mode,c=t.child,v=c.sibling;var P={mode:"hidden",children:l.children};return!(f&1)&&r.child!==c?(l=r.child,l.childLanes=0,l.pendingProps=P,r.deletions=null):(l=is(c,P),l.subtreeFlags=c.subtreeFlags&14680064),v!==null?x=is(v,x):(x=Ps(x,f,n,null),x.flags|=2),x.return=r,l.return=r,l.sibling=x,r.child=l,l=x,x=r.child,f=t.child.memoizedState,f=f===null?Ai(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},x.memoizedState=f,x.childLanes=t.childLanes&~n,r.memoizedState=Fi,l}return x=t.child,t=x.sibling,l=is(x,{mode:"visible",children:l.children}),!(r.mode&1)&&(l.lanes=n),l.return=r,l.sibling=null,t!==null&&(n=r.deletions,n===null?(r.deletions=[t],r.flags|=16):n.push(t)),r.child=l,r.memoizedState=null,l}function bc(t,r){return r=eo({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Xa(t,r,n,l){return l!==null&&ac(l),yn(r,t.child,null,n),t=bc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function My(t,r,n,l,c,x,f){if(n)return r.flags&256?(r.flags&=-257,l=To(Error(de(422))),Xa(t,r,f,l)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(x=l.fallback,c=r.mode,l=eo({mode:"visible",children:l.children},c,0,null),x=Ps(x,c,f,null),x.flags|=2,l.return=r,x.return=r,l.sibling=x,r.child=l,r.mode&1&&yn(r,t.child,null,f),r.child.memoizedState=Ai(f),r.memoizedState=Fi,x);if(!(r.mode&1))return Xa(t,r,f,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var v=l.dgst;return l=v,x=Error(de(419)),l=To(x,l,void 0),Xa(t,r,f,l)}if(v=(f&t.childLanes)!==0,Wt||v){if(l=Ct,l!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(l.suspendedLanes|f)?0:c,c!==0&&c!==x.retryLane&&(x.retryLane=c,Yr(t,c),wr(l,t,c,-1))}return Cc(),l=To(Error(de(421))),Xa(t,r,f,l)}return c.data==="$?"?(r.flags|=128,r.child=t.child,r=Jy.bind(null,t),c._reactRetry=r,null):(t=x.treeContext,Xt=ns(c.nextSibling),Bt=r,rt=!0,Nr=null,t!==null&&(ir[cr++]=Or,ir[cr++]=zr,ir[cr++]=Fs,Or=t.id,zr=t.overflow,Fs=r),r=bc(r,l.children),r.flags|=4096,r)}function Bu(t,r,n){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),ji(t.return,r,n)}function Lo(t,r,n,l,c){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:c}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=n,x.tailMode=c)}function op(t,r,n){var l=r.pendingProps,c=l.revealOrder,x=l.tail;if(Ot(t,r,l.children,n),l=at.current,l&2)l=l&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bu(t,n,r);else if(t.tag===19)Bu(t,n,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}if(Ke(at,l),!(r.mode&1))r.memoizedState=null;else switch(c){case"forwards":for(n=r.child,c=null;n!==null;)t=n.alternate,t!==null&&Rl(t)===null&&(c=n),n=n.sibling;n=c,n===null?(c=r.child,r.child=null):(c=n.sibling,n.sibling=null),Lo(r,!1,c,n,x);break;case"backwards":for(n=null,c=r.child,r.child=null;c!==null;){if(t=c.alternate,t!==null&&Rl(t)===null){r.child=c;break}t=c.sibling,c.sibling=n,n=c,c=t}Lo(r,!0,n,null,x);break;case"together":Lo(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function pl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function qr(t,r,n){if(t!==null&&(r.dependencies=t.dependencies),ks|=r.lanes,!(n&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(de(153));if(r.child!==null){for(t=r.child,n=is(t,t.pendingProps),r.child=n,n.return=r;t.sibling!==null;)t=t.sibling,n=n.sibling=is(t,t.pendingProps),n.return=r;n.sibling=null}return r.child}function Uy(t,r,n){switch(r.tag){case 3:ap(r),gn();break;case 5:Ih(r);break;case 1:Qt(r.type)&&Dl(r);break;case 4:xc(r,r.stateNode.containerInfo);break;case 10:var l=r.type._context,c=r.memoizedProps.value;Ke(El,l._currentValue),l._currentValue=c;break;case 13:if(l=r.memoizedState,l!==null)return l.dehydrated!==null?(Ke(at,at.current&1),r.flags|=128,null):n&r.child.childLanes?lp(t,r,n):(Ke(at,at.current&1),t=qr(t,r,n),t!==null?t.sibling:null);Ke(at,at.current&1);break;case 19:if(l=(n&r.childLanes)!==0,t.flags&128){if(l)return op(t,r,n);r.flags|=128}if(c=r.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ke(at,at.current),l)break;return null;case 22:case 23:return r.lanes=0,sp(t,r,n)}return qr(t,r,n)}var ip,ki,cp,dp;ip=function(t,r){for(var n=r.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ki=function(){};cp=function(t,r,n,l){var c=t.memoizedProps;if(c!==l){t=r.stateNode,vs(Lr.current);var x=null;switch(n){case"input":c=Jo(t,c),l=Jo(t,l),x=[];break;case"select":c=ot({},c,{value:void 0}),l=ot({},l,{value:void 0}),x=[];break;case"textarea":c=Bo(t,c),l=Bo(t,l),x=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(t.onclick=Al)}ti(n,l);var f;n=null;for($ in c)if(!l.hasOwnProperty($)&&c.hasOwnProperty($)&&c[$]!=null)if($==="style"){var v=c[$];for(f in v)v.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(da.hasOwnProperty($)?x||(x=[]):(x=x||[]).push($,null));for($ in l){var P=l[$];if(v=c!=null?c[$]:void 0,l.hasOwnProperty($)&&P!==v&&(P!=null||v!=null))if($==="style")if(v){for(f in v)!v.hasOwnProperty(f)||P&&P.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in P)P.hasOwnProperty(f)&&v[f]!==P[f]&&(n||(n={}),n[f]=P[f])}else n||(x||(x=[]),x.push($,n)),n=P;else $==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,v=v?v.__html:void 0,P!=null&&v!==P&&(x=x||[]).push($,P)):$==="children"?typeof P!="string"&&typeof P!="number"||(x=x||[]).push($,""+P):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(da.hasOwnProperty($)?(P!=null&&$==="onScroll"&&et("scroll",t),x||v===P||(x=[])):(x=x||[]).push($,P))}n&&(x=x||[]).push("style",n);var $=x;(r.updateQueue=$)&&(r.flags|=4)}};dp=function(t,r,n,l){n!==l&&(r.flags|=4)};function Wn(t,r){if(!rt)switch(t.tailMode){case"hidden":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function It(t){var r=t.alternate!==null&&t.alternate.child===t.child,n=0,l=0;if(r)for(var c=t.child;c!==null;)n|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)n|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=n,r}function Oy(t,r,n){var l=r.pendingProps;switch(nc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(r),null;case 1:return Qt(r.type)&&kl(),It(r),null;case 3:return l=r.stateNode,fn(),tt(Gt),tt(Rt),uc(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Ja(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Nr!==null&&($i(Nr),Nr=null))),ki(t,r),It(r),null;case 5:mc(r);var c=vs(va.current);if(n=r.type,t!==null&&r.stateNode!=null)cp(t,r,n,l,c),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!l){if(r.stateNode===null)throw Error(de(166));return It(r),null}if(t=vs(Lr.current),Ja(r)){l=r.stateNode,n=r.type;var x=r.memoizedProps;switch(l[Dr]=r,l[ja]=x,t=(r.mode&1)!==0,n){case"dialog":et("cancel",l),et("close",l);break;case"iframe":case"object":case"embed":et("load",l);break;case"video":case"audio":for(c=0;c<ea.length;c++)et(ea[c],l);break;case"source":et("error",l);break;case"img":case"image":case"link":et("error",l),et("load",l);break;case"details":et("toggle",l);break;case"input":iu(l,x),et("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!x.multiple},et("invalid",l);break;case"textarea":du(l,x),et("invalid",l)}ti(n,x),c=null;for(var f in x)if(x.hasOwnProperty(f)){var v=x[f];f==="children"?typeof v=="string"?l.textContent!==v&&(x.suppressHydrationWarning!==!0&&Ka(l.textContent,v,t),c=["children",v]):typeof v=="number"&&l.textContent!==""+v&&(x.suppressHydrationWarning!==!0&&Ka(l.textContent,v,t),c=["children",""+v]):da.hasOwnProperty(f)&&v!=null&&f==="onScroll"&&et("scroll",l)}switch(n){case"input":Va(l),cu(l,x,!0);break;case"textarea":Va(l),xu(l);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(l.onclick=Al)}l=c,r.updateQueue=l,l!==null&&(r.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=U0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof l.is=="string"?t=f.createElement(n,{is:l.is}):(t=f.createElement(n),n==="select"&&(f=t,l.multiple?f.multiple=!0:l.size&&(f.size=l.size))):t=f.createElementNS(t,n),t[Dr]=r,t[ja]=l,ip(t,r,!1,!1),r.stateNode=t;e:{switch(f=ri(n,l),n){case"dialog":et("cancel",t),et("close",t),c=l;break;case"iframe":case"object":case"embed":et("load",t),c=l;break;case"video":case"audio":for(c=0;c<ea.length;c++)et(ea[c],t);c=l;break;case"source":et("error",t),c=l;break;case"img":case"image":case"link":et("error",t),et("load",t),c=l;break;case"details":et("toggle",t),c=l;break;case"input":iu(t,l),c=Jo(t,l),et("invalid",t);break;case"option":c=l;break;case"select":t._wrapperState={wasMultiple:!!l.multiple},c=ot({},l,{value:void 0}),et("invalid",t);break;case"textarea":du(t,l),c=Bo(t,l),et("invalid",t);break;default:c=l}ti(n,c),v=c;for(x in v)if(v.hasOwnProperty(x)){var P=v[x];x==="style"?V0(t,P):x==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&O0(t,P)):x==="children"?typeof P=="string"?(n!=="textarea"||P!=="")&&xa(t,P):typeof P=="number"&&xa(t,""+P):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(da.hasOwnProperty(x)?P!=null&&x==="onScroll"&&et("scroll",t):P!=null&&_i(t,x,P,f))}switch(n){case"input":Va(t),cu(t,l,!1);break;case"textarea":Va(t),xu(t);break;case"option":l.value!=null&&t.setAttribute("value",""+cs(l.value));break;case"select":t.multiple=!!l.multiple,x=l.value,x!=null?on(t,!!l.multiple,x,!1):l.defaultValue!=null&&on(t,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=Al)}switch(n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return It(r),null;case 6:if(t&&r.stateNode!=null)dp(t,r,t.memoizedProps,l);else{if(typeof l!="string"&&r.stateNode===null)throw Error(de(166));if(n=vs(va.current),vs(Lr.current),Ja(r)){if(l=r.stateNode,n=r.memoizedProps,l[Dr]=r,(x=l.nodeValue!==n)&&(t=Bt,t!==null))switch(t.tag){case 3:Ka(l.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ka(l.nodeValue,n,(t.mode&1)!==0)}x&&(r.flags|=4)}else l=(n.nodeType===9?n:n.ownerDocument).createTextNode(l),l[Dr]=r,r.stateNode=l}return It(r),null;case 13:if(tt(at),l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&Xt!==null&&r.mode&1&&!(r.flags&128))kh(),gn(),r.flags|=98560,x=!1;else if(x=Ja(r),l!==null&&l.dehydrated!==null){if(t===null){if(!x)throw Error(de(318));if(x=r.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(de(317));x[Dr]=r}else gn(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;It(r),x=!1}else Nr!==null&&($i(Nr),Nr=null),x=!0;if(!x)return r.flags&65536?r:null}return r.flags&128?(r.lanes=n,r):(l=l!==null,l!==(t!==null&&t.memoizedState!==null)&&l&&(r.child.flags|=8192,r.mode&1&&(t===null||at.current&1?bt===0&&(bt=3):Cc())),r.updateQueue!==null&&(r.flags|=4),It(r),null);case 4:return fn(),ki(t,r),t===null&&fa(r.stateNode.containerInfo),It(r),null;case 10:return ic(r.type._context),It(r),null;case 17:return Qt(r.type)&&kl(),It(r),null;case 19:if(tt(at),x=r.memoizedState,x===null)return It(r),null;if(l=(r.flags&128)!==0,f=x.rendering,f===null)if(l)Wn(x,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(f=Rl(t),f!==null){for(r.flags|=128,Wn(x,!1),l=f.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),r.subtreeFlags=0,l=n,n=r.child;n!==null;)x=n,t=l,x.flags&=14680066,f=x.alternate,f===null?(x.childLanes=0,x.lanes=t,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,x.type=f.type,t=f.dependencies,x.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(at,at.current&1|2),r.child}t=t.sibling}x.tail!==null&&ht()>jn&&(r.flags|=128,l=!0,Wn(x,!1),r.lanes=4194304)}else{if(!l)if(t=Rl(f),t!==null){if(r.flags|=128,l=!0,n=t.updateQueue,n!==null&&(r.updateQueue=n,r.flags|=4),Wn(x,!0),x.tail===null&&x.tailMode==="hidden"&&!f.alternate&&!rt)return It(r),null}else 2*ht()-x.renderingStartTime>jn&&n!==1073741824&&(r.flags|=128,l=!0,Wn(x,!1),r.lanes=4194304);x.isBackwards?(f.sibling=r.child,r.child=f):(n=x.last,n!==null?n.sibling=f:r.child=f,x.last=f)}return x.tail!==null?(r=x.tail,x.rendering=r,x.tail=r.sibling,x.renderingStartTime=ht(),r.sibling=null,n=at.current,Ke(at,l?n&1|2:n&1),r):(It(r),null);case 22:case 23:return Pc(),l=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==l&&(r.flags|=8192),l&&r.mode&1?Zt&1073741824&&(It(r),r.subtreeFlags&6&&(r.flags|=8192)):It(r),null;case 24:return null;case 25:return null}throw Error(de(156,r.tag))}function zy(t,r){switch(nc(r),r.tag){case 1:return Qt(r.type)&&kl(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return fn(),tt(Gt),tt(Rt),uc(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return mc(r),null;case 13:if(tt(at),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(de(340));gn()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return tt(at),null;case 4:return fn(),null;case 10:return ic(r.type._context),null;case 22:case 23:return Pc(),null;case 24:return null;default:return null}}var Ba=!1,St=!1,Vy=typeof WeakSet=="function"?WeakSet:Set,be=null;function an(t,r){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(l){dt(t,r,l)}else n.current=null}function Di(t,r,n){try{n()}catch(l){dt(t,r,l)}}var e0=!1;function Hy(t,r){if(mi=Pl,t=ph(),rc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var c=l.anchorOffset,x=l.focusNode;l=l.focusOffset;try{n.nodeType,x.nodeType}catch{n=null;break e}var f=0,v=-1,P=-1,$=0,te=0,ee=t,Z=null;t:for(;;){for(var le;ee!==n||c!==0&&ee.nodeType!==3||(v=f+c),ee!==x||l!==0&&ee.nodeType!==3||(P=f+l),ee.nodeType===3&&(f+=ee.nodeValue.length),(le=ee.firstChild)!==null;)Z=ee,ee=le;for(;;){if(ee===t)break t;if(Z===n&&++$===c&&(v=f),Z===x&&++te===l&&(P=f),(le=ee.nextSibling)!==null)break;ee=Z,Z=ee.parentNode}ee=le}n=v===-1||P===-1?null:{start:v,end:P}}else n=null}n=n||{start:0,end:0}}else n=null;for(ui={focusedElem:t,selectionRange:n},Pl=!1,be=r;be!==null;)if(r=be,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,be=t;else for(;be!==null;){r=be;try{var ae=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var oe=ae.memoizedProps,De=ae.memoizedState,V=r.stateNode,D=V.getSnapshotBeforeUpdate(r.elementType===r.type?oe:br(r.type,oe),De);V.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var H=r.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(se){dt(r,r.return,se)}if(t=r.sibling,t!==null){t.return=r.return,be=t;break}be=r.return}return ae=e0,e0=!1,ae}function oa(t,r,n){var l=r.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&t)===t){var x=c.destroy;c.destroy=void 0,x!==void 0&&Di(r,n,x)}c=c.next}while(c!==l)}}function Xl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&t)===t){var l=n.create;n.destroy=l()}n=n.next}while(n!==r)}}function Ti(t){var r=t.ref;if(r!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof r=="function"?r(t):r.current=t}}function xp(t){var r=t.alternate;r!==null&&(t.alternate=null,xp(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Dr],delete r[ja],delete r[gi],delete r[Py],delete r[Cy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mp(t){return t.tag===5||t.tag===3||t.tag===4}function t0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Li(t,r,n){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?n.nodeType===8?n.parentNode.insertBefore(t,r):n.insertBefore(t,r):(n.nodeType===8?(r=n.parentNode,r.insertBefore(t,n)):(r=n,r.appendChild(t)),n=n._reactRootContainer,n!=null||r.onclick!==null||(r.onclick=Al));else if(l!==4&&(t=t.child,t!==null))for(Li(t,r,n),t=t.sibling;t!==null;)Li(t,r,n),t=t.sibling}function Ei(t,r,n){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?n.insertBefore(t,r):n.appendChild(t);else if(l!==4&&(t=t.child,t!==null))for(Ei(t,r,n),t=t.sibling;t!==null;)Ei(t,r,n),t=t.sibling}var kt=null,jr=!1;function Qr(t,r,n){for(n=n.child;n!==null;)up(t,r,n),n=n.sibling}function up(t,r,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Yl,n)}catch{}switch(n.tag){case 5:St||an(n,r);case 6:var l=kt,c=jr;kt=null,Qr(t,r,n),kt=l,jr=c,kt!==null&&(jr?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(jr?(t=kt,n=n.stateNode,t.nodeType===8?Po(t.parentNode,n):t.nodeType===1&&Po(t,n),pa(t)):Po(kt,n.stateNode));break;case 4:l=kt,c=jr,kt=n.stateNode.containerInfo,jr=!0,Qr(t,r,n),kt=l,jr=c;break;case 0:case 11:case 14:case 15:if(!St&&(l=n.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var x=c,f=x.destroy;x=x.tag,f!==void 0&&(x&2||x&4)&&Di(n,r,f),c=c.next}while(c!==l)}Qr(t,r,n);break;case 1:if(!St&&(an(n,r),l=n.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=n.memoizedProps,l.state=n.memoizedState,l.componentWillUnmount()}catch(v){dt(n,r,v)}Qr(t,r,n);break;case 21:Qr(t,r,n);break;case 22:n.mode&1?(St=(l=St)||n.memoizedState!==null,Qr(t,r,n),St=l):Qr(t,r,n);break;default:Qr(t,r,n)}}function r0(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Vy),r.forEach(function(l){var c=Zy.bind(null,t,l);n.has(l)||(n.add(l),l.then(c,c))})}}function yr(t,r){var n=r.deletions;if(n!==null)for(var l=0;l<n.length;l++){var c=n[l];try{var x=t,f=r,v=f;e:for(;v!==null;){switch(v.tag){case 5:kt=v.stateNode,jr=!1;break e;case 3:kt=v.stateNode.containerInfo,jr=!0;break e;case 4:kt=v.stateNode.containerInfo,jr=!0;break e}v=v.return}if(kt===null)throw Error(de(160));up(x,f,c),kt=null,jr=!1;var P=c.alternate;P!==null&&(P.return=null),c.return=null}catch($){dt(c,r,$)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)hp(r,t),r=r.sibling}function hp(t,r){var n=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yr(r,t),Cr(t),l&4){try{oa(3,t,t.return),Xl(3,t)}catch(oe){dt(t,t.return,oe)}try{oa(5,t,t.return)}catch(oe){dt(t,t.return,oe)}}break;case 1:yr(r,t),Cr(t),l&512&&n!==null&&an(n,n.return);break;case 5:if(yr(r,t),Cr(t),l&512&&n!==null&&an(n,n.return),t.flags&32){var c=t.stateNode;try{xa(c,"")}catch(oe){dt(t,t.return,oe)}}if(l&4&&(c=t.stateNode,c!=null)){var x=t.memoizedProps,f=n!==null?n.memoizedProps:x,v=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{v==="input"&&x.type==="radio"&&x.name!=null&&$0(c,x),ri(v,f);var $=ri(v,x);for(f=0;f<P.length;f+=2){var te=P[f],ee=P[f+1];te==="style"?V0(c,ee):te==="dangerouslySetInnerHTML"?O0(c,ee):te==="children"?xa(c,ee):_i(c,te,ee,$)}switch(v){case"input":Zo(c,x);break;case"textarea":M0(c,x);break;case"select":var Z=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!x.multiple;var le=x.value;le!=null?on(c,!!x.multiple,le,!1):Z!==!!x.multiple&&(x.defaultValue!=null?on(c,!!x.multiple,x.defaultValue,!0):on(c,!!x.multiple,x.multiple?[]:"",!1))}c[ja]=x}catch(oe){dt(t,t.return,oe)}}break;case 6:if(yr(r,t),Cr(t),l&4){if(t.stateNode===null)throw Error(de(162));c=t.stateNode,x=t.memoizedProps;try{c.nodeValue=x}catch(oe){dt(t,t.return,oe)}}break;case 3:if(yr(r,t),Cr(t),l&4&&n!==null&&n.memoizedState.isDehydrated)try{pa(r.containerInfo)}catch(oe){dt(t,t.return,oe)}break;case 4:yr(r,t),Cr(t);break;case 13:yr(r,t),Cr(t),c=t.child,c.flags&8192&&(x=c.memoizedState!==null,c.stateNode.isHidden=x,!x||c.alternate!==null&&c.alternate.memoizedState!==null||(vc=ht())),l&4&&r0(t);break;case 22:if(te=n!==null&&n.memoizedState!==null,t.mode&1?(St=($=St)||te,yr(r,t),St=$):yr(r,t),Cr(t),l&8192){if($=t.memoizedState!==null,(t.stateNode.isHidden=$)&&!te&&t.mode&1)for(be=t,te=t.child;te!==null;){for(ee=be=te;be!==null;){switch(Z=be,le=Z.child,Z.tag){case 0:case 11:case 14:case 15:oa(4,Z,Z.return);break;case 1:an(Z,Z.return);var ae=Z.stateNode;if(typeof ae.componentWillUnmount=="function"){l=Z,n=Z.return;try{r=l,ae.props=r.memoizedProps,ae.state=r.memoizedState,ae.componentWillUnmount()}catch(oe){dt(l,n,oe)}}break;case 5:an(Z,Z.return);break;case 22:if(Z.memoizedState!==null){n0(ee);continue}}le!==null?(le.return=Z,be=le):n0(ee)}te=te.sibling}e:for(te=null,ee=t;;){if(ee.tag===5){if(te===null){te=ee;try{c=ee.stateNode,$?(x=c.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(v=ee.stateNode,P=ee.memoizedProps.style,f=P!=null&&P.hasOwnProperty("display")?P.display:null,v.style.display=z0("display",f))}catch(oe){dt(t,t.return,oe)}}}else if(ee.tag===6){if(te===null)try{ee.stateNode.nodeValue=$?"":ee.memoizedProps}catch(oe){dt(t,t.return,oe)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===t)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===t)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===t)break e;te===ee&&(te=null),ee=ee.return}te===ee&&(te=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:yr(r,t),Cr(t),l&4&&r0(t);break;case 21:break;default:yr(r,t),Cr(t)}}function Cr(t){var r=t.flags;if(r&2){try{e:{for(var n=t.return;n!==null;){if(mp(n)){var l=n;break e}n=n.return}throw Error(de(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(xa(c,""),l.flags&=-33);var x=t0(t);Ei(t,x,c);break;case 3:case 4:var f=l.stateNode.containerInfo,v=t0(t);Li(t,v,f);break;default:throw Error(de(161))}}catch(P){dt(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function _y(t,r,n){be=t,pp(t)}function pp(t,r,n){for(var l=(t.mode&1)!==0;be!==null;){var c=be,x=c.child;if(c.tag===22&&l){var f=c.memoizedState!==null||Ba;if(!f){var v=c.alternate,P=v!==null&&v.memoizedState!==null||St;v=Ba;var $=St;if(Ba=f,(St=P)&&!$)for(be=c;be!==null;)f=be,P=f.child,f.tag===22&&f.memoizedState!==null?a0(c):P!==null?(P.return=f,be=P):a0(c);for(;x!==null;)be=x,pp(x),x=x.sibling;be=c,Ba=v,St=$}s0(t)}else c.subtreeFlags&8772&&x!==null?(x.return=c,be=x):s0(t)}}function s0(t){for(;be!==null;){var r=be;if(r.flags&8772){var n=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:St||Xl(5,r);break;case 1:var l=r.stateNode;if(r.flags&4&&!St)if(n===null)l.componentDidMount();else{var c=r.elementType===r.type?n.memoizedProps:br(r.type,n.memoizedProps);l.componentDidUpdate(c,n.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var x=r.updateQueue;x!==null&&Vu(r,x,l);break;case 3:var f=r.updateQueue;if(f!==null){if(n=null,r.child!==null)switch(r.child.tag){case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}Vu(r,f,n)}break;case 5:var v=r.stateNode;if(n===null&&r.flags&4){n=v;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&n.focus();break;case"img":P.src&&(n.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var $=r.alternate;if($!==null){var te=$.memoizedState;if(te!==null){var ee=te.dehydrated;ee!==null&&pa(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}St||r.flags&512&&Ti(r)}catch(Z){dt(r,r.return,Z)}}if(r===t){be=null;break}if(n=r.sibling,n!==null){n.return=r.return,be=n;break}be=r.return}}function n0(t){for(;be!==null;){var r=be;if(r===t){be=null;break}var n=r.sibling;if(n!==null){n.return=r.return,be=n;break}be=r.return}}function a0(t){for(;be!==null;){var r=be;try{switch(r.tag){case 0:case 11:case 15:var n=r.return;try{Xl(4,r)}catch(P){dt(r,n,P)}break;case 1:var l=r.stateNode;if(typeof l.componentDidMount=="function"){var c=r.return;try{l.componentDidMount()}catch(P){dt(r,c,P)}}var x=r.return;try{Ti(r)}catch(P){dt(r,x,P)}break;case 5:var f=r.return;try{Ti(r)}catch(P){dt(r,f,P)}}}catch(P){dt(r,r.return,P)}if(r===t){be=null;break}var v=r.sibling;if(v!==null){v.return=r.return,be=v;break}be=r.return}}var Yy=Math.ceil,Ul=Wr.ReactCurrentDispatcher,jc=Wr.ReactCurrentOwner,xr=Wr.ReactCurrentBatchConfig,Oe=0,Ct=null,pt=null,Dt=0,Zt=0,ln=ms(0),bt=0,Fa=null,ks=0,Bl=0,Nc=0,ia=null,qt=null,vc=0,jn=1/0,Mr=null,Ol=!1,Ii=null,ls=null,el=!1,es=null,zl=0,ca=0,Si=null,gl=-1,yl=0;function zt(){return Oe&6?ht():gl!==-1?gl:gl=ht()}function os(t){return t.mode&1?Oe&2&&Dt!==0?Dt&-Dt:Ay.transition!==null?(yl===0&&(yl=B0()),yl):(t=qe,t!==0||(t=window.event,t=t===void 0?16:lh(t.type)),t):1}function wr(t,r,n,l){if(50<ca)throw ca=0,Si=null,Error(de(185));ka(t,n,l),(!(Oe&2)||t!==Ct)&&(t===Ct&&(!(Oe&2)&&(Bl|=n),bt===4&&Xr(t,Dt)),Kt(t,l),n===1&&Oe===0&&!(r.mode&1)&&(jn=ht()+500,Kl&&us()))}function Kt(t,r){var n=t.callbackNode;Ag(t,r);var l=wl(t,t===Ct?Dt:0);if(l===0)n!==null&&hu(n),t.callbackNode=null,t.callbackPriority=0;else if(r=l&-l,t.callbackPriority!==r){if(n!=null&&hu(n),r===1)t.tag===0?Fy(l0.bind(null,t)):Ch(l0.bind(null,t)),vy(function(){!(Oe&6)&&us()}),n=null;else{switch(eh(l)){case 1:n=Qi;break;case 4:n=Z0;break;case 16:n=vl;break;case 536870912:n=X0;break;default:n=vl}n=wp(n,gp.bind(null,t))}t.callbackPriority=r,t.callbackNode=n}}function gp(t,r){if(gl=-1,yl=0,Oe&6)throw Error(de(327));var n=t.callbackNode;if(un()&&t.callbackNode!==n)return null;var l=wl(t,t===Ct?Dt:0);if(l===0)return null;if(l&30||l&t.expiredLanes||r)r=Vl(t,l);else{r=l;var c=Oe;Oe|=2;var x=fp();(Ct!==t||Dt!==r)&&(Mr=null,jn=ht()+500,ws(t,r));do try{Gy();break}catch(v){yp(t,v)}while(!0);oc(),Ul.current=x,Oe=c,pt!==null?r=0:(Ct=null,Dt=0,r=bt)}if(r!==0){if(r===2&&(c=oi(t),c!==0&&(l=c,r=Ri(t,c))),r===1)throw n=Fa,ws(t,0),Xr(t,l),Kt(t,ht()),n;if(r===6)Xr(t,l);else{if(c=t.current.alternate,!(l&30)&&!qy(c)&&(r=Vl(t,l),r===2&&(x=oi(t),x!==0&&(l=x,r=Ri(t,x))),r===1))throw n=Fa,ws(t,0),Xr(t,l),Kt(t,ht()),n;switch(t.finishedWork=c,t.finishedLanes=l,r){case 0:case 1:throw Error(de(345));case 2:bs(t,qt,Mr);break;case 3:if(Xr(t,l),(l&130023424)===l&&(r=vc+500-ht(),10<r)){if(wl(t,0)!==0)break;if(c=t.suspendedLanes,(c&l)!==l){zt(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=pi(bs.bind(null,t,qt,Mr),r);break}bs(t,qt,Mr);break;case 4:if(Xr(t,l),(l&4194240)===l)break;for(r=t.eventTimes,c=-1;0<l;){var f=31-vr(l);x=1<<f,f=r[f],f>c&&(c=f),l&=~x}if(l=c,l=ht()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Yy(l/1960))-l,10<l){t.timeoutHandle=pi(bs.bind(null,t,qt,Mr),l);break}bs(t,qt,Mr);break;case 5:bs(t,qt,Mr);break;default:throw Error(de(329))}}}return Kt(t,ht()),t.callbackNode===n?gp.bind(null,t):null}function Ri(t,r){var n=ia;return t.current.memoizedState.isDehydrated&&(ws(t,r).flags|=256),t=Vl(t,r),t!==2&&(r=qt,qt=n,r!==null&&$i(r)),t}function $i(t){qt===null?qt=t:qt.push.apply(qt,t)}function qy(t){for(var r=t;;){if(r.flags&16384){var n=r.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var l=0;l<n.length;l++){var c=n[l],x=c.getSnapshot;c=c.value;try{if(!Pr(x(),c))return!1}catch{return!1}}}if(n=r.child,r.subtreeFlags&16384&&n!==null)n.return=r,r=n;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Xr(t,r){for(r&=~Nc,r&=~Bl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var n=31-vr(r),l=1<<n;t[n]=-1,r&=~l}}function l0(t){if(Oe&6)throw Error(de(327));un();var r=wl(t,0);if(!(r&1))return Kt(t,ht()),null;var n=Vl(t,r);if(t.tag!==0&&n===2){var l=oi(t);l!==0&&(r=l,n=Ri(t,l))}if(n===1)throw n=Fa,ws(t,0),Xr(t,r),Kt(t,ht()),n;if(n===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,bs(t,qt,Mr),Kt(t,ht()),null}function wc(t,r){var n=Oe;Oe|=1;try{return t(r)}finally{Oe=n,Oe===0&&(jn=ht()+500,Kl&&us())}}function Ds(t){es!==null&&es.tag===0&&!(Oe&6)&&un();var r=Oe;Oe|=1;var n=xr.transition,l=qe;try{if(xr.transition=null,qe=1,t)return t()}finally{qe=l,xr.transition=n,Oe=r,!(Oe&6)&&us()}}function Pc(){Zt=ln.current,tt(ln)}function ws(t,r){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ny(n)),pt!==null)for(n=pt.return;n!==null;){var l=n;switch(nc(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&kl();break;case 3:fn(),tt(Gt),tt(Rt),uc();break;case 5:mc(l);break;case 4:fn();break;case 13:tt(at);break;case 19:tt(at);break;case 10:ic(l.type._context);break;case 22:case 23:Pc()}n=n.return}if(Ct=t,pt=t=is(t.current,null),Dt=Zt=r,bt=0,Fa=null,Nc=Bl=ks=0,qt=ia=null,Ns!==null){for(r=0;r<Ns.length;r++)if(n=Ns[r],l=n.interleaved,l!==null){n.interleaved=null;var c=l.next,x=n.pending;if(x!==null){var f=x.next;x.next=c,l.next=f}n.pending=l}Ns=null}return t}function yp(t,r){do{var n=pt;try{if(oc(),ul.current=Ml,$l){for(var l=lt.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}$l=!1}if(As=0,Pt=ft=lt=null,la=!1,wa=0,jc.current=null,n===null||n.return===null){bt=1,Fa=r,pt=null;break}e:{var x=t,f=n.return,v=n,P=r;if(r=Dt,v.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var $=P,te=v,ee=te.tag;if(!(te.mode&1)&&(ee===0||ee===11||ee===15)){var Z=te.alternate;Z?(te.updateQueue=Z.updateQueue,te.memoizedState=Z.memoizedState,te.lanes=Z.lanes):(te.updateQueue=null,te.memoizedState=null)}var le=Gu(f);if(le!==null){le.flags&=-257,Qu(le,f,v,x,r),le.mode&1&&Wu(x,$,r),r=le,P=$;var ae=r.updateQueue;if(ae===null){var oe=new Set;oe.add(P),r.updateQueue=oe}else ae.add(P);break e}else{if(!(r&1)){Wu(x,$,r),Cc();break e}P=Error(de(426))}}else if(rt&&v.mode&1){var De=Gu(f);if(De!==null){!(De.flags&65536)&&(De.flags|=256),Qu(De,f,v,x,r),ac(bn(P,v));break e}}x=P=bn(P,v),bt!==4&&(bt=2),ia===null?ia=[x]:ia.push(x),x=f;do{switch(x.tag){case 3:x.flags|=65536,r&=-r,x.lanes|=r;var V=ep(x,P,r);zu(x,V);break e;case 1:v=P;var D=x.type,H=x.stateNode;if(!(x.flags&128)&&(typeof D.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(ls===null||!ls.has(H)))){x.flags|=65536,r&=-r,x.lanes|=r;var se=tp(x,v,r);zu(x,se);break e}}x=x.return}while(x!==null)}jp(n)}catch(ue){r=ue,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function fp(){var t=Ul.current;return Ul.current=Ml,t===null?Ml:t}function Cc(){(bt===0||bt===3||bt===2)&&(bt=4),Ct===null||!(ks&268435455)&&!(Bl&268435455)||Xr(Ct,Dt)}function Vl(t,r){var n=Oe;Oe|=2;var l=fp();(Ct!==t||Dt!==r)&&(Mr=null,ws(t,r));do try{Wy();break}catch(c){yp(t,c)}while(!0);if(oc(),Oe=n,Ul.current=l,pt!==null)throw Error(de(261));return Ct=null,Dt=0,bt}function Wy(){for(;pt!==null;)bp(pt)}function Gy(){for(;pt!==null&&!fg();)bp(pt)}function bp(t){var r=vp(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,r===null?jp(t):pt=r,jc.current=null}function jp(t){var r=t;do{var n=r.alternate;if(t=r.return,r.flags&32768){if(n=zy(n,r),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,pt=null;return}}else if(n=Oy(n,r,Zt),n!==null){pt=n;return}if(r=r.sibling,r!==null){pt=r;return}pt=r=t}while(r!==null);bt===0&&(bt=5)}function bs(t,r,n){var l=qe,c=xr.transition;try{xr.transition=null,qe=1,Qy(t,r,n,l)}finally{xr.transition=c,qe=l}return null}function Qy(t,r,n,l){do un();while(es!==null);if(Oe&6)throw Error(de(327));n=t.finishedWork;var c=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var x=n.lanes|n.childLanes;if(kg(t,x),t===Ct&&(pt=Ct=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||el||(el=!0,wp(vl,function(){return un(),null})),x=(n.flags&15990)!==0,n.subtreeFlags&15990||x){x=xr.transition,xr.transition=null;var f=qe;qe=1;var v=Oe;Oe|=4,jc.current=null,Hy(t,n),hp(n,t),hy(ui),Pl=!!mi,ui=mi=null,t.current=n,_y(n),bg(),Oe=v,qe=f,xr.transition=x}else t.current=n;if(el&&(el=!1,es=t,zl=c),x=t.pendingLanes,x===0&&(ls=null),vg(n.stateNode),Kt(t,ht()),r!==null)for(l=t.onRecoverableError,n=0;n<r.length;n++)c=r[n],l(c.value,{componentStack:c.stack,digest:c.digest});if(Ol)throw Ol=!1,t=Ii,Ii=null,t;return zl&1&&t.tag!==0&&un(),x=t.pendingLanes,x&1?t===Si?ca++:(ca=0,Si=t):ca=0,us(),null}function un(){if(es!==null){var t=eh(zl),r=xr.transition,n=qe;try{if(xr.transition=null,qe=16>t?16:t,es===null)var l=!1;else{if(t=es,es=null,zl=0,Oe&6)throw Error(de(331));var c=Oe;for(Oe|=4,be=t.current;be!==null;){var x=be,f=x.child;if(be.flags&16){var v=x.deletions;if(v!==null){for(var P=0;P<v.length;P++){var $=v[P];for(be=$;be!==null;){var te=be;switch(te.tag){case 0:case 11:case 15:oa(8,te,x)}var ee=te.child;if(ee!==null)ee.return=te,be=ee;else for(;be!==null;){te=be;var Z=te.sibling,le=te.return;if(xp(te),te===$){be=null;break}if(Z!==null){Z.return=le,be=Z;break}be=le}}}var ae=x.alternate;if(ae!==null){var oe=ae.child;if(oe!==null){ae.child=null;do{var De=oe.sibling;oe.sibling=null,oe=De}while(oe!==null)}}be=x}}if(x.subtreeFlags&2064&&f!==null)f.return=x,be=f;else e:for(;be!==null;){if(x=be,x.flags&2048)switch(x.tag){case 0:case 11:case 15:oa(9,x,x.return)}var V=x.sibling;if(V!==null){V.return=x.return,be=V;break e}be=x.return}}var D=t.current;for(be=D;be!==null;){f=be;var H=f.child;if(f.subtreeFlags&2064&&H!==null)H.return=f,be=H;else e:for(f=D;be!==null;){if(v=be,v.flags&2048)try{switch(v.tag){case 0:case 11:case 15:Xl(9,v)}}catch(ue){dt(v,v.return,ue)}if(v===f){be=null;break e}var se=v.sibling;if(se!==null){se.return=v.return,be=se;break e}be=v.return}}if(Oe=c,us(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Yl,t)}catch{}l=!0}return l}finally{qe=n,xr.transition=r}}return!1}function o0(t,r,n){r=bn(n,r),r=ep(t,r,1),t=as(t,r,1),r=zt(),t!==null&&(ka(t,1,r),Kt(t,r))}function dt(t,r,n){if(t.tag===3)o0(t,t,n);else for(;r!==null;){if(r.tag===3){o0(r,t,n);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ls===null||!ls.has(l))){t=bn(n,t),t=tp(r,t,1),r=as(r,t,1),t=zt(),r!==null&&(ka(r,1,t),Kt(r,t));break}}r=r.return}}function Ky(t,r,n){var l=t.pingCache;l!==null&&l.delete(r),r=zt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Dt&n)===n&&(bt===4||bt===3&&(Dt&130023424)===Dt&&500>ht()-vc?ws(t,0):Nc|=n),Kt(t,r)}function Np(t,r){r===0&&(t.mode&1?(r=Ya,Ya<<=1,!(Ya&130023424)&&(Ya=4194304)):r=1);var n=zt();t=Yr(t,r),t!==null&&(ka(t,r,n),Kt(t,n))}function Jy(t){var r=t.memoizedState,n=0;r!==null&&(n=r.retryLane),Np(t,n)}function Zy(t,r){var n=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(n=c.retryLane);break;case 19:l=t.stateNode;break;default:throw Error(de(314))}l!==null&&l.delete(r),Np(t,n)}var vp;vp=function(t,r,n){if(t!==null)if(t.memoizedProps!==r.pendingProps||Gt.current)Wt=!0;else{if(!(t.lanes&n)&&!(r.flags&128))return Wt=!1,Uy(t,r,n);Wt=!!(t.flags&131072)}else Wt=!1,rt&&r.flags&1048576&&Fh(r,Ll,r.index);switch(r.lanes=0,r.tag){case 2:var l=r.type;pl(t,r),t=r.pendingProps;var c=pn(r,Rt.current);mn(r,n),c=pc(null,r,l,t,c,n);var x=gc();return r.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Qt(l)?(x=!0,Dl(r)):x=!1,r.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,dc(r),c.updater=Zl,r.stateNode=c,c._reactInternals=r,vi(r,l,t,n),r=Ci(null,r,l,!0,x,n)):(r.tag=0,rt&&x&&sc(r),Ot(null,r,c,n),r=r.child),r;case 16:l=r.elementType;e:{switch(pl(t,r),t=r.pendingProps,c=l._init,l=c(l._payload),r.type=l,c=r.tag=By(l),t=br(l,t),c){case 0:r=Pi(null,r,l,t,n);break e;case 1:r=Zu(null,r,l,t,n);break e;case 11:r=Ku(null,r,l,t,n);break e;case 14:r=Ju(null,r,l,br(l.type,t),n);break e}throw Error(de(306,l,""))}return r;case 0:return l=r.type,c=r.pendingProps,c=r.elementType===l?c:br(l,c),Pi(t,r,l,c,n);case 1:return l=r.type,c=r.pendingProps,c=r.elementType===l?c:br(l,c),Zu(t,r,l,c,n);case 3:e:{if(ap(r),t===null)throw Error(de(387));l=r.pendingProps,x=r.memoizedState,c=x.element,Eh(t,r),Sl(r,l,null,n);var f=r.memoizedState;if(l=f.element,x.isDehydrated)if(x={element:l,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},r.updateQueue.baseState=x,r.memoizedState=x,r.flags&256){c=bn(Error(de(423)),r),r=Xu(t,r,l,n,c);break e}else if(l!==c){c=bn(Error(de(424)),r),r=Xu(t,r,l,n,c);break e}else for(Xt=ns(r.stateNode.containerInfo.firstChild),Bt=r,rt=!0,Nr=null,n=Th(r,null,l,n),r.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gn(),l===c){r=qr(t,r,n);break e}Ot(t,r,l,n)}r=r.child}return r;case 5:return Ih(r),t===null&&bi(r),l=r.type,c=r.pendingProps,x=t!==null?t.memoizedProps:null,f=c.children,hi(l,c)?f=null:x!==null&&hi(l,x)&&(r.flags|=32),np(t,r),Ot(t,r,f,n),r.child;case 6:return t===null&&bi(r),null;case 13:return lp(t,r,n);case 4:return xc(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=yn(r,null,l,n):Ot(t,r,l,n),r.child;case 11:return l=r.type,c=r.pendingProps,c=r.elementType===l?c:br(l,c),Ku(t,r,l,c,n);case 7:return Ot(t,r,r.pendingProps,n),r.child;case 8:return Ot(t,r,r.pendingProps.children,n),r.child;case 12:return Ot(t,r,r.pendingProps.children,n),r.child;case 10:e:{if(l=r.type._context,c=r.pendingProps,x=r.memoizedProps,f=c.value,Ke(El,l._currentValue),l._currentValue=f,x!==null)if(Pr(x.value,f)){if(x.children===c.children&&!Gt.current){r=qr(t,r,n);break e}}else for(x=r.child,x!==null&&(x.return=r);x!==null;){var v=x.dependencies;if(v!==null){f=x.child;for(var P=v.firstContext;P!==null;){if(P.context===l){if(x.tag===1){P=Vr(-1,n&-n),P.tag=2;var $=x.updateQueue;if($!==null){$=$.shared;var te=$.pending;te===null?P.next=P:(P.next=te.next,te.next=P),$.pending=P}}x.lanes|=n,P=x.alternate,P!==null&&(P.lanes|=n),ji(x.return,n,r),v.lanes|=n;break}P=P.next}}else if(x.tag===10)f=x.type===r.type?null:x.child;else if(x.tag===18){if(f=x.return,f===null)throw Error(de(341));f.lanes|=n,v=f.alternate,v!==null&&(v.lanes|=n),ji(f,n,r),f=x.sibling}else f=x.child;if(f!==null)f.return=x;else for(f=x;f!==null;){if(f===r){f=null;break}if(x=f.sibling,x!==null){x.return=f.return,f=x;break}f=f.return}x=f}Ot(t,r,c.children,n),r=r.child}return r;case 9:return c=r.type,l=r.pendingProps.children,mn(r,n),c=mr(c),l=l(c),r.flags|=1,Ot(t,r,l,n),r.child;case 14:return l=r.type,c=br(l,r.pendingProps),c=br(l.type,c),Ju(t,r,l,c,n);case 15:return rp(t,r,r.type,r.pendingProps,n);case 17:return l=r.type,c=r.pendingProps,c=r.elementType===l?c:br(l,c),pl(t,r),r.tag=1,Qt(l)?(t=!0,Dl(r)):t=!1,mn(r,n),Bh(r,l,c),vi(r,l,c,n),Ci(null,r,l,!0,t,n);case 19:return op(t,r,n);case 22:return sp(t,r,n)}throw Error(de(156,r.tag))};function wp(t,r){return J0(t,r)}function Xy(t,r,n,l){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(t,r,n,l){return new Xy(t,r,n,l)}function Fc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function By(t){if(typeof t=="function")return Fc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qi)return 11;if(t===Wi)return 14}return 2}function is(t,r){var n=t.alternate;return n===null?(n=dr(t.tag,r,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=r,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,r=t.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fl(t,r,n,l,c,x){var f=2;if(l=t,typeof t=="function")Fc(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Js:return Ps(n.children,c,x,r);case Yi:f=8,c|=8;break;case Wo:return t=dr(12,n,r,c|2),t.elementType=Wo,t.lanes=x,t;case Go:return t=dr(13,n,r,c),t.elementType=Go,t.lanes=x,t;case Qo:return t=dr(19,n,r,c),t.elementType=Qo,t.lanes=x,t;case I0:return eo(n,c,x,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L0:f=10;break e;case E0:f=9;break e;case qi:f=11;break e;case Wi:f=14;break e;case Kr:f=16,l=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return r=dr(f,n,r,c),r.elementType=t,r.type=l,r.lanes=x,r}function Ps(t,r,n,l){return t=dr(7,t,l,r),t.lanes=n,t}function eo(t,r,n,l){return t=dr(22,t,l,r),t.elementType=I0,t.lanes=n,t.stateNode={isHidden:!1},t}function Eo(t,r,n){return t=dr(6,t,null,r),t.lanes=n,t}function Io(t,r,n){return r=dr(4,t.children!==null?t.children:[],t.key,r),r.lanes=n,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function ef(t,r,n,l,c){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uo(0),this.expirationTimes=uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uo(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Ac(t,r,n,l,c,x,f,v,P){return t=new ef(t,r,n,v,P),r===1?(r=1,x===!0&&(r|=8)):r=0,x=dr(3,null,null,r),t.current=x,x.stateNode=t,x.memoizedState={element:l,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dc(x),t}function tf(t,r,n){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ks,key:l==null?null:""+l,children:t,containerInfo:r,implementation:n}}function Pp(t){if(!t)return ds;t=t._reactInternals;e:{if(Ls(t)!==t||t.tag!==1)throw Error(de(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Qt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(de(171))}if(t.tag===1){var n=t.type;if(Qt(n))return Ph(t,n,r)}return r}function Cp(t,r,n,l,c,x,f,v,P){return t=Ac(n,l,!0,t,c,x,f,v,P),t.context=Pp(null),n=t.current,l=zt(),c=os(n),x=Vr(l,c),x.callback=r??null,as(n,x,c),t.current.lanes=c,ka(t,c,l),Kt(t,l),t}function to(t,r,n,l){var c=r.current,x=zt(),f=os(c);return n=Pp(n),r.context===null?r.context=n:r.pendingContext=n,r=Vr(x,f),r.payload={element:t},l=l===void 0?null:l,l!==null&&(r.callback=l),t=as(c,r,f),t!==null&&(wr(t,c,f,x),ml(t,c,f)),f}function Hl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<r?n:r}}function kc(t,r){i0(t,r),(t=t.alternate)&&i0(t,r)}function rf(){return null}var Fp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dc(t){this._internalRoot=t}ro.prototype.render=Dc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(de(409));to(t,r,null,null)};ro.prototype.unmount=Dc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ds(function(){to(null,t,null,null)}),r[_r]=null}};function ro(t){this._internalRoot=t}ro.prototype.unstable_scheduleHydration=function(t){if(t){var r=sh();t={blockedOn:null,target:t,priority:r};for(var n=0;n<Zr.length&&r!==0&&r<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&ah(t)}};function Tc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function so(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function c0(){}function sf(t,r,n,l,c){if(c){if(typeof l=="function"){var x=l;l=function(){var $=Hl(f);x.call($)}}var f=Cp(r,l,t,0,null,!1,!1,"",c0);return t._reactRootContainer=f,t[_r]=f.current,fa(t.nodeType===8?t.parentNode:t),Ds(),f}for(;c=t.lastChild;)t.removeChild(c);if(typeof l=="function"){var v=l;l=function(){var $=Hl(P);v.call($)}}var P=Ac(t,0,!1,null,null,!1,!1,"",c0);return t._reactRootContainer=P,t[_r]=P.current,fa(t.nodeType===8?t.parentNode:t),Ds(function(){to(r,P,n,l)}),P}function no(t,r,n,l,c){var x=n._reactRootContainer;if(x){var f=x;if(typeof c=="function"){var v=c;c=function(){var P=Hl(f);v.call(P)}}to(r,f,t,c)}else f=sf(n,r,t,c,l);return Hl(f)}th=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var n=Bn(r.pendingLanes);n!==0&&(Ki(r,n|1),Kt(r,ht()),!(Oe&6)&&(jn=ht()+500,us()))}break;case 13:Ds(function(){var l=Yr(t,1);if(l!==null){var c=zt();wr(l,t,1,c)}}),kc(t,1)}};Ji=function(t){if(t.tag===13){var r=Yr(t,134217728);if(r!==null){var n=zt();wr(r,t,134217728,n)}kc(t,134217728)}};rh=function(t){if(t.tag===13){var r=os(t),n=Yr(t,r);if(n!==null){var l=zt();wr(n,t,r,l)}kc(t,r)}};sh=function(){return qe};nh=function(t,r){var n=qe;try{return qe=t,r()}finally{qe=n}};ni=function(t,r,n){switch(r){case"input":if(Zo(t,n),r=n.name,n.type==="radio"&&r!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<n.length;r++){var l=n[r];if(l!==t&&l.form===t.form){var c=Ql(l);if(!c)throw Error(de(90));R0(l),Zo(l,c)}}}break;case"textarea":M0(t,n);break;case"select":r=n.value,r!=null&&on(t,!!n.multiple,r,!1)}};Y0=wc;q0=Ds;var nf={usingClientEntryPoint:!1,Events:[Ta,en,Ql,H0,_0,wc]},Gn={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},af={bundleType:Gn.bundleType,version:Gn.version,rendererPackageName:Gn.rendererPackageName,rendererConfig:Gn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Q0(t),t===null?null:t.stateNode},findFiberByHostInstance:Gn.findFiberByHostInstance||rf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{Yl=tl.inject(af),Tr=tl}catch{}}tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nf;tr.createPortal=function(t,r){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tc(r))throw Error(de(200));return tf(t,r,null,n)};tr.createRoot=function(t,r){if(!Tc(t))throw Error(de(299));var n=!1,l="",c=Fp;return r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),r=Ac(t,1,!1,null,null,n,!1,l,c),t[_r]=r.current,fa(t.nodeType===8?t.parentNode:t),new Dc(r)};tr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=Q0(r),t=t===null?null:t.stateNode,t};tr.flushSync=function(t){return Ds(t)};tr.hydrate=function(t,r,n){if(!so(r))throw Error(de(200));return no(null,t,r,!0,n)};tr.hydrateRoot=function(t,r,n){if(!Tc(t))throw Error(de(405));var l=n!=null&&n.hydratedSources||null,c=!1,x="",f=Fp;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(x=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),r=Cp(r,null,t,1,n??null,c,!1,x,f),t[_r]=r.current,fa(t),l)for(t=0;t<l.length;t++)n=l[t],c=n._getVersion,c=c(n._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[n,c]:r.mutableSourceEagerHydrationData.push(n,c);return new ro(r)};tr.render=function(t,r,n){if(!so(r))throw Error(de(200));return no(null,t,r,!1,n)};tr.unmountComponentAtNode=function(t){if(!so(t))throw Error(de(40));return t._reactRootContainer?(Ds(function(){no(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1};tr.unstable_batchedUpdates=wc;tr.unstable_renderSubtreeIntoContainer=function(t,r,n,l){if(!so(n))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return no(t,r,n,!1,l)};tr.version="18.3.1-next-f1338f8080-20240426";function Ap(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ap)}catch(t){console.error(t)}}Ap(),A0.exports=tr;var lf=A0.exports,d0=lf;Yo.createRoot=d0.createRoot,Yo.hydrateRoot=d0.hydrateRoot;var of={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cf=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),df=(t,r)=>{const n=Ee.forwardRef(({color:l="currentColor",size:c=24,strokeWidth:x=2,absoluteStrokeWidth:f,children:v,...P},$)=>Ee.createElement("svg",{ref:$,...of,width:c,height:c,stroke:l,strokeWidth:f?Number(x)*24/Number(c):x,className:`lucide lucide-${cf(t)}`,...P},[...r.map(([te,ee])=>Ee.createElement(te,ee)),...(Array.isArray(v)?v:[v])||[]]));return n.displayName=`${t}`,n};var Te=df;const xf=Te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Qn=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ut=Te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),x0=Te("Beef",[["circle",{cx:"12.5",cy:"8.5",r:"2.5",key:"9738u8"}],["path",{d:"M12.5 2a6.5 6.5 0 0 0-6.22 4.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3A6.5 6.5 0 0 0 12.5 2Z",key:"o0f6za"}],["path",{d:"m18.5 6 2.19 4.5a6.48 6.48 0 0 1 .31 2 6.49 6.49 0 0 1-2.6 5.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5",key:"k7p6i0"}]]),mf=Te("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),uf=Te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),So=Te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Ro=Te("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]),$o=Te("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ps=Te("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Lc=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ec=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),m0=Te("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Mo=Te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),rl=Te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),fr=Te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Fr=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),hf=Te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ue=Te("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),pf=Te("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"8ur5zv"}]]),u0=Te("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),sl=Te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Kn=Te("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),Yt=Te("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),Uo=Te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),gf=Te("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),yf=Te("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Oo=Te("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),ff=Te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),zo=Te("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Vo=Te("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Ve=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),gs=Te("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),nl=Te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),bf=Te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Gs=Te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Rr=Te("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),nt=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),jf=Te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),st=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ar=Te("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),al=Te("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]),ll=Te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),$r=Te("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),Ho=Te("Wheat",[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]]),Nf=Te("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Qs=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vf=Te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ne=({value:t,onChange:r,className:n="",placeholder:l="0.00",disabled:c=!1})=>{const[x,f]=Ee.useState(""),v=Ee.useRef(null),P=ae=>ae===0||ae===null||ae===void 0?"":ae.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),$=ae=>{if(!ae)return 0;const oe=ae.replace(/[^0-9.-]/g,"");return parseFloat(oe)||0};Ee.useEffect(()=>{document.activeElement!==v.current&&f(P(t))},[t]);const te=()=>{t&&f(t.toString())},ee=ae=>{const oe=ae.target.value;(/^-?[\d,]*\.?\d*$/.test(oe)||oe==="")&&f(oe)},Z=()=>{const ae=$(x);r(ae),f(P(ae))},le=ae=>{ae.key==="Enter"&&ae.target.blur()};return e.jsx("input",{ref:v,type:"text",inputMode:"decimal",value:x,onChange:ee,onTarget:te,onBlur:Z,onKeyDown:le,placeholder:l,disabled:c,className:n})},$e=({value:t,onChange:r,className:n="",placeholder:l="0",decimals:c=0,disabled:x=!1})=>{const[f,v]=Ee.useState(""),P=Ee.useRef(null),$=oe=>oe===0||oe===null||oe===void 0?"":oe.toLocaleString("en-US",{minimumFractionDigits:c,maximumFractionDigits:c}),te=oe=>{if(!oe)return 0;const De=oe.replace(/[^0-9.-]/g,"");return c>0?parseFloat(De)||0:parseInt(De)||0};Ee.useEffect(()=>{document.activeElement!==P.current&&v($(t))},[t]);const ee=()=>{t&&v(t.toString())},Z=oe=>{const De=oe.target.value;(/^-?[\d,]*\.?\d*$/.test(De)||De==="")&&v(De)},le=()=>{const oe=te(f);r(oe),v($(oe))},ae=oe=>{oe.key==="Enter"&&oe.target.blur()};return e.jsx("input",{ref:P,type:"text",inputMode:"decimal",value:f,onChange:Z,onTarget:ee,onBlur:le,onKeyDown:ae,placeholder:l,disabled:x,className:n})},wf=[{id:"client-1",name:"Joe Farmer",units:1135.66,tillableUnits:1065.66,livestockUnits:70,entities:[{id:"ent-1a",name:"Joe Farmer (Personal)"},{id:"ent-1b",name:"JF Farms LLC"},{id:"ent-1c",name:"Farmer Land Holdings"}],fields:[{fieldName:"North Quarter",crop:"Corn",practice:"Irrigated",county:"Cedar",entity:"ent-1b",plannedAcres:156,sharePercent:100,aph:220},{fieldName:"South 80",crop:"Corn",practice:"Dryland",county:"Cedar",entity:"ent-1b",plannedAcres:78,sharePercent:100,aph:165},{fieldName:"River Bottom",crop:"Soybeans",practice:"Dryland",county:"Dixon",entity:"ent-1b",plannedAcres:124,sharePercent:100,aph:52},{fieldName:"West Field",crop:"Corn",practice:"Irrigated",county:"Cedar",entity:"ent-1c",plannedAcres:210,sharePercent:66.67,aph:235},{fieldName:"Home Place",crop:"Wheat",practice:"Dryland",county:"Cedar",entity:"ent-1a",plannedAcres:95,sharePercent:100,aph:48},{fieldName:"East 120",crop:"Soybeans",practice:"Dryland",county:"Dixon",entity:"ent-1b",plannedAcres:118,sharePercent:100,aph:48}]},{id:"client-2",name:"Smith Family Farms",units:2400,tillableUnits:2400,livestockUnits:0,entities:[{id:"ent-2a",name:"Smith Family Farms"}],fields:[]},{id:"client-3",name:"Koch Ag LLC",units:890,tillableUnits:850,livestockUnits:40,entities:[{id:"ent-3a",name:"Chad Koch"},{id:"ent-3b",name:"CKCA LLC"},{id:"ent-3c",name:"Koch Land LLC"}],fields:[]}],Pf={"client-1":[{id:"bs-2024",clientId:"client-1",entityId:"ent-1a",date:"2024-01-03",createdAt:"2024-01-03T10:00:00Z",adjustment:0,currentAssets:{cash:[{id:"c1",description:"Farm Checking ***102",amount:1608.36},{id:"c2",description:"Personal Checking ***382",amount:1e3},{id:"c3",description:"CKCA LLC Checking ***681",amount:43177.13}],accountsReceivable:[{id:"ar1",description:"Coaching Wages",amount:9e3},{id:"ar2",description:"Half Truck Payments (Karl Koch)",amount:12173.07},{id:"ar3",description:"Bridge Assistance Payment",amount:39153.91},{id:"ar4",description:"White Corn Sold CVA",amount:81292.47}],commodityAccounts:[{id:"ca1",description:"Futures Account",amount:0}],cropInventory:[{id:"ci1",description:"Corn",quantity:118848,unit:"bu",pricePerUnit:4.5,totalValue:534816.79},{id:"ci2",description:"Soybeans",quantity:5e3,unit:"bu",pricePerUnit:10.25,totalValue:51250}],feedInventory:[{id:"fi1",description:"Hay",quantity:150,unit:"ton",pricePerUnit:85,totalValue:12750},{id:"fi2",description:"Corn Silage",quantity:200,unit:"ton",pricePerUnit:9.1,totalValue:1820}],marketLivestock:[{id:"ml1",description:"Feeder Steers",headCount:85,weightPerHead:750,pricePerCwt:245,totalValue:156187.5},{id:"ml2",description:"Feeder Heifers",headCount:25,weightPerHead:650,pricePerCwt:230,totalValue:37375}],growingCrop:[{id:"gc1",description:"Winter Wheat",acres:320,pricePerAcre:75,totalValue:24e3},{id:"gc2",description:"Cover Crop",acres:200,pricePerAcre:35,totalValue:7e3}],prepaidExpenses:[{id:"pe1",description:"Prepaid Insurance",amount:2500},{id:"pe2",description:"Prepaid Rent",amount:2437}],otherCurrentAssets:[{id:"oc1",description:"Dividends Receivable",amount:1e3}]},intermediateAssets:{machinery:[{id:"m1",description:"Great Plains 26 Ft Grain Drill",year:1994,serial:"GP5626Z",priorValue:70200,currentValue:63180,depRate:.1},{id:"m2",description:"Apache Sprayer",year:2018,serial:"",priorValue:151200,currentValue:136080,depRate:.1},{id:"m3",description:"MF8S.285 Truck (50%)",year:2023,serial:"",priorValue:284e3,currentValue:255600,depRate:.1},{id:"m4",description:"Gleaner S97 Combine",year:2020,serial:"",priorValue:3e5,currentValue:27e4,depRate:.1},{id:"m5",description:"2012 Kinze Planter",year:2012,serial:"",priorValue:105300,currentValue:94770,depRate:.1},{id:"m6",description:"Parker Grain Cart 737",year:2012,serial:"",priorValue:9e3,currentValue:8100,depRate:.1},{id:"m7",description:"DT 180 w/ Loader Truck",year:2015,serial:"",priorValue:8e4,currentValue:72e3,depRate:.1}],vehicles:[{id:"v1",description:"Silverado Pickup",year:2020,serial:"",priorValue:4131.11,currentValue:3718,depRate:.1},{id:"v2",description:"2019 Ford F-250",year:2019,serial:"",priorValue:42e3,currentValue:37800,depRate:.1},{id:"v3",description:"Hyundai Palisade",year:2022,serial:"",priorValue:28e3,currentValue:24109.74,depRate:.1}],breedingLivestock:[{id:"bl1",type:"Cows",description:"Spring Cows",quantity:40,valuePerHead:3e3,totalValue:12e4},{id:"bl2",type:"Cows",description:"Spring Bred Heifers",quantity:3,valuePerHead:4e3,totalValue:12e3},{id:"bl3",type:"Bulls",description:"Breeding Bulls",quantity:2,valuePerHead:6e3,totalValue:12e3},{id:"bl4",type:"Cows",description:"Fall Cows",quantity:29,valuePerHead:3e3,totalValue:87e3}]},longTermAssets:{realEstate:[{id:"re1",description:"35-31-2E S1/2SW",county:"Cedar County",totalAcres:74.77,irrAcres:61.77,dryAcres:13,otherAcres:0,value:427105,taxValue:427105,annualTaxes:2211.48},{id:"re2",description:"12-28-2E N1/2SE",county:"Cedar County",totalAcres:80,irrAcres:0,dryAcres:80,otherAcres:0,value:479395,taxValue:479395,annualTaxes:3616.88},{id:"re3",description:"W1/2 SE1/4 SEC. 13-30-4",county:"Dixon County",totalAcres:21,irrAcres:0,dryAcres:21,otherAcres:0,value:229105,taxValue:229105,annualTaxes:1346.64},{id:"re4",description:"Home Place",county:"Cedar County",totalAcres:5,irrAcres:0,dryAcres:0,otherAcres:5,value:35e4,taxValue:35e4,annualTaxes:2800}],buildings:[{id:"b1",description:"Machine Shed",year:2015,priorValue:28500,currentValue:25650,depRate:.1},{id:"b2",description:"Grain Bins",year:2010,priorValue:18500,currentValue:16650,depRate:.1},{id:"b3",description:"Cattle Well",year:2023,priorValue:17150,currentValue:15435.3,depRate:.1}],otherLongTerm:[{id:"ol1",description:"Cooperative Stock - CVA",priorValue:42e3,currentValue:45e3},{id:"ol2",description:"Cooperative Stock - Other",priorValue:11500,currentValue:12500},{id:"ol3",description:"Cash Value Life Insurance",priorValue:23e3,currentValue:25e3},{id:"ol4",description:"Retirement Accounts",priorValue:365e3,currentValue:386e3}]},capitalActivity:{machineryPurchases:[{id:"mp1",description:"JD 9620 Truck",cashPaid:45e3,financedAmount:18e4,totalCost:225e3}],machinerySales:[{id:"ms1",description:"Old Case Truck",previousValue:35e3,salePrice:42e3,gainLoss:7e3}],vehiclePurchases:[],vehicleSales:[],buildingPurchases:[],buildingSales:[]},currentLiabilities:{accountsPayable:[{id:"ap1",description:"Seed Supplier",amount:5200},{id:"ap2",description:"Fertilizer Co-op",amount:8500}],outstandingChecks:[{id:"oc1",description:"Equipment Repair",draftNumber:"1547",amount:1250},{id:"oc2",description:"Fuel Purchase",draftNumber:"1548",amount:875}],creditCardDebt:[{id:"cc1",description:"Farm Supply Card",amount:3200},{id:"cc2",description:"Business Visa",amount:1800}],operatingLine:790345.3,currentPortionTermDebt:143154.66,accruedInterest:95862.09,otherCurrentLiabilities:[]},debtService:[{id:"ds-op1",description:"Opr LOC 11670",lender:"Security Bank",entity:"Chad Koch",interestRate:8.5,rateType:"V",amYears:1,security:"Chattels",rateMaturity:"2026-12-31",maturity:"2027-06-16",accruedInterest:68234.71,locCommitment:6e5,currentBalance:499e3,principalPayment:0,interestPayment:0,totalPayment:0,currentPortion:0,category:"operating"},{id:"ds-op2",description:"Sealed Grain",lender:"FSA",entity:"CKCA LLC",interestRate:4.63,rateType:"F",amYears:1,security:"Chattels",rateMaturity:"2026-09-30",maturity:"2026-09-30",accruedInterest:1070.33,locCommitment:291345.3,currentBalance:291345.3,principalPayment:0,interestPayment:0,totalPayment:0,currentPortion:0,category:"operating"},{id:"ds-eq1",description:"2018 Apache Sprayer",lender:"Security Bank",entity:"Chad Koch",interestRate:6.5,rateType:"Fixed",amYears:4,security:"Apache Sprayer",rateMaturity:"2023-01-15",maturity:"2023-01-15",accruedInterest:6339.76,principalAmount:102071.4,principalPayment:23104.19,interestPayment:6634.64,monthlyPayment:0,totalPayment:29738.83,currentPortion:79967.21,category:"equipment"},{id:"ds-eq2",description:"2012 Kinze Planter",lender:"Security Bank",entity:"Chad Koch",interestRate:7.5,rateType:"Fixed",amYears:4,security:"Kinze Planter",rateMaturity:"2023-02-08",maturity:"2023-12-11",accruedInterest:548.61,principalAmount:73148.38,principalPayment:16395.64,interestPayment:5486.13,monthlyPayment:0,totalPayment:21881.77,currentPortion:56752.74,category:"equipment"},{id:"ds-eq3",description:"Massey 85.285 Dyna-VT Deluxe",lender:"Agco Finance",entity:"Chad/Karl Koch",interestRate:3.82,rateType:"Fixed",amYears:5,security:"MF MF85.285",rateMaturity:"2030-07-01",maturity:"2030-07-01",accruedInterest:175.42,principalAmount:134748.22,principalPayment:19771.76,interestPayment:4574.38,monthlyPayment:0,totalPayment:24946.14,currentPortion:99976.46,category:"equipment"},{id:"ds-eq4",description:"Gleaner S97 Combine",lender:"Ag Direct",entity:"Chad Koch",interestRate:2.99,rateType:"Fixed",amYears:1,security:"Gleaner S97 Combine",rateMaturity:"2026-03-01",maturity:"2026-04-12",accruedInterest:742.56,principalAmount:133223.46,principalPayment:24679.2,interestPayment:4786.53,monthlyPayment:0,totalPayment:29465.73,currentPortion:108544.26,category:"equipment"},{id:"ds-eq5",description:"Past Operating Debt 4099",lender:"Security Bank",entity:"Chad Koch",interestRate:7.7,rateType:"Fixed",amYears:5,security:"Chattels",rateMaturity:"2030-04-01",maturity:"2030-04-12",accruedInterest:5287.33,principalAmount:8e4,principalPayment:13887.62,interestPayment:6160,monthlyPayment:0,totalPayment:20047.62,currentPortion:66112.38,category:"equipment"},{id:"ds-vh1",description:"2013 Chevy Silverado",lender:"Security Bank",entity:"Chad Koch",interestRate:5.43,rateType:"Fixed",amYears:1,security:"Pickup",rateMaturity:"2026-05-16",maturity:"2026-05-16",accruedInterest:5.25,principalAmount:1607,principalPayment:1607,interestPayment:87.26,monthlyPayment:325.59,totalPayment:1694.26,currentPortion:0,category:"vehicle"},{id:"ds-ot1",description:"Bred Cow Note 4098",lender:"Security Bank",entity:"Cow/Calf",interestRate:7.7,rateType:"F",amYears:4,security:"Cattle",rateMaturity:"2029-07-15",maturity:"2029-07-15",accruedInterest:2502.69,principalAmount:72227.71,principalPayment:16071.95,interestPayment:5561.53,monthlyPayment:0,totalPayment:21633.48,currentPortion:56155.76,category:"other"},{id:"ds-re1",description:"Guar. RE Loan 8295",lender:"Security Bank",entity:"Chad Koch",interestRate:4.5,rateType:"Fixed",amYears:23,security:"N1/2 SE 1/4 Sec 12",rateMaturity:"2043-04-01",maturity:"2043-04-12",accruedInterest:8204.69,principalAmount:238687.97,principalPayment:5464.15,interestPayment:10740.96,monthlyPayment:0,totalPayment:16205.11,currentPortion:233223.82,category:"realEstate"},{id:"ds-re2",description:"73.5 Acres Joint w/FSA",lender:"Cedar Security",entity:"Chad Koch",interestRate:5,rateType:"Fixed",amYears:21,security:"79.5 Acres",rateMaturity:"2046-02-01",maturity:"2046-02-01",accruedInterest:223.32,principalAmount:204255.85,principalPayment:4423.78,interestPayment:10212.79,monthlyPayment:0,totalPayment:14636.57,currentPortion:199832.07,category:"realEstate"},{id:"ds-re3",description:"FSA 73.5 Acres Joint 41-12",lender:"FSA",entity:"Chad Koch",interestRate:2.5,rateType:"Fixed",amYears:30,security:"79.5 Acres 2nd",rateMaturity:"2056-02-01",maturity:"2056-02-12",accruedInterest:4713.93,principalAmount:218487.06,principalPayment:4831.82,interestPayment:5462.18,monthlyPayment:0,totalPayment:10294,currentPortion:213655.24,category:"realEstate"},{id:"ds-re4",description:"Sherman Ground 41-20",lender:"FSA",entity:"Chad Koch",interestRate:2.8,rateType:"Fixed",amYears:25,security:"Sherman Ground",rateMaturity:"2061-12-02",maturity:"2061-12-02",accruedInterest:200.55,principalAmount:282903.27,principalPayment:7640.71,interestPayment:7921.29,monthlyPayment:0,totalPayment:15562,currentPortion:275262.56,category:"realEstate"},{id:"ds-ps1",description:"Home Loan",lender:"Security Bank",entity:"Personal",interestRate:3.38,rateType:"Fixed",amYears:25,security:"Home",rateMaturity:"2051-05-01",maturity:"2051-05-11",accruedInterest:114.77,principalAmount:210845.59,principalPayment:5276.84,interestPayment:7116.04,monthlyPayment:1032.74,totalPayment:12392.88,currentPortion:205568.75,category:"personal"}],termDebt:[{id:"td1",description:"Apache Sprayer",lender:"SB",principal:76994.48,annualPayment:29738.83,category:"equipment"},{id:"td2",description:"Kinze Planter",lender:"SB",principal:56604.36,annualPayment:21881.77,category:"equipment"},{id:"td3",description:"Gleaner Combine",lender:"Ag Direct",principal:155320.8,annualPayment:24187.73,category:"equipment"},{id:"td4",description:"Massey Truck",lender:"AGCO",principal:121433.39,annualPayment:12173.07,category:"equipment"},{id:"td5",description:"Bred Cows",lender:"SB",principal:56155.76,annualPayment:21633.48,category:"other"},{id:"td6",description:"Cedar Security RE",lender:"CSB",principal:280787.48,annualPayment:14636.57,category:"realEstate"},{id:"td7",description:"41-12 RE Loan",lender:"FSA",principal:148424.7,annualPayment:10294,category:"realEstate"},{id:"td8",description:"41-20 FSA RE",lender:"FSA",principal:186327.36,annualPayment:15562,category:"realEstate"},{id:"td9",description:"Guar RE Loan",lender:"SB",principal:306434.15,annualPayment:16205.11,category:"realEstate"},{id:"td10",description:"Home Loan",lender:"SB",principal:205568.75,annualPayment:18e3,category:"personal"}],cashFlow:{fertilizerTypes:["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],seedUnitsPerCrop:{Corn:8e4,Soybeans:14e4,Wheat:8e5},seedCalc:{"Corn-Irrigated":{pricePerUnit:320,population:34e3},"Corn-Dryland":{pricePerUnit:300,population:28e3},"Soybeans-Dryland":{pricePerUnit:70,population:14e4},"Wheat-Dryland":{pricePerUnit:18,population:12e5}},chemicalTypes:["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],freightRates:{Corn:.35,Soybeans:.4,Wheat:.3},springPrices:{Corn:4.66,Soybeans:10.1,Wheat:5.51},springPriceYear:2026,springPricesFetched:!0,areaPrices:{Corn:{projected:4.66,harvest:4.42},Soybeans:{projected:10.1,harvest:9.85},Wheat:{projected:5.51,harvest:5.28}},countyYields:{"Cedar-Corn-Irrigated":{expected:215,actual:208},"Cedar-Corn-Dryland":{expected:165,actual:158},"Cedar-Wheat-Dryland":{expected:52,actual:48},"Dixon-Soybeans-Dryland":{expected:48,actual:45}},areaPlans:{"ent-1b":{sco:{enabled:!0,protectionFactor:100,premiumPerAcre:8.5},eco:{enabled:!0,coverageLevel:"90",protectionFactor:100,premiumPerAcre:12.25},mp:{enabled:!1},mco:{enabled:!1}},"ent-1c":{sco:{enabled:!0,protectionFactor:100,premiumPerAcre:9},eco:{enabled:!1},mp:{enabled:!0,coverageLevel:80,protectionFactor:100,premiumPerAcre:6.75,expectedInputCosts:425,harvestInputCosts:445},mco:{enabled:!0,triggerLevel:90,premiumPerAcre:3.25}}},crops:[{id:"crop-1",fieldName:"North Quarter",crop:"Corn",practice:"Irrigated",county:"Cedar",entity:"ent-1b",plannedAcres:156,sharePercent:100,aph:220,ownership:"Owned",landOwner:"Joe Farmer",legalId:"NE 1/4 Sec 12",assessorNumber:"12-34-567",reTaxPerAcre:45,totalReTax:7020,seedPerAcre:127.06,seedTreatmentPerAcre:12,fertilizerCosts:{"Starter Fertilizer":28,"Liquid Fertilizer":85,"Dry Fertilizer":45,"Pivot Solution":22,"Foliar Fertilizer":15},fertAppCostPerAcre:18,chemicalCosts:{"Pre Emerge Herbicide":32,"Post Emerge Herbicide":28,Fungicide:22,Insecticide:15},chemAppCostPerAcre:14,irrigationCostPerAcre:85,irrigationEnergyType:"Electric",mpciElection:{planType:"RP",coverageLevel:80,projectedPrice:4.66,premiumPerAcre:28.5},areaPlan:{scoEnabled:!0,scoPerAcre:4.25,ecoEnabled:!0,ecoLevel:"95",ecoPerAcre:8.5},privateInsurance:{hailEnabled:!0,hailCoverage:"100",hailPerAcre:9.25,windEnabled:!0,windPerAcre:2.5},insurance:{Multiperil:{enabled:!0,perAcre:32,totalCost:0,useTotal:!1},Hail:{enabled:!0,perAcre:8,totalCost:0,useTotal:!1},ECO:{enabled:!0,perAcre:12,totalCost:0,useTotal:!1}}},{id:"crop-2",fieldName:"South 80",crop:"Corn",practice:"Dryland",county:"Cedar",entity:"ent-1b",plannedAcres:78,sharePercent:100,aph:165,ownership:"Rented",landOwner:"Smith Trust",legalId:"S 1/2 SE 1/4 Sec 13",assessorNumber:"13-22-891",rentPerAcre:225,totalRent:17550,seedPerAcre:107.14,seedTreatmentPerAcre:10,fertilizerCosts:{"Starter Fertilizer":25,"Dry Fertilizer":65,"Foliar Fertilizer":12},fertAppCostPerAcre:15,chemicalCosts:{"Pre Emerge Herbicide":28,"Post Emerge Herbicide":24,Insecticide:12},chemAppCostPerAcre:12,mpciElection:{planType:"RP",coverageLevel:75,projectedPrice:4.66,premiumPerAcre:22},areaPlan:{scoEnabled:!1,scoPerAcre:0,ecoEnabled:!1,ecoLevel:"90",ecoPerAcre:0},privateInsurance:{hailEnabled:!0,hailCoverage:"75",hailPerAcre:6.5,windEnabled:!1,windPerAcre:0},insurance:{Multiperil:{enabled:!0,perAcre:28,totalCost:0,useTotal:!1},Hail:{enabled:!0,perAcre:6,totalCost:0,useTotal:!1}}},{id:"crop-3",fieldName:"River Bottom",crop:"Soybeans",practice:"Dryland",county:"Dixon",entity:"ent-1b",plannedAcres:124,sharePercent:100,aph:52,ownership:"Owned",landOwner:"Joe Farmer",legalId:"W 1/2 NW 1/4 Sec 24",assessorNumber:"24-11-332",reTaxPerAcre:38,totalReTax:4712,seedPerAcre:50,seedTreatmentPerAcre:8,fertilizerCosts:{"Starter Fertilizer":18,"Dry Fertilizer":35},fertAppCostPerAcre:12,chemicalCosts:{"Pre Emerge Herbicide":22,"Post Emerge Herbicide":18,Fungicide:15},chemAppCostPerAcre:10,mpciElection:{planType:"RP",coverageLevel:80,projectedPrice:10.1,premiumPerAcre:18.75},areaPlan:{scoEnabled:!0,scoPerAcre:3.5,ecoEnabled:!1,ecoLevel:"90",ecoPerAcre:0},privateInsurance:{hailEnabled:!0,hailCoverage:"100",hailPerAcre:7.5,windEnabled:!1,windPerAcre:0}},{id:"crop-4",fieldName:"West Field",crop:"Corn",practice:"Irrigated",county:"Cedar",entity:"ent-1c",plannedAcres:210,sharePercent:66.67,aph:235,ownership:"Shared",landOwner:"Johnson Family",legalId:"NW 1/4 Sec 8",assessorNumber:"08-55-123",seedPerAcre:127.06,seedTreatmentPerAcre:12,fertilizerCosts:{"Starter Fertilizer":28,"Liquid Fertilizer":90,"Dry Fertilizer":48,"Pivot Solution":25,"Foliar Fertilizer":18},fertAppCostPerAcre:18,chemicalCosts:{"Pre Emerge Herbicide":35,"Post Emerge Herbicide":30,Fungicide:25,Insecticide:18},chemAppCostPerAcre:14,irrigationCostPerAcre:92,irrigationEnergyType:"Diesel",mpciElection:{planType:"RP",coverageLevel:85,projectedPrice:4.66,premiumPerAcre:35},areaPlan:{scoEnabled:!1,scoPerAcre:0,ecoEnabled:!0,ecoLevel:"95",ecoPerAcre:10.25,marginPlan:"mp",marginCoverage:"80",marginPerAcre:6.75},privateInsurance:{hailEnabled:!0,hailCoverage:"100",hailPerAcre:11,windEnabled:!0,windPerAcre:3.25}},{id:"crop-5",fieldName:"Home Place",crop:"Wheat",practice:"Dryland",county:"Cedar",entity:"ent-1a",plannedAcres:95,sharePercent:100,aph:48,ownership:"Owned",landOwner:"Joe Farmer",legalId:"SE 1/4 Sec 5",assessorNumber:"05-88-221",reTaxPerAcre:32,totalReTax:3040,seedPerAcre:22.5,seedTreatmentPerAcre:4,fertilizerCosts:{"Starter Fertilizer":15,"Dry Fertilizer":55},fertAppCostPerAcre:10,chemicalCosts:{"Post Emerge Herbicide":18,Fungicide:20},chemAppCostPerAcre:8,mpciElection:{planType:"RP",coverageLevel:75,projectedPrice:5.51,premiumPerAcre:12.5},areaPlan:{scoEnabled:!1,scoPerAcre:0,ecoEnabled:!1,ecoLevel:"90",ecoPerAcre:0},privateInsurance:{hailEnabled:!0,hailCoverage:"50",hailPerAcre:4,windEnabled:!1,windPerAcre:0}},{id:"crop-6",fieldName:"East 120",crop:"Soybeans",practice:"Dryland",county:"Dixon",entity:"ent-1b",plannedAcres:118,sharePercent:100,aph:48,ownership:"Rented",landOwner:"Miller Estate",legalId:"E 1/2 NE 1/4 Sec 19",assessorNumber:"19-44-667",rentPerAcre:195,totalRent:23010,seedPerAcre:50,seedTreatmentPerAcre:8,fertilizerCosts:{"Starter Fertilizer":18,"Dry Fertilizer":32},fertAppCostPerAcre:12,chemicalCosts:{"Pre Emerge Herbicide":20,"Post Emerge Herbicide":16,Insecticide:10},chemAppCostPerAcre:10,mpciElection:{planType:"RP",coverageLevel:80,projectedPrice:10.1,premiumPerAcre:17.25},areaPlan:{scoEnabled:!0,scoPerAcre:3.25,ecoEnabled:!1,ecoLevel:"90",ecoPerAcre:0},privateInsurance:{hailEnabled:!0,hailCoverage:"75",hailPerAcre:5.75,windEnabled:!1,windPerAcre:0}}],customFeeding:{sizeScope:{yardCapacity:2500,January:{projected:71250,actual:68500},February:{projected:65e3,actual:62300},March:{projected:72500,actual:70100},April:{projected:69e3,actual:67800},May:{projected:73500,actual:71200},June:{projected:7e4,actual:68900},July:{projected:74500,actual:72e3},August:{projected:75e3,actual:73500},September:{projected:72e3,actual:70800},October:{projected:76e3,actual:74200},November:{projected:73e3,actual:71500},December:{projected:75500,actual:73800}},feedingSummary:{currentHead:2350,headDays:72850,avgDaysOnFeed:145,estimatedADG:3.25,totalLbFed:185e4,totalDryMatterFed:148e4,currentEstAvgWeight:1150,estimatedBreakEvenCWT:168.5},feedInventory:[{id:"feed-1",feedType:"Corn",asFedAmount:85e4,dryMatterPercent:88,pricePerTon:185,totalCost:78625},{id:"feed-2",feedType:"DDGS",asFedAmount:425e3,dryMatterPercent:90,pricePerTon:165,totalCost:35063},{id:"feed-3",feedType:"Hay",asFedAmount:32e4,dryMatterPercent:85,pricePerTon:145,totalCost:23200},{id:"feed-4",feedType:"Silage",asFedAmount:255e3,dryMatterPercent:35,pricePerTon:45,totalCost:5738}],expenses:{feed:142626,yardage:54638,delivery:8500,managementFee:3650,insurance:2850,processing:4700,vetMed:6200,bedding:3400,profitShare:0},revenue:{yardageRatePerDay:.75,feedMarkupIncome:28500,processingIncome:18500,vetMedIncome:12200,interestIncome:8750,beddingIncome:6400,otherIncome:4850}},customFarming:{jobs:[{id:"job-1",jobType:"Planting",crop:"Corn",acresPlanned:2500,ratePerAcre:22.5,notes:""},{id:"job-2",jobType:"Spraying",crop:"",acresPlanned:4200,ratePerAcre:12,notes:""},{id:"job-3",jobType:"Harvesting (Combining)",crop:"Corn",acresPlanned:3100,ratePerAcre:38,notes:""}],expenses:{fuel:18500,labor:32e3,depreciation:45e3,debtPrincipal:28e3,debtInterest:8500,repairs:12500,insurance:6800,utilities:2400,supplies:3200,licenseFees:1500,professional:2e3,other:1800}},marketing:{byCrop:{}}}},{id:"bs-2023",clientId:"client-1",entityId:"ent-1a",date:"2023-01-08",createdAt:"2023-01-08T10:00:00Z",adjustment:0,currentAssets:{cash:[{id:"c1",description:"All Accounts",amount:5e3}],accountsReceivable:[{id:"ar1",description:"Various",amount:45e3}],commodityAccounts:[],cropInventory:[{id:"ci1",description:"Corn",quantity:1e5,unit:"bu",pricePerUnit:4.5,totalValue:45e4}],feedInventory:[{id:"fi1",description:"Hay & Feed",quantity:100,unit:"ton",pricePerUnit:80,totalValue:8e3}],marketLivestock:[{id:"ml1",description:"Feeder Cattle",headCount:60,weightPerHead:800,pricePerCwt:250,totalValue:12e4}],growingCrop:[{id:"gc1",description:"Corn",acres:450,pricePerAcre:85,totalValue:38250},{id:"gc2",description:"Soybeans",acres:380,pricePerAcre:65,totalValue:24700}],prepaidExpenses:[{id:"pe1",description:"Prepaids",amount:4639.14}],otherCurrentAssets:[]},intermediateAssets:{machinery:[{id:"m1",description:"Various Equipment",year:2020,serial:"",priorValue:85e4,currentValue:765e3,depRate:.1}],vehicles:[{id:"v1",description:"Various Vehicles",year:2020,serial:"",priorValue:85e3,currentValue:76500,depRate:.1}],breedingLivestock:[{id:"bl1",type:"Cows",description:"Cow Herd",quantity:65,valuePerHead:2800,totalValue:182e3}]},longTermAssets:{realEstate:[{id:"re1",description:"All Parcels",county:"Cedar/Dixon",totalAcres:175.77,irrAcres:61.77,dryAcres:114,otherAcres:0,value:1135605,taxValue:1135605,annualTaxes:7975}],buildings:[{id:"b1",description:"All Buildings",year:2015,priorValue:5e4,currentValue:45e3,depRate:.1}],otherLongTerm:[{id:"ol1",description:"Co-op Stock & Other",priorValue:4e5,currentValue:42e4}]},currentLiabilities:{accountsPayable:[],outstandingChecks:[],creditCardDebt:[],operatingLine:45e4,currentPortionTermDebt:85e3,accruedInterest:43515.15,otherCurrentLiabilities:[]},debtService:[{id:"ds1",description:"Equipment Loans",lender:"Various",paymentFrequency:"Annual",paymentDate:"",principalPaid:75e3,interestPaid:2e4,totalPaid:95e3,included:!0,notes:"",begCurrentPortion:8e4,endCurrentPortion:85e3,category:"equipment"},{id:"ds2",description:"Real Estate Loans",lender:"Various",paymentFrequency:"Annual",paymentDate:"",principalPaid:35e3,interestPaid:17e3,totalPaid:52e3,included:!0,notes:"",begCurrentPortion:32e3,endCurrentPortion:35e3,category:"realEstate"},{id:"ds3",description:"Other Loans",lender:"Various",paymentFrequency:"Annual",paymentDate:"",principalPaid:18e3,interestPaid:7e3,totalPaid:25e3,included:!0,notes:"",begCurrentPortion:15e3,endCurrentPortion:18e3,category:"other"}],termDebt:[{id:"td1",description:"Equipment Loans",lender:"Various",principal:45e4,annualPayment:95e3,category:"equipment"},{id:"td2",description:"Real Estate Loans",lender:"Various",principal:85e4,annualPayment:52e3,category:"realEstate"},{id:"td3",description:"Other Loans",lender:"Various",principal:18e4,annualPayment:25e3,category:"other"}]},{id:"bs-2024-llc",clientId:"client-1",entityId:"ent-1b",date:"2024-01-03",createdAt:"2024-01-03T10:00:00Z",adjustment:0,currentAssets:{cash:[{id:"c1",description:"LLC Operating Account",amount:125e3}],accountsReceivable:[{id:"ar1",description:"Contract Payments",amount:45e3}],commodityAccounts:[],cropInventory:[{id:"ci1",description:"Corn",quantity:5e4,unit:"bu",pricePerUnit:4.5,totalValue:225e3}],feedInventory:[],marketLivestock:[],growingCrop:[],prepaidExpenses:[{id:"pe1",description:"Seed & Chemicals",amount:35e3}],otherCurrentAssets:[]},intermediateAssets:{machinery:[{id:"m1",description:"JD 8R Truck",year:2022,serial:"JD8R-2022",priorValue:285e3,currentValue:256500,depRate:.1},{id:"m2",description:"Case IH Combine",year:2021,serial:"CIH-2021",priorValue:35e4,currentValue:315e3,depRate:.1}],vehicles:[],breedingLivestock:[]},longTermAssets:{realEstate:[{id:"re1",description:"LLC Farm Ground",county:"Cedar County",totalAcres:320,irrAcres:280,dryAcres:40,otherAcres:0,value:256e4,taxValue:256e4,annualTaxes:12800,marketValue:256e4}],buildings:[{id:"b1",description:"Equipment Shed",year:2020,priorValue:85e3,currentValue:76500,depRate:.1}],otherLongTerm:[{id:"ol1",description:"Co-op Investment",priorValue:25e3,currentValue:27500}]},currentLiabilities:{accountsPayable:[{id:"ap1",description:"Input Suppliers",amount:18e3}],outstandingChecks:[],creditCardDebt:[],operatingLine:15e4,currentPortionTermDebt:45e3,accruedInterest:8500,otherCurrentLiabilities:[]},debtService:[{id:"ds1",description:"Equipment Loan",lender:"AgriBank",entity:"JF Farms LLC",interestRate:5.25,rateType:"Fixed",amYears:7,security:"Equipment",rateMaturity:"2029-01-15",maturity:"2029-01-15",accruedInterest:4500,principalAmount:185e3,principalPayment:26500,interestPayment:9700,monthlyPayment:0,totalPayment:36200,currentPortion:158500,category:"equipment"},{id:"ds2",description:"Land Purchase",lender:"FSA",entity:"JF Farms LLC",interestRate:3.5,rateType:"Fixed",amYears:30,security:"Real Estate",rateMaturity:"2052-03-01",maturity:"2052-03-01",accruedInterest:4e3,principalAmount:12e5,principalPayment:28e3,interestPayment:42e3,monthlyPayment:0,totalPayment:7e4,currentPortion:1172e3,category:"realEstate"}],termDebt:[{id:"td1",description:"Equipment Loan",lender:"AgriBank",principal:185e3,annualPayment:36200,category:"equipment"},{id:"td2",description:"Land Loan",lender:"FSA",principal:12e5,annualPayment:7e4,category:"realEstate"}]}]},h=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t||0),ys=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Ye=t=>{var ke,Je,Ze,Er,sr,hr,it,Ft,J,Xe,re,xt,Ir,Pn,Pe,ze,Es,Lt,hs,s,Qe,ve,Cn,I,_t,pr,nr,Jt,Is,Ss,gt,Rs,$s,Sr,Ms,Us,Os,zs,Vs,Ea,Ia,Fn,An,kn,Dn,Tn,Ln,En,In,Sn,Rn,$n;if(!t)return{};const r=((Je=(ke=t.currentAssets)==null?void 0:ke.cash)==null?void 0:Je.reduce((je,Ne)=>je+(Ne.amount||0),0))||0,n=((Er=(Ze=t.currentAssets)==null?void 0:Ze.accountsReceivable)==null?void 0:Er.reduce((je,Ne)=>je+(Ne.amount||0),0))||0,l=((hr=(sr=t.currentAssets)==null?void 0:sr.commodityAccounts)==null?void 0:hr.reduce((je,Ne)=>je+(Ne.amount||0),0))||0,c=((Ft=(it=t.currentAssets)==null?void 0:it.cropInventory)==null?void 0:Ft.reduce((je,Ne)=>je+(Ne.totalValue||Ne.amount||0),0))||0,x=((Xe=(J=t.currentAssets)==null?void 0:J.feedInventory)==null?void 0:Xe.reduce((je,Ne)=>je+(Ne.totalValue||Ne.amount||0),0))||0,f=((xt=(re=t.currentAssets)==null?void 0:re.marketLivestock)==null?void 0:xt.reduce((je,Ne)=>je+(Ne.totalValue||Ne.amount||0),0))||0,v=((Pn=(Ir=t.currentAssets)==null?void 0:Ir.growingCrop)==null?void 0:Pn.reduce((je,Ne)=>je+(Ne.totalValue||Ne.amount||0),0))||0,P=((ze=(Pe=t.currentAssets)==null?void 0:Pe.prepaidExpenses)==null?void 0:ze.reduce((je,Ne)=>je+(Ne.amount||0),0))||0,$=((Lt=(Es=t.currentAssets)==null?void 0:Es.otherCurrentAssets)==null?void 0:Lt.reduce((je,Ne)=>je+(Ne.amount||0),0))||0,te=r+n+l+c+x+f+v+P+$,ee=((s=(hs=t.intermediateAssets)==null?void 0:hs.machinery)==null?void 0:s.reduce((je,Ne)=>je+(Ne.currentValue||0),0))||0,Z=((ve=(Qe=t.intermediateAssets)==null?void 0:Qe.vehicles)==null?void 0:ve.reduce((je,Ne)=>je+(Ne.currentValue||0),0))||0,le=((I=(Cn=t.intermediateAssets)==null?void 0:Cn.breedingLivestock)==null?void 0:I.reduce((je,Ne)=>je+(Ne.totalValue||0),0))||0,ae=ee+Z+le,oe=((pr=(_t=t.longTermAssets)==null?void 0:_t.realEstate)==null?void 0:pr.reduce((je,Ne)=>je+(Ne.marketValue||Ne.value||0),0))||0,De=((Jt=(nr=t.longTermAssets)==null?void 0:nr.buildings)==null?void 0:Jt.reduce((je,Ne)=>je+(Ne.currentValue||0),0))||0,V=((Ss=(Is=t.longTermAssets)==null?void 0:Is.otherLongTerm)==null?void 0:Ss.reduce((je,Ne)=>je+(Ne.currentValue||Ne.amount||0),0))||0,D=oe+De+V,H=te+ae+D,se=Array.isArray((gt=t.currentLiabilities)==null?void 0:gt.accountsPayable)?t.currentLiabilities.accountsPayable.reduce((je,Ne)=>je+(Ne.amount||0),0):((Rs=t.currentLiabilities)==null?void 0:Rs.accountsPayable)||0,ue=Array.isArray(($s=t.currentLiabilities)==null?void 0:$s.outstandingChecks)?t.currentLiabilities.outstandingChecks.reduce((je,Ne)=>je+(Ne.amount||0),0):((Sr=t.currentLiabilities)==null?void 0:Sr.outstandingChecks)||0,pe=Array.isArray((Ms=t.currentLiabilities)==null?void 0:Ms.creditCardDebt)?t.currentLiabilities.creditCardDebt.reduce((je,Ne)=>je+(Ne.amount||0),0):((Us=t.currentLiabilities)==null?void 0:Us.creditCardDebt)||0,ge=se+ue+pe+(((Os=t.currentLiabilities)==null?void 0:Os.operatingLine)||0)+(((zs=t.currentLiabilities)==null?void 0:zs.currentPortionTermDebt)||0)+(((Vs=t.currentLiabilities)==null?void 0:Vs.accruedInterest)||0)+(((Ia=(Ea=t.currentLiabilities)==null?void 0:Ea.otherCurrentLiabilities)==null?void 0:Ia.reduce((je,Ne)=>je+(Ne.amount||0),0))||0),ye=((Fn=t.termDebt)==null?void 0:Fn.filter(je=>je.category==="equipment").reduce((je,Ne)=>je+(Ne.principal||0),0))||0,He=((An=t.termDebt)==null?void 0:An.filter(je=>je.category==="realEstate").reduce((je,Ne)=>je+(Ne.principal||0),0))||0,Ie=((kn=t.termDebt)==null?void 0:kn.filter(je=>je.category==="vehicle").reduce((je,Ne)=>je+(Ne.principal||0),0))||0,jt=((Dn=t.termDebt)==null?void 0:Dn.filter(je=>je.category==="other"||je.category==="personal").reduce((je,Ne)=>je+(Ne.principal||0),0))||0,$t=((Tn=t.termDebt)==null?void 0:Tn.reduce((je,Ne)=>je+(Ne.principal||0),0))||0,O=ge+$t,ce=H-O,Le=te-ge,Nt=((En=(Ln=t.intermediateAssets)==null?void 0:Ln.machinery)==null?void 0:En.reduce((je,Ne)=>je+(Ne.priorValue||0)*(Ne.depRate||.1),0))||0,We=((Sn=(In=t.intermediateAssets)==null?void 0:In.vehicles)==null?void 0:Sn.reduce((je,Ne)=>je+(Ne.priorValue||0)*(Ne.depRate||.1),0))||0,me=(($n=(Rn=t.longTermAssets)==null?void 0:Rn.buildings)==null?void 0:$n.reduce((je,Ne)=>je+(Ne.priorValue||0)*(Ne.depRate||.1),0))||0,Fe=Nt+We+me;return{cashTotal:r,arTotal:n,commodityTotal:l,cropInvTotal:c,feedInvTotal:x,marketLivestockTotal:f,growingCropTotal:v,prepaidTotal:P,otherCurrentTotal:$,currentAssetsTotal:te,machineryTotal:ee,vehiclesTotal:Z,breedingLivestockTotal:le,intermediateAssetsTotal:ae,realEstateTotal:oe,buildingsTotal:De,otherLongTermTotal:V,longTermAssetsTotal:D,totalAssets:H,apTotal:se,checksTotal:ue,ccTotal:pe,currentLiabilitiesTotal:ge,equipmentDebtTotal:ye,realEstateDebtTotal:He,vehicleDebtTotal:Ie,otherDebtTotal:jt,termDebtTotal:$t,totalLiabilities:O,totalEquity:ce,workingCapital:Le,currentRatio:ge>0?te/ge:0,debtToEquity:ce>0?O/ce:0,equityPercent:H>0?ce/H:0,debtToAssets:H>0?O/H:0,machineryDepreciation:Nt,vehicleDepreciation:We,buildingDepreciation:me,totalDepreciation:Fe}},or=({title:t,icon:r,children:n,defaultOpen:l=!1,total:c,color:x="blue"})=>{const[f,v]=Ee.useState(l),P={blue:"text-blue-600",green:"text-green-600",amber:"text-amber-600",purple:"text-purple-600",red:"text-red-600"};return e.jsxs("div",{className:"border border-gray-200 rounded-lg mb-3 bg-white",children:[e.jsxs("button",{onClick:()=>v(!f),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[f?e.jsx(Lc,{className:"w-4 h-4 text-gray-500"}):e.jsx(Ec,{className:"w-4 h-4 text-gray-500"}),r&&e.jsx(r,{className:`w-5 h-5 ${P[x]}`}),e.jsx("span",{className:"font-semibold text-gray-800",children:t})]}),c!==void 0&&e.jsx("span",{className:"font-mono text-sm font-semibold text-gray-700",children:h(c)})]}),f&&e.jsx("div",{className:"p-3 pt-0 border-t border-gray-100",children:n})]})},Cf=({item:t,onUpdate:r,onDelete:n,fields:l})=>e.jsxs("div",{className:"flex items-center gap-2 py-2 border-b border-gray-100 last:border-0",children:[l.map(c=>e.jsx("div",{className:`${c.width||"flex-1"} ${c.type==="currency"?"flex items-center":""}`,children:c.type==="currency"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-500 mr-1 flex-shrink-0",children:"$"}),e.jsx(ne,{value:t[c.key]||0,onChange:x=>r({...t,[c.key]:x}),placeholder:c.placeholder,className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-right font-mono"})]}):e.jsx("input",{type:c.type||"text",value:t[c.key]||"",onChange:x=>{c.type==="number"?r({...t,[c.key]:parseFloat(x.target.value)||0}):r({...t,[c.key]:x.target.value})},placeholder:c.placeholder,className:`w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 ${c.type==="number"?"text-right font-mono":""}`})},c.key)),e.jsx("button",{onClick:n,className:"p-1 text-red-500 hover:bg-red-50 rounded flex-shrink-0",children:e.jsx(nt,{className:"w-4 h-4"})})]}),Jn=({items:t,onUpdate:r,onAdd:n,onDelete:l,title:c,icon:x,color:f="blue"})=>e.jsxs(or,{title:c,icon:x,color:f,total:(t==null?void 0:t.reduce((v,P)=>v+(P.amount||0),0))||0,children:[t==null?void 0:t.map(v=>e.jsx(Cf,{item:v,onUpdate:r,onDelete:()=>l(v.id),fields:[{key:"description",placeholder:"Description",width:"flex-1"},{key:"amount",placeholder:"0.00",type:"currency",width:"w-36"}]},v.id)),e.jsxs("button",{onClick:n,className:"mt-2 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Item"]})]}),Ff=({items:t,onUpdate:r,onAdd:n,onDelete:l,title:c,icon:x,color:f="blue"})=>e.jsxs(or,{title:c,icon:x,color:f,total:(t==null?void 0:t.reduce((v,P)=>v+(P.totalValue||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Quantity"}),e.jsx("th",{className:"pb-2 font-medium w-20 text-center",children:"Unit"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Price/Unit"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Total Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:t==null?void 0:t.map(v=>e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:v.description||"",onChange:P=>r({...v,description:P.target.value}),placeholder:"e.g., Corn, Soybeans",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx($e,{value:v.quantity||0,onChange:P=>{const $=v.pricePerUnit||0;r({...v,quantity:P,totalValue:P*$})},decimals:2,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:v.unit||"bu",onChange:P=>r({...v,unit:P.target.value}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-center",children:[e.jsx("option",{value:"bu",children:"bu"}),e.jsx("option",{value:"ton",children:"ton"}),e.jsx("option",{value:"cwt",children:"cwt"}),e.jsx("option",{value:"lb",children:"lb"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:v.pricePerUnit||0,onChange:P=>{const $=v.quantity||0;r({...v,pricePerUnit:P,totalValue:$*P})},placeholder:"0.00",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:v.totalValue||0,onChange:P=>r({...v,totalValue:P}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono bg-gray-50"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>l(v.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},v.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"4",className:"py-2 px-2",children:"Total Crop Inventory"}),e.jsx("td",{className:"py-2 text-right font-mono",children:h((t==null?void 0:t.reduce((v,P)=>v+(P.totalValue||0),0))||0)}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:n,className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Crop"]})]}),Af=({items:t,onUpdate:r,onAdd:n,onDelete:l,title:c,icon:x,color:f="blue"})=>e.jsxs(or,{title:c,icon:x,color:f,total:(t==null?void 0:t.reduce((v,P)=>v+(P.totalValue||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Quantity"}),e.jsx("th",{className:"pb-2 font-medium w-20 text-center",children:"Unit"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Price/Unit"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Total Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:t==null?void 0:t.map(v=>e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:v.description||"",onChange:P=>r({...v,description:P.target.value}),placeholder:"e.g., Hay, Silage",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx($e,{value:v.quantity||0,onChange:P=>{const $=v.pricePerUnit||0;r({...v,quantity:P,totalValue:P*$})},decimals:2,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:v.unit||"ton",onChange:P=>r({...v,unit:P.target.value}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-center",children:[e.jsx("option",{value:"ton",children:"ton"}),e.jsx("option",{value:"bale",children:"bale"}),e.jsx("option",{value:"lb",children:"lb"}),e.jsx("option",{value:"bu",children:"bu"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:v.pricePerUnit||0,onChange:P=>{const $=v.quantity||0;r({...v,pricePerUnit:P,totalValue:$*P})},placeholder:"0.00",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:v.totalValue||0,onChange:P=>r({...v,totalValue:P}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono bg-gray-50"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>l(v.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},v.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"4",className:"py-2 px-2",children:"Total Feed Inventory"}),e.jsx("td",{className:"py-2 text-right font-mono",children:h((t==null?void 0:t.reduce((v,P)=>v+(P.totalValue||0),0))||0)}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:n,className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Feed"]})]}),kf=({items:t,onUpdate:r,onAdd:n,onDelete:l,title:c,icon:x,color:f="blue"})=>e.jsxs(or,{title:c,icon:x,color:f,total:(t==null?void 0:t.reduce((v,P)=>v+(P.totalValue||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-16 text-right",children:"Head"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Wt/Head"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"$/Cwt"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"$/Head"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Total Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:t==null?void 0:t.map(v=>{const P=(v.weightPerHead||0)*(v.pricePerCwt||0)/100;return e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:v.description||"",onChange:$=>r({...v,description:$.target.value}),placeholder:"e.g., Feeder Steers",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx($e,{value:v.headCount||0,onChange:$=>{const te=v.weightPerHead||0,ee=v.pricePerCwt||0,Z=te*ee/100,le=$*Z;r({...v,headCount:$,valuePerHead:Z,totalValue:le})},decimals:0,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsx($e,{value:v.weightPerHead||0,onChange:$=>{const te=v.headCount||0,ee=v.pricePerCwt||0,Z=$*ee/100,le=te*Z;r({...v,weightPerHead:$,valuePerHead:Z,totalValue:le})},decimals:0,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:v.pricePerCwt||0,onChange:$=>{const te=v.headCount||0,Z=(v.weightPerHead||0)*$/100,le=te*Z;r({...v,pricePerCwt:$,valuePerHead:Z,totalValue:le})},placeholder:"0.00",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:P?P.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",readOnly:!0,className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right bg-gray-50 font-mono",title:"Auto-calculated: Wt/Head  $/Cwt  100"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:v.totalValue||0,onChange:$=>r({...v,totalValue:$}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono bg-gray-50"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>l(v.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",children:"Total"}),e.jsx("td",{className:"py-2 text-right font-mono",children:((t==null?void 0:t.reduce((v,P)=>v+(P.headCount||0),0))||0).toLocaleString("en-US")}),e.jsx("td",{colSpan:"3"}),e.jsx("td",{className:"py-2 text-right font-mono",children:h((t==null?void 0:t.reduce((v,P)=>v+(P.totalValue||0),0))||0)}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:n,className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Livestock"]})]}),_o=({items:t,onUpdate:r,onAdd:n,onDelete:l,title:c,icon:x,color:f="amber",purchases:v,sales:P,onAddPurchase:$,onUpdatePurchase:te,onDeletePurchase:ee,onAddSale:Z,onUpdateSale:le,onDeleteSale:ae,onAddAssetFromPurchase:oe})=>{const[De,V]=Ee.useState(!1),D=(v==null?void 0:v.reduce((O,ce)=>O+(ce.totalCost||0),0))||0,H=(P==null?void 0:P.reduce((O,ce)=>O+(ce.salePrice||0),0))||0,se=(P==null?void 0:P.reduce((O,ce)=>O+(ce.gainLoss||0),0))||0,ue=$&&Z,pe=(t==null?void 0:t.filter(O=>!O.sold))||[],ge=(t==null?void 0:t.filter(O=>O.sold))||[],ye=ge.reduce((O,ce)=>O+((ce.salePrice||0)-(ce.priorValue||0)),0),He=O=>t==null?void 0:t.some(ce=>ce.linkedPurchaseId===O),Ie=(O,ce)=>{if(!Z||!le||!ae)return;const Le=`sale-from-${O.id}`,Nt=P==null?void 0:P.find(We=>We.id===Le);if(ce){const We={id:Le,description:O.description||"",previousValue:O.priorValue||0,salePrice:O.salePrice||O.currentValue||0,gainLoss:(O.salePrice||O.currentValue||0)-(O.priorValue||0),saleDate:O.saleDate||new Date().toISOString().slice(0,10),linkedAssetId:O.id};le(We)}else Nt&&ae(Le)},jt=(O,ce)=>{const Le={...O,sold:ce,salePrice:ce&&(O.salePrice||O.currentValue)||0,saleDate:ce?O.saleDate||new Date().toISOString().slice(0,10):""};r(Le),ce?Ie(Le,!0):Ie(O,!1)},$t=(O,ce,Le)=>{const Nt={...O,[ce]:Le};if(r(Nt),O.sold&&le){const We=`sale-from-${O.id}`,me=(ce==="salePrice"?Le:O.salePrice||0)-(O.priorValue||0);le({id:We,description:O.description||"",previousValue:O.priorValue||0,salePrice:ce==="salePrice"?Le:O.salePrice||0,gainLoss:me,saleDate:ce==="saleDate"?Le:O.saleDate||"",linkedAssetId:O.id})}};return e.jsxs(or,{title:c,icon:x,color:f,total:pe.reduce((O,ce)=>O+(ce.currentValue||0),0),children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium w-10 text-center",children:"Sold"}),e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-24",children:"Enterprise"}),e.jsx("th",{className:"pb-2 font-medium w-12 text-center",children:"Qty"}),e.jsx("th",{className:"pb-2 font-medium w-20 text-center",children:"Condition"}),e.jsx("th",{className:"pb-2 font-medium w-16 text-center",children:"Year"}),e.jsx("th",{className:"pb-2 font-medium w-24",children:"Serial #"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-center",children:"Date Acq"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Value"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Dep%"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Depreciation"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Bal Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:t==null?void 0:t.map(O=>e.jsxs(C0.Fragment,{children:[e.jsxs("tr",{className:`border-b border-gray-50 ${O.sold?"bg-amber-50":""}`,children:[e.jsx("td",{className:"py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:O.sold||!1,onChange:ce=>jt(O,ce.target.checked),className:"w-4 h-4 text-amber-600 rounded border-gray-300 focus:ring-amber-500 cursor-pointer"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:O.description||"",onChange:ce=>r({...O,description:ce.target.value}),className:`w-full px-2 py-1 border border-gray-200 rounded text-sm ${O.sold?"bg-amber-50 line-through text-gray-500":""}`})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:O.enterprise||"",onChange:ce=>r({...O,enterprise:ce.target.value}),placeholder:"Enterprise",disabled:O.sold,className:`w-full px-2 py-1 border border-gray-200 rounded text-sm ${O.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:O.quantity||1,onChange:ce=>r({...O,quantity:parseInt(ce.target.value)||1}),disabled:O.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm text-center ${O.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:O.condition||"Good",onChange:ce=>r({...O,condition:ce.target.value}),disabled:O.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm text-center ${O.sold?"bg-gray-100 text-gray-400":""}`,children:[e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Excellent",children:"Excellent"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Poor",children:"Poor"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:O.year||"",onChange:ce=>r({...O,year:parseInt(ce.target.value)||""}),placeholder:"YYYY",disabled:O.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm text-center ${O.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:O.serial||"",onChange:ce=>r({...O,serial:ce.target.value}),placeholder:"Serial #",disabled:O.sold,className:`w-full px-2 py-1 border border-gray-200 rounded text-sm ${O.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"date",value:O.dateAcquired||"",onChange:ce=>r({...O,dateAcquired:ce.target.value}),disabled:O.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm ${O.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:O.priorValue||0,onChange:ce=>{const Le=O.depRate||.1;r({...O,priorValue:ce,currentValue:ce*(1-Le)})},disabled:O.sold,className:`w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono ${O.sold?"bg-gray-100 text-gray-400":""}`})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:(O.depRate||.1)*100,onChange:ce=>{const Le=parseFloat(ce.target.value)/100||.1;r({...O,depRate:Le,currentValue:(O.priorValue||0)*(1-Le)})},disabled:O.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm text-right ${O.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:`py-2 text-right font-mono ${O.sold?"text-gray-400":"text-red-600"}`,children:O.sold?"":`($${((O.priorValue||0)*(O.depRate||.1)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})`}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:O.sold?0:O.currentValue||0,onChange:ce=>r({...O,currentValue:ce}),disabled:O.sold,className:`w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono ${O.sold?"bg-gray-100 text-gray-400":"bg-gray-50"}`})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>l(O.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]}),O.sold&&e.jsx("tr",{className:"bg-amber-100 border-b border-amber-200",children:e.jsx("td",{colSpan:"13",className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Sale Date:"}),e.jsx("input",{type:"date",value:O.saleDate||"",onChange:ce=>$t(O,"saleDate",ce.target.value),className:"px-2 py-1 border border-amber-300 rounded text-sm bg-white"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Sale Price:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-amber-600 mr-1",children:"$"}),e.jsx(ne,{value:O.salePrice||0,onChange:ce=>$t(O,"salePrice",ce),className:"w-32 px-2 py-1 border border-amber-300 rounded text-sm text-right font-mono bg-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Book Value:"}),e.jsxs("span",{className:"font-mono text-sm",children:["$",(O.priorValue||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto bg-white rounded-lg px-4 py-2 border border-amber-300",children:[e.jsx("span",{className:"text-sm font-semibold text-amber-900",children:(O.salePrice||0)>=(O.priorValue||0)?"Gain:":"Loss:"}),e.jsxs("span",{className:`font-mono font-bold text-lg ${(O.salePrice||0)>=(O.priorValue||0)?"text-green-600":"text-red-600"}`,children:[(O.salePrice||0)>=(O.priorValue||0)?"+":"","$",((O.salePrice||0)-(O.priorValue||0)).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx("div",{className:"text-xs text-amber-700 bg-amber-200 px-2 py-1 rounded",children:" Synced to Capital Activity"})]})})})]},O.id))}),e.jsxs("tfoot",{children:[(()=>{const O=[...new Set(pe.map(ce=>ce.enterprise||"Unassigned"))].sort();return O.length>1||O.length===1&&O[0]!=="Unassigned"?O.map(ce=>{const Le=pe.filter(Fe=>(Fe.enterprise||"Unassigned")===ce),Nt=Le.reduce((Fe,ke)=>Fe+(ke.priorValue||0),0),We=Le.reduce((Fe,ke)=>Fe+(ke.priorValue||0)*(ke.depRate||.1),0),me=Le.reduce((Fe,ke)=>Fe+(ke.currentValue||0),0);return e.jsxs("tr",{className:"bg-blue-50 text-blue-800 border-b border-blue-100",children:[e.jsx("td",{className:"py-1 px-2"}),e.jsx("td",{colSpan:"6",className:"py-1 px-2 font-medium",children:ce}),e.jsxs("td",{className:"py-1 text-right font-mono text-sm",children:["$",Nt.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{}),e.jsxs("td",{className:"py-1 text-right font-mono text-sm text-red-600",children:["($",We.toLocaleString("en-US",{minimumFractionDigits:2}),")"]}),e.jsxs("td",{className:"py-1 text-right font-mono text-sm",children:["$",me.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{})]},ce)}):null})(),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2"}),e.jsx("td",{colSpan:"6",className:"py-2 px-2",children:"Active Items Total"}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",pe.reduce((O,ce)=>O+(ce.priorValue||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{}),e.jsxs("td",{className:"py-2 text-right font-mono text-red-600",children:["($",pe.reduce((O,ce)=>O+(ce.priorValue||0)*(ce.depRate||.1),0).toLocaleString("en-US",{minimumFractionDigits:2}),")"]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",pe.reduce((O,ce)=>O+(ce.currentValue||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{})]}),ge.length>0&&e.jsxs("tr",{className:"font-semibold bg-amber-50 text-amber-800",children:[e.jsx("td",{className:"py-2 px-2"}),e.jsxs("td",{colSpan:"6",className:"py-2 px-2",children:["Sold Items (",ge.length,")  Total Sales: $",ge.reduce((O,ce)=>O+(ce.salePrice||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{colSpan:"3",className:"py-2 text-right",children:["Book Value: $",ge.reduce((O,ce)=>O+(ce.priorValue||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:`py-2 text-right font-mono ${ye>=0?"text-green-600":"text-red-600"}`,children:[ye>=0?"Gain: +":"Loss: ","$",Math.abs(ye).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{})]})]})]})}),e.jsxs("button",{onClick:n,className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Item"]}),ue&&e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[e.jsxs("button",{onClick:()=>V(!De),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:[De?e.jsx(Lc,{className:"w-4 h-4"}):e.jsx(Ec,{className:"w-4 h-4"}),e.jsx(st,{className:"w-4 h-4 text-purple-600"}),"Capital Activity",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Purchases: $",D.toLocaleString()," | Sales: $",H.toLocaleString(),")"]})]}),De&&e.jsxs("div",{className:"mt-3 space-y-4 pl-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-green-800 mb-2 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"})," Purchases"]}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-green-700 border-b border-green-200",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Cash Paid"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Financed"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Total Cost"}),oe&&e.jsx("th",{className:"pb-2 font-medium w-28 text-center",children:"Add to Inventory"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:v==null?void 0:v.map(O=>{const ce=He(O.id);return e.jsxs("tr",{className:`border-b border-green-100 ${ce?"bg-blue-50":""}`,children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ce&&e.jsx("span",{className:"text-xs bg-blue-200 text-blue-800 px-1.5 py-0.5 rounded",title:"Added to inventory above",children:""}),e.jsx("input",{type:"text",value:O.description||"",onChange:Le=>te({...O,description:Le.target.value}),className:`w-full px-2 py-1 border border-green-200 rounded text-sm ${ce?"bg-blue-50":""}`,placeholder:"Item description"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:O.cashPaid||0,onChange:Le=>{te({...O,cashPaid:Le,totalCost:Le+(O.financedAmount||0)})},className:"w-full px-2 py-1 border border-green-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:O.financedAmount||0,onChange:Le=>{te({...O,financedAmount:Le,totalCost:(O.cashPaid||0)+Le})},className:"w-full px-2 py-1 border border-green-200 rounded text-sm text-right font-mono"})]})}),e.jsxs("td",{className:"py-2 text-right font-mono font-semibold text-green-700",children:["$",(O.totalCost||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),oe&&e.jsx("td",{className:"py-2 text-center",children:ce?e.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:" In Inventory"}):e.jsxs("button",{onClick:()=>oe(O),disabled:!O.description||!O.totalCost,className:`text-xs px-2 py-1 rounded flex items-center gap-1 mx-auto ${O.description&&O.totalCost?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,title:!O.description||!O.totalCost?"Enter description and cost first":"Add to asset inventory above",children:[e.jsx(Ve,{className:"w-3 h-3"})," Add "]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>ee(O.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},O.id)})}),(v==null?void 0:v.length)>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-green-100",children:[e.jsx("td",{className:"py-2 px-2",children:"Total Purchases"}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",v.reduce((O,ce)=>O+(ce.cashPaid||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",v.reduce((O,ce)=>O+(ce.financedAmount||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 text-right font-mono text-green-700",children:["$",D.toLocaleString("en-US",{minimumFractionDigits:2})]}),oe&&e.jsx("td",{}),e.jsx("td",{})]})})]}),e.jsxs("button",{onClick:$,className:"mt-2 text-sm text-green-600 hover:text-green-800 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Purchase"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-orange-800 mb-2 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"})," Sales / Trades"]}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-orange-700 border-b border-orange-200",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Previous Value"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Sale/Trade Price"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Gain/(Loss)"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:P==null?void 0:P.map(O=>{var Nt;const ce=(O.salePrice||0)-(O.previousValue||0),Le=O.linkedAssetId||((Nt=O.id)==null?void 0:Nt.startsWith("sale-from-"));return e.jsxs("tr",{className:`border-b border-orange-100 ${Le?"bg-amber-50":""}`,children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Le&&e.jsx("span",{className:"text-xs bg-amber-200 text-amber-800 px-1.5 py-0.5 rounded",title:"Linked from asset list",children:""}),e.jsx("input",{type:"text",value:O.description||"",onChange:We=>le({...O,description:We.target.value}),className:`w-full px-2 py-1 border border-orange-200 rounded text-sm ${Le?"bg-amber-50":""}`,placeholder:"Item description",readOnly:Le})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:O.previousValue||0,onChange:We=>{const me=(O.salePrice||0)-We;le({...O,previousValue:We,gainLoss:me})},disabled:Le,className:`w-full px-2 py-1 border border-orange-200 rounded text-sm text-right font-mono ${Le?"bg-amber-50":""}`})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:O.salePrice||0,onChange:We=>{const me=We-(O.previousValue||0);le({...O,salePrice:We,gainLoss:me})},disabled:Le,className:`w-full px-2 py-1 border border-orange-200 rounded text-sm text-right font-mono ${Le?"bg-amber-50":""}`})]})}),e.jsxs("td",{className:`py-2 text-right font-mono font-semibold ${ce>=0?"text-green-600":"text-red-600"}`,children:[ce>=0?"":"(","$",Math.abs(ce).toLocaleString("en-US",{minimumFractionDigits:2}),ce>=0?"":")"]}),e.jsx("td",{className:"py-2",children:Le?e.jsx("span",{className:"text-xs text-amber-600",title:"Uncheck 'Sold' on asset to remove",children:""}):e.jsx("button",{onClick:()=>ae(O.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},O.id)})}),(P==null?void 0:P.length)>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-orange-100",children:[e.jsx("td",{className:"py-2 px-2",children:"Total Sales"}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",P.reduce((O,ce)=>O+(ce.previousValue||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",H.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:`py-2 text-right font-mono font-semibold ${se>=0?"text-green-600":"text-red-600"}`,children:[se>=0?"":"(","$",Math.abs(se).toLocaleString("en-US",{minimumFractionDigits:2}),se>=0?"":")"]}),e.jsx("td",{})]})})]}),e.jsxs("button",{onClick:Z,className:"mt-2 text-sm text-orange-600 hover:text-orange-800 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Sale/Trade"]})]})]})]})]})};function Df(){var Fn,An,kn,Dn,Tn,Ln,En,In,Sn,Rn,$n,je,Ne,Ic,Sc,Rc,$c,Mc,Uc,Oc,zc,Vc,Hc,_c,Yc,qc,Wc,Gc,Qc,Kc,Jc,Zc,Xc,Bc,ed,td,rd,sd,nd,ad,ld,od,id,cd,dd,xd,md,ud,hd,pd,gd,yd,fd,bd,jd,Nd,vd,wd,Pd,Cd,Fd,Ad,kd,Dd,Td,Ld,Ed,Id,Sd,Rd,$d,Md,Ud,Od,zd,Vd,Hd,_d,Yd,qd,Wd,Gd,Qd,Kd,Jd,Zd,Xd,Bd,ex,tx,rx,sx,nx,ax,lx,ox,ix,cx,dx,xx,mx,ux,hx,px,gx,yx,fx,bx,jx,Nx,vx,wx,Px,Cx,Fx,Ax,kx,Dx,Tx,Lx,Ex,Ix,Sx,Rx,$x,Mx,Ux,Ox,zx,Vx,Hx,_x,Yx,qx,Wx,Gx,Qx,Kx,Jx,Zx,Xx,Bx,em,tm,rm,sm,nm,am,lm,om,im,cm,dm,xm,mm,um,hm,pm,gm,ym,fm,bm,jm,Nm,vm,wm,Pm,Cm,Fm,Am,km,Dm,Tm,Lm,Em,Im,Sm,Rm,$m,Mm,Um,Om,zm,Vm,Hm,_m,Ym,qm;const[t,r]=Ee.useState("landing"),[n,l]=Ee.useState(!1),[c,x]=Ee.useState({open:!1,debtId:null,attachments:[]}),[f,v]=Ee.useState(wf),[P,$]=Ee.useState("client-1"),[te,ee]=Ee.useState(Pf),[Z,le]=Ee.useState("bs-2024"),[ae,oe]=Ee.useState("ent-1a"),[De,V]=Ee.useState("summary"),[D,H]=Ee.useState("summary"),[se,ue]=Ee.useState(null),[pe,ge]=Ee.useState("seed"),[ye,He]=Ee.useState("insuranceSummary"),[Ie,jt]=Ee.useState("positions"),[$t,O]=Ee.useState(!1),[ce,Le]=Ee.useState(null),[Nt,We]=Ee.useState(!1),[me,Fe]=Ee.useState(!1),[ke,Je]=Ee.useState("summary"),[Ze,Er]=Ee.useState("yardage"),[sr,hr]=Ee.useState(!1),[it,Ft]=Ee.useState({name:"",units:1,entities:[{name:"",type:"Operating"}]}),[J,Xe]=Ee.useState({loanType:"real-estate",name:"",lender:"",acres:160,pricePerAcre:7500,headCount:100,pricePerHead:2500,purchasePrice:15e4,downPaymentPercent:35,downPaymentAmount:0,usePercentDown:!0,interestRate:7.25,loanTerm:25,paymentFrequency:"annual",startDate:new Date().toISOString().slice(0,7),extraPayment:0,showPerUnit:!1}),re=f.find(a=>a.id===P),xt=te[P]||[],Ir=ae==="consolidated"?xt:xt.filter(a=>a.entityId===ae),Pn=[...new Set(xt.map(a=>new Date(a.date).getFullYear()))].sort((a,o)=>o-a),[Pe,ze]=Ee.useState(Pn[0]||new Date().getFullYear()),[Es,Lt]=Ee.useState({selectedDebts:[],newLoanTerms:{interestRate:7,termYears:20,amortYears:25,closingCosts:0,cashOut:0},showResults:!1}),hs=(a,o)=>{const i=a.filter(g=>new Date(g.date).getFullYear()===o);if(i.length===0)return null;if(i.length===1)return i[0];const d=(g,u="amount")=>{const j=[];return i.forEach(y=>{(g.split(".").reduce((b,N)=>b==null?void 0:b[N],y)||[]).forEach(b=>{j.push({...b,id:`${b.id}-${y.entityId}`})})}),j},m=g=>i.reduce((u,j)=>{const y=g.split(".").reduce((p,b)=>p==null?void 0:p[b],j);return u+(typeof y=="number"?y:0)},0);return{id:"consolidated",clientId:P,entityId:"consolidated",date:i[0].date,isConsolidated:!0,entitiesIncluded:i.map(g=>g.entityId),currentAssets:{cash:d("currentAssets.cash"),accountsReceivable:d("currentAssets.accountsReceivable"),commodityAccounts:d("currentAssets.commodityAccounts"),cropInventory:d("currentAssets.cropInventory","totalValue"),feedInventory:d("currentAssets.feedInventory","totalValue"),marketLivestock:d("currentAssets.marketLivestock","totalValue"),growingCrop:d("currentAssets.growingCrop","totalValue"),prepaidExpenses:d("currentAssets.prepaidExpenses"),otherCurrentAssets:d("currentAssets.otherCurrentAssets")},intermediateAssets:{machinery:d("intermediateAssets.machinery","currentValue"),vehicles:d("intermediateAssets.vehicles","currentValue"),breedingLivestock:d("intermediateAssets.breedingLivestock","totalValue")},longTermAssets:{realEstate:d("longTermAssets.realEstate","marketValue"),buildings:d("longTermAssets.buildings","currentValue"),otherLongTerm:d("longTermAssets.otherLongTerm","currentValue")},currentLiabilities:{accountsPayable:d("currentLiabilities.accountsPayable"),outstandingChecks:d("currentLiabilities.outstandingChecks"),creditCardDebt:d("currentLiabilities.creditCardDebt"),operatingLine:m("currentLiabilities.operatingLine"),currentPortionTermDebt:m("currentLiabilities.currentPortionTermDebt"),accruedInterest:m("currentLiabilities.accruedInterest"),otherCurrentLiabilities:d("currentLiabilities.otherCurrentLiabilities")},debtService:i.flatMap(g=>(g.debtService||[]).map(u=>({...u,id:`${u.id}-${g.entityId}`}))),termDebt:i.flatMap(g=>(g.termDebt||[]).map(u=>({...u,id:`${u.id}-${g.entityId}`}))),capitalActivity:{machineryPurchases:i.flatMap(g=>{var u;return((u=g.capitalActivity)==null?void 0:u.machineryPurchases)||[]}),machinerySales:i.flatMap(g=>{var u;return((u=g.capitalActivity)==null?void 0:u.machinerySales)||[]}),vehiclePurchases:i.flatMap(g=>{var u;return((u=g.capitalActivity)==null?void 0:u.vehiclePurchases)||[]}),vehicleSales:i.flatMap(g=>{var u;return((u=g.capitalActivity)==null?void 0:u.vehicleSales)||[]}),buildingPurchases:i.flatMap(g=>{var u;return((u=g.capitalActivity)==null?void 0:u.buildingPurchases)||[]}),buildingSales:i.flatMap(g=>{var u;return((u=g.capitalActivity)==null?void 0:u.buildingSales)||[]})}}},s=ae==="consolidated"?hs(xt,Pe):Ir.find(a=>a.id===Z),Qe=ae==="consolidated",ve=Ye(s),Cn=()=>{var m,g,u,j,y,p;if(ae==="consolidated"){alert("Please select a specific entity to create a new balance sheet");return}const a=new Date().toISOString().split("T")[0],o=Ir.length>0?Ir.sort((b,N)=>new Date(N.date)-new Date(b.date))[0]:null,i=b=>b?b.map(N=>({...N,id:`${N.id.split("-")[0]}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,priorValue:N.currentValue,currentValue:N.currentValue*(1-(N.depRate||.1))})):[],d={id:`bs-${Date.now()}`,clientId:P,entityId:ae,date:a,createdAt:new Date().toISOString(),adjustment:0,currentAssets:o?JSON.parse(JSON.stringify(o.currentAssets)):{cash:[],accountsReceivable:[],commodityAccounts:[],cropInventory:[],feedInventory:[],marketLivestock:[],growingCrop:[],prepaidExpenses:[],otherCurrentAssets:[]},intermediateAssets:{machinery:o?i((m=o.intermediateAssets)==null?void 0:m.machinery):[],vehicles:o?i((g=o.intermediateAssets)==null?void 0:g.vehicles):[],breedingLivestock:o?JSON.parse(JSON.stringify(((u=o.intermediateAssets)==null?void 0:u.breedingLivestock)||[])):[]},longTermAssets:{realEstate:o?JSON.parse(JSON.stringify(((j=o.longTermAssets)==null?void 0:j.realEstate)||[])):[],buildings:o?i((y=o.longTermAssets)==null?void 0:y.buildings):[],otherLongTerm:o?JSON.parse(JSON.stringify(((p=o.longTermAssets)==null?void 0:p.otherLongTerm)||[])):[]},currentLiabilities:o?JSON.parse(JSON.stringify(o.currentLiabilities)):{accountsPayable:[],outstandingChecks:[],creditCardDebt:[],operatingLine:0,currentPortionTermDebt:0,accruedInterest:0,otherCurrentLiabilities:[]},debtService:o?JSON.parse(JSON.stringify(o.debtService||[])):[],termDebt:o?JSON.parse(JSON.stringify(o.termDebt)):[]};ee(b=>({...b,[P]:[...b[P]||[],d]})),le(d.id)},I=a=>{if(Qe){console.warn("Cannot update consolidated view");return}ee(o=>({...o,[P]:o[P].map(i=>i.id===Z?{...i,...a}:i)}))},_t=(a,o)=>{const i=s.currentAssets[a].map(d=>d.id===o.id?o:d);I({currentAssets:{...s.currentAssets,[a]:i}})},pr=a=>{let o;a==="cropInventory"?o={id:`${a}-${Date.now()}`,description:"",quantity:0,unit:"bu",pricePerUnit:0,totalValue:0}:a==="feedInventory"?o={id:`${a}-${Date.now()}`,description:"",quantity:0,unit:"ton",pricePerUnit:0,totalValue:0}:a==="marketLivestock"?o={id:`${a}-${Date.now()}`,description:"",headCount:0,weightPerHead:0,pricePerCwt:0,totalValue:0}:o={id:`${a}-${Date.now()}`,description:"",amount:0},I({currentAssets:{...s.currentAssets,[a]:[...s.currentAssets[a]||[],o]}})},nr=(a,o)=>{I({currentAssets:{...s.currentAssets,[a]:s.currentAssets[a].filter(i=>i.id!==o)}})},Jt=(a,o)=>{const i=s.intermediateAssets[a].map(d=>d.id===o.id?o:d);I({intermediateAssets:{...s.intermediateAssets,[a]:i}})},Is=a=>{let o;a==="breedingLivestock"?o={id:`bl-${Date.now()}`,type:"Cows",description:"",age:"",quantity:0,valuePerHead:0,lastValue:0,totalValue:0,boughtSold:"",yearBoughtSold:""}:o={id:`${a}-${Date.now()}`,description:"",quantity:1,condition:"Good",year:new Date().getFullYear(),serial:"",dateAcquired:"",priorValue:0,currentValue:0,depRate:.1},I({intermediateAssets:{...s.intermediateAssets,[a]:[...s.intermediateAssets[a]||[],o]}})},Ss=(a,o)=>{I({intermediateAssets:{...s.intermediateAssets,[a]:s.intermediateAssets[a].filter(i=>i.id!==o)}})},gt=(a,o)=>{const i=s.longTermAssets[a].map(d=>d.id===o.id?o:d);I({longTermAssets:{...s.longTermAssets,[a]:i}})},Rs=a=>{let o;a==="realEstate"?o={id:`re-${Date.now()}`,pid:"",description:"",county:"",totalAcres:0,irrAcres:0,dryAcres:0,otherAcres:0,taxValue:0,annualTaxes:0,appraisedDate:"",appraisedPerAcre:0,marketValue:0,value:0}:a==="buildings"?o={id:`b-${Date.now()}`,description:"",quantity:1,condition:"Good",year:new Date().getFullYear(),dateAcquired:"",priorValue:0,currentValue:0,depRate:.04}:o={id:`ol-${Date.now()}`,description:"",priorValue:0,currentValue:0},I({longTermAssets:{...s.longTermAssets,[a]:[...s.longTermAssets[a]||[],o]}})},$s=(a,o)=>{I({longTermAssets:{...s.longTermAssets,[a]:s.longTermAssets[a].filter(i=>i.id!==o)}})},Sr=(a,o)=>{const i=s.capitalActivity||{},d=i[a]||[],m=d.findIndex(u=>u.id===o.id);let g;m>=0?g=d.map(u=>u.id===o.id?o:u):g=[...d,o],I({capitalActivity:{...i,[a]:g}})},Ms=a=>{const o=`${a}Purchases`,i=s.capitalActivity||{},d={id:`${a.charAt(0)}p-${Date.now()}`,description:"",cashPaid:0,financedAmount:0,totalCost:0};I({capitalActivity:{...i,[o]:[...i[o]||[],d]}})},Us=(a,o)=>{const i=`${a}Purchases`,d=s.capitalActivity||{};I({capitalActivity:{...d,[i]:(d[i]||[]).filter(m=>m.id!==o)}})},Os=a=>{const o=`${a}Sales`,i=s.capitalActivity||{},d={id:`${a.charAt(0)}s-${Date.now()}`,description:"",previousValue:0,salePrice:0,gainLoss:0};I({capitalActivity:{...i,[o]:[...i[o]||[],d]}})},zs=(a,o)=>{const i=`${a}Sales`,d=s.capitalActivity||{};I({capitalActivity:{...d,[i]:(d[i]||[]).filter(m=>m.id!==o)}})},Vs=(a,o)=>{var y;const i=new Date().getFullYear(),d=a==="machinery"?.1:a==="vehicle"?.15:a==="building"?.05:.1,m={id:`asset-from-${o.id}`,description:o.description||"",quantity:1,condition:"New",year:i,serial:"",dateAcquired:new Date().toISOString().slice(0,10),priorValue:o.totalCost||0,depRate:d,currentValue:(o.totalCost||0)*(1-d),linkedPurchaseId:o.id},g=a==="machinery"?"machinery":a==="vehicle"?"vehicles":a==="building"?"buildings":"machinery",u=a==="building"?"longTermAssets":"intermediateAssets",j=((y=s[u])==null?void 0:y[g])||[];I({[u]:{...s[u],[g]:[...j,m]}})},Ea=()=>{l(!0)},Ia=()=>{var m,g,u,j,y,p,b,N,C,A,L,M,R,Y,_,X,U,B,k,F,T;if(!s)return null;const a=Ye(s),o=Qe?`${Pe} Consolidated`:ys(s.date),i=Qe?`${re==null?void 0:re.name} (Consolidated)`:((g=(m=re==null?void 0:re.entities)==null?void 0:m.find(w=>w.id===ae))==null?void 0:g.name)||(re==null?void 0:re.name),d=(re==null?void 0:re.units)||1;return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 overflow-auto print:relative print:bg-white print:overflow-visible",children:e.jsxs("div",{className:"min-h-screen bg-white max-w-[1100px] mx-auto my-4 shadow-2xl print:shadow-none print:my-0 print:max-w-none",children:[e.jsxs("div",{className:"print:hidden sticky top-0 bg-gray-800 text-white p-4 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("span",{className:"font-semibold",children:"Print Preview"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{var K;const w=document.querySelector("[data-print-content]");if(!w)return;const E=`<!DOCTYPE html>
<html>
<head>
  <title>Balance Sheet Report - ${re==null?void 0:re.name}</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; font-size: 11px; line-height: 1.4; padding: 20px; }
    .font-mono { font-family: monospace; }
    .font-bold, .font-semibold { font-weight: bold; }
    .text-right { text-align: right; }
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-xs { font-size: 10px; }
    .text-sm { font-size: 12px; }
    .text-lg { font-size: 16px; }
    .text-xl { font-size: 18px; }
    .text-green-600, .text-green-700 { color: #16a34a; }
    .text-red-600, .text-red-700, .text-red-800 { color: #dc2626; }
    .text-blue-700, .text-blue-800 { color: #1d4ed8; }
    .text-amber-700, .text-amber-800 { color: #d97706; }
    .text-purple-700, .text-purple-800 { color: #7c3aed; }
    .text-gray-500, .text-gray-600, .text-gray-700, .text-gray-800 { color: #4b5563; }
    .bg-green-700 { background-color: #15803d; }
    .bg-green-50 { background-color: #f0fdf4; }
    .bg-red-50 { background-color: #fef2f2; }
    .bg-blue-50 { background-color: #eff6ff; }
    .bg-amber-50 { background-color: #fffbeb; }
    .bg-purple-50 { background-color: #faf5ff; }
    .bg-gray-50, .bg-gray-100 { background-color: #f3f4f6; }
    .border-b { border-bottom: 1px solid #e5e7eb; }
    .border-b-2 { border-bottom: 2px solid; }
    .border-t { border-top: 1px solid #e5e7eb; }
    .border-t-2 { border-top: 2px solid; }
    .border-green-600 { border-color: #16a34a; }
    .border-red-600 { border-color: #dc2626; }
    .border-blue-600 { border-color: #1d4ed8; }
    .border-amber-600 { border-color: #d97706; }
    .border-purple-600 { border-color: #7c3aed; }
    .rounded { border-radius: 4px; }
    .rounded-lg { border-radius: 8px; }
    .p-2 { padding: 8px; }
    .p-3 { padding: 12px; }
    .p-4 { padding: 16px; }
    .p-6 { padding: 24px; }
    .px-2 { padding-left: 8px; padding-right: 8px; }
    .py-1 { padding-top: 4px; padding-bottom: 4px; }
    .pt-1, .pt-2, .pt-4 { padding-top: 8px; }
    .pb-1, .pb-2 { padding-bottom: 4px; }
    .mb-1 { margin-bottom: 4px; }
    .mb-2 { margin-bottom: 8px; }
    .mb-3 { margin-bottom: 12px; }
    .mb-4 { margin-bottom: 16px; }
    .mt-1, .mt-2 { margin-top: 8px; }
    .mt-4 { margin-top: 16px; }
    .mt-8 { margin-top: 32px; }
    .pl-2 { padding-left: 8px; }
    .space-y-0\\.5 > * + * { margin-top: 2px; }
    .space-y-1 > * + * { margin-top: 4px; }
    .grid { display: grid; }
    .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
    .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
    .gap-2 { gap: 8px; }
    .gap-4 { gap: 16px; }
    .flex { display: flex; }
    .justify-between { justify-content: space-between; }
    .items-center { align-items: center; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 4px 8px; }
    .break-before-page { page-break-before: always; }
    @media print {
      .break-before-page { page-break-before: always; }
      body { padding: 10px; }
    }
  </style>
</head>
<body>
${w.innerHTML}
</body>
</html>`,z=new Blob([E],{type:"text/html"}),q=URL.createObjectURL(z),W=document.createElement("a");W.href=q,W.download=`Balance_Sheet_${(K=re==null?void 0:re.name)==null?void 0:K.replace(/[^a-z0-9]/gi,"_")}_${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(q)},className:"px-4 py-2 bg-green-600 rounded hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Download Report"]}),e.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-700",children:"Close"})]})]}),e.jsxs("div",{className:"mt-2 text-yellow-300 text-sm",children:[' Click "Download Report" to save as HTML file, then open it in your browser and use ',e.jsx("kbd",{className:"px-1 py-0.5 bg-gray-700 rounded text-xs",children:"Ctrl+P"})," (or ",e.jsx("kbd",{className:"px-1 py-0.5 bg-gray-700 rounded text-xs",children:"+P"}),") to print or save as PDF"]})]}),e.jsxs("div",{className:"p-6 print:p-4","data-print-content":"true",children:[e.jsx("div",{className:"bg-green-700 text-white p-4 -mx-6 -mt-6 mb-4 print:-mx-4 print:-mt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"1P1 Farm Financial"}),e.jsx("p",{className:"text-green-200 text-sm",children:"Balance Sheet Report"})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("div",{className:"font-semibold",children:re==null?void 0:re.name}),e.jsx("div",{className:"text-green-200",children:i}),e.jsxs("div",{className:"text-green-200",children:["As of: ",o]})]})]})}),e.jsxs("div",{className:"space-y-3 text-xs",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 rounded p-3 border border-blue-200",children:[e.jsx("div",{className:"font-bold text-blue-800 mb-2 text-[11px]",children:"CURRENT ASSETS"}),e.jsxs("div",{className:"space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cash"}),e.jsx("span",{className:"font-mono",children:h(a.cashTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accounts Receivable"}),e.jsx("span",{className:"font-mono",children:h(a.arTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Commodity Accounts"}),e.jsx("span",{className:"font-mono",children:h(a.commodityTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Crop Inventory"}),e.jsx("span",{className:"font-mono",children:h(a.cropInvTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Feed Inventory"}),e.jsx("span",{className:"font-mono",children:h(a.feedInvTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Market Livestock"}),e.jsx("span",{className:"font-mono",children:h(a.marketLivestockTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Growing Crop"}),e.jsx("span",{className:"font-mono",children:h(a.growingCropTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Prepaid Expenses"}),e.jsx("span",{className:"font-mono",children:h(a.prepaidTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Current"}),e.jsx("span",{className:"font-mono",children:h(a.otherCurrentTotal)})]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-blue-800 border-t-2 border-blue-300 mt-2 pt-1",children:[e.jsx("span",{children:"Total Current Assets"}),e.jsx("span",{className:"font-mono",children:h(a.currentAssetsTotal)})]})]}),e.jsxs("div",{className:"bg-red-50 rounded p-3 border border-red-200",children:[e.jsx("div",{className:"font-bold text-red-800 mb-2 text-[11px]",children:"CURRENT LIABILITIES"}),e.jsxs("div",{className:"space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accounts Payable"}),e.jsx("span",{className:"font-mono",children:h(a.apTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Outstanding Checks"}),e.jsx("span",{className:"font-mono",children:h(a.checksTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Credit Card Debt"}),e.jsx("span",{className:"font-mono",children:h(a.ccTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Operating Line"}),e.jsx("span",{className:"font-mono",children:h(((u=s.currentLiabilities)==null?void 0:u.operatingLine)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Current Portion Term Debt"}),e.jsx("span",{className:"font-mono",children:h(((j=s.currentLiabilities)==null?void 0:j.currentPortionTermDebt)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accrued Interest"}),e.jsx("span",{className:"font-mono",children:h(((y=s.currentLiabilities)==null?void 0:y.accruedInterest)||0)})]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-red-800 border-t-2 border-red-300 mt-2 pt-1",children:[e.jsx("span",{children:"Total Current Liabilities"}),e.jsx("span",{className:"font-mono",children:h(a.currentLiabilitiesTotal)})]})]})]}),e.jsx("div",{className:"bg-gray-100 rounded px-3 py-2 border border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[e.jsx("span",{className:"text-gray-700",children:"Working Capital (Current Assets  Current Liabilities)"}),e.jsx("span",{className:`font-mono text-sm ${a.workingCapital>=0?"text-green-600":"text-red-600"}`,children:h(a.workingCapital)})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-b from-amber-50 to-purple-50 rounded p-3 border border-amber-200",children:[e.jsx("div",{className:"font-bold text-gray-800 mb-2 text-[11px]",children:"NON-CURRENT ASSETS"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-[10px] font-medium text-amber-700 mb-1",children:"Intermediate (1-10 yrs)"}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Machinery & Equipment"}),e.jsx("span",{className:"font-mono",children:h(a.machineryTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vehicles"}),e.jsx("span",{className:"font-mono",children:h(a.vehiclesTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Breeding Livestock"}),e.jsx("span",{className:"font-mono",children:h(a.breedingLivestockTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-amber-800 pl-2 mt-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:h(a.intermediateAssetsTotal)})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-medium text-purple-700 mb-1",children:"Long-Term (10+ yrs)"}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Estate"}),e.jsx("span",{className:"font-mono",children:h(a.realEstateTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Buildings & Improvements"}),e.jsx("span",{className:"font-mono",children:h(a.buildingsTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Long-Term"}),e.jsx("span",{className:"font-mono",children:h(a.otherLongTermTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-purple-800 pl-2 mt-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:h(a.longTermAssetsTotal)})]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-gray-800 border-t-2 border-gray-400 mt-2 pt-1",children:[e.jsx("span",{children:"Total Non-Current Assets"}),e.jsx("span",{className:"font-mono",children:h(a.intermediateAssetsTotal+a.longTermAssetsTotal)})]})]}),e.jsxs("div",{className:"bg-orange-50 rounded p-3 border border-orange-200",children:[e.jsx("div",{className:"font-bold text-orange-800 mb-2 text-[11px]",children:"NON-CURRENT LIABILITIES"}),e.jsxs("div",{className:"space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Equipment Debt"}),e.jsx("span",{className:"font-mono",children:h(a.equipmentDebtTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vehicle Debt"}),e.jsx("span",{className:"font-mono",children:h(a.vehicleDebtTotal||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Estate Debt"}),e.jsx("span",{className:"font-mono",children:h(a.realEstateDebtTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Term Debt"}),e.jsx("span",{className:"font-mono",children:h(a.otherDebtTotal)})]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-orange-800 border-t-2 border-orange-300 mt-2 pt-1",children:[e.jsx("span",{children:"Total Non-Current Liabilities"}),e.jsx("span",{className:"font-mono",children:h(a.termDebtTotal)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"bg-green-100 rounded p-3 border-2 border-green-500",children:e.jsxs("div",{className:"flex justify-between items-center font-bold text-sm text-green-800",children:[e.jsx("span",{children:"TOTAL ASSETS"}),e.jsx("span",{className:"font-mono",children:h(a.totalAssets)})]})}),e.jsx("div",{className:"bg-red-100 rounded p-3 border-2 border-red-400",children:e.jsxs("div",{className:"flex justify-between items-center font-bold text-sm text-red-800",children:[e.jsx("span",{children:"TOTAL LIABILITIES"}),e.jsx("span",{className:"font-mono",children:h(a.totalLiabilities)})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded p-4 border-2 border-blue-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg text-blue-800",children:"TOTAL EQUITY"}),e.jsx("div",{className:"text-[10px] text-blue-600",children:"(Total Assets  Total Liabilities)"})]}),e.jsx("span",{className:`font-mono text-xl font-bold ${a.totalEquity>=0?"text-blue-800":"text-red-600"}`,children:h(a.totalEquity)})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-2",children:[e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded border border-blue-200",children:[e.jsx("div",{className:"text-lg font-bold text-blue-800",children:a.currentRatio.toFixed(2)}),e.jsx("div",{className:"text-[9px] text-blue-600",children:"Current Ratio"})]}),e.jsxs("div",{className:"text-center p-2 bg-amber-50 rounded border border-amber-200",children:[e.jsx("div",{className:"text-lg font-bold text-amber-800",children:a.debtToEquity.toFixed(2)}),e.jsx("div",{className:"text-[9px] text-amber-600",children:"Debt to Equity"})]}),e.jsxs("div",{className:"text-center p-2 bg-green-50 rounded border border-green-200",children:[e.jsxs("div",{className:"text-lg font-bold text-green-700",children:[(a.equityPercent*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-[9px] text-green-600",children:"Owner's Equity %"})]}),e.jsxs("div",{className:"text-center p-2 bg-red-50 rounded border border-red-200",children:[e.jsxs("div",{className:"text-lg font-bold text-red-700",children:[(a.debtToAssets*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-[9px] text-red-600",children:"Debt to Assets"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 bg-gray-50 rounded p-2 border",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-[9px] text-gray-500 mb-0.5",children:["Per Unit (",d.toLocaleString()," units)"]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`font-mono text-sm font-semibold ${a.workingCapital>=0?"text-green-600":"text-red-600"}`,children:h(a.workingCapital/d)}),e.jsx("div",{className:"text-[9px] text-gray-500",children:"Working Capital"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-mono text-sm font-semibold text-gray-700",children:h(a.totalAssets/d)}),e.jsx("div",{className:"text-[9px] text-gray-500",children:"Assets/Unit"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-mono text-sm font-semibold text-blue-700",children:h(a.totalEquity/d)}),e.jsx("div",{className:"text-[9px] text-gray-500",children:"Equity/Unit"})]})]})]}),e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsx("h2",{className:"text-lg font-bold text-blue-700 border-b-2 border-blue-600 pb-1 mb-3",children:"CURRENT ASSETS SCHEDULE"}),((b=(p=s.currentAssets)==null?void 0:p.cash)==null?void 0:b.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-gray-100 px-2 py-1 text-xs",children:"Cash"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-right py-1",children:"Amount"})]})}),e.jsxs("tbody",{children:[s.currentAssets.cash.map(w=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:w.description}),e.jsx("td",{className:"text-right font-mono",children:h(w.amount)})]},w.id)),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-1",children:"Total Cash"}),e.jsx("td",{className:"text-right font-mono",children:h(a.cashTotal)})]})]})]})]}),((C=(N=s.currentAssets)==null?void 0:N.cropInventory)==null?void 0:C.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-gray-100 px-2 py-1 text-xs",children:"Crop Inventory"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-right py-1",children:"Quantity"}),e.jsx("th",{className:"text-center py-1",children:"Unit"}),e.jsx("th",{className:"text-right py-1",children:"Price/Unit"}),e.jsx("th",{className:"text-right py-1",children:"Total Value"})]})}),e.jsxs("tbody",{children:[s.currentAssets.cropInventory.map(w=>{var E,z;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:w.description}),e.jsx("td",{className:"text-right font-mono",children:(E=w.quantity)==null?void 0:E.toLocaleString()}),e.jsx("td",{className:"text-center",children:w.unit}),e.jsxs("td",{className:"text-right font-mono",children:["$",(z=w.pricePerUnit)==null?void 0:z.toFixed(2)]}),e.jsx("td",{className:"text-right font-mono",children:h(w.totalValue||0)})]},w.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"4",className:"py-1",children:"Total Crop Inventory"}),e.jsx("td",{className:"text-right font-mono",children:h(a.cropInvTotal)})]})]})]})]}),((L=(A=s.currentAssets)==null?void 0:A.investmentGrowingCrop)==null?void 0:L.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-gray-100 px-2 py-1 text-xs",children:"Investment in Growing Crop"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-right py-1",children:"Acres"}),e.jsx("th",{className:"text-right py-1",children:"$/Acre"}),e.jsx("th",{className:"text-right py-1",children:"Total Value"})]})}),e.jsxs("tbody",{children:[s.currentAssets.investmentGrowingCrop.map(w=>{var E,z;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:w.description}),e.jsx("td",{className:"text-right font-mono",children:(E=w.acres)==null?void 0:E.toLocaleString()}),e.jsxs("td",{className:"text-right font-mono",children:["$",(z=w.costPerAcre)==null?void 0:z.toFixed(2)]}),e.jsx("td",{className:"text-right font-mono",children:h(w.totalValue||0)})]},w.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-1",children:"Total Growing Crop"}),e.jsx("td",{className:"text-right font-mono",children:h(a.growingCropTotal)})]})]})]})]})]}),e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsx("h2",{className:"text-lg font-bold text-amber-700 border-b-2 border-amber-600 pb-1 mb-3",children:"INTERMEDIATE ASSETS SCHEDULE"}),((R=(M=s.intermediateAssets)==null?void 0:M.machinery)==null?void 0:R.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-amber-50 px-2 py-1 text-xs",children:"Machinery & Equipment"}),e.jsxs("table",{className:"w-full text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-center py-1 w-8",children:"Qty"}),e.jsx("th",{className:"text-center py-1 w-14",children:"Cond"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Year"}),e.jsx("th",{className:"text-left py-1 w-20",children:"Serial #"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Prior Value"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Dep%"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Depreciation"}),e.jsx("th",{className:"text-right py-1 w-24",children:"Market Value"})]})}),e.jsxs("tbody",{children:[s.intermediateAssets.machinery.map(w=>{const E=(w.priorValue||0)*(w.depRate||.1);return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:w.description}),e.jsx("td",{className:"text-center",children:w.quantity||1}),e.jsx("td",{className:"text-center",children:w.condition||"Good"}),e.jsx("td",{className:"text-center",children:w.year}),e.jsx("td",{className:"text-left",children:w.serial||""}),e.jsx("td",{className:"text-right font-mono",children:h(w.priorValue||0)}),e.jsxs("td",{className:"text-center",children:[((w.depRate||.1)*100).toFixed(0),"%"]}),e.jsx("td",{className:"text-right font-mono",children:h(E)}),e.jsx("td",{className:"text-right font-mono",children:h(w.marketValue||w.currentValue||0)})]},w.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"8",className:"py-1",children:"Total Machinery"}),e.jsx("td",{className:"text-right font-mono",children:h(a.machineryTotal)})]})]})]})]}),((_=(Y=s.intermediateAssets)==null?void 0:Y.vehicles)==null?void 0:_.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-amber-50 px-2 py-1 text-xs",children:"Vehicles"}),e.jsxs("table",{className:"w-full text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-center py-1 w-8",children:"Qty"}),e.jsx("th",{className:"text-center py-1 w-14",children:"Cond"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Year"}),e.jsx("th",{className:"text-left py-1 w-20",children:"Serial #"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Prior Value"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Dep%"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Depreciation"}),e.jsx("th",{className:"text-right py-1 w-24",children:"Market Value"})]})}),e.jsxs("tbody",{children:[s.intermediateAssets.vehicles.map(w=>{const E=(w.priorValue||0)*(w.depRate||.1);return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:w.description}),e.jsx("td",{className:"text-center",children:w.quantity||1}),e.jsx("td",{className:"text-center",children:w.condition||"Good"}),e.jsx("td",{className:"text-center",children:w.year}),e.jsx("td",{className:"text-left",children:w.serial||""}),e.jsx("td",{className:"text-right font-mono",children:h(w.priorValue||0)}),e.jsxs("td",{className:"text-center",children:[((w.depRate||.1)*100).toFixed(0),"%"]}),e.jsx("td",{className:"text-right font-mono",children:h(E)}),e.jsx("td",{className:"text-right font-mono",children:h(w.marketValue||w.currentValue||0)})]},w.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"8",className:"py-1",children:"Total Vehicles"}),e.jsx("td",{className:"text-right font-mono",children:h(a.vehiclesTotal)})]})]})]})]})]}),e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsx("h2",{className:"text-lg font-bold text-purple-700 border-b-2 border-purple-600 pb-1 mb-3",children:"LONG-TERM ASSETS SCHEDULE"}),((U=(X=s.longTermAssets)==null?void 0:X.realEstate)==null?void 0:U.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-purple-50 px-2 py-1 text-xs",children:"Real Estate"}),e.jsxs("table",{className:"w-full text-[9px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Legal Description"}),e.jsx("th",{className:"text-left py-1 w-14",children:"County"}),e.jsx("th",{className:"text-right py-1 w-12",children:"Total"}),e.jsx("th",{className:"text-right py-1 w-10",children:"Irr"}),e.jsx("th",{className:"text-right py-1 w-10",children:"Dry"}),e.jsx("th",{className:"text-right py-1 w-10",children:"Other"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Tax Value"}),e.jsx("th",{className:"text-right py-1 w-14",children:"Ann Tax"}),e.jsx("th",{className:"text-right py-1 w-14",children:"$/Acre"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Market Value"})]})}),e.jsxs("tbody",{children:[s.longTermAssets.realEstate.map(w=>{var E,z,q,W,K;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:w.description}),e.jsx("td",{className:"py-1",children:w.county}),e.jsx("td",{className:"text-right font-mono",children:(E=w.totalAcres)==null?void 0:E.toLocaleString()}),e.jsx("td",{className:"text-right font-mono",children:((z=w.irrAcres)==null?void 0:z.toLocaleString())||"-"}),e.jsx("td",{className:"text-right font-mono",children:((q=w.dryAcres)==null?void 0:q.toLocaleString())||"-"}),e.jsx("td",{className:"text-right font-mono",children:((W=w.otherAcres)==null?void 0:W.toLocaleString())||"-"}),e.jsx("td",{className:"text-right font-mono",children:h(w.taxValue||0)}),e.jsx("td",{className:"text-right font-mono",children:h(w.annualTaxes||0)}),e.jsxs("td",{className:"text-right font-mono",children:["$",((K=w.appraisedPerAcre)==null?void 0:K.toLocaleString())||"-"]}),e.jsx("td",{className:"text-right font-mono",children:h(w.marketValue||0)})]},w.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"9",className:"py-1",children:"Total Real Estate"}),e.jsx("td",{className:"text-right font-mono",children:h(a.realEstateTotal)})]})]})]})]}),((k=(B=s.longTermAssets)==null?void 0:B.buildings)==null?void 0:k.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-purple-50 px-2 py-1 text-xs",children:"Buildings & Improvements"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-center py-1",children:"Year Built"}),e.jsx("th",{className:"text-right py-1",children:"Original Cost"}),e.jsx("th",{className:"text-right py-1",children:"Market Value"})]})}),e.jsxs("tbody",{children:[s.longTermAssets.buildings.map(w=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:w.description}),e.jsx("td",{className:"text-center",children:w.yearBuilt||""}),e.jsx("td",{className:"text-right font-mono",children:h(w.originalCost||0)}),e.jsx("td",{className:"text-right font-mono",children:h(w.marketValue||0)})]},w.id)),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-1",children:"Total Buildings"}),e.jsx("td",{className:"text-right font-mono",children:h(a.buildingsTotal)})]})]})]})]}),((T=(F=s.longTermAssets)==null?void 0:F.otherLongTerm)==null?void 0:T.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-purple-50 px-2 py-1 text-xs",children:"Other Long-Term Assets"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-right py-1",children:"Prior Year Value"}),e.jsx("th",{className:"text-right py-1",children:"Current Value"}),e.jsx("th",{className:"text-right py-1",children:"Change"})]})}),e.jsxs("tbody",{children:[s.longTermAssets.otherLongTerm.map(w=>{const E=(w.currentValue||0)-(w.priorValue||0);return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:w.description}),e.jsx("td",{className:"text-right font-mono",children:h(w.priorValue||0)}),e.jsx("td",{className:"text-right font-mono",children:h(w.currentValue||w.amount||0)}),e.jsxs("td",{className:`text-right font-mono ${E>=0?"text-green-600":"text-red-600"}`,children:[E>=0?"+":"",h(E)]})]},w.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-1",children:"Total Other Long-Term"}),e.jsx("td",{className:"text-right font-mono",children:h(a.otherLongTermTotal)})]})]})]})]})]}),e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsx("h2",{className:"text-lg font-bold text-red-700 border-b-2 border-red-600 pb-1 mb-3",children:"DEBT SERVICE SCHEDULE"}),["operating","equipment","vehicle","realEstate","other"].map(w=>{var W;const E=((W=s.debtService)==null?void 0:W.filter(K=>K.category===w))||[];if(E.length===0)return null;const z={operating:"Operating Lines of Credit",equipment:"Equipment Loans",vehicle:"Vehicle Loans",realEstate:"Real Estate Loans",other:"Other Loans"},q=w==="operating";return e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-red-50 px-2 py-1 text-xs",children:z[w]}),e.jsxs("table",{className:"w-full text-[9px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Purpose"}),e.jsx("th",{className:"text-left py-1",children:"Lender"}),e.jsx("th",{className:"text-left py-1 w-16",children:"Entity"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Rate"}),e.jsx("th",{className:"text-center py-1 w-8",children:"Type"}),e.jsx("th",{className:"text-center py-1 w-8",children:"Yrs"}),e.jsx("th",{className:"text-left py-1 w-14",children:"Security"}),e.jsx("th",{className:"text-center py-1 w-16",children:"Maturity"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Accrued Int"}),q?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"text-right py-1 w-18",children:"LOC Commit"}),e.jsx("th",{className:"text-right py-1 w-18",children:"Current Bal"}),e.jsx("th",{className:"text-center py-1 w-12",children:"Usage"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"text-right py-1 w-18",children:"Principal"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Prin Pmt"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Int Pmt"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Total Pmt"})]})]})}),e.jsx("tbody",{children:E.map(K=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:K.description}),e.jsx("td",{className:"py-1",children:K.lender}),e.jsx("td",{className:"py-1",children:K.entity}),e.jsxs("td",{className:"text-center",children:[K.interestRate,"%"]}),e.jsx("td",{className:"text-center",children:K.rateType==="Fixed"?"F":"V"}),e.jsx("td",{className:"text-center",children:K.amYears}),e.jsx("td",{className:"py-1",children:K.security}),e.jsx("td",{className:"text-center",children:K.maturity?new Date(K.maturity).toLocaleDateString("en-US",{month:"2-digit",year:"2-digit"}):""}),e.jsx("td",{className:"text-right font-mono",children:h(K.accruedInterest||0)}),q?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"text-right font-mono",children:h(K.locCommitment||0)}),e.jsx("td",{className:"text-right font-mono",children:h(K.currentBalance||0)}),e.jsx("td",{className:"text-center",children:K.locCommitment>0?((K.currentBalance||0)/K.locCommitment*100).toFixed(1)+"%":"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"text-right font-mono",children:h(K.principalAmount||0)}),e.jsx("td",{className:"text-right font-mono",children:h(K.principalPayment||0)}),e.jsx("td",{className:"text-right font-mono",children:h(K.interestPayment||0)}),e.jsx("td",{className:"text-right font-mono",children:h(K.totalPayment||0)})]})]},K.id))})]})]},w)}),e.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-xs",children:"Total Term Debt"}),e.jsx("div",{className:"font-bold text-red-800 font-mono",children:h(a.termDebtTotal)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-xs",children:"Annual Debt Service"}),e.jsx("div",{className:"font-bold text-red-800 font-mono",children:h((s.debtService||[]).filter(w=>w.category!=="operating"&&w.category!=="personal").reduce((w,E)=>w+(E.totalPayment||0),0))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-xs",children:"Debt Service / Unit"}),e.jsx("div",{className:"font-bold text-red-800 font-mono",children:h((s.debtService||[]).filter(w=>w.category!=="operating"&&w.category!=="personal").reduce((w,E)=>w+(E.totalPayment||0),0)/d)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-xs",children:"Total Accrued Interest"}),e.jsx("div",{className:"font-bold text-red-800 font-mono",children:h((s.debtService||[]).reduce((w,E)=>w+(E.accruedInterest||0),0))})]})]})})]}),(()=>{let w=[];if(Qe?w=[...new Set(xt.map(q=>new Date(q.date).getFullYear()))].sort((q,W)=>W-q).slice(0,5).map(q=>{const W=hs(xt,q);return W?{...W,year:q}:null}).filter(Boolean):w=Ir.sort((z,q)=>new Date(q.date)-new Date(z.date)).slice(0,5),w.length<2)return null;const E=w.map(z=>Ye(z).totalEquity);return e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-green-700 border-b-2 border-green-600 pb-1 mb-3",children:["HISTORICAL TRENDS ",Qe&&"(Consolidated)"]}),e.jsxs("table",{className:"w-full text-[10px] mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"Metric"}),w.map((z,q)=>{var W;return e.jsxs("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:[Qe?z.year:new Date(z.date).getFullYear(),e.jsx("div",{className:"text-[9px] font-normal text-gray-400",children:Qe?`${((W=z.entitiesIncluded)==null?void 0:W.length)||0} entities`:ys(z.date)})]},q)}),e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:"Change"})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"bg-green-100",children:e.jsx("td",{colSpan:w.length+2,className:"py-1 px-2 font-semibold text-green-800",children:"ASSETS"})}),[{label:"Current Assets",key:"currentAssetsTotal"},{label:"Intermediate Assets",key:"intermediateAssetsTotal"},{label:"Long-Term Assets",key:"longTermAssetsTotal"},{label:"Total Assets",key:"totalAssets",bold:!0}].map(z=>{const q=w.map(xe=>Ye(xe)[z.key]),W=q.length>=2?q[0]-q[1]:0,K=q.length>=2&&q[1]!==0?(q[0]-q[1])/q[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${z.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-1 ${z.bold?"":"pl-3"}`,children:z.label}),w.map((xe,Ae)=>e.jsx("td",{className:"text-right py-1 px-2 font-mono",children:h(Ye(xe)[z.key])},Ae)),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${W>=0?"text-green-600":"text-red-600"}`,children:[W>=0?"+":"",h(W),e.jsxs("span",{className:"text-[9px] ml-1",children:["(",K>=0?"+":"",K.toFixed(1),"%)"]})]})]},z.key)}),e.jsx("tr",{className:"bg-red-100",children:e.jsx("td",{colSpan:w.length+2,className:"py-1 px-2 font-semibold text-red-800",children:"LIABILITIES"})}),[{label:"Current Liabilities",key:"currentLiabilitiesTotal"},{label:"Term Debt",key:"termDebtTotal"},{label:"Total Liabilities",key:"totalLiabilities",bold:!0}].map(z=>{const q=w.map(xe=>Ye(xe)[z.key]),W=q.length>=2?q[0]-q[1]:0,K=q.length>=2&&q[1]!==0?(q[0]-q[1])/q[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${z.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-1 ${z.bold?"":"pl-3"}`,children:z.label}),w.map((xe,Ae)=>e.jsx("td",{className:"text-right py-1 px-2 font-mono",children:h(Ye(xe)[z.key])},Ae)),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${W<=0?"text-green-600":"text-red-600"}`,children:[W>=0?"+":"",h(W),e.jsxs("span",{className:"text-[9px] ml-1",children:["(",K>=0?"+":"",K.toFixed(1),"%)"]})]})]},z.key)}),e.jsx("tr",{className:"bg-blue-100",children:e.jsx("td",{colSpan:w.length+2,className:"py-1 px-2 font-semibold text-blue-800",children:"EQUITY & WORKING CAPITAL"})}),[{label:"Total Equity",key:"totalEquity",bold:!0},{label:"Working Capital",key:"workingCapital",bold:!0}].map(z=>{const q=w.map(xe=>Ye(xe)[z.key]),W=q.length>=2?q[0]-q[1]:0,K=q.length>=2&&q[1]!==0?(q[0]-q[1])/q[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${z.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:"py-1",children:z.label}),w.map((xe,Ae)=>{const G=Ye(xe)[z.key];return e.jsx("td",{className:`text-right py-1 px-2 font-mono ${G<0?"text-red-600":""}`,children:h(G)},Ae)}),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${W>=0?"text-green-600":"text-red-600"}`,children:[W>=0?"+":"",h(W),e.jsxs("span",{className:"text-[9px] ml-1",children:["(",K>=0?"+":"",K.toFixed(1),"%)"]})]})]},z.key)}),e.jsxs("tr",{className:"bg-blue-50 border-b",children:[e.jsx("td",{className:"py-1 font-semibold text-blue-800",children:"Equity Change (YoY)"}),w.map((z,q)=>{const W=E[q],K=E[q+1]||0,xe=q<w.length-1?W-K:null;return e.jsx("td",{className:`text-right py-1 px-2 font-mono font-semibold ${xe!==null?xe>=0?"text-green-600":"text-red-600":"text-gray-400"}`,children:xe!==null?`${xe>=0?"+":""}${h(xe)}`:""},q)}),e.jsx("td",{className:"text-right py-1 px-2 text-gray-400",children:""})]}),e.jsxs("tr",{className:"bg-amber-50 border-b",children:[e.jsxs("td",{className:"py-1 font-medium text-amber-800",children:["Adjustment ",e.jsx("span",{className:"text-[9px] font-normal",children:"(contributions, gifts)"})]}),w.map((z,q)=>e.jsx("td",{className:"text-right py-1 px-2 font-mono text-gray-500",children:h(z.adjustment||0)},q)),e.jsx("td",{className:"text-right py-1 px-2 text-gray-400",children:""})]}),e.jsxs("tr",{className:"bg-green-100 border-b-2 border-green-300",children:[e.jsxs("td",{className:"py-1 font-bold text-green-800",children:["Earned Equity ",e.jsx("span",{className:"text-[9px] font-normal",children:"(Change  Adj)"})]}),w.map((z,q)=>{const W=E[q],K=E[q+1]||0,xe=q<w.length-1?W-K:null,Ae=z.adjustment||0,G=xe!==null?xe-Ae:null;return e.jsx("td",{className:`text-right py-1 px-2 font-mono font-bold ${G!==null?G>=0?"text-green-700":"text-red-600":"text-gray-400"}`,children:G!==null?`${G>=0?"+":""}${h(G)}`:""},q)}),e.jsx("td",{className:"text-right py-1 px-2 text-gray-400",children:""})]})]})]}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2 mt-4",children:"Key Ratios Trend"}),e.jsxs("table",{className:"w-full text-[10px] mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"Ratio"}),w.map((z,q)=>e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:Qe?z.year:new Date(z.date).getFullYear()},q)),e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:"Change"})]})}),e.jsx("tbody",{children:[{label:"Current Ratio",key:"currentRatio",format:"ratio",goodUp:!0},{label:"Debt to Equity",key:"debtToEquity",format:"ratio",goodUp:!1},{label:"Owner's Equity %",key:"equityPercent",format:"percent",goodUp:!0},{label:"Debt to Assets %",key:"debtToAssets",format:"percent",goodUp:!1}].map(z=>{const q=w.map(xe=>Ye(xe)[z.key]),W=q.length>=2?q[0]-q[1]:0,K=z.goodUp?W>=0:W<=0;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:z.label}),w.map((xe,Ae)=>{const G=Ye(xe)[z.key];return e.jsx("td",{className:"text-right py-1 px-2 font-mono",children:z.format==="percent"?`${(G*100).toFixed(1)}%`:G.toFixed(2)},Ae)}),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${K?"text-green-600":"text-red-600"}`,children:[W>=0?"+":"",z.format==="percent"?`${(W*100).toFixed(1)}%`:W.toFixed(2)]})]},z.key)})})]}),e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2",children:["Per Unit Metrics (",d.toLocaleString()," units)"]}),e.jsxs("table",{className:"w-full text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"Metric"}),w.map((z,q)=>e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:Qe?z.year:new Date(z.date).getFullYear()},q)),e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:"Change"})]})}),e.jsx("tbody",{children:[{label:"Working Capital / Unit",key:"workingCapital",goodUp:!0},{label:"Total Assets / Unit",key:"totalAssets",goodUp:!0},{label:"Total Debt / Unit",key:"totalLiabilities",goodUp:!1},{label:"Equity / Unit",key:"totalEquity",goodUp:!0}].map(z=>{const q=w.map(xe=>Ye(xe)[z.key]/d),W=q.length>=2?q[0]-q[1]:0,K=z.goodUp?W>=0:W<=0;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:z.label}),w.map((xe,Ae)=>{const G=Ye(xe)[z.key]/d;return e.jsx("td",{className:`text-right py-1 px-2 font-mono ${G<0?"text-red-600":""}`,children:h(G)},Ae)}),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${K?"text-green-600":"text-red-600"}`,children:[W>=0?"+":"",h(W)]})]},z.key)})})]})]})})(),e.jsxs("div",{className:"mt-8 pt-4 border-t text-xs text-gray-500 flex justify-between",children:[e.jsxs("span",{children:["Generated: ",new Date().toLocaleDateString()," at ",new Date().toLocaleTimeString()]}),e.jsx("span",{children:"1P1 Farm Financial - Balance Sheet Report"})]})]})]})})};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[n&&e.jsx(Ia,{}),c.open&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-gray-50",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Oo,{className:"w-5 h-5 text-blue-600"}),"Loan Verification Documents"]}),e.jsx("button",{onClick:()=>x({open:!1,debtId:null,attachments:[]}),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Qs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 140px)"},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Document"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",id:"attachment-upload",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",className:"hidden",onChange:a=>{var i;const o=(i=a.target.files)==null?void 0:i[0];if(o){const d=new FileReader;d.onload=m=>{const g={id:`att-${Date.now()}`,name:o.name,type:o.type,size:o.size,data:m.target.result,uploadedAt:new Date().toISOString()},u=s.debtService.map(j=>j.id===c.debtId?{...j,attachments:[...j.attachments||[],g]}:j);I({debtService:u}),x(j=>({...j,attachments:[...j.attachments,g]}))},d.readAsDataURL(o)}a.target.value=""}}),e.jsxs("button",{onClick:()=>document.getElementById("attachment-upload").click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Browse Files"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"PDF, Word, Excel, Images"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Attached Documents (",((Fn=c.attachments)==null?void 0:Fn.length)||0,")"]}),!c.attachments||c.attachments.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 border-2 border-dashed rounded-lg",children:[e.jsx(Oo,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No documents attached"}),e.jsx("p",{className:"text-xs",children:"Upload loan statements, contracts, or other verification"})]}):e.jsx("div",{className:"space-y-2",children:c.attachments.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded ${a.type.includes("pdf")?"bg-red-100 text-red-600":a.type.includes("word")||a.type.includes("document")?"bg-blue-100 text-blue-600":a.type.includes("sheet")||a.type.includes("excel")?"bg-green-100 text-green-600":a.type.includes("image")?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",style:{maxWidth:"200px"},children:a.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(a.size/1024).toFixed(1)," KB  ",new Date(a.uploadedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{const o=document.createElement("a");o.href=a.data,o.download=a.name,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Download",children:e.jsx(hf,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{const o=s.debtService.map(i=>i.id===c.debtId?{...i,attachments:(i.attachments||[]).filter(d=>d.id!==a.id)}:i);I({debtService:o}),x(i=>({...i,attachments:i.attachments.filter(d=>d.id!==a.id)}))},className:"p-1.5 text-red-500 hover:bg-red-50 rounded",title:"Remove",children:e.jsx(nt,{className:"w-4 h-4"})})]})]},a.id))})]})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:e.jsx("button",{onClick:()=>x({open:!1,debtId:null,attachments:[]}),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 text-sm",children:"Close"})})]})}),sr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-green-50",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(ll,{className:"w-5 h-5 text-green-600"}),"Add New Client"]}),e.jsx("button",{onClick:()=>{hr(!1),Ft({name:"",units:1,entities:[{name:"",type:"Operating"}]})},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Qs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(90vh - 140px)"},children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Client Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:it.name,onChange:a=>Ft(o=>({...o,name:a.target.value})),placeholder:"e.g., Johnson Family Farms",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units (Acres, Head, etc.)"}),e.jsx("input",{type:"number",value:it.units,onChange:a=>Ft(o=>({...o,units:parseInt(a.target.value)||1})),placeholder:"e.g., 2500",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for per-unit calculations in reports"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entities"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Add the business entities for this client (farms, LLCs, personal, etc.)"}),e.jsx("div",{className:"space-y-2",children:it.entities.map((a,o)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:a.name,onChange:i=>{const d=[...it.entities];d[o].name=i.target.value,Ft(m=>({...m,entities:d}))},placeholder:"Entity name",className:"flex-1 px-3 py-2 border border-gray-300 rounded text-sm"}),e.jsxs("select",{value:a.type,onChange:i=>{const d=[...it.entities];d[o].type=i.target.value,Ft(m=>({...m,entities:d}))},className:"w-32 px-2 py-2 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"Operating",children:"Operating"}),e.jsx("option",{value:"LLC",children:"LLC"}),e.jsx("option",{value:"Land",children:"Land"}),e.jsx("option",{value:"Personal",children:"Personal"}),e.jsx("option",{value:"Trust",children:"Trust"}),e.jsx("option",{value:"Other",children:"Other"})]}),it.entities.length>1&&e.jsx("button",{onClick:()=>{const i=it.entities.filter((d,m)=>m!==o);Ft(d=>({...d,entities:i}))},className:"p-2 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})]},o))}),e.jsxs("button",{onClick:()=>{Ft(a=>({...a,entities:[...a.entities,{name:"",type:"Operating"}]}))},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Entity"]})]})]}),e.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{hr(!1),Ft({name:"",units:1,entities:[{name:"",type:"Operating"}]})},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 text-sm",children:"Cancel"}),e.jsxs("button",{onClick:()=>{if(!it.name.trim()){alert("Please enter a client name");return}const a=it.entities.filter(m=>m.name.trim());if(a.length===0){alert("Please add at least one entity");return}const o=`client-${Date.now()}`,i={id:o,name:it.name.trim(),units:it.units||1,entities:a.map((m,g)=>({id:`ent-${Date.now()}-${g}`,name:m.name.trim(),type:m.type})),fields:[]};v(m=>[...m,i]);const d={};d[o]=i.entities.map(m=>({id:`bs-${m.id}-${new Date().getFullYear()}`,entityId:m.id,date:new Date().toISOString().slice(0,10),currentAssets:{cash:[],accountsReceivable:[],cropInventory:[],feedInventory:[],marketLivestock:[],prepaidExpenses:[],growingCrop:[],hedgingAccounts:[],otherCurrentAssets:[]},intermediateAssets:{machinery:[],vehicles:[],breedingLivestock:[]},longTermAssets:{realEstate:[],buildings:[],otherLongTerm:[]},currentLiabilities:{accountsPayable:[],outstandingChecks:[],creditCardDebt:[],operatingLine:0,currentPortionTermDebt:0,accruedInterest:0},termDebt:[],debtService:[],capitalActivity:{machinery:{purchases:[],sales:[]},vehicles:{purchases:[],sales:[]},buildings:{purchases:[],sales:[]},realEstate:{purchases:[],sales:[]}}})),ee(m=>({...m,...d})),$(o),oe(i.entities[0].id),le(d[o][0].id),hr(!1),Ft({name:"",units:1,entities:[{name:"",type:"Operating"}]})},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Create Client"]})]})]})}),t==="landing"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-green-700 to-green-600 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kn,{className:"w-10 h-10"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"1P1 Farm Financial"}),e.jsx("p",{className:"text-green-200",children:"Agricultural Financial Management Platform"})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-green-200 text-xs block mb-1",children:"Select Client"}),e.jsx("select",{value:P,onChange:a=>{var m,g;$(a.target.value);const o=f.find(u=>u.id===a.target.value),i=(m=o==null?void 0:o.entities)==null?void 0:m[0];oe((i==null?void 0:i.id)||"consolidated");const d=(g=te[a.target.value])==null?void 0:g.find(u=>u.entityId===(i==null?void 0:i.id));le((d==null?void 0:d.id)||"")},className:"bg-white/10 border border-white/20 rounded px-4 py-2 text-white min-w-[220px]",children:f.map(a=>e.jsx("option",{value:a.id,className:"text-gray-800",children:a.name},a.id))})]}),e.jsxs("button",{onClick:()=>hr(!0),className:"bg-white/20 hover:bg-white/30 border border-white/30 text-white px-3 py-2 rounded flex items-center gap-1 text-sm",title:"Add New Client",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Add Client"]})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:re==null?void 0:re.name}),e.jsxs("p",{className:"text-gray-500 mt-1",children:[((An=re==null?void 0:re.entities)==null?void 0:An.length)||0," entities  ",((kn=re==null?void 0:re.units)==null?void 0:kn.toLocaleString())||0," total units"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Latest Balance Sheet"}),e.jsx("div",{className:"text-lg font-semibold text-green-700",children:xt.length>0?ys(xt.sort((a,o)=>new Date(o.date)-new Date(a.date))[0].date):"No balance sheets"})]})]}),xt.length>0&&(()=>{const a=xt.sort((m,g)=>new Date(g.date)-new Date(m.date))[0],o=new Date(a.date).getFullYear(),i=hs(xt,o),d=Ye(i);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6 pt-6 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Assets"}),e.jsx("div",{className:"text-xl font-bold text-green-700",children:h(d.totalAssets)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Liabilities"}),e.jsx("div",{className:"text-xl font-bold text-red-700",children:h(d.totalLiabilities)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Net Equity"}),e.jsx("div",{className:`text-xl font-bold ${d.totalEquity>=0?"text-green-700":"text-red-700"}`,children:h(d.totalEquity)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Equity %"}),e.jsxs("div",{className:"text-xl font-bold text-blue-700",children:[(d.equityPercent*100).toFixed(1),"%"]})]})]})})()]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Financial Tools"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("button",{onClick:()=>r("balancesheet"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-green-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg group-hover:bg-green-200 transition-colors",children:e.jsx(m0,{className:"w-8 h-8 text-green-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-green-700",children:"Balance Sheet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Track assets, liabilities, and equity across all entities"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded",children:[xt.length," records"]}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded",children:[((Dn=re==null?void 0:re.entities)==null?void 0:Dn.length)||0," entities"]})]})]})]})}),e.jsx("button",{onClick:()=>r("marketing"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-amber-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 rounded-lg group-hover:bg-amber-200 transition-colors",children:e.jsx(st,{className:"w-8 h-8 text-amber-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-amber-700",children:"Marketing"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Futures, basis, positions, and pricing"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-amber-50 rounded text-amber-600",children:"Futures"}),e.jsx("span",{className:"px-2 py-1 bg-amber-50 rounded text-amber-600",children:"Options"}),e.jsx("span",{className:"px-2 py-1 bg-amber-50 rounded text-amber-600",children:"Cash Sales"}),e.jsx("span",{className:"px-2 py-1 bg-amber-50 rounded text-amber-600",children:"Basis"})]})]})]})}),e.jsx("button",{onClick:()=>r("refinanceCalc"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-teal-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-teal-100 rounded-lg group-hover:bg-teal-200 transition-colors",children:e.jsx(nl,{className:"w-8 h-8 text-teal-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-teal-700",children:"Refinance Calculator"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Analyze debt restructuring and cash flow impact"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-teal-50 rounded text-teal-600",children:"Payment Analysis"}),e.jsx("span",{className:"px-2 py-1 bg-teal-50 rounded text-teal-600",children:"Rate Comparison"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl shadow p-6 text-left border-2 border-dashed border-gray-300 opacity-60",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 rounded-lg",children:e.jsx(gs,{className:"w-8 h-8 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-500",children:"Income Statement"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Track revenue, expenses, and profitability"}),e.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"Coming Soon"})]})]})}),e.jsx("button",{onClick:()=>r("cashflow"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-blue-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors",children:e.jsx(fr,{className:"w-8 h-8 text-blue-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-blue-700",children:"Cash Flow Projection"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Project and track cash flow over time"}),e.jsx("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 rounded text-blue-600",children:"Annual View"})})]})]})}),e.jsx("button",{onClick:()=>{r("cropInsurance"),He("insuranceSummary")},className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-purple-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors",children:e.jsx(Rr,{className:"w-8 h-8 text-purple-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-purple-700",children:"Crop Insurance"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"MPCI, area plans, and private coverage"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-purple-50 rounded text-purple-600",children:"MPCI"}),e.jsx("span",{className:"px-2 py-1 bg-purple-50 rounded text-purple-600",children:"SCO/ECO"}),e.jsx("span",{className:"px-2 py-1 bg-purple-50 rounded text-purple-600",children:"Area Plans"}),e.jsx("span",{className:"px-2 py-1 bg-purple-50 rounded text-purple-600",children:"Hail/Wind"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl shadow p-6 text-left border-2 border-dashed border-gray-300 opacity-60",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 rounded-lg",children:e.jsx(zo,{className:"w-8 h-8 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-500",children:"Financial Ratios"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Detailed ratio analysis and benchmarking"}),e.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"Coming Soon"})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl shadow p-6 text-left border-2 border-dashed border-gray-300 opacity-60",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 rounded-lg",children:e.jsx(Ut,{className:"w-8 h-8 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-500",children:"Reports"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Generate PDF reports for lenders and analysis"}),e.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"Coming Soon"})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl shadow p-6 text-left border-2 border-dashed border-gray-300 opacity-60",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 rounded-lg",children:e.jsx(Gs,{className:"w-8 h-8 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-500",children:"Settings"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Manage clients, entities, and preferences"}),e.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"Coming Soon"})]})]})})]}),(re==null?void 0:re.entities)&&re.entities.length>1&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Entities"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:re.entities.map(a=>{const i=xt.filter(m=>m.entityId===a.id).sort((m,g)=>new Date(g.date)-new Date(m.date))[0],d=i?Ye(i):null;return e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ll,{className:"w-4 h-4 text-gray-400"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:a.name})]}),d?e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Assets:"}),e.jsx("span",{className:"ml-1 font-mono text-green-700",children:h(d.totalAssets)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Equity:"}),e.jsx("span",{className:`ml-1 font-mono ${d.totalEquity>=0?"text-green-700":"text-red-700"}`,children:h(d.totalEquity)})]})]}):e.jsx("p",{className:"text-sm text-gray-400",children:"No balance sheet data"})]},a.id)})})]})]})]}),t==="balancesheet"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-green-700 to-green-600 text-white shadow-lg",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r("landing"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Back to Dashboard",children:e.jsx(Qn,{className:"w-6 h-6"})}),e.jsx(Kn,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"1P1 Farm Financial"}),e.jsx("p",{className:"text-green-200 text-sm",children:"Balance Sheet Management"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-green-200 text-xs block mb-1",children:"Client"}),e.jsx("select",{value:P,onChange:a=>{var m,g;$(a.target.value);const o=f.find(u=>u.id===a.target.value),i=(m=o==null?void 0:o.entities)==null?void 0:m[0];oe((i==null?void 0:i.id)||"consolidated");const d=(g=te[a.target.value])==null?void 0:g.find(u=>u.entityId===(i==null?void 0:i.id));le((d==null?void 0:d.id)||"")},className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[180px]",children:f.map(a=>e.jsx("option",{value:a.id,className:"text-gray-800",children:a.name},a.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-green-200 text-xs block mb-1",children:[e.jsx(ll,{className:"w-3 h-3 inline mr-1"}),"Entity"]}),e.jsxs("select",{value:ae,onChange:a=>{if(oe(a.target.value),a.target.value==="consolidated")le("");else{const o=xt.find(i=>i.entityId===a.target.value);le((o==null?void 0:o.id)||"")}},className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[160px]",children:[e.jsx("option",{value:"consolidated",className:"text-gray-800 font-semibold",children:" Consolidated View"}),(Tn=re==null?void 0:re.entities)==null?void 0:Tn.map(a=>e.jsx("option",{value:a.id,className:"text-gray-800",children:a.name},a.id))]})]}),ae==="consolidated"?e.jsxs("div",{children:[e.jsxs("label",{className:"text-green-200 text-xs block mb-1",children:[e.jsx(Yt,{className:"w-3 h-3 inline mr-1"}),"Year"]}),e.jsx("select",{value:Pe,onChange:a=>ze(parseInt(a.target.value)),className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[100px]",children:Pn.map(a=>e.jsx("option",{value:a,className:"text-gray-800",children:a},a))})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-green-200 text-xs block mb-1",children:"Balance Sheet Date"}),e.jsx("select",{value:Z,onChange:a=>le(a.target.value),className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[140px]",children:Ir.sort((a,o)=>new Date(o.date)-new Date(a.date)).map(a=>e.jsx("option",{value:a.id,className:"text-gray-800",children:ys(a.date)},a.id))})]}),s&&e.jsxs("div",{children:[e.jsx("label",{className:"text-green-200 text-xs block mb-1",children:"Change Date"}),e.jsx("input",{type:"date",value:s.date||"",onChange:a=>{const o=a.target.value;o&&I({date:o})},className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white",style:{colorScheme:"dark"}})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[!Qe&&e.jsxs("button",{onClick:Cn,className:"flex items-center gap-2 bg-white text-green-700 px-4 py-2 rounded-lg font-semibold hover:bg-green-50 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),"New Balance Sheet"]}),s&&e.jsxs("button",{onClick:Ea,className:"flex items-center gap-2 bg-green-800 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-900 transition-colors border border-green-600",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Print Report"]})]})]})]}),Qe&&e.jsxs("div",{className:"mt-3 bg-white/10 rounded-lg px-4 py-2 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-5 h-5 text-yellow-300"}),e.jsx("span",{className:"font-medium",children:"Consolidated View"}),e.jsxs("span",{className:"text-green-200 text-sm",children:[" Showing combined totals for ",((Ln=s==null?void 0:s.entitiesIncluded)==null?void 0:Ln.length)||0," entities in ",Pe]}),e.jsx("span",{className:"ml-auto text-xs text-green-200",children:"Read-only"})]})]})}),e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"summary",label:"Summary",icon:st},{id:"trends",label:"Trends",icon:Ut},{id:"current",label:"Current Assets",icon:Mo},{id:"intermediate",label:"Intermediate Assets",icon:$o},{id:"longterm",label:"Long-Term Assets",icon:Ro},{id:"liabilities",label:"Liabilities",icon:rl},{id:"debtservice",label:"Debt Service",icon:Ue},{id:"loancalc",label:"Loan Calculator",icon:So}].map(a=>e.jsxs("button",{onClick:()=>V(a.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${De===a.id?"border-green-600 text-green-700 bg-green-50":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:s?e.jsxs(e.Fragment,{children:[De==="summary"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[Qe&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg shadow p-4 border border-yellow-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-5 h-5 text-yellow-600"}),"Entity Breakdown  ",Pe]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:(En=s==null?void 0:s.entitiesIncluded)==null?void 0:En.map(a=>{var m;const o=(m=re==null?void 0:re.entities)==null?void 0:m.find(g=>g.id===a),i=xt.find(g=>g.entityId===a&&new Date(g.date).getFullYear()===Pe),d=Ye(i);return e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"font-medium text-gray-800 text-sm mb-2",children:(o==null?void 0:o.name)||a}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Assets:"}),e.jsx("span",{className:"font-mono text-green-700",children:h(d.totalAssets)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Liabilities:"}),e.jsx("span",{className:"font-mono text-red-700",children:h(d.totalLiabilities)})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[e.jsx("span",{className:"text-gray-700",children:"Equity:"}),e.jsx("span",{className:`font-mono ${d.totalEquity>=0?"text-green-700":"text-red-700"}`,children:h(d.totalEquity)})]})]})]},a)})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-green-600"}),Qe?"Consolidated ":"","Balance Sheet Summary  ",Qe?Pe:ys(s.date),Qe&&e.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:[(In=s==null?void 0:s.entitiesIncluded)==null?void 0:In.length," entities"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 flex flex-col",children:[e.jsxs("div",{className:"text-sm font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[e.jsx(Mo,{className:"w-4 h-4"})," CURRENT ASSETS"]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cash"}),e.jsx("span",{className:"font-mono",children:h(ve.cashTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accounts Receivable"}),e.jsx("span",{className:"font-mono",children:h(ve.arTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Commodity Accounts"}),e.jsx("span",{className:"font-mono",children:h(ve.commodityTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Crop Inventory"}),e.jsx("span",{className:"font-mono",children:h(ve.cropInvTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Feed Inventory"}),e.jsx("span",{className:"font-mono",children:h(ve.feedInvTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Market Livestock"}),e.jsx("span",{className:"font-mono",children:h(ve.marketLivestockTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Growing Crop"}),e.jsx("span",{className:"font-mono",children:h(ve.growingCropTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Prepaid Expenses"}),e.jsx("span",{className:"font-mono",children:h(ve.prepaidTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Current"}),e.jsx("span",{className:"font-mono",children:h(ve.otherCurrentTotal)})]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-blue-800 border-t-2 border-blue-300 mt-3 pt-2",children:[e.jsx("span",{children:"Total Current Assets"}),e.jsx("span",{className:"font-mono",children:h(ve.currentAssetsTotal)})]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200 flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-red-800 mb-2",children:"CURRENT LIABILITIES"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accounts Payable"}),e.jsx("span",{className:"font-mono",children:h(ve.apTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Outstanding Checks"}),e.jsx("span",{className:"font-mono",children:h(ve.checksTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Credit Card Debt"}),e.jsx("span",{className:"font-mono",children:h(ve.ccTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Operating Line"}),e.jsx("span",{className:"font-mono",children:h(s.currentLiabilities.operatingLine)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Current Portion Term Debt"}),e.jsx("span",{className:"font-mono",children:h(s.currentLiabilities.currentPortionTermDebt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accrued Interest"}),e.jsx("span",{className:"font-mono",children:h(s.currentLiabilities.accruedInterest)})]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-red-800 border-t-2 border-red-300 mt-3 pt-2",children:[e.jsx("span",{children:"Total Current Liabilities"}),e.jsx("span",{className:"font-mono",children:h(ve.currentLiabilitiesTotal)})]})]})]}),e.jsx("div",{className:"bg-gray-100 rounded-lg px-4 py-2 border border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[e.jsx("span",{className:"text-gray-700",children:"Working Capital (Current Assets  Current Liabilities)"}),e.jsx("span",{className:`font-mono text-lg ${ve.workingCapital>=0?"text-green-600":"text-red-600"}`,children:h(ve.workingCapital)})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-b from-amber-50 to-purple-50 rounded-lg p-4 border border-amber-200 flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-2",children:"NON-CURRENT ASSETS"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-xs font-medium text-amber-700 mb-1 flex items-center gap-1",children:[e.jsx($o,{className:"w-3 h-3"})," Intermediate (1-10 yrs)"]}),e.jsxs("div",{className:"pl-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Machinery & Equipment"}),e.jsx("span",{className:"font-mono",children:h(ve.machineryTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vehicles"}),e.jsx("span",{className:"font-mono",children:h(ve.vehiclesTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Breeding Livestock"}),e.jsx("span",{className:"font-mono",children:h(ve.breedingLivestockTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-amber-800 pl-3 mt-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:h(ve.intermediateAssetsTotal)})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-xs font-medium text-purple-700 mb-1 flex items-center gap-1",children:[e.jsx(Ro,{className:"w-3 h-3"})," Long-Term (10+ yrs)"]}),e.jsxs("div",{className:"pl-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Estate"}),e.jsx("span",{className:"font-mono",children:h(ve.realEstateTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Buildings & Improvements"}),e.jsx("span",{className:"font-mono",children:h(ve.buildingsTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Long-Term"}),e.jsx("span",{className:"font-mono",children:h(ve.otherLongTermTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-purple-800 pl-3 mt-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:h(ve.longTermAssetsTotal)})]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-gray-800 border-t-2 border-gray-400 mt-3 pt-2",children:[e.jsx("span",{children:"Total Non-Current Assets"}),e.jsx("span",{className:"font-mono",children:h(ve.intermediateAssetsTotal+ve.longTermAssetsTotal)})]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200 flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"NON-CURRENT LIABILITIES"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Equipment Debt"}),e.jsx("span",{className:"font-mono",children:h(ve.equipmentDebtTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vehicle Debt"}),e.jsx("span",{className:"font-mono",children:h(ve.vehicleDebtTotal||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Estate Debt"}),e.jsx("span",{className:"font-mono",children:h(ve.realEstateDebtTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Term Debt"}),e.jsx("span",{className:"font-mono",children:h(ve.otherDebtTotal)})]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-orange-800 border-t-2 border-orange-300 mt-3 pt-2",children:[e.jsx("span",{children:"Total Non-Current Liabilities"}),e.jsx("span",{className:"font-mono",children:h(ve.termDebtTotal)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-green-100 rounded-lg p-4 border-2 border-green-500",children:e.jsxs("div",{className:"flex justify-between items-center font-bold text-lg text-green-800",children:[e.jsx("span",{children:"TOTAL ASSETS"}),e.jsx("span",{className:"font-mono",children:h(ve.totalAssets)})]})}),e.jsx("div",{className:"bg-red-100 rounded-lg p-4 border-2 border-red-400",children:e.jsxs("div",{className:"flex justify-between items-center font-bold text-lg text-red-800",children:[e.jsx("span",{children:"TOTAL LIABILITIES"}),e.jsx("span",{className:"font-mono",children:h(ve.totalLiabilities)})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded-lg p-5 border-2 border-blue-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-xl text-blue-800",children:"TOTAL EQUITY"}),e.jsx("div",{className:"text-sm text-blue-600",children:"(Total Assets  Total Liabilities)"})]}),e.jsx("span",{className:`font-mono text-2xl font-bold ${ve.totalEquity>=0?"text-blue-800":"text-red-600"}`,children:h(ve.totalEquity)})]})})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Key Ratios & Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Working Capital"}),e.jsx("span",{className:`font-mono font-semibold ${ve.workingCapital>=0?"text-green-600":"text-red-600"}`,children:h(ve.workingCapital)})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${ve.workingCapital>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Math.abs(ve.workingCapital)/(ve.currentAssetsTotal||1)*100,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:ve.currentRatio.toFixed(2)}),e.jsx("div",{className:"text-xs text-blue-600",children:"Current Ratio"})]}),e.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:ve.debtToEquity.toFixed(2)}),e.jsx("div",{className:"text-xs text-amber-600",children:"Debt to Equity"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[(ve.equityPercent*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-green-600",children:"Owner's Equity %"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-700",children:[(ve.debtToAssets*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-red-600",children:"Debt to Assets"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:["Per Unit Metrics (",(Sn=re==null?void 0:re.units)==null?void 0:Sn.toLocaleString()," total units)"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Working Capital/Unit"}),e.jsx("span",{className:`font-mono font-semibold ${ve.workingCapital>=0?"text-green-600":"text-red-600"}`,children:h(ve.workingCapital/((re==null?void 0:re.units)||1))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Assets/Unit"}),e.jsx("span",{className:"font-mono",children:h(ve.totalAssets/((re==null?void 0:re.units)||1))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Debt/Unit"}),e.jsx("span",{className:"font-mono text-red-600",children:h(ve.totalLiabilities/((re==null?void 0:re.units)||1))})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Annual Depreciation"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Machinery"}),e.jsxs("span",{className:"font-mono text-red-600",children:["(",h(ve.machineryDepreciation),")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vehicles"}),e.jsxs("span",{className:"font-mono text-red-600",children:["(",h(ve.vehicleDepreciation),")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Buildings"}),e.jsxs("span",{className:"font-mono text-red-600",children:["(",h(ve.buildingDepreciation),")"]})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"font-mono text-red-600",children:["(",h(ve.totalDepreciation),")"]})]})]})]}),(()=>{const a=xt.sort((j,y)=>new Date(y.date)-new Date(j.date)),o=a.findIndex(j=>j.id===s.id),i=a[o+1],d=i?Ye(i).totalEquity:0,m=i?ve.totalEquity-d:0,g=s.adjustment||0,u=m-g;return e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Earned Equity Analysis"}),e.jsx("div",{className:"space-y-2 text-sm",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Prior Year Equity (",new Date(i.date).getFullYear(),")"]}),e.jsx("span",{className:"font-mono",children:h(d)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Equity"}),e.jsx("span",{className:"font-mono",children:h(ve.totalEquity)})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[e.jsx("span",{children:"Equity Change"}),e.jsxs("span",{className:`font-mono ${m>=0?"text-green-600":"text-red-600"}`,children:[m>=0?"+":"",h(m)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("span",{className:"text-gray-600",children:["Adjustment",e.jsx("div",{className:"text-xs text-gray-400",children:"(contributions, gifts, etc.)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.adjustment?s.adjustment.toLocaleString("en-US"):"",onChange:j=>{const y=parseFloat(j.target.value.replace(/,/g,""))||0;I({adjustment:y})},placeholder:"0",className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm text-right font-mono"})]})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t-2 border-green-500 pt-2 mt-2",children:[e.jsx("span",{className:"text-green-700",children:"Earned Equity"}),e.jsxs("span",{className:`font-mono ${u>=0?"text-green-700":"text-red-600"}`,children:[u>=0?"+":"",h(u)]})]})]}):e.jsx("div",{className:"text-gray-400 text-center py-2",children:"No prior year balance sheet for comparison"})})]})})()]})]})})]}),De==="trends"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-green-600"}),"Historical Trends  ",re==null?void 0:re.name,Qe&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Consolidated"})]}),(()=>{var o;let a=[];return Qe?a=[...new Set(xt.map(d=>new Date(d.date).getFullYear()))].sort((d,m)=>m-d).slice(0,5).map(d=>{const m=hs(xt,d);return m?{...m,year:d}:null}).filter(Boolean):a=Ir.sort((i,d)=>new Date(d.date)-new Date(i.date)).slice(0,5),a.length<2?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ut,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Need at least 2 balance sheets to show trends."}),e.jsx("p",{className:"text-sm mt-1",children:Qe?"Create balance sheets for at least 2 different years to see consolidated trends.":"Create another balance sheet to see historical comparisons."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-3 font-semibold text-gray-700 sticky left-0 bg-white",children:"Metric"}),a.map((i,d)=>{var m;return e.jsxs("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 min-w-[120px]",children:[Qe?i.year:new Date(i.date).getFullYear(),e.jsx("div",{className:"text-xs font-normal text-gray-400",children:Qe?`${((m=i.entitiesIncluded)==null?void 0:m.length)||0} entities`:ys(i.date)})]},i.id||d)}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 min-w-[100px]",children:"Change"})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"bg-green-50",children:e.jsx("td",{colSpan:a.length+2,className:"py-2 px-2 font-semibold text-green-800",children:"ASSETS"})}),[{label:"Current Assets",key:"currentAssetsTotal",color:"blue"},{label:"Intermediate Assets",key:"intermediateAssetsTotal",color:"amber"},{label:"Long-Term Assets",key:"longTermAssetsTotal",color:"purple"},{label:"Total Assets",key:"totalAssets",color:"green",bold:!0}].map(i=>{const d=a.map(u=>Ye(u)[i.key]),m=d.length>=2?d[0]-d[1]:0,g=d.length>=2&&d[1]!==0?(d[0]-d[1])/d[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${i.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-2 sticky left-0 bg-white ${i.bold?"bg-gray-50":""}`,children:e.jsx("span",{className:i.bold?"":"pl-4",children:i.label})}),a.map((u,j)=>e.jsx("td",{className:"text-right py-2 px-4 font-mono",children:h(Ye(u)[i.key])},u.id||j)),e.jsxs("td",{className:`text-right py-2 px-4 font-mono ${m>=0?"text-green-600":"text-red-600"}`,children:[m>=0?"+":"",h(m),e.jsxs("div",{className:"text-xs",children:["(",g>=0?"+":"",g.toFixed(1),"%)"]})]})]},i.key)}),e.jsx("tr",{className:"bg-red-50",children:e.jsx("td",{colSpan:a.length+2,className:"py-2 px-2 font-semibold text-red-800 mt-2",children:"LIABILITIES"})}),[{label:"Current Liabilities",key:"currentLiabilitiesTotal"},{label:"Term Debt",key:"termDebtTotal"},{label:"Total Liabilities",key:"totalLiabilities",bold:!0}].map(i=>{const d=a.map(u=>Ye(u)[i.key]),m=d.length>=2?d[0]-d[1]:0,g=d.length>=2&&d[1]!==0?(d[0]-d[1])/d[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${i.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-2 sticky left-0 bg-white ${i.bold?"bg-gray-50":""}`,children:e.jsx("span",{className:i.bold?"":"pl-4",children:i.label})}),a.map((u,j)=>e.jsx("td",{className:"text-right py-2 px-4 font-mono",children:h(Ye(u)[i.key])},u.id||j)),e.jsxs("td",{className:`text-right py-2 px-4 font-mono ${m<=0?"text-green-600":"text-red-600"}`,children:[m>=0?"+":"",h(m),e.jsxs("div",{className:"text-xs",children:["(",g>=0?"+":"",g.toFixed(1),"%)"]})]})]},i.key)}),e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:a.length+2,className:"py-2 px-2 font-semibold text-blue-800 mt-2",children:"EQUITY & WORKING CAPITAL"})}),[{label:"Total Equity",key:"totalEquity",bold:!0},{label:"Working Capital",key:"workingCapital",bold:!0}].map(i=>{const d=a.map(u=>Ye(u)[i.key]),m=d.length>=2?d[0]-d[1]:0,g=d.length>=2&&d[1]!==0?(d[0]-d[1])/d[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${i.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-2 sticky left-0 bg-white ${i.bold?"bg-gray-50":""}`,children:i.label}),a.map((u,j)=>e.jsx("td",{className:`text-right py-2 px-4 font-mono ${Ye(u)[i.key]<0?"text-red-600":""}`,children:h(Ye(u)[i.key])},u.id||j)),e.jsxs("td",{className:`text-right py-2 px-4 font-mono ${m>=0?"text-green-600":"text-red-600"}`,children:[m>=0?"+":"",h(m),e.jsxs("div",{className:"text-xs",children:["(",g>=0?"+":"",g.toFixed(1),"%)"]})]})]},i.key)}),(()=>{const i=a.map(d=>Ye(d).totalEquity);return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-100 bg-blue-50",children:[e.jsx("td",{className:"py-2 sticky left-0 bg-blue-50 font-semibold text-blue-800",children:"Equity Change (YoY)"}),a.map((d,m)=>{const g=i[m],u=i[m+1]||0,j=m<a.length-1?g-u:0;return e.jsx("td",{className:`text-right py-2 px-4 font-mono font-semibold ${j>=0?"text-green-600":"text-red-600"}`,children:m<a.length-1?e.jsxs(e.Fragment,{children:[j>=0?"+":"",h(j)]}):""},d.id||m)}),e.jsx("td",{className:"text-right py-2 px-4 font-mono",children:""})]}),e.jsxs("tr",{className:"border-b border-gray-100 bg-amber-50",children:[e.jsxs("td",{className:"py-2 sticky left-0 bg-amber-50 font-medium text-amber-800",children:["Adjustment",e.jsx("div",{className:"text-xs font-normal text-amber-600",children:"(Capital contributions, gifts, etc.)"})]}),a.map((d,m)=>e.jsx("td",{className:"text-right py-2 px-2",children:Qe?e.jsxs("span",{className:"font-mono text-gray-500",children:["$",(d.adjustment||0).toLocaleString("en-US",{minimumFractionDigits:0})]}):e.jsxs("div",{className:"flex items-center justify-end",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",defaultValue:d.adjustment?d.adjustment.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):"",onBlur:g=>{const u=parseFloat(g.target.value.replace(/,/g,""))||0;ee(j=>({...j,[P]:j[P].map(y=>y.id===d.id?{...y,adjustment:u}:y)}))},placeholder:"0",className:"w-24 px-2 py-1 border border-amber-300 rounded text-sm text-right font-mono bg-white"})]})},d.id||m)),e.jsx("td",{className:"text-right py-2 px-4 font-mono text-gray-400",children:""})]}),e.jsxs("tr",{className:"border-b-2 border-green-300 bg-green-50",children:[e.jsxs("td",{className:"py-2 sticky left-0 bg-green-50 font-bold text-green-800",children:["Earned Equity",e.jsx("div",{className:"text-xs font-normal text-green-600",children:"(Equity Change  Adjustment)"})]}),a.map((d,m)=>{const g=i[m],u=i[m+1]||0,j=m<a.length-1?g-u:0,y=d.adjustment||0,p=j-y;return e.jsx("td",{className:`text-right py-2 px-4 font-mono font-bold ${p>=0?"text-green-700":"text-red-600"}`,children:m<a.length-1?e.jsxs(e.Fragment,{children:[p>=0?"+":"",h(p)]}):""},d.id||m)}),e.jsx("td",{className:"text-right py-2 px-4 font-mono",children:""})]})]})})()]})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Key Ratios Trend"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-3 font-semibold text-gray-700",children:"Ratio"}),a.map((i,d)=>e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 min-w-[100px]",children:Qe?i.year:new Date(i.date).getFullYear()},i.id||d)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Change"})]})}),e.jsx("tbody",{children:[{label:"Current Ratio",key:"currentRatio",format:"ratio",goodUp:!0},{label:"Debt to Equity",key:"debtToEquity",format:"ratio",goodUp:!1},{label:"Owner's Equity %",key:"equityPercent",format:"percent",goodUp:!0},{label:"Debt to Assets %",key:"debtToAssets",format:"percent",goodUp:!1}].map(i=>{const d=a.map(u=>Ye(u)[i.key]),m=d.length>=2?d[0]-d[1]:0,g=i.goodUp?m>=0:m<=0;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3",children:i.label}),a.map((u,j)=>{const y=Ye(u)[i.key];return e.jsx("td",{className:"text-right py-3 px-4 font-mono",children:i.format==="percent"?`${(y*100).toFixed(1)}%`:y.toFixed(2)},u.id||j)}),e.jsxs("td",{className:`text-right py-3 px-4 font-mono ${g?"text-green-600":"text-red-600"}`,children:[m>=0?"+":"",i.format==="percent"?`${(m*100).toFixed(1)}%`:m.toFixed(2)]})]},i.key)})})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4",children:["Per Unit Metrics (",(o=re==null?void 0:re.units)==null?void 0:o.toLocaleString()," units)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-3 font-semibold text-gray-700",children:"Metric"}),a.map((i,d)=>e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 min-w-[100px]",children:Qe?i.year:new Date(i.date).getFullYear()},i.id||d)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Change"})]})}),e.jsx("tbody",{children:[{label:"Working Capital / Unit",key:"workingCapital",goodUp:!0},{label:"Total Assets / Unit",key:"totalAssets",goodUp:!0},{label:"Total Debt / Unit",key:"totalLiabilities",goodUp:!1},{label:"Equity / Unit",key:"totalEquity",goodUp:!0}].map(i=>{const d=(re==null?void 0:re.units)||1,m=a.map(j=>Ye(j)[i.key]/d),g=m.length>=2?m[0]-m[1]:0,u=i.goodUp?g>=0:g<=0;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3",children:i.label}),a.map((j,y)=>{const p=Ye(j)[i.key]/d;return e.jsx("td",{className:`text-right py-3 px-4 font-mono ${p<0?"text-red-600":""}`,children:h(p)},j.id||y)}),e.jsxs("td",{className:`text-right py-3 px-4 font-mono ${u?"text-green-600":"text-red-600"}`,children:[g>=0?"+":"",h(g)]})]},i.key)})})]})})]})]})})()]})}),De==="current"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Mo,{className:"w-5 h-5 text-blue-600"}),"Current Assets",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(Convert to cash within 1 year)"})]}),e.jsx(Jn,{title:"Cash",icon:fr,color:"blue",items:s.currentAssets.cash,onUpdate:a=>_t("cash",a),onAdd:()=>pr("cash"),onDelete:a=>nr("cash",a)}),e.jsx(Jn,{title:"Accounts Receivable",icon:Ue,color:"blue",items:s.currentAssets.accountsReceivable,onUpdate:a=>_t("accountsReceivable",a),onAdd:()=>pr("accountsReceivable"),onDelete:a=>nr("accountsReceivable",a)}),e.jsx(Jn,{title:"Commodity Trading Accounts",icon:st,color:"blue",items:s.currentAssets.commodityAccounts,onUpdate:a=>_t("commodityAccounts",a),onAdd:()=>pr("commodityAccounts"),onDelete:a=>nr("commodityAccounts",a)}),e.jsx(Ff,{title:"Crop Inventory",icon:$r,color:"blue",items:s.currentAssets.cropInventory,onUpdate:a=>_t("cropInventory",a),onAdd:()=>pr("cropInventory"),onDelete:a=>nr("cropInventory",a)}),e.jsx(Af,{title:"Feed Inventory",icon:$r,color:"blue",items:s.currentAssets.feedInventory,onUpdate:a=>_t("feedInventory",a),onAdd:()=>pr("feedInventory"),onDelete:a=>nr("feedInventory",a)}),e.jsx(kf,{title:"Market Livestock",icon:Vo,color:"blue",items:s.currentAssets.marketLivestock,onUpdate:a=>_t("marketLivestock",a),onAdd:()=>pr("marketLivestock"),onDelete:a=>nr("marketLivestock",a)}),e.jsxs(or,{title:"Investment in Growing Crop",icon:$r,color:"blue",total:((Rn=s.currentAssets.growingCrop)==null?void 0:Rn.reduce((a,o)=>a+(o.totalValue||0),0))||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium text-right w-28",children:"Acres"}),e.jsx("th",{className:"pb-2 font-medium text-right w-28",children:"$/Acre"}),e.jsx("th",{className:"pb-2 font-medium text-right w-32",children:"Total Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:($n=s.currentAssets.growingCrop)==null?void 0:$n.map(a=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.description||"",onChange:o=>{const i={...a,description:o.target.value};_t("growingCrop",i)},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Crop description"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.acres?a.acres.toLocaleString("en-US"):"",onChange:o=>{const i=parseFloat(o.target.value.replace(/,/g,""))||0,d=i*(a.pricePerAcre||0),m={...a,acres:i,totalValue:d};_t("growingCrop",m)},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:a.pricePerAcre?a.pricePerAcre.toLocaleString("en-US",{minimumFractionDigits:2}):"",onChange:o=>{const i=parseFloat(o.target.value.replace(/,/g,""))||0,d=(a.acres||0)*i,m={...a,pricePerAcre:i,totalValue:d};_t("growingCrop",m)},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsxs("td",{className:"py-2 text-right font-mono font-semibold text-green-700",children:["$",(a.totalValue||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>nr("growingCrop",a.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-2",children:"Total"}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((je=s.currentAssets.growingCrop)==null?void 0:je.reduce((a,o)=>a+(o.acres||0),0))||0).toLocaleString("en-US")}),e.jsx("td",{className:"py-2"}),e.jsxs("td",{className:"py-2 text-right font-mono text-green-700",children:["$",(((Ne=s.currentAssets.growingCrop)==null?void 0:Ne.reduce((a,o)=>a+(o.totalValue||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{})]})})]}),e.jsxs("button",{onClick:()=>{const a={id:`gc-${Date.now()}`,description:"",acres:0,pricePerAcre:0,totalValue:0},o=[...s.currentAssets.growingCrop||[],a];I({currentAssets:{...s.currentAssets,growingCrop:o}})},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Crop"]})]}),e.jsx(Jn,{title:"Prepaid Expenses",icon:Ue,color:"blue",items:s.currentAssets.prepaidExpenses,onUpdate:a=>_t("prepaidExpenses",a),onAdd:()=>pr("prepaidExpenses"),onDelete:a=>nr("prepaidExpenses",a)}),e.jsx(Jn,{title:"Other Current Assets",icon:Ue,color:"blue",items:s.currentAssets.otherCurrentAssets,onUpdate:a=>_t("otherCurrentAssets",a),onAdd:()=>pr("otherCurrentAssets"),onDelete:a=>nr("otherCurrentAssets",a)}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-blue-800",children:"Total Current Assets"}),e.jsx("span",{className:"text-xl font-bold font-mono text-blue-700",children:h(ve.currentAssetsTotal)})]})]}),De==="intermediate"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx($o,{className:"w-5 h-5 text-amber-600"}),"Intermediate Assets",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(1-10 year useful life)"})]}),e.jsx(_o,{title:"Machinery & Equipment",icon:Ar,color:"amber",items:((Ic=s.intermediateAssets)==null?void 0:Ic.machinery)||[],onUpdate:a=>Jt("machinery",a),onAdd:()=>Is("machinery"),onDelete:a=>Ss("machinery",a),purchases:((Sc=s.capitalActivity)==null?void 0:Sc.machineryPurchases)||[],sales:((Rc=s.capitalActivity)==null?void 0:Rc.machinerySales)||[],onAddPurchase:()=>Ms("machinery"),onUpdatePurchase:a=>Sr("machineryPurchases",a),onDeletePurchase:a=>Us("machinery",a),onAddSale:()=>Os("machinery"),onUpdateSale:a=>Sr("machinerySales",a),onDeleteSale:a=>zs("machinery",a),onAddAssetFromPurchase:a=>Vs("machinery",a)}),e.jsx(_o,{title:"Vehicles",icon:Ar,color:"amber",items:(($c=s.intermediateAssets)==null?void 0:$c.vehicles)||[],onUpdate:a=>Jt("vehicles",a),onAdd:()=>Is("vehicles"),onDelete:a=>Ss("vehicles",a),purchases:((Mc=s.capitalActivity)==null?void 0:Mc.vehiclePurchases)||[],sales:((Uc=s.capitalActivity)==null?void 0:Uc.vehicleSales)||[],onAddPurchase:()=>Ms("vehicle"),onUpdatePurchase:a=>Sr("vehiclePurchases",a),onDeletePurchase:a=>Us("vehicle",a),onAddSale:()=>Os("vehicle"),onUpdateSale:a=>Sr("vehicleSales",a),onDeleteSale:a=>zs("vehicle",a),onAddAssetFromPurchase:a=>Vs("vehicle",a)}),e.jsxs(or,{title:"Breeding Livestock",icon:Vo,color:"amber",total:((zc=(Oc=s.intermediateAssets)==null?void 0:Oc.breedingLivestock)==null?void 0:zc.reduce((a,o)=>a+(o.totalValue||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Type"}),e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-center",children:"Age"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Qty"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"$/Head"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Last Value"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Cur Value"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Change"}),e.jsx("th",{className:"pb-2 font-medium w-20 text-center",children:"Bought/Sold"}),e.jsx("th",{className:"pb-2 font-medium w-16 text-center",children:"Year"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Hc=(Vc=s.intermediateAssets)==null?void 0:Vc.breedingLivestock)==null?void 0:Hc.map(a=>((a.quantity||0)*(a.valuePerHead||0)-(a.lastValue||0),e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:a.type||"Cows",onChange:i=>Jt("breedingLivestock",{...a,type:i.target.value}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"Cows",children:"Cows"}),e.jsx("option",{value:"Bulls",children:"Bulls"}),e.jsx("option",{value:"Heifers",children:"Heifers"}),e.jsx("option",{value:"Calves",children:"Calves"}),e.jsx("option",{value:"Sows",children:"Sows"}),e.jsx("option",{value:"Boars",children:"Boars"}),e.jsx("option",{value:"Ewes",children:"Ewes"}),e.jsx("option",{value:"Rams",children:"Rams"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.description||"",onChange:i=>Jt("breedingLivestock",{...a,description:i.target.value}),placeholder:"e.g., Spring Cows",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.age||"",onChange:i=>Jt("breedingLivestock",{...a,age:i.target.value}),placeholder:"",className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-center"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.quantity?a.quantity.toLocaleString("en-US"):"",onChange:i=>{const d=parseInt(i.target.value.replace(/,/g,""))||0,m=a.valuePerHead||0;Jt("breedingLivestock",{...a,quantity:d,totalValue:d*m})},className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:a.valuePerHead?a.valuePerHead.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:i=>{const d=parseFloat(i.target.value.replace(/,/g,""))||0,m=a.quantity||0;Jt("breedingLivestock",{...a,valuePerHead:d,totalValue:m*d})},className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:a.lastValue?a.lastValue.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:i=>Jt("breedingLivestock",{...a,lastValue:parseFloat(i.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right bg-gray-50"})]})}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(a.totalValue||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})]}),e.jsxs("td",{className:`py-2 text-right font-mono ${(a.totalValue||0)-(a.lastValue||0)>=0?"text-green-600":"text-red-600"}`,children:[(a.totalValue||0)-(a.lastValue||0)>=0?"+":"","$",((a.totalValue||0)-(a.lastValue||0)).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})]}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:a.boughtSold||"",onChange:i=>Jt("breedingLivestock",{...a,boughtSold:i.target.value}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-center",children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Bought",children:"Bought"}),e.jsx("option",{value:"Sold",children:"Sold"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:a.yearBoughtSold||"",onChange:i=>Jt("breedingLivestock",{...a,yearBoughtSold:parseInt(i.target.value)||""}),placeholder:"YYYY",className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-center"})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>Ss("breedingLivestock",a.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id)))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-2 px-2",children:"Total"}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((Yc=(_c=s.intermediateAssets)==null?void 0:_c.breedingLivestock)==null?void 0:Yc.reduce((a,o)=>a+(o.quantity||0),0))||0).toLocaleString("en-US")}),e.jsx("td",{}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((Wc=(qc=s.intermediateAssets)==null?void 0:qc.breedingLivestock)==null?void 0:Wc.reduce((a,o)=>a+(o.lastValue||0),0))||0).toLocaleString("en-US")]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((Qc=(Gc=s.intermediateAssets)==null?void 0:Gc.breedingLivestock)==null?void 0:Qc.reduce((a,o)=>a+(o.totalValue||0),0))||0).toLocaleString("en-US")]}),e.jsxs("td",{className:`py-2 text-right font-mono ${(((Jc=(Kc=s.intermediateAssets)==null?void 0:Kc.breedingLivestock)==null?void 0:Jc.reduce((a,o)=>a+((o.totalValue||0)-(o.lastValue||0)),0))||0)>=0?"text-green-600":"text-red-600"}`,children:[(((Xc=(Zc=s.intermediateAssets)==null?void 0:Zc.breedingLivestock)==null?void 0:Xc.reduce((a,o)=>a+((o.totalValue||0)-(o.lastValue||0)),0))||0)>=0?"+":"","$",(((ed=(Bc=s.intermediateAssets)==null?void 0:Bc.breedingLivestock)==null?void 0:ed.reduce((a,o)=>a+((o.totalValue||0)-(o.lastValue||0)),0))||0).toLocaleString("en-US")]}),e.jsx("td",{colSpan:"2"}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:()=>Is("breedingLivestock"),className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Livestock"]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-amber-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-amber-800",children:"Total Intermediate Assets"}),e.jsx("span",{className:"text-xl font-bold font-mono text-amber-700",children:h(ve.intermediateAssetsTotal)})]})]})}),De==="longterm"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ro,{className:"w-5 h-5 text-purple-600"}),"Long-Term Assets",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(10+ year useful life)"})]}),e.jsxs(or,{title:"Real Estate",icon:sl,color:"purple",total:((rd=(td=s.longTermAssets)==null?void 0:td.realEstate)==null?void 0:rd.reduce((a,o)=>a+(o.marketValue||o.value||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium w-20",children:"PID"}),e.jsx("th",{className:"pb-2 font-medium",children:"Legal Description"}),e.jsx("th",{className:"pb-2 font-medium w-24",children:"County"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Total"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Irr"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Dry"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Other"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Tillable"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Tax Value"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Ann Taxes"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-center",children:"Appr Date"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Appr $/Ac"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Market Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(nd=(sd=s.longTermAssets)==null?void 0:sd.realEstate)==null?void 0:nd.map(a=>e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.pid||"",onChange:o=>gt("realEstate",{...a,pid:o.target.value}),placeholder:"PID",className:"w-full px-1 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.description||"",onChange:o=>gt("realEstate",{...a,description:o.target.value}),placeholder:"Legal description",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.county||"",onChange:o=>gt("realEstate",{...a,county:o.target.value}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.totalAcres?a.totalAcres.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:o=>gt("realEstate",{...a,totalAcres:parseFloat(o.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.irrAcres?a.irrAcres.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:o=>gt("realEstate",{...a,irrAcres:parseFloat(o.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.dryAcres?a.dryAcres.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:o=>gt("realEstate",{...a,dryAcres:parseFloat(o.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.otherAcres?a.otherAcres.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:o=>gt("realEstate",{...a,otherAcres:parseFloat(o.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2 text-right font-mono text-gray-600 text-xs",children:((a.irrAcres||0)+(a.dryAcres||0)).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:a.taxValue?a.taxValue.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):"",onChange:o=>gt("realEstate",{...a,taxValue:parseFloat(o.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:a.annualTaxes?a.annualTaxes.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"",onChange:o=>gt("realEstate",{...a,annualTaxes:parseFloat(o.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"date",value:a.appraisedDate||"",onChange:o=>gt("realEstate",{...a,appraisedDate:o.target.value}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:a.appraisedPerAcre?a.appraisedPerAcre.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):"",onChange:o=>{const i=parseFloat(o.target.value.replace(/,/g,""))||0,d=a.totalAcres||0;gt("realEstate",{...a,appraisedPerAcre:i,marketValue:i*d})},className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:a.marketValue?a.marketValue.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):a.value?a.value.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):"",onChange:o=>{const i=parseFloat(o.target.value.replace(/,/g,""))||0;gt("realEstate",{...a,marketValue:i,value:i})},className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono bg-gray-50"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>$s("realEstate",a.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-2 px-2",children:"Total"}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((ld=(ad=s.longTermAssets)==null?void 0:ad.realEstate)==null?void 0:ld.reduce((a,o)=>a+(o.totalAcres||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((id=(od=s.longTermAssets)==null?void 0:od.realEstate)==null?void 0:id.reduce((a,o)=>a+(o.irrAcres||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((dd=(cd=s.longTermAssets)==null?void 0:cd.realEstate)==null?void 0:dd.reduce((a,o)=>a+(o.dryAcres||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((md=(xd=s.longTermAssets)==null?void 0:xd.realEstate)==null?void 0:md.reduce((a,o)=>a+(o.otherAcres||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((hd=(ud=s.longTermAssets)==null?void 0:ud.realEstate)==null?void 0:hd.reduce((a,o)=>a+((o.irrAcres||0)+(o.dryAcres||0)),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((gd=(pd=s.longTermAssets)==null?void 0:pd.realEstate)==null?void 0:gd.reduce((a,o)=>a+(o.taxValue||0),0))||0).toLocaleString("en-US")]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((fd=(yd=s.longTermAssets)==null?void 0:yd.realEstate)==null?void 0:fd.reduce((a,o)=>a+(o.annualTaxes||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{}),e.jsx("td",{}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((jd=(bd=s.longTermAssets)==null?void 0:bd.realEstate)==null?void 0:jd.reduce((a,o)=>a+(o.marketValue||o.value||0),0))||0).toLocaleString("en-US")]}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:()=>Rs("realEstate"),className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Real Estate"]}),(()=>{var p,b;const a=((p=s.longTermAssets)==null?void 0:p.realEstate)||[],i=(((b=s.debtService)==null?void 0:b.filter(N=>N.category==="realEstate"))||[]).reduce((N,C)=>N+(C.totalPayment||0),0),d=a.reduce((N,C)=>N+(C.annualTaxes||0),0),m=i+d,g=a.reduce((N,C)=>N+(C.totalAcres||0),0),u=a.reduce((N,C)=>N+((C.irrAcres||0)+(C.dryAcres||0)),0),j=g>0?m/g:0,y=u>0?m/u:0;return e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:"Cash Rent Equivalent Analysis"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Annual RE Debt Payments:"}),e.jsxs("span",{className:"font-mono",children:["$",i.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Annual Property Taxes:"}),e.jsxs("span",{className:"font-mono",children:["$",d.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm font-semibold border-t border-purple-200 pt-2",children:[e.jsx("span",{className:"text-purple-800",children:"Total Carrying Cost:"}),e.jsxs("span",{className:"font-mono text-purple-800",children:["$",m.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Owned Acres:"}),e.jsx("span",{className:"font-mono",children:g.toLocaleString("en-US",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tillable Acres:"}),e.jsx("span",{className:"font-mono",children:u.toLocaleString("en-US",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"border-t border-purple-200 pt-2 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[e.jsx("span",{className:"text-purple-800",children:"Cash Rent Equiv / Total Acre:"}),e.jsxs("span",{className:"font-mono text-purple-800",children:["$",j.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[e.jsx("span",{className:"text-purple-800",children:"Cash Rent Equiv / Tillable Acre:"}),e.jsxs("span",{className:"font-mono text-purple-800",children:["$",y.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]})]})]})})()]}),e.jsx(_o,{title:"Buildings & Improvements",icon:uf,color:"purple",items:((Nd=s.longTermAssets)==null?void 0:Nd.buildings)||[],onUpdate:a=>gt("buildings",a),onAdd:()=>Rs("buildings"),onDelete:a=>$s("buildings",a),purchases:((vd=s.capitalActivity)==null?void 0:vd.buildingPurchases)||[],sales:((wd=s.capitalActivity)==null?void 0:wd.buildingSales)||[],onAddPurchase:()=>Ms("building"),onUpdatePurchase:a=>Sr("buildingPurchases",a),onDeletePurchase:a=>Us("building",a),onAddSale:()=>Os("building"),onUpdateSale:a=>Sr("buildingSales",a),onDeleteSale:a=>zs("building",a),onAddAssetFromPurchase:a=>Vs("building",a)}),e.jsxs(or,{title:"Other Long-Term Assets",icon:Kn,color:"purple",total:((Cd=(Pd=s.longTermAssets)==null?void 0:Pd.otherLongTerm)==null?void 0:Cd.reduce((a,o)=>a+(o.currentValue||o.amount||0),0))||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Prior Year Value"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Current Value"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Change"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Ad=(Fd=s.longTermAssets)==null?void 0:Fd.otherLongTerm)==null?void 0:Ad.map(a=>{const o=(a.currentValue||0)-(a.priorValue||0);return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.description||"",onChange:i=>gt("otherLongTerm",{...a,description:i.target.value}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Description"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:a.priorValue?a.priorValue.toLocaleString("en-US",{minimumFractionDigits:2}):"",onChange:i=>{const d=parseFloat(i.target.value.replace(/,/g,""))||0;gt("otherLongTerm",{...a,priorValue:d})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:a.currentValue?a.currentValue.toLocaleString("en-US",{minimumFractionDigits:2}):a.amount?a.amount.toLocaleString("en-US",{minimumFractionDigits:2}):"",onChange:i=>{const d=parseFloat(i.target.value.replace(/,/g,""))||0;gt("otherLongTerm",{...a,currentValue:d,amount:d})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsxs("td",{className:`py-2 text-right font-mono font-semibold ${o>=0?"text-green-600":"text-red-600"}`,children:[o>=0?"":"(","$",Math.abs(o).toLocaleString("en-US",{minimumFractionDigits:2}),o>=0?"":")"]}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>$s("otherLongTerm",a.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-2",children:"Total"}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((Dd=(kd=s.longTermAssets)==null?void 0:kd.otherLongTerm)==null?void 0:Dd.reduce((a,o)=>a+(o.priorValue||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((Ld=(Td=s.longTermAssets)==null?void 0:Td.otherLongTerm)==null?void 0:Ld.reduce((a,o)=>a+(o.currentValue||o.amount||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{className:`py-2 text-right font-mono font-semibold ${(((Id=(Ed=s.longTermAssets)==null?void 0:Ed.otherLongTerm)==null?void 0:Id.reduce((a,o)=>a+(o.currentValue||o.amount||0),0))||0)-(((Rd=(Sd=s.longTermAssets)==null?void 0:Sd.otherLongTerm)==null?void 0:Rd.reduce((a,o)=>a+(o.priorValue||0),0))||0)>=0?"text-green-600":"text-red-600"}`,children:(()=>{var o,i,d,m;const a=(((i=(o=s.longTermAssets)==null?void 0:o.otherLongTerm)==null?void 0:i.reduce((g,u)=>g+(u.currentValue||u.amount||0),0))||0)-(((m=(d=s.longTermAssets)==null?void 0:d.otherLongTerm)==null?void 0:m.reduce((g,u)=>g+(u.priorValue||0),0))||0);return`${a>=0?"":"("}$${Math.abs(a).toLocaleString("en-US",{minimumFractionDigits:2})}${a>=0?"":")"}`})()}),e.jsx("td",{})]})})]}),e.jsxs("button",{onClick:()=>Rs("otherLongTerm"),className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Item"]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-purple-800",children:"Total Long-Term Assets"}),e.jsx("span",{className:"text-xl font-bold font-mono text-purple-700",children:h(ve.longTermAssetsTotal)})]})]})}),De==="liabilities"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Current Liabilities"}),e.jsxs(or,{title:"Accounts Payable",icon:rl,color:"red",total:Array.isArray(($d=s.currentLiabilities)==null?void 0:$d.accountsPayable)?s.currentLiabilities.accountsPayable.reduce((a,o)=>a+(o.amount||0),0):((Md=s.currentLiabilities)==null?void 0:Md.accountsPayable)||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Vendor"}),e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Amount"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Array.isArray((Ud=s.currentLiabilities)==null?void 0:Ud.accountsPayable)?s.currentLiabilities.accountsPayable:[]).map(a=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.vendor||"",onChange:o=>{const i=s.currentLiabilities.accountsPayable.map(d=>d.id===a.id?{...d,vendor:o.target.value}:d);I({currentLiabilities:{...s.currentLiabilities,accountsPayable:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Vendor name"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.description||"",onChange:o=>{const i=s.currentLiabilities.accountsPayable.map(d=>d.id===a.id?{...d,description:o.target.value}:d);I({currentLiabilities:{...s.currentLiabilities,accountsPayable:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Description"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:a.amount||0,onChange:o=>{const i=s.currentLiabilities.accountsPayable.map(d=>d.id===a.id?{...d,amount:o}:d);I({currentLiabilities:{...s.currentLiabilities,accountsPayable:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>{const o=s.currentLiabilities.accountsPayable.filter(i=>i.id!==a.id);I({currentLiabilities:{...s.currentLiabilities,accountsPayable:o}})},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id))})]}),e.jsxs("button",{onClick:()=>{var i;const a=Array.isArray((i=s.currentLiabilities)==null?void 0:i.accountsPayable)?s.currentLiabilities.accountsPayable:[],o={id:`ap-${Date.now()}`,vendor:"",description:"",amount:0};I({currentLiabilities:{...s.currentLiabilities,accountsPayable:[...a,o]}})},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Payable"]})]}),e.jsxs(or,{title:"Outstanding Checks",icon:Ue,color:"red",total:Array.isArray((Od=s.currentLiabilities)==null?void 0:Od.outstandingChecks)?s.currentLiabilities.outstandingChecks.reduce((a,o)=>a+(o.amount||0),0):((zd=s.currentLiabilities)==null?void 0:zd.outstandingChecks)||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Vendor"}),e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-center",children:"Check #"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Amount"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Array.isArray((Vd=s.currentLiabilities)==null?void 0:Vd.outstandingChecks)?s.currentLiabilities.outstandingChecks:[]).map(a=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.vendor||"",onChange:o=>{const i=s.currentLiabilities.outstandingChecks.map(d=>d.id===a.id?{...d,vendor:o.target.value}:d);I({currentLiabilities:{...s.currentLiabilities,outstandingChecks:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Vendor name"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.description||"",onChange:o=>{const i=s.currentLiabilities.outstandingChecks.map(d=>d.id===a.id?{...d,description:o.target.value}:d);I({currentLiabilities:{...s.currentLiabilities,outstandingChecks:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Description"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.draftNumber||"",onChange:o=>{const i=s.currentLiabilities.outstandingChecks.map(d=>d.id===a.id?{...d,draftNumber:o.target.value}:d);I({currentLiabilities:{...s.currentLiabilities,outstandingChecks:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-center",placeholder:"Check #"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:a.amount||0,onChange:o=>{const i=s.currentLiabilities.outstandingChecks.map(d=>d.id===a.id?{...d,amount:o}:d);I({currentLiabilities:{...s.currentLiabilities,outstandingChecks:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>{const o=s.currentLiabilities.outstandingChecks.filter(i=>i.id!==a.id);I({currentLiabilities:{...s.currentLiabilities,outstandingChecks:o}})},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id))})]}),e.jsxs("button",{onClick:()=>{var i;const a=Array.isArray((i=s.currentLiabilities)==null?void 0:i.outstandingChecks)?s.currentLiabilities.outstandingChecks:[],o={id:`oc-${Date.now()}`,vendor:"",description:"",draftNumber:"",amount:0};I({currentLiabilities:{...s.currentLiabilities,outstandingChecks:[...a,o]}})},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Check"]})]}),e.jsxs(or,{title:"Credit Card Debt",icon:rl,color:"red",total:Array.isArray((Hd=s.currentLiabilities)==null?void 0:Hd.creditCardDebt)?s.currentLiabilities.creditCardDebt.reduce((a,o)=>a+(o.amount||0),0):((_d=s.currentLiabilities)==null?void 0:_d.creditCardDebt)||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Amount"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Array.isArray((Yd=s.currentLiabilities)==null?void 0:Yd.creditCardDebt)?s.currentLiabilities.creditCardDebt:[]).map(a=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.description||"",onChange:o=>{const i=s.currentLiabilities.creditCardDebt.map(d=>d.id===a.id?{...d,description:o.target.value}:d);I({currentLiabilities:{...s.currentLiabilities,creditCardDebt:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Card Name/Description"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ne,{value:a.amount||0,onChange:o=>{const i=s.currentLiabilities.creditCardDebt.map(d=>d.id===a.id?{...d,amount:o}:d);I({currentLiabilities:{...s.currentLiabilities,creditCardDebt:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>{const o=s.currentLiabilities.creditCardDebt.filter(i=>i.id!==a.id);I({currentLiabilities:{...s.currentLiabilities,creditCardDebt:o}})},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id))})]}),e.jsxs("button",{onClick:()=>{var i;const a=Array.isArray((i=s.currentLiabilities)==null?void 0:i.creditCardDebt)?s.currentLiabilities.creditCardDebt:[],o={id:`cc-${Date.now()}`,description:"",amount:0};I({currentLiabilities:{...s.currentLiabilities,creditCardDebt:[...a,o]}})},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Card"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-4 mt-4",children:[{key:"operatingLine",label:"Operating Line"},{key:"currentPortionTermDebt",label:"Current Portion Term Debt"},{key:"accruedInterest",label:"Accrued Interest"}].map(a=>e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:a.label}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.currentLiabilities[a.key]?s.currentLiabilities[a.key].toLocaleString("en-US",{minimumFractionDigits:2}):"",onChange:o=>{I({currentLiabilities:{...s.currentLiabilities,[a.key]:parseFloat(o.target.value.replace(/,/g,""))||0}})},className:"w-full px-3 py-2 border border-gray-200 rounded font-mono text-right"})]})]},a.key))}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-red-800",children:"Total Current Liabilities"}),e.jsx("span",{className:"text-xl font-bold font-mono text-red-700",children:h(ve.currentLiabilitiesTotal)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Term Debt (Non-Current Liabilities)"}),e.jsxs("table",{className:"w-full text-sm mb-4",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-24",children:"Lender"}),e.jsx("th",{className:"pb-2 font-medium w-28",children:"Category"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Principal"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Annual Pmt"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(qd=s.termDebt)==null?void 0:qd.map(a=>e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.description||"",onChange:o=>{const i=s.termDebt.map(d=>d.id===a.id?{...d,description:o.target.value}:d);I({termDebt:i})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:a.lender||"",onChange:o=>{const i=s.termDebt.map(d=>d.id===a.id?{...d,lender:o.target.value}:d);I({termDebt:i})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:a.category||"other",onChange:o=>{const i=s.termDebt.map(d=>d.id===a.id?{...d,category:o.target.value}:d);I({termDebt:i})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"equipment",children:"Equipment"}),e.jsx("option",{value:"vehicle",children:"Vehicle"}),e.jsx("option",{value:"realEstate",children:"Real Estate"}),e.jsx("option",{value:"livestock",children:"Livestock"}),e.jsx("option",{value:"personal",children:"Personal"}),e.jsx("option",{value:"other",children:"Other"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:a.principal||0,onChange:o=>{const i=s.termDebt.map(d=>d.id===a.id?{...d,principal:parseFloat(o.target.value)||0}:d);I({termDebt:i})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:a.annualPayment||0,onChange:o=>{const i=s.termDebt.map(d=>d.id===a.id?{...d,annualPayment:parseFloat(o.target.value)||0}:d);I({termDebt:i})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>I({termDebt:s.termDebt.filter(o=>o.id!==a.id)}),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id))})]}),e.jsxs("button",{onClick:()=>{const a={id:`td-${Date.now()}`,description:"",lender:"",category:"other",principal:0,annualPayment:0};I({termDebt:[...s.termDebt||[],a]})},className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 mb-4",children:[e.jsx(Ve,{className:"w-4 h-4"})," Add Term Debt"]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-red-800",children:"Total Term Debt"}),e.jsx("span",{className:"text-xl font-bold font-mono text-red-700",children:h(ve.termDebtTotal)})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Total Liabilities"}),e.jsx("span",{className:"font-bold font-mono text-red-600",children:h(ve.totalLiabilities)})]}),e.jsxs("div",{className:"flex justify-between text-xl border-t pt-3",children:[e.jsx("span",{className:"font-bold text-gray-800",children:"Total Equity"}),e.jsx("span",{className:"font-bold font-mono text-blue-600",children:h(ve.totalEquity)})]})]})})]}),De==="debtservice"&&e.jsxs("div",{className:"space-y-6",children:[[{key:"operating",label:"Operating",color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-800",borderColor:"border-blue-300"},{key:"equipment",label:"Equipment",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-300"},{key:"vehicle",label:"Vehicle",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-300"},{key:"other",label:"Other",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-300"},{key:"realEstate",label:"Ag Real Estate",color:"green",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-300"},{key:"personal",label:"Personal",color:"gray",bgColor:"bg-gray-200",textColor:"text-gray-700",borderColor:"border-gray-400"}].map(a=>{var g;const o=((g=s.debtService)==null?void 0:g.filter(u=>u.category===a.key))||[],i={accruedInterest:o.reduce((u,j)=>u+(j.accruedInterest||0),0),principalAmount:o.reduce((u,j)=>u+(j.principalAmount||0),0),principalPayment:o.reduce((u,j)=>u+(j.principalPayment||0),0),interestPayment:o.reduce((u,j)=>u+(j.interestPayment||0),0),totalPayment:o.reduce((u,j)=>u+(j.totalPayment||0),0)},d=a.key==="operating"?o.reduce((u,j)=>u+(j.currentBalance||0),0):i.principalAmount,m=d>0?o.reduce((u,j)=>u+(j.interestRate||0)*(a.key==="operating"?j.currentBalance||0:j.principalAmount||0),0)/d:0;return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:`${a.bgColor} ${a.textColor} px-4 py-2 font-bold border-b ${a.borderColor}`,children:a.label}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${a.bgColor} ${a.textColor} border-b ${a.borderColor}`,children:[e.jsx("th",{className:"py-2 px-2 text-left font-semibold underline",style:{minWidth:"180px"},children:"Purpose"}),e.jsx("th",{className:"py-2 px-2 text-left font-semibold underline",style:{minWidth:"120px"},children:"Lender"}),e.jsx("th",{className:"py-2 px-2 text-left font-semibold underline",style:{minWidth:"120px"},children:"Entity"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-20",children:"Interest Rate"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-16",children:"Rate Type"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-16",children:"Am/Years"}),e.jsx("th",{className:"py-2 px-2 text-left font-semibold underline",style:{minWidth:"140px"},children:"Security"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-28",children:"Rate Maturity"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-28",children:"Maturity"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Accrued Interest"}),a.key==="operating"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-28",children:"LOC Commitment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-28",children:"Current Balance"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-16",children:"Usage"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-28",children:"Principal Amount"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Principal Payment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Interest Payment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Monthly Payment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Total Payment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-28",children:"Non-Current Portion"})]}),e.jsx("th",{className:"py-2 px-1 w-8"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-20",children:"Docs"})]})}),e.jsxs("tbody",{children:[o.map(u=>{var j,y,p;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:u.description||"",onChange:b=>{const N=s.debtService.map(C=>C.id===u.id?{...C,description:b.target.value}:C);I({debtService:N})},className:"w-full px-2 py-1.5 border border-gray-200 rounded text-xs",style:{minWidth:"170px"}})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:u.lender||"",onChange:b=>{const N=s.debtService.map(C=>C.id===u.id?{...C,lender:b.target.value}:C);I({debtService:N})},className:"w-full px-2 py-1.5 border border-gray-200 rounded text-xs",style:{minWidth:"110px"}})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:u.entity||"",onChange:b=>{const N=s.debtService.map(C=>C.id===u.id?{...C,entity:b.target.value}:C);I({debtService:N})},className:"w-full px-2 py-1.5 border border-gray-200 rounded text-xs",style:{minWidth:"110px"}})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:u.interestRate||"",onChange:b=>{const N=b.target.value.replace(/[^0-9.]/g,""),C=s.debtService.map(A=>A.id===u.id?{...A,interestRate:parseFloat(N)||0}:A);I({debtService:C})},className:"w-16 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2",children:e.jsxs("select",{value:u.rateType||"Fixed",onChange:b=>{const N=s.debtService.map(C=>C.id===u.id?{...C,rateType:b.target.value}:C);I({debtService:N})},className:"w-full px-1 py-1.5 border border-gray-200 rounded text-xs",children:[e.jsx("option",{value:"Fixed",children:"Fixed"}),e.jsx("option",{value:"V",children:"V"}),e.jsx("option",{value:"F",children:"F"})]})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:u.amYears||"",onChange:b=>{const N=b.target.value.replace(/[^0-9]/g,""),C=s.debtService.map(A=>A.id===u.id?{...A,amYears:parseInt(N)||0}:A);I({debtService:C})},className:"w-14 px-2 py-1.5 border border-gray-200 rounded text-xs text-center"})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:u.security||"",onChange:b=>{const N=s.debtService.map(C=>C.id===u.id?{...C,security:b.target.value}:C);I({debtService:N})},className:"w-full px-2 py-1.5 border border-gray-200 rounded text-xs",style:{minWidth:"130px"}})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"date",value:u.rateMaturity||"",onChange:b=>{const N=s.debtService.map(C=>C.id===u.id?{...C,rateMaturity:b.target.value}:C);I({debtService:N})},className:"w-28 px-1 py-1.5 border border-gray-200 rounded text-xs"})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"date",value:u.maturity||"",onChange:b=>{const N=s.debtService.map(C=>C.id===u.id?{...C,maturity:b.target.value}:C);I({debtService:N})},className:"w-28 px-1 py-1.5 border border-gray-200 rounded text-xs"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:u.accruedInterest?u.accruedInterest.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:b=>{const N=parseFloat(b.target.value.replace(/,/g,""))||0,C=s.debtService.map(A=>A.id===u.id?{...A,accruedInterest:N}:A);I({debtService:C}),b.target.value=N.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-24 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),a.key==="operating"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:u.locCommitment?u.locCommitment.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:b=>{const N=parseFloat(b.target.value.replace(/,/g,""))||0,C=s.debtService.map(A=>A.id===u.id?{...A,locCommitment:N}:A);I({debtService:C}),b.target.value=N.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-28 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:u.currentBalance?u.currentBalance.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:b=>{const N=parseFloat(b.target.value.replace(/,/g,""))||0,C=s.debtService.map(A=>A.id===u.id?{...A,currentBalance:N}:A);I({debtService:C}),b.target.value=N.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-28 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono bg-gray-50",children:u.locCommitment>0?((u.currentBalance||0)/u.locCommitment*100).toFixed(1)+"%":"0.0%"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:u.principalAmount?u.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:b=>{const N=parseFloat(b.target.value.replace(/,/g,""))||0,C=s.debtService.map(A=>A.id===u.id?{...A,principalAmount:N}:A);I({debtService:C}),b.target.value=N.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-28 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:u.principalPayment?u.principalPayment.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:b=>{const N=parseFloat(b.target.value.replace(/,/g,""))||0,C=s.debtService.map(A=>A.id===u.id?{...A,principalPayment:N,totalPayment:N+(A.interestPayment||0)}:A);I({debtService:C}),b.target.value=N.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-24 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:u.interestPayment?u.interestPayment.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:b=>{const N=parseFloat(b.target.value.replace(/,/g,""))||0,C=s.debtService.map(A=>A.id===u.id?{...A,interestPayment:N,totalPayment:(A.principalPayment||0)+N}:A);I({debtService:C}),b.target.value=N.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-24 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:u.monthlyPayment?u.monthlyPayment.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:b=>{const N=parseFloat(b.target.value.replace(/,/g,""))||0,C=s.debtService.map(A=>A.id===u.id?{...A,monthlyPayment:N}:A);I({debtService:C}),b.target.value=N.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-24 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsxs("td",{className:"py-1 px-2 text-right font-mono bg-gray-50",children:["$",(u.totalPayment||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-1 px-2 text-right font-mono bg-gray-50",children:["$",((u.principalAmount||0)-(u.principalPayment||0)).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx("td",{className:"py-1 px-1",children:e.jsx("button",{onClick:()=>{const b=s.debtService.filter(N=>N.id!==u.id);I({debtService:b})},className:"p-0.5 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-3 h-3"})})}),e.jsx("td",{className:"py-1 px-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[((j=u.attachments)==null?void 0:j.length)>0&&e.jsx("span",{className:"bg-blue-100 text-blue-700 text-[10px] px-1.5 py-0.5 rounded-full font-medium",children:u.attachments.length}),e.jsx("button",{onClick:()=>{x({open:!0,debtId:u.id,attachments:u.attachments||[]})},className:`p-1 rounded hover:bg-gray-100 ${((y=u.attachments)==null?void 0:y.length)>0?"text-blue-600":"text-gray-400"}`,title:((p=u.attachments)==null?void 0:p.length)>0?`${u.attachments.length} attachment(s)`:"Add attachments",children:e.jsx(Oo,{className:"w-3.5 h-3.5"})})]})})]},u.id)}),e.jsx("tr",{children:e.jsx("td",{colSpan:"18",className:"py-1 px-2",children:e.jsxs("button",{onClick:()=>{const u={id:`ds-${Date.now()}`,description:"",lender:"",entity:(re==null?void 0:re.name)||"",interestRate:0,rateType:"Fixed",amYears:0,security:"",rateMaturity:"",maturity:"",accruedInterest:0,principalAmount:0,locCommitment:0,currentBalance:0,principalPayment:0,interestPayment:0,monthlyPayment:0,totalPayment:0,category:a.key,attachments:[]};I({debtService:[...s.debtService||[],u]})},className:"text-xs text-blue-600 hover:text-blue-800",children:["+ Add ",a.label," ",a.key==="operating"?"LOC":"Loan"]})})})]}),o.length>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:`${a.bgColor} font-semibold border-t-2 ${a.borderColor}`,children:[e.jsx("td",{colSpan:"3",className:"py-2 px-2"}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:[m.toFixed(2),"%"]}),e.jsx("td",{colSpan:"5"}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",i.accruedInterest.toLocaleString("en-US",{minimumFractionDigits:2})]}),a.key==="operating"?e.jsxs(e.Fragment,{children:[e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",o.reduce((u,j)=>u+(j.locCommitment||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",o.reduce((u,j)=>u+(j.currentBalance||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{className:"py-2 px-2 text-right font-mono",children:(()=>{const u=o.reduce((y,p)=>y+(p.locCommitment||0),0),j=o.reduce((y,p)=>y+(p.currentBalance||0),0);return u>0?(j/u*100).toFixed(1)+"%":"0.0%"})()})]}):e.jsxs(e.Fragment,{children:[e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",i.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",i.principalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",i.interestPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{className:"py-2 px-2 text-right font-mono",children:"$0.00"}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",i.totalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",(i.principalAmount-i.principalPayment).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx("td",{}),e.jsx("td",{})]})})]})})]},a.key)}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Debt Summary by Category"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Analysis Units:"}),e.jsx("input",{type:"text",value:s.analysisUnits||(re==null?void 0:re.units)||0,onChange:a=>{const o=parseFloat(a.target.value.replace(/,/g,""))||0;I({analysisUnits:o})},className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Owned Acres:"}),e.jsx("input",{type:"text",value:s.analysisOwnedAcres??(((Gd=(Wd=s.longTermAssets)==null?void 0:Wd.realEstate)==null?void 0:Gd.reduce((a,o)=>a+(o.totalAcres||0),0))||0),onChange:a=>{const o=parseFloat(a.target.value.replace(/,/g,""))||0;I({analysisOwnedAcres:o})},className:"w-24 px-2 py-1 border border-green-300 rounded text-sm text-right font-mono bg-green-50"})]})]})]}),(()=>{var j,y;const a=s.debtService||[],o=s.analysisUnits||(re==null?void 0:re.units)||1,i=((y=(j=s.longTermAssets)==null?void 0:j.realEstate)==null?void 0:y.reduce((p,b)=>p+(b.totalAcres||0),0))||0,d=(s.analysisOwnedAcres??i)||1,g=[{key:"operating",label:"Operating",bgColor:"bg-blue-50",textColor:"text-blue-800",useOwnedAcres:!1},{key:"equipment",label:"Equipment",bgColor:"bg-yellow-50",textColor:"text-yellow-800",useOwnedAcres:!1},{key:"vehicle",label:"Vehicle",bgColor:"bg-yellow-50",textColor:"text-yellow-800",useOwnedAcres:!1},{key:"other",label:"Other Term",bgColor:"bg-orange-50",textColor:"text-orange-800",useOwnedAcres:!1},{key:"realEstate",label:"Ag Real Estate",bgColor:"bg-green-50",textColor:"text-green-800",useOwnedAcres:!0}].map(p=>{const b=a.filter(C=>C.category===p.key),N=p.useOwnedAcres?d:o;return p.key==="operating"?{...p,principalAmount:b.reduce((C,A)=>C+(A.currentBalance||0),0),totalPayment:0,principalPayment:0,interestPayment:0,unitsUsed:N,unitsLabel:"units"}:{...p,principalAmount:b.reduce((C,A)=>C+(A.principalAmount||0),0),totalPayment:b.reduce((C,A)=>C+(A.totalPayment||0),0),principalPayment:b.reduce((C,A)=>C+(A.principalPayment||0),0),interestPayment:b.reduce((C,A)=>C+(A.interestPayment||0),0),unitsUsed:N,unitsLabel:p.useOwnedAcres?"owned acres":"units"}}),u={principalAmount:g.reduce((p,b)=>p+b.principalAmount,0),totalPayment:g.reduce((p,b)=>p+b.totalPayment,0),principalPayment:g.reduce((p,b)=>p+b.principalPayment,0),interestPayment:g.reduce((p,b)=>p+b.interestPayment,0)};return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"py-2 text-left font-semibold w-40",children:"Category"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Principal Amount"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Total Payment"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Principal Payment"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Interest Payment"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Payment/Unit"})]})}),e.jsxs("tbody",{children:[g.map(p=>e.jsxs("tr",{className:`${p.bgColor} border-b border-gray-200`,children:[e.jsxs("td",{className:`py-2 px-2 font-semibold ${p.textColor}`,children:[p.label,p.useOwnedAcres&&e.jsxs("span",{className:"text-xs font-normal ml-1",children:["(",d.toLocaleString("en-US",{minimumFractionDigits:1})," ac)"]})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",p.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",p.totalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",p.principalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",p.interestPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono font-semibold",children:["$",(p.totalPayment/p.unitsUsed).toLocaleString("en-US",{minimumFractionDigits:2})]})]},p.key)),e.jsxs("tr",{className:"bg-red-100 border-t-2 border-red-300 font-bold",children:[e.jsx("td",{className:"py-3 px-2 text-red-800",children:"TOTAL AG DEBT"}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800",children:["$",u.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800",children:["$",u.totalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800",children:["$",u.principalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800",children:["$",u.interestPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800 text-lg",children:["$",(u.totalPayment/o).toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Payment Per Unit Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[g.filter(p=>p.totalPayment>0||p.key==="operating").map(p=>e.jsxs("div",{className:`${p.bgColor} p-3 rounded-lg text-center`,children:[e.jsx("div",{className:`text-xs ${p.textColor} font-medium mb-1`,children:p.label}),e.jsxs("div",{className:`text-lg font-bold font-mono ${p.textColor}`,children:["$",(p.totalPayment/p.unitsUsed).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["per ",p.useOwnedAcres?"owned acre":"unit"]})]},p.key)),e.jsxs("div",{className:"bg-red-100 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-red-800 font-medium mb-1",children:"Total Debt Service"}),e.jsxs("div",{className:"text-lg font-bold font-mono text-red-800",children:["$",(u.totalPayment/o).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["per unit (",o.toLocaleString()," units)"]})]})]}),d>0&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500 text-center",children:["Real Estate calculated on ",d.toLocaleString("en-US",{minimumFractionDigits:1})," owned acres | Other categories on ",o.toLocaleString()," analysis units"]})]}),(()=>{const p=a.filter(N=>N.category==="personal");if(p.length===0)return null;const b={principalAmount:p.reduce((N,C)=>N+(C.principalAmount||0),0),totalPayment:p.reduce((N,C)=>N+(C.totalPayment||0),0)};return e.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[e.jsx("span",{className:"text-sm",children:"Personal Debt (Excluded from Ag Totals)"}),e.jsxs("div",{className:"text-sm font-mono",children:["Principal: $",b.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2})," | Payment: $",b.totalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]})]})})})()]})})()]})]}),De==="loancalc"&&e.jsx("div",{className:"space-y-6",children:(()=>{const a={"real-estate":{label:"Farm Real Estate",icon:sl,color:"green",defaultTerm:25,defaultRate:7.25,unitLabel:"Acre",unitLabelPlural:"Acres"},machinery:{label:"Machinery & Equipment",icon:Ar,color:"amber",defaultTerm:7,defaultRate:8.5,unitLabel:"Unit",unitLabelPlural:"Units"},vehicles:{label:"Vehicles",icon:Ar,color:"blue",defaultTerm:5,defaultRate:7.5,unitLabel:"Vehicle",unitLabelPlural:"Vehicles"},buildings:{label:"Buildings & Improvements",icon:$r,color:"purple",defaultTerm:15,defaultRate:7.75,unitLabel:"Sq Ft",unitLabelPlural:"Sq Ft"},livestock:{label:"Livestock",icon:Vo,color:"rose",defaultTerm:5,defaultRate:8,unitLabel:"Head",unitLabelPlural:"Head"},personal:{label:"Personal / Other",icon:rl,color:"gray",defaultTerm:10,defaultRate:9,unitLabel:null,unitLabelPlural:null}},o=a[J.loanType],i=o.icon,d=()=>{switch(J.loanType){case"real-estate":return J.acres*J.pricePerAcre;case"livestock":return J.headCount*J.pricePerHead;default:return J.purchasePrice}},m=()=>{switch(J.loanType){case"real-estate":return J.acres;case"livestock":return J.headCount;default:return 1}},g=d(),u=J.usePercentDown?g*(J.downPaymentPercent/100):J.downPaymentAmount,j=Math.max(0,g-u),y=m(),p=J.paymentFrequency==="monthly"?12:1,b=J.loanTerm*p,N=J.interestRate/100/p,C=j>0&&N>0?j*(N*Math.pow(1+N,b))/(Math.pow(1+N,b)-1):0,A=C*p,L=()=>{const k=[];let F=j,T=0,w=0;const E=J.startDate.split("-");let z=parseInt(E[0]),q=parseInt(E[1])-1;for(let W=1;W<=b&&F>0;W++){const K=F*N;let xe=C-K+J.extraPayment/p;xe>F&&(xe=F);const Ae=K+xe;F-=xe,T+=K,w+=xe;const G=new Date(z,q);if(k.push({number:W,date:G,balance:Math.max(0,F),payment:Ae,principal:xe,interest:K}),J.paymentFrequency==="monthly"?(q++,q>11&&(q=0,z++)):z++,F<=0)break}return{schedule:k,totalInterest:T,totalPrincipal:w,totalPayments:T+w}},{schedule:M,totalInterest:R,totalPrincipal:Y,totalPayments:_}=L(),X=M.length>0?M[M.length-1].date:null,U=_>0?R/_*100:0,B=k=>{const F=a[k];Xe(T=>({...T,loanType:k,loanTerm:F.defaultTerm,interestRate:F.defaultRate,showPerUnit:!1}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Select Loan Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Object.entries(a).map(([k,F])=>{const T=F.icon,w=J.loanType===k,E={green:w?"bg-green-100 border-green-500 text-green-700":"hover:bg-green-50",amber:w?"bg-amber-100 border-amber-500 text-amber-700":"hover:bg-amber-50",blue:w?"bg-blue-100 border-blue-500 text-blue-700":"hover:bg-blue-50",purple:w?"bg-purple-100 border-purple-500 text-purple-700":"hover:bg-purple-50",rose:w?"bg-rose-100 border-rose-500 text-rose-700":"hover:bg-rose-50",gray:w?"bg-gray-200 border-gray-500 text-gray-700":"hover:bg-gray-50"};return e.jsxs("button",{onClick:()=>B(k),className:`p-3 rounded-lg border-2 transition-all flex flex-col items-center gap-2 ${w?E[F.color]:`border-gray-200 text-gray-600 ${E[F.color]}`}`,children:[e.jsx(T,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:F.label})]},k)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:J.loanType==="real-estate"?"Farm / Parcel Name":J.loanType==="machinery"?"Equipment Description":J.loanType==="vehicles"?"Vehicle Description":J.loanType==="buildings"?"Building / Improvement":J.loanType==="livestock"?"Livestock Description":"Loan Description"}),e.jsx("input",{type:"text",value:J.name,onChange:k=>Xe({...J,name:k.target.value}),placeholder:J.loanType==="real-estate"?"e.g., North 160":J.loanType==="machinery"?"e.g., John Deere 8R 310":J.loanType==="vehicles"?"e.g., 2024 F-350":J.loanType==="buildings"?"e.g., Machine Shed":J.loanType==="livestock"?"e.g., Bred Heifers":"e.g., Operating Line",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lender Name (optional)"}),e.jsx("input",{type:"text",value:J.lender,onChange:k=>Xe({...J,lender:k.target.value}),placeholder:"e.g., Farm Credit",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(i,{className:`w-5 h-5 text-${o.color}-600`}),o.label," Details"]}),J.loanType==="real-estate"&&e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acres"}),e.jsx("input",{type:"number",value:J.acres,onChange:k=>Xe({...J,acres:parseFloat(k.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Total land area"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Acre"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:J.pricePerAcre.toLocaleString(),onChange:k=>Xe({...J,pricePerAcre:parseFloat(k.target.value.replace(/,/g,""))||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current market rate"})]})]}),J.loanType==="livestock"&&e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Head Count"}),e.jsx("input",{type:"number",value:J.headCount,onChange:k=>Xe({...J,headCount:parseInt(k.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Number of animals"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Head"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:J.pricePerHead.toLocaleString(),onChange:k=>Xe({...J,pricePerHead:parseFloat(k.target.value.replace(/,/g,""))||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Average price per head"})]})]}),["machinery","vehicles","buildings","personal"].includes(J.loanType)&&e.jsxs("div",{className:"max-w-md",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:J.loanType==="personal"?"Loan Amount Needed":"Purchase Price"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:J.purchasePrice.toLocaleString(),onChange:k=>Xe({...J,purchasePrice:parseFloat(k.target.value.replace(/,/g,""))||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono text-lg"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:J.loanType==="machinery"?"Total equipment cost":J.loanType==="vehicles"?"Total vehicle cost":J.loanType==="buildings"?"Total construction/improvement cost":"Total amount to borrow"})]}),J.loanType!=="personal"&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Down Payment"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Xe({...J,usePercentDown:!0}),className:`px-2 py-1 text-xs rounded ${J.usePercentDown?"bg-green-600 text-white":"bg-gray-100 text-gray-600"}`,children:"%"}),e.jsx("button",{onClick:()=>Xe({...J,usePercentDown:!1}),className:`px-2 py-1 text-xs rounded ${J.usePercentDown?"bg-gray-100 text-gray-600":"bg-green-600 text-white"}`,children:"$"}),e.jsx("span",{className:"text-sm font-semibold text-green-700 ml-2",children:J.usePercentDown?`${J.downPaymentPercent.toFixed(0)}%`:h(J.downPaymentAmount)})]})]}),J.usePercentDown?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"range",min:"0",max:"100",value:J.downPaymentPercent,onChange:k=>Xe({...J,downPaymentPercent:parseFloat(k.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-600"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{className:"font-mono font-semibold text-green-700",children:h(u)}),e.jsx("span",{children:"100%"})]})]}):e.jsxs("div",{className:"flex items-center max-w-xs",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:J.downPaymentAmount>0?J.downPaymentAmount.toLocaleString():"",onChange:k=>Xe({...J,downPaymentAmount:parseFloat(k.target.value.replace(/,/g,""))||0}),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2 text-sm",children:[J.loanType!=="personal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:J.loanType==="real-estate"?`${J.acres.toLocaleString()} acres  $${J.pricePerAcre.toLocaleString()}/ac`:J.loanType==="livestock"?`${J.headCount.toLocaleString()} head  $${J.pricePerHead.toLocaleString()}/hd`:"Purchase Price"}),e.jsx("span",{className:"font-mono",children:h(g)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Down Payment"}),e.jsx("span",{className:"font-mono",children:h(u)})]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-green-700",children:[e.jsx("span",{children:"Loan Amount"}),e.jsx("span",{className:"font-mono",children:h(j)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-blue-600"}),"Loan Terms"]}),e.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Loan Amount"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:h(j)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Interest Rate"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",step:"0.01",value:J.interestRate,onChange:k=>Xe({...J,interestRate:parseFloat(k.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("span",{className:"text-gray-500 ml-1",children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loan Term"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Xe({...J,loanTerm:Math.max(1,J.loanTerm-1)}),className:"px-2 py-2 bg-gray-100 rounded hover:bg-gray-200",children:""}),e.jsx("input",{type:"number",value:J.loanTerm,onChange:k=>Xe({...J,loanTerm:parseInt(k.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-center font-mono"}),e.jsx("button",{onClick:()=>Xe({...J,loanTerm:J.loanTerm+1}),className:"px-2 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"+"}),e.jsx("span",{className:"text-gray-500 ml-1",children:"yrs"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Frequency"}),e.jsxs("select",{value:J.paymentFrequency,onChange:k=>Xe({...J,paymentFrequency:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"annual",children:"Annual"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"month",value:J.startDate,onChange:k=>Xe({...J,startDate:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Extra Annual Payment (optional)"}),e.jsxs("div",{className:"flex items-center max-w-xs",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:J.extraPayment>0?J.extraPayment.toLocaleString():"",onChange:k=>Xe({...J,extraPayment:parseFloat(k.target.value.replace(/,/g,""))||0}),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Additional principal payment each year"})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-green-200 bg-gradient-to-r from-green-50 to-blue-50 -mx-4 -mb-4 px-4 pb-4 rounded-b-lg",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("strong",{children:["Add to ",s?ys(s.date):""]})," balance sheet as"," ",e.jsxs("span",{className:"font-semibold text-green-700",children:[J.loanType==="real-estate"?"Real Estate":J.loanType==="machinery"?"Equipment":J.loanType==="vehicles"?"Vehicle":J.loanType==="buildings"?"Real Estate":J.loanType==="livestock"?"Other":"Personal"," Debt"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[J.name||"(enter description above)","  ",h(j)," principal  ",h(A),"/yr"]})]}),e.jsxs("button",{onClick:()=>{var G,S;if(!s){alert("Please select a balance sheet first");return}if(!J.name.trim()){alert("Please enter a loan description/name");return}const F={"real-estate":"realEstate",machinery:"equipment",vehicles:"vehicle",buildings:"realEstate",livestock:"other",personal:"personal"}[J.loanType],T=J.startDate.split("-"),w=parseInt(T[0]),E=parseInt(T[1]),q=`${w+J.loanTerm}-${String(E).padStart(2,"0")}-01`,W=j*(J.interestRate/100),K=A-W,xe={id:`ds-new-${Date.now()}`,description:J.name,lender:J.lender||"TBD",entity:((S=(G=re==null?void 0:re.entities)==null?void 0:G.find(Q=>Q.id===ae))==null?void 0:S.name)||(re==null?void 0:re.name)||"",interestRate:J.interestRate,rateType:"Fixed",amYears:J.loanTerm,security:J.loanType==="real-estate"?`${J.acres} Acres`:J.loanType==="livestock"?`${J.headCount} Head`:J.name,rateMaturity:q,maturity:q,accruedInterest:0,principalAmount:j,principalPayment:Math.round(K*100)/100,interestPayment:Math.round(W*100)/100,monthlyPayment:J.paymentFrequency==="monthly"?Math.round(C*100)/100:0,totalPayment:Math.round(A*100)/100,currentPortion:Math.round((j-K)*100)/100,category:F,loanDetails:{type:J.loanType,purchasePrice:g,downPayment:u,acres:J.loanType==="real-estate"?J.acres:null,pricePerAcre:J.loanType==="real-estate"?J.pricePerAcre:null,headCount:J.loanType==="livestock"?J.headCount:null,pricePerHead:J.loanType==="livestock"?J.pricePerHead:null}};ee(Q=>({...Q,[P]:Q[P].map(ie=>ie.id===Z?{...ie,debtService:[...ie.debtService||[],xe]}:ie)})),window.confirm(` Loan added successfully!

"${J.name}" has been added to your ${o.label} debt.

Principal: ${h(j)}
Annual Payment: ${h(A)}
Category: ${F}

Would you like to view the Debt Service tab now?`)&&V("debtservice"),Xe(Q=>({...Q,name:"",lender:""}))},className:"flex items-center gap-2 bg-green-600 text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-green-700 transition-colors shadow-md",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Add to Debt Schedule"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`bg-gradient-to-br from-${o.color}-700 to-${o.color}-800 rounded-lg shadow-lg p-6 text-white`,style:{background:`linear-gradient(to bottom right, ${o.color==="green"?"#15803d, #166534":o.color==="amber"?"#b45309, #92400e":o.color==="blue"?"#1d4ed8, #1e40af":o.color==="purple"?"#7e22ce, #6b21a8":o.color==="rose"?"#be123c, #9f1239":"#374151, #1f2937"})`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 opacity-80",children:[e.jsx(i,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:o.label})]}),e.jsxs("div",{className:"text-sm opacity-80 mb-1",children:[J.paymentFrequency==="monthly"?"Monthly":"Annual"," Payment"]}),e.jsx("div",{className:"text-4xl font-bold font-mono mb-4",children:h(C)}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center border-t border-white/20 pt-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70",children:"Total Interest"}),e.jsx("div",{className:"font-semibold font-mono text-sm",children:h(R)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70",children:"Total Cost"}),e.jsx("div",{className:"font-semibold font-mono text-sm",children:h(_)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70",children:"Payoff Date"}),e.jsx("div",{className:"font-semibold text-sm",children:X?X.toLocaleDateString("en-US",{month:"short",year:"numeric"}):""})]})]}),e.jsxs("div",{className:"mt-4 text-sm opacity-80",children:[h(A),"/year  ",h(R)," total interest"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Scenario Analysis"}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-500",children:[e.jsx("th",{className:"text-left py-1",children:"Rate/Term"}),(J.loanType==="real-estate"?[15,20,25,30]:J.loanType==="buildings"?[10,15,20,25]:[3,5,7,10]).map(k=>e.jsxs("th",{className:"text-right py-1 px-2",children:[k,"yr"]},k))]})}),e.jsx("tbody",{children:(J.loanType==="real-estate"?[5,6,7,8,9]:J.loanType==="personal"?[7,8,9,10,11]:[6,7,8,9,10]).map(k=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsxs("td",{className:"py-1 text-gray-600",children:[k,"%"]}),(J.loanType==="real-estate"?[15,20,25,30]:J.loanType==="buildings"?[10,15,20,25]:[3,5,7,10]).map(F=>{const T=k/100,w=F,E=j>0?j*(T*Math.pow(1+T,w))/(Math.pow(1+T,w)-1):0,z=k===Math.round(J.interestRate)&&F===J.loanTerm;return e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${z?"bg-green-100 font-semibold text-green-700 rounded":""}`,children:["$",Math.round(E).toLocaleString()]},F)})]},k))})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-2 text-center",children:"Annual payments shown"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Payment Breakdown"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded"}),"Principal"]}),e.jsx("span",{className:"font-mono",children:h(Y)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-amber-500 rounded"}),"Interest"]}),e.jsx("span",{className:"font-mono",children:h(R)})]}),e.jsxs("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"bg-blue-500 h-full",style:{width:`${100-U}%`}}),e.jsx("div",{className:"bg-amber-500 h-full",style:{width:`${U}%`}})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Over the life of the loan, ",U.toFixed(1),"% goes to interest"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-green-600"}),"Amortization Schedule"]}),o.unitLabel&&y>1&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Xe({...J,showPerUnit:!1}),className:`px-3 py-1 text-sm rounded ${J.showPerUnit?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-green-600 text-white"}`,children:"Standard View"}),e.jsxs("button",{onClick:()=>Xe({...J,showPerUnit:!0}),className:`px-3 py-1 text-sm rounded ${J.showPerUnit?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Per-",o.unitLabel," View"]})]})]}),e.jsx("div",{className:"overflow-x-auto max-h-[500px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-white",children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"#"}),e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Date"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Balance"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Payment"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Principal"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Interest"})]})}),e.jsx("tbody",{children:M.map((k,F)=>{const T=J.showPerUnit&&y>1?y:1,w=J.showPerUnit&&y>1?J.loanType==="real-estate"?"/ac":J.loanType==="livestock"?"/hd":"":"";return e.jsxs("tr",{className:`border-b border-gray-100 ${F%2===0?"bg-gray-50":""}`,children:[e.jsx("td",{className:"py-2 px-3 text-gray-600",children:k.number}),e.jsx("td",{className:"py-2 px-3",children:k.date.toLocaleDateString("en-US",{month:"short",year:"numeric"})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-gray-800",children:["$",(k.balance/T).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),w]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",(k.payment/T).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),w]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-blue-600",children:["$",(k.principal/T).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),w]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-amber-600",children:["$",(k.interest/T).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),w]})]},F)})}),e.jsx("tfoot",{className:"sticky bottom-0 bg-white",children:e.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-100",children:[e.jsx("td",{className:"py-2 px-3",colSpan:"2",children:"TOTAL"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:""}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",(_/(J.showPerUnit&&y>1?y:1)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),J.showPerUnit&&y>1?J.loanType==="real-estate"?"/ac":"/hd":""]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-blue-600",children:["$",(Y/(J.showPerUnit&&y>1?y:1)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),J.showPerUnit&&y>1?J.loanType==="real-estate"?"/ac":"/hd":""]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-amber-600",children:["$",(R/(J.showPerUnit&&y>1?y:1)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),J.showPerUnit&&y>1?J.loanType==="real-estate"?"/ac":"/hd":""]})]})})]})}),e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-2",children:["Showing ",M.length," of ",M.length," payments"]})]})]})})()})]}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e.jsx(Ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Balance Sheet Selected"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create a new balance sheet to get started"}),e.jsxs("button",{onClick:Cn,className:"inline-flex items-center gap-2 bg-green-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Create Balance Sheet"]})]})})]}),t==="cashflow"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-blue-700 to-blue-600 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{se?ue(null):r("landing")},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:se?"Back to Enterprises":"Back to Dashboard",children:e.jsx(Qn,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(fr,{className:"w-7 h-7"}),"Cash Flow Projection",se&&e.jsxs("span",{className:"text-blue-200 text-lg font-normal",children:[" ",se==="rowCrop"?"Row Crop":se==="cowCalf"?"Cow/Calf":se==="custom"?"Custom Revenue":se==="customFeeding"?"Custom Feeding":se==="feedlot"?"Feedlot":""]})]}),e.jsx("p",{className:"text-blue-200 text-sm",children:re==null?void 0:re.name})]})]}),se&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-blue-200 text-xs block mb-1",children:"Projection Year"}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[100px]",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,className:"text-gray-800",children:i},i)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-blue-200 text-xs block mb-1",children:"Entity"}),e.jsx("select",{value:ae||"",onChange:a=>oe(a.target.value),className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[160px]",children:(Qd=re==null?void 0:re.entities)==null?void 0:Qd.map(a=>e.jsx("option",{value:a.id,className:"text-gray-800",children:a.name},a.id))})]})]})]})})}),!se&&e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Enterprise"}),e.jsx("p",{className:"text-gray-600",children:"Choose an enterprise to manage cash flow projections"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("button",{onClick:()=>ue("rowCrop"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-green-500",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-green-200 transition-colors",children:e.jsx(Ho,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-green-700 mb-2",children:"Row Crop"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage corn, soybeans, wheat, and other grain crops. Track seed, fertilizer, chemicals, irrigation, and insurance costs."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Crops"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Seed"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Fertilizer"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Chemicals"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Insurance"})]})]}),e.jsxs("button",{onClick:()=>ue("cowCalf"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-amber-500",children:[e.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-amber-200 transition-colors",children:e.jsx(x0,{className:"w-8 h-8 text-amber-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-amber-700 mb-2",children:"Cow/Calf"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track breeding herd operations including cow costs, calf sales, pasture expenses, and veterinary costs."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"Herd"}),e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"Pasture"}),e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"Feed"}),e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"Vet"})]})]}),e.jsxs("button",{onClick:()=>ue("custom"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-purple-500",children:[e.jsx("div",{className:"w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-purple-200 transition-colors",children:e.jsx(Ar,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-purple-700 mb-2",children:"Custom Revenue"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Custom farming operations including custom planting, spraying, harvesting, and other contract work."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Planting"}),e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Spraying"}),e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Harvest"})]})]}),e.jsxs("button",{onClick:()=>{ue("customFeeding"),H("summary")},className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-orange-500",children:[e.jsx("div",{className:"w-14 h-14 bg-orange-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-orange-200 transition-colors",children:e.jsx($r,{className:"w-8 h-8 text-orange-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-orange-700 mb-2",children:"Custom Feeding"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Custom cattle feeding operations. Track yardage fees, feed costs, and cattle inventory for customer-owned cattle."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"Yardage"}),e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"Feed"}),e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"Inventory"})]})]}),e.jsxs("button",{onClick:()=>ue("feedlot"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-red-500",children:[e.jsx("div",{className:"w-14 h-14 bg-red-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-red-200 transition-colors",children:e.jsx(u0,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-red-700 mb-2",children:"Feedlot"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Owned cattle feeding operations. Track feeder purchases, feed costs, death loss, and finished cattle sales."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Feeder"}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Feed"}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Sales"}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Closeout"})]})]})]})]}),se==="rowCrop"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"summary",label:"Summary",icon:st},{id:"fields",label:"Fields",icon:Uo},{id:"crops",label:"Crops",icon:Ho},{id:"cropRevenue",label:"Crop Revenue",icon:fr},{id:"land",label:"Land Details",icon:sl},{id:"variableExpenses",label:"Variable Crop Expenses",icon:Yt}].map(a=>e.jsxs("button",{onClick:()=>H(a.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${D===a.id?"border-blue-600 text-blue-700 bg-blue-50":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))})})}),D==="variableExpenses"&&e.jsx("div",{className:"bg-gray-50 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"seed",label:"Seed",icon:Ue},{id:"nutrition",label:"Crop Nutrition",icon:Yt},{id:"protection",label:"Crop Protection",icon:Rr},{id:"irrigation",label:"Irrigation",icon:$r},{id:"freight",label:"Freight",icon:Ar}].map(a=>e.jsxs("button",{onClick:()=>ge(a.id),className:`flex items-center gap-2 px-4 py-2 text-sm border-b-2 transition-colors whitespace-nowrap ${pe===a.id?"border-green-600 text-green-700 bg-green-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(a.icon,{className:"w-3.5 h-3.5"}),a.label]},a.id))})})}),D==="cropInsurance"&&e.jsx("div",{className:"bg-gray-50 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"guarantees",label:"Guarantees",icon:Rr},{id:"mpci",label:"MPCI Elections",icon:Ue},{id:"areaPlans",label:"Area Plans",icon:Yt},{id:"privateProducts",label:"Private Products",icon:al}].map(a=>e.jsxs("button",{onClick:()=>He(a.id),className:`flex items-center gap-2 px-4 py-2 text-sm border-b-2 transition-colors whitespace-nowrap ${ye===a.id?"border-purple-600 text-purple-700 bg-purple-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(a.icon,{className:"w-3.5 h-3.5"}),a.label]},a.id))})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[D==="summary"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(st,{className:"w-6 h-6 text-blue-600"}),"Cash Flow Projection"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]}),e.jsx("div",{className:"text-sm text-gray-500",children:((Jd=(Kd=re==null?void 0:re.entities)==null?void 0:Kd.find(a=>a.id===ae))==null?void 0:Jd.name)||"Select Entity"})]}),(()=>{var F,T,w,E,z,q,W,K,xe,Ae;const a=((F=s==null?void 0:s.cashFlow)==null?void 0:F.crops)||[],o=((T=s==null?void 0:s.cashFlow)==null?void 0:T.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],i=((w=s==null?void 0:s.cashFlow)==null?void 0:w.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],d=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100;return G+Q*((S.seedPerAcre||0)+(S.seedTreatmentPerAcre||0))},0),m=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=i.reduce((fe,he)=>fe+((S.chemicalCosts||{})[he]||0),0);return G+Q*(ie+(S.chemAppCostPerAcre||0))},0),g=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=o.reduce((fe,he)=>fe+((S.fertilizerCosts||{})[he]||0),0);return G+Q*(ie+(S.fertAppCostPerAcre||0))},0),u=a.filter(G=>G.ownership==="Rented").reduce((G,S)=>G+(S.totalRent||0),0),j=a.filter(G=>G.practice==="Irrigated").reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100;return G+Q*(S.irrigationCostPerAcre||0)},0),y=((E=s==null?void 0:s.cashFlow)==null?void 0:E.freightRates)||{},p=a.reduce((G,S)=>{const ie=(S.plannedAcres||0)*(S.sharePercent||100)/100*(S.aph||0);return G+ie*(y[S.crop]||0)},0),b=a.reduce((G,S)=>{var Ge,mt,vt,ct,Se,we,ut,Mt,At,wt,gr,ar;const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=Q*(((Ge=S.mpciElection)==null?void 0:Ge.premiumPerAcre)||0),fe=(mt=S.areaPlan)!=null&&mt.scoEnabled?Q*(((vt=S.areaPlan)==null?void 0:vt.scoPerAcre)||0):0,he=(ct=S.areaPlan)!=null&&ct.ecoEnabled?Q*(((Se=S.areaPlan)==null?void 0:Se.ecoPerAcre)||0):0,Be=(we=S.areaPlan)!=null&&we.marginPlan&&((ut=S.areaPlan)==null?void 0:ut.marginPlan)!=="none"?Q*(((Mt=S.areaPlan)==null?void 0:Mt.marginPerAcre)||0):0,_e=(At=S.privateInsurance)!=null&&At.hailEnabled?Q*(((wt=S.privateInsurance)==null?void 0:wt.hailPerAcre)||0):0,Re=(gr=S.privateInsurance)!=null&&gr.windEnabled?Q*(((ar=S.privateInsurance)==null?void 0:ar.windPerAcre)||0):0;return G+ie+fe+he+Be+_e+Re},0),N=((s==null?void 0:s.debtService)||[]).reduce((G,S)=>G+(S.interestPayment||0),0),C=["feedLivestock","fuelOil","repairs","labor","insurance","utilities","realEstateTax","otherExpenses"].reduce((G,S)=>{var Q,ie;return G+(((ie=(Q=s==null?void 0:s.cashFlow)==null?void 0:Q.outflows)==null?void 0:ie[S])||0)},0),A=d+m+g+u+j+p+b+N+C,L=((z=s==null?void 0:s.cashFlow)==null?void 0:z.cropPrices)||{},M=((q=s==null?void 0:s.cashFlow)==null?void 0:q.marketing)||{};[...new Set(a.map(G=>G.crop).filter(Boolean))];const R=G=>{var ct;const S=((ct=M.byCrop)==null?void 0:ct[G])||{},Q=S.positions||[],ie=S.futuresPrice||0,fe=S.basis||0,he=ie+fe,_e=a.filter(Se=>Se.crop===G).reduce((Se,we)=>{const ut=(we.plannedAcres||0)*(we.sharePercent||100)/100;return Se+ut*(we.projectedYield||we.aph||0)},0),Re=Q.reduce((Se,we)=>we.type==="cash"||we.type==="futures"||we.type==="hta"?Se+(we.bushels||0):Se,0),Ge=Math.max(0,_e-Re),mt=Q.reduce((Se,we)=>(we.type==="cash"||we.type==="futures"||we.type==="hta")&&we.bushels>0?Se+we.bushels*we.price:Se,0),vt=Re>0?mt/Re:he;return Q.length>0&&(Re>0||he>0)?_e>0?(Re*vt+Ge*he)/_e:he:L[G]||0},Y=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=S.projectedYield||S.aph||0,fe=Q*ie,he=R(S.crop);return G+fe*he},0),_=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((G,S)=>{var Q,ie;return G+(((ie=(Q=s==null?void 0:s.cashFlow)==null?void 0:Q.inflows)==null?void 0:ie[S])||0)},0),X=Y+_,U=X-A,B=((s==null?void 0:s.debtService)||[]).reduce((G,S)=>G+(S.principalPayment||0),0),k=(((W=s==null?void 0:s.cashFlow)==null?void 0:W.beginningCash)||0)+U-(((K=s==null?void 0:s.cashFlow)==null?void 0:K.capitalPurchases)||0)+(((xe=s==null?void 0:s.cashFlow)==null?void 0:xe.capitalSales)||0)-B+(((Ae=s==null?void 0:s.cashFlow)==null?void 0:Ae.newBorrowing)||0);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Cash Inflows"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:h(X)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Cash Outflows"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:h(A)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Net Operating"}),e.jsx("div",{className:`text-2xl font-bold font-mono ${U>=0?"text-blue-700":"text-red-600"}`,children:h(U)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Ending Cash"}),e.jsx("div",{className:`text-2xl font-bold font-mono ${k>=0?"text-purple-700":"text-red-600"}`,children:h(k)})]})]})})(),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right bg-blue-50",children:"Projected"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-amber-700 text-right bg-amber-50",children:"Adjusted"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Actual"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Variance"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"bg-gray-50 border-b",children:[e.jsx("td",{className:"py-3 px-4 font-semibold text-gray-800",children:"Beginning Cash"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono bg-blue-50",children:e.jsx(ne,{value:((Zd=s==null?void 0:s.cashFlow)==null?void 0:Zd.beginningCash)||0,onChange:a=>{var o,i,d,m,g,u;return I({cashFlow:{...s==null?void 0:s.cashFlow,beginningCash:a,endingCash:a+(((o=s==null?void 0:s.cashFlow)==null?void 0:o.totalInflows)||0)-(((i=s==null?void 0:s.cashFlow)==null?void 0:i.totalOutflows)||0)-(((d=s==null?void 0:s.cashFlow)==null?void 0:d.capitalPurchases)||0)+(((m=s==null?void 0:s.cashFlow)==null?void 0:m.capitalSales)||0)-(((g=s==null?void 0:s.cashFlow)==null?void 0:g.debtPayments)||0)+(((u=s==null?void 0:s.cashFlow)==null?void 0:u.newBorrowing)||0)}})},className:"w-28 px-2 py-1 border border-gray-300 rounded text-right font-mono"})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-500 bg-amber-50",children:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-400",children:""})]}),e.jsx("tr",{className:"bg-green-50 border-b",children:e.jsx("td",{colSpan:"5",className:"py-2 px-4 font-bold text-green-800",children:"OPERATING CASH INFLOWS"})}),(()=>{var N,C,A,L,M;const a=((N=s==null?void 0:s.cashFlow)==null?void 0:N.crops)||[],o=((C=s==null?void 0:s.cashFlow)==null?void 0:C.cropPrices)||{},i=((A=s==null?void 0:s.cashFlow)==null?void 0:A.marketing)||{},d=[...new Set(a.map(R=>R.crop).filter(Boolean))],m=R=>{var q;const Y=((q=i.byCrop)==null?void 0:q[R])||{},_=Y.positions||[],X=Y.futuresPrice||0,U=Y.basis||0,B=X+U,F=a.filter(W=>W.crop===R).reduce((W,K)=>{const xe=(K.plannedAcres||0)*(K.sharePercent||100)/100;return W+xe*(K.projectedYield||K.aph||0)},0),T=_.reduce((W,K)=>K.type==="cash"||K.type==="futures"||K.type==="hta"?W+(K.bushels||0):W,0),w=Math.max(0,F-T),E=_.reduce((W,K)=>(K.type==="cash"||K.type==="futures"||K.type==="hta")&&K.bushels>0?W+K.bushels*K.price:W,0),z=T>0?E/T:B;return _.length>0||B>0?F>0?(T*z+w*B)/F:B:o[R]||0},g=d.some(R=>{var _;const Y=((_=i.byCrop)==null?void 0:_[R])||{};return(Y.positions||[]).length>0||Y.futuresPrice>0}),u=a.reduce((R,Y)=>{const _=(Y.plannedAcres||0)*(Y.sharePercent||100)/100,X=Y.projectedYield||Y.aph||0,U=_*X,B=o[Y.crop]||0;return R+U*B},0),j=a.reduce((R,Y)=>{const _=(Y.plannedAcres||0)*(Y.sharePercent||100)/100,X=Y.projectedYield||Y.aph||0,U=_*X,B=m(Y.crop);return R+U*B},0),y=d.map(R=>{var w;const _=a.filter(E=>E.crop===R).reduce((E,z)=>{const q=(z.plannedAcres||0)*(z.sharePercent||100)/100;return E+q*(z.projectedYield||z.aph||0)},0),X=o[R]||0,U=m(R),F=((((w=i.byCrop)==null?void 0:w[R])||{}).positions||[]).reduce((E,z)=>z.type==="cash"||z.type==="futures"||z.type==="hta"?E+(z.bushels||0):E,0),T=_>0?F/_*100:0;return{crop:R,bushels:_,baselinePrice:X,mktPrice:U,projectedRevenue:_*X,adjustedRevenue:_*U,pricedPercent:T}}),p=((M=(L=s==null?void 0:s.cashFlow)==null?void 0:L.inflowsActual)==null?void 0:M.cropSales)||0,b=p-j;return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 cursor-pointer",onClick:()=>Fe(!me),children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[y.length>0?me?e.jsx(Lc,{className:"w-4 h-4 text-gray-400"}):e.jsx(Ec,{className:"w-4 h-4 text-gray-400"}):null,e.jsx("span",{className:"font-medium",children:"Crop Sales"})]}),!me&&y.length>0&&e.jsx("div",{className:"text-xs text-gray-400 mt-1 ml-6",children:y.filter(R=>R.adjustedRevenue>0).map(R=>R.crop).join(", ")})]}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:[h(u),e.jsx("div",{className:"text-xs text-blue-500",children:"baseline"})]}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono text-amber-700 bg-amber-50 font-semibold",children:[h(j),g&&e.jsx("div",{className:"text-xs text-amber-500",children:"from marketing"})]}),e.jsx("td",{className:"py-2 px-4 text-right",onClick:R=>R.stopPropagation(),children:e.jsx(ne,{value:p,onChange:R=>{var _;const Y={...(_=s==null?void 0:s.cashFlow)==null?void 0:_.inflowsActual,cropSales:R};I({cashFlow:{...s==null?void 0:s.cashFlow,inflowsActual:Y}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${b>=0?"text-green-600":"text-red-600"}`,children:h(b)})]}),me&&y.map(R=>e.jsxs("tr",{className:"border-b border-gray-100 bg-gray-50/50",children:[e.jsxs("td",{className:"py-2 px-4 pl-14 text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ho,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"font-medium",children:R.crop}),R.pricedPercent>0&&e.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${R.pricedPercent>=75?"bg-green-100 text-green-700":R.pricedPercent>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[R.pricedPercent.toFixed(0),"% priced"]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-0.5 ml-7",children:[R.bushels.toLocaleString("en-US",{maximumFractionDigits:0})," bu"]})]}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono text-gray-600 bg-blue-50",children:[h(R.projectedRevenue),e.jsxs("div",{className:"text-xs text-gray-400",children:["@ $",R.baselinePrice.toFixed(2)]})]}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono text-amber-700 bg-amber-50",children:[h(R.adjustedRevenue),e.jsxs("div",{className:"text-xs text-amber-500",children:["@ $",R.mktPrice.toFixed(2)]})]}),e.jsx("td",{className:"py-2 px-4 text-right text-gray-400 text-xs",children:""}),e.jsx("td",{className:"py-2 px-4 text-right text-gray-400 text-xs",children:""})]},R.crop))]})})(),[{key:"livestockSales",label:"Livestock Sales"},{key:"governmentPayments",label:"Government Payments"},{key:"customWork",label:"Custom Work / Hire"},{key:"otherIncome",label:"Other Farm Income"}].map(a=>{var g,u,j,y,p,b;const o=((u=(g=s==null?void 0:s.cashFlow)==null?void 0:g.inflows)==null?void 0:u[a.key])||0,i=((y=(j=s==null?void 0:s.cashFlow)==null?void 0:j.inflowsAdjusted)==null?void 0:y[a.key])??o,d=((b=(p=s==null?void 0:s.cashFlow)==null?void 0:p.inflowsActual)==null?void 0:b[a.key])||0,m=d-i;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:a.label}),e.jsx("td",{className:"py-2 px-4 text-right bg-blue-50",children:e.jsx(ne,{value:o,onChange:N=>{var A;const C={...(A=s==null?void 0:s.cashFlow)==null?void 0:A.inflows,[a.key]:N};I({cashFlow:{...s==null?void 0:s.cashFlow,inflows:C}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:i,onChange:N=>{var A;const C={...(A=s==null?void 0:s.cashFlow)==null?void 0:A.inflowsAdjusted,[a.key]:N};I({cashFlow:{...s==null?void 0:s.cashFlow,inflowsAdjusted:C}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:d,onChange:N=>{var A;const C={...(A=s==null?void 0:s.cashFlow)==null?void 0:A.inflowsActual,[a.key]:N};I({cashFlow:{...s==null?void 0:s.cashFlow,inflowsActual:C}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${m>=0?"text-green-600":"text-red-600"}`,children:h(m)})]},a.key)}),(()=>{var C,A,L,M;const a=((C=s==null?void 0:s.cashFlow)==null?void 0:C.crops)||[],o=((A=s==null?void 0:s.cashFlow)==null?void 0:A.cropPrices)||{},i=((L=s==null?void 0:s.cashFlow)==null?void 0:L.marketing)||{},d=R=>{var q;const Y=((q=i.byCrop)==null?void 0:q[R])||{},_=Y.positions||[],X=Y.futuresPrice||0,U=Y.basis||0,B=X+U,F=a.filter(W=>W.crop===R).reduce((W,K)=>{const xe=(K.plannedAcres||0)*(K.sharePercent||100)/100;return W+xe*(K.projectedYield||K.aph||0)},0),T=_.reduce((W,K)=>K.type==="cash"||K.type==="futures"||K.type==="hta"?W+(K.bushels||0):W,0),w=Math.max(0,F-T),E=_.reduce((W,K)=>(K.type==="cash"||K.type==="futures"||K.type==="hta")&&K.bushels>0?W+K.bushels*K.price:W,0),z=T>0?E/T:B;return _.length>0||B>0?F>0?(T*z+w*B)/F:B:o[R]||0},m=a.reduce((R,Y)=>{const _=(Y.plannedAcres||0)*(Y.sharePercent||100)/100,X=Y.projectedYield||Y.aph||0,U=_*X,B=o[Y.crop]||0;return R+U*B},0),g=a.reduce((R,Y)=>{const _=(Y.plannedAcres||0)*(Y.sharePercent||100)/100,X=Y.projectedYield||Y.aph||0,U=_*X,B=d(Y.crop);return R+U*B},0),u=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((R,Y)=>{var _,X;return R+(((X=(_=s==null?void 0:s.cashFlow)==null?void 0:_.inflows)==null?void 0:X[Y])||0)},0),j=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((R,Y)=>{var _,X,U,B;return R+(((X=(_=s==null?void 0:s.cashFlow)==null?void 0:_.inflowsAdjusted)==null?void 0:X[Y])??((B=(U=s==null?void 0:s.cashFlow)==null?void 0:U.inflows)==null?void 0:B[Y])??0)},0),y=m+u,p=g+j,b=Object.values(((M=s==null?void 0:s.cashFlow)==null?void 0:M.inflowsActual)||{}).reduce((R,Y)=>R+(Y||0),0),N=b-p;return e.jsxs("tr",{className:"bg-green-100 border-b font-semibold",children:[e.jsx("td",{className:"py-2 px-4 text-green-800",children:"Total Inflows"}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-green-800 bg-blue-100",children:h(y)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-amber-800 bg-amber-100",children:h(p)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-green-800",children:h(b)}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${N>=0?"text-green-700":"text-red-600"}`,children:h(N)})]})})(),e.jsx("tr",{className:"bg-red-50 border-b",children:e.jsx("td",{colSpan:"5",className:"py-2 px-4 font-bold text-red-800",children:"OPERATING CASH OUTFLOWS"})}),(()=>{var g,u,j,y,p;const o=(((g=s==null?void 0:s.cashFlow)==null?void 0:g.crops)||[]).reduce((b,N)=>{const C=(N.plannedAcres||0)*(N.sharePercent||100)/100;return b+C*((N.seedPerAcre||0)+(N.seedTreatmentPerAcre||0))},0),i=((j=(u=s==null?void 0:s.cashFlow)==null?void 0:u.outflowsAdjusted)==null?void 0:j.seed)??o,d=((p=(y=s==null?void 0:s.cashFlow)==null?void 0:y.outflowsActual)==null?void 0:p.seed)||0,m=i-d;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Seed & Treatment",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Seed tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:h(o)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:i,onChange:b=>{var C;const N={...(C=s==null?void 0:s.cashFlow)==null?void 0:C.outflowsAdjusted,seed:b};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsAdjusted:N}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:d,onChange:b=>{var C;const N={...(C=s==null?void 0:s.cashFlow)==null?void 0:C.outflowsActual,seed:b};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsActual:N}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${m>=0?"text-green-600":"text-red-600"}`,children:h(m)})]})})(),(()=>{var u,j,y,p,b,N;const a=((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[],o=((j=s==null?void 0:s.cashFlow)==null?void 0:j.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],i=a.reduce((C,A)=>{const L=(A.plannedAcres||0)*(A.sharePercent||100)/100,M=o.reduce((R,Y)=>R+((A.chemicalCosts||{})[Y]||0),0);return C+L*(M+(A.chemAppCostPerAcre||0))},0),d=((p=(y=s==null?void 0:s.cashFlow)==null?void 0:y.outflowsAdjusted)==null?void 0:p.chemicals)??i,m=((N=(b=s==null?void 0:s.cashFlow)==null?void 0:b.outflowsActual)==null?void 0:N.chemicals)||0,g=d-m;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Chemicals",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Crop Protection tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:h(i)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:d,onChange:C=>{var L;const A={...(L=s==null?void 0:s.cashFlow)==null?void 0:L.outflowsAdjusted,chemicals:C};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsAdjusted:A}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:m,onChange:C=>{var L;const A={...(L=s==null?void 0:s.cashFlow)==null?void 0:L.outflowsActual,chemicals:C};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsActual:A}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${g>=0?"text-green-600":"text-red-600"}`,children:h(g)})]})})(),(()=>{var u,j,y,p,b,N;const a=((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[],o=((j=s==null?void 0:s.cashFlow)==null?void 0:j.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],i=a.reduce((C,A)=>{const L=(A.plannedAcres||0)*(A.sharePercent||100)/100,M=o.reduce((R,Y)=>R+((A.fertilizerCosts||{})[Y]||0),0);return C+L*(M+(A.fertAppCostPerAcre||0))},0),d=((p=(y=s==null?void 0:s.cashFlow)==null?void 0:y.outflowsAdjusted)==null?void 0:p.fertilizer)??i,m=((N=(b=s==null?void 0:s.cashFlow)==null?void 0:b.outflowsActual)==null?void 0:N.fertilizer)||0,g=d-m;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Fertilizer",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Crop Nutrition tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:h(i)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:d,onChange:C=>{var L;const A={...(L=s==null?void 0:s.cashFlow)==null?void 0:L.outflowsAdjusted,fertilizer:C};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsAdjusted:A}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:m,onChange:C=>{var L;const A={...(L=s==null?void 0:s.cashFlow)==null?void 0:L.outflowsActual,fertilizer:C};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsActual:A}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${g>=0?"text-green-600":"text-red-600"}`,children:h(g)})]})})(),(()=>{var d,m,g,u,j,y,p,b,N;const o=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).filter(C=>C.ownership==="Rented").reduce((C,A)=>C+(A.totalRent||0),0),i=((g=(m=s==null?void 0:s.cashFlow)==null?void 0:m.outflowsActual)==null?void 0:g.cashRent)||0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Cash Rent",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Land Details tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:h(o)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:((j=(u=s==null?void 0:s.cashFlow)==null?void 0:u.outflowsAdjusted)==null?void 0:j.cashRent)??o,onChange:C=>{var L;const A={...(L=s==null?void 0:s.cashFlow)==null?void 0:L.outflowsAdjusted,cashRent:C};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsAdjusted:A}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:i,onChange:C=>{var L;const A={...(L=s==null?void 0:s.cashFlow)==null?void 0:L.outflowsActual,cashRent:C};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsActual:A}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${(((p=(y=s==null?void 0:s.cashFlow)==null?void 0:y.outflowsAdjusted)==null?void 0:p.cashRent)??o)-i>=0?"text-green-600":"text-red-600"}`,children:h((((N=(b=s==null?void 0:s.cashFlow)==null?void 0:b.outflowsAdjusted)==null?void 0:N.cashRent)??o)-i)})]})})(),(()=>{var u,j,y,p,b;const i=(((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[]).filter(N=>N.practice==="Irrigated").reduce((N,C)=>{const A=(C.plannedAcres||0)*(C.sharePercent||100)/100;return N+A*(C.irrigationCostPerAcre||0)},0),d=((y=(j=s==null?void 0:s.cashFlow)==null?void 0:j.outflowsAdjusted)==null?void 0:y.irrigation)??i,m=((b=(p=s==null?void 0:s.cashFlow)==null?void 0:p.outflowsActual)==null?void 0:b.irrigation)||0,g=d-m;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Irrigation",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Irrigation tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:h(i)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:d,onChange:N=>{var A;const C={...(A=s==null?void 0:s.cashFlow)==null?void 0:A.outflowsAdjusted,irrigation:N};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsAdjusted:C}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:m,onChange:N=>{var A;const C={...(A=s==null?void 0:s.cashFlow)==null?void 0:A.outflowsActual,irrigation:N};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsActual:C}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${g>=0?"text-green-600":"text-red-600"}`,children:h(g)})]})})(),(()=>{var u,j,y,p,b,N;const a=((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[],o=((j=s==null?void 0:s.cashFlow)==null?void 0:j.freightRates)||{},i=a.reduce((C,A)=>{const M=(A.plannedAcres||0)*(A.sharePercent||100)/100*(A.aph||0),R=o[A.crop]||0;return C+M*R},0),d=((p=(y=s==null?void 0:s.cashFlow)==null?void 0:y.outflowsAdjusted)==null?void 0:p.freight)??i,m=((N=(b=s==null?void 0:s.cashFlow)==null?void 0:b.outflowsActual)==null?void 0:N.freight)||0,g=d-m;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Freight",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Freight tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:h(i)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:d,onChange:C=>{var L;const A={...(L=s==null?void 0:s.cashFlow)==null?void 0:L.outflowsAdjusted,freight:C};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsAdjusted:A}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:m,onChange:C=>{var L;const A={...(L=s==null?void 0:s.cashFlow)==null?void 0:L.outflowsActual,freight:C};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsActual:A}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${g>=0?"text-green-600":"text-red-600"}`,children:h(g)})]})})(),(()=>{var g,u,j,y,p;const o=(((g=s==null?void 0:s.cashFlow)==null?void 0:g.crops)||[]).reduce((b,N)=>{var X,U,B,k,F,T,w,E,z,q,W,K;const C=(N.plannedAcres||0)*(N.sharePercent||100)/100,A=C*(((X=N.mpciElection)==null?void 0:X.premiumPerAcre)||0),L=(U=N.areaPlan)!=null&&U.scoEnabled?C*(((B=N.areaPlan)==null?void 0:B.scoPerAcre)||0):0,M=(k=N.areaPlan)!=null&&k.ecoEnabled?C*(((F=N.areaPlan)==null?void 0:F.ecoPerAcre)||0):0,R=(T=N.areaPlan)!=null&&T.marginPlan&&((w=N.areaPlan)==null?void 0:w.marginPlan)!=="none"?C*(((E=N.areaPlan)==null?void 0:E.marginPerAcre)||0):0,Y=(z=N.privateInsurance)!=null&&z.hailEnabled?C*(((q=N.privateInsurance)==null?void 0:q.hailPerAcre)||0):0,_=(W=N.privateInsurance)!=null&&W.windEnabled?C*(((K=N.privateInsurance)==null?void 0:K.windPerAcre)||0):0;return b+A+L+M+R+Y+_},0),i=((j=(u=s==null?void 0:s.cashFlow)==null?void 0:u.outflowsActual)==null?void 0:j.cropInsurance)||0,d=((p=(y=s==null?void 0:s.cashFlow)==null?void 0:y.outflowsAdjusted)==null?void 0:p.cropInsurance)??o,m=d-i;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Crop Insurance",e.jsx("span",{className:"ml-2 text-xs text-purple-500",children:"(from Crop Insurance)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:h(o)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:d,onChange:b=>{var C;const N={...(C=s==null?void 0:s.cashFlow)==null?void 0:C.outflowsAdjusted,cropInsurance:b};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsAdjusted:N}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:i,onChange:b=>{var C;const N={...(C=s==null?void 0:s.cashFlow)==null?void 0:C.outflowsActual,cropInsurance:b};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsActual:N}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${m>=0?"text-green-600":"text-red-600"}`,children:h(m)})]})})(),[{key:"feedLivestock",label:"Feed & Livestock Expense"},{key:"fuelOil",label:"Fuel & Oil"},{key:"repairs",label:"Repairs & Maintenance"},{key:"labor",label:"Hired Labor"},{key:"insurance",label:"Insurance"},{key:"utilities",label:"Utilities"},{key:"realEstateTax",label:"Real Estate Taxes"},{key:"otherExpenses",label:"Other Operating Expenses"}].map(a=>{var g,u,j,y,p,b;const o=((u=(g=s==null?void 0:s.cashFlow)==null?void 0:g.outflows)==null?void 0:u[a.key])||0,i=((y=(j=s==null?void 0:s.cashFlow)==null?void 0:j.outflowsAdjusted)==null?void 0:y[a.key])??o,d=((b=(p=s==null?void 0:s.cashFlow)==null?void 0:p.outflowsActual)==null?void 0:b[a.key])||0,m=i-d;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:a.label}),e.jsx("td",{className:"py-2 px-4 text-right bg-blue-50",children:e.jsx(ne,{value:o,onChange:N=>{var A;const C={...(A=s==null?void 0:s.cashFlow)==null?void 0:A.outflows,[a.key]:N};I({cashFlow:{...s==null?void 0:s.cashFlow,outflows:C}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:i,onChange:N=>{var A;const C={...(A=s==null?void 0:s.cashFlow)==null?void 0:A.outflowsAdjusted,[a.key]:N};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsAdjusted:C}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:d,onChange:N=>{var A;const C={...(A=s==null?void 0:s.cashFlow)==null?void 0:A.outflowsActual,[a.key]:N};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsActual:C}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${m>=0?"text-green-600":"text-red-600"}`,children:h(m)})]},a.key)}),(()=>{var g,u,j,y;const o=((s==null?void 0:s.debtService)||[]).reduce((p,b)=>p+(b.interestPayment||0),0),i=((u=(g=s==null?void 0:s.cashFlow)==null?void 0:g.outflowsAdjusted)==null?void 0:u.interestOnDebt)??o,d=((y=(j=s==null?void 0:s.cashFlow)==null?void 0:j.outflowsActual)==null?void 0:y.interestOnDebt)||0,m=i-d;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Interest on Debt",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Debt Service)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:h(o)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ne,{value:i,onChange:p=>{var N;const b={...(N=s==null?void 0:s.cashFlow)==null?void 0:N.outflowsAdjusted,interestOnDebt:p};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsAdjusted:b}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:d,onChange:p=>{var N;const b={...(N=s==null?void 0:s.cashFlow)==null?void 0:N.outflowsActual,interestOnDebt:p};I({cashFlow:{...s==null?void 0:s.cashFlow,outflowsActual:b}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${m>=0?"text-green-600":"text-red-600"}`,children:h(m)})]})})(),(()=>{var q,W,K,xe,Ae,G;const a=((q=s==null?void 0:s.cashFlow)==null?void 0:q.crops)||[],o=((W=s==null?void 0:s.cashFlow)==null?void 0:W.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],i=((K=s==null?void 0:s.cashFlow)==null?void 0:K.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],d=((xe=s==null?void 0:s.cashFlow)==null?void 0:xe.outflowsAdjusted)||{},m=a.reduce((S,Q)=>{const ie=(Q.plannedAcres||0)*(Q.sharePercent||100)/100;return S+ie*((Q.seedPerAcre||0)+(Q.seedTreatmentPerAcre||0))},0),g=a.reduce((S,Q)=>{const ie=(Q.plannedAcres||0)*(Q.sharePercent||100)/100,fe=i.reduce((he,Be)=>he+((Q.chemicalCosts||{})[Be]||0),0);return S+ie*(fe+(Q.chemAppCostPerAcre||0))},0),u=a.reduce((S,Q)=>{const ie=(Q.plannedAcres||0)*(Q.sharePercent||100)/100,fe=o.reduce((he,Be)=>he+((Q.fertilizerCosts||{})[Be]||0),0);return S+ie*(fe+(Q.fertAppCostPerAcre||0))},0),j=a.filter(S=>S.ownership==="Rented").reduce((S,Q)=>S+(Q.totalRent||0),0),y=a.filter(S=>S.practice==="Irrigated").reduce((S,Q)=>{const ie=(Q.plannedAcres||0)*(Q.sharePercent||100)/100;return S+ie*(Q.irrigationCostPerAcre||0)},0),p=((Ae=s==null?void 0:s.cashFlow)==null?void 0:Ae.freightRates)||{},b=a.reduce((S,Q)=>{const fe=(Q.plannedAcres||0)*(Q.sharePercent||100)/100*(Q.aph||0);return S+fe*(p[Q.crop]||0)},0),N=a.reduce((S,Q)=>{var mt,vt,ct,Se,we,ut,Mt,At,wt,gr,ar,Sa;const ie=(Q.plannedAcres||0)*(Q.sharePercent||100)/100,fe=ie*(((mt=Q.mpciElection)==null?void 0:mt.premiumPerAcre)||0),he=(vt=Q.areaPlan)!=null&&vt.scoEnabled?ie*(((ct=Q.areaPlan)==null?void 0:ct.scoPerAcre)||0):0,Be=(Se=Q.areaPlan)!=null&&Se.ecoEnabled?ie*(((we=Q.areaPlan)==null?void 0:we.ecoPerAcre)||0):0,_e=(ut=Q.areaPlan)!=null&&ut.marginPlan&&((Mt=Q.areaPlan)==null?void 0:Mt.marginPlan)!=="none"?ie*(((At=Q.areaPlan)==null?void 0:At.marginPerAcre)||0):0,Re=(wt=Q.privateInsurance)!=null&&wt.hailEnabled?ie*(((gr=Q.privateInsurance)==null?void 0:gr.hailPerAcre)||0):0,Ge=(ar=Q.privateInsurance)!=null&&ar.windEnabled?ie*(((Sa=Q.privateInsurance)==null?void 0:Sa.windPerAcre)||0):0;return S+fe+he+Be+_e+Re+Ge},0),C=((s==null?void 0:s.debtService)||[]).reduce((S,Q)=>S+(Q.interestPayment||0),0),A=["feedLivestock","fuelOil","repairs","labor","insurance","utilities","realEstateTax","otherExpenses"],L=A.reduce((S,Q)=>{var ie,fe;return S+(((fe=(ie=s==null?void 0:s.cashFlow)==null?void 0:ie.outflows)==null?void 0:fe[Q])||0)},0),M=m+g+u+j+y+b+N+C+L,R=d.seed??m,Y=d.chemicals??g,_=d.fertilizer??u,X=d.cashRent??j,U=d.irrigation??y,B=d.freight??b,k=d.cropInsurance??N,F=d.interestOnDebt??C,T=A.reduce((S,Q)=>{var ie,fe;return S+(d[Q]??((fe=(ie=s==null?void 0:s.cashFlow)==null?void 0:ie.outflows)==null?void 0:fe[Q])??0)},0),w=R+Y+_+X+U+B+k+F+T,E=Object.values(((G=s==null?void 0:s.cashFlow)==null?void 0:G.outflowsActual)||{}).reduce((S,Q)=>S+(Q||0),0),z=w-E;return e.jsxs("tr",{className:"bg-red-100 border-b font-semibold",children:[e.jsx("td",{className:"py-2 px-4 text-red-800",children:"Total Outflows"}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-red-800 bg-blue-100",children:h(M)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-amber-800 bg-amber-100",children:h(w)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-red-800",children:h(E)}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${z>=0?"text-green-700":"text-red-700"}`,children:h(z)})]})})(),(()=>{var w,E,z,q,W,K,xe,Ae;const a=((w=s==null?void 0:s.cashFlow)==null?void 0:w.crops)||[],o=((E=s==null?void 0:s.cashFlow)==null?void 0:E.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],i=((z=s==null?void 0:s.cashFlow)==null?void 0:z.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],d=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100;return G+Q*((S.seedPerAcre||0)+(S.seedTreatmentPerAcre||0))},0),m=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=i.reduce((fe,he)=>fe+((S.chemicalCosts||{})[he]||0),0);return G+Q*(ie+(S.chemAppCostPerAcre||0))},0),g=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=o.reduce((fe,he)=>fe+((S.fertilizerCosts||{})[he]||0),0);return G+Q*(ie+(S.fertAppCostPerAcre||0))},0),u=a.filter(G=>G.ownership==="Rented").reduce((G,S)=>G+(S.totalRent||0),0),j=a.filter(G=>G.practice==="Irrigated").reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100;return G+Q*(S.irrigationCostPerAcre||0)},0),y=((q=s==null?void 0:s.cashFlow)==null?void 0:q.freightRates)||{},p=a.reduce((G,S)=>{const ie=(S.plannedAcres||0)*(S.sharePercent||100)/100*(S.aph||0);return G+ie*(y[S.crop]||0)},0),b=["Multiperil","Hail","Wind","ECO","SCO","Margin Protection"],N=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=S.insurance||{};return G+b.reduce((fe,he)=>{var Be,_e,Re,Ge;return(Be=ie[he])!=null&&Be.enabled?fe+((_e=ie[he])!=null&&_e.useTotal?((Re=ie[he])==null?void 0:Re.totalCost)||0:Q*(((Ge=ie[he])==null?void 0:Ge.perAcre)||0)):fe},0)},0),C=((s==null?void 0:s.debtService)||[]).reduce((G,S)=>G+(S.interestPayment||0),0),A=["feedLivestock","fuelOil","repairs","labor","insurance","utilities","realEstateTax","otherExpenses"].reduce((G,S)=>{var Q,ie;return G+(((ie=(Q=s==null?void 0:s.cashFlow)==null?void 0:Q.outflows)==null?void 0:ie[S])||0)},0),L=d+m+g+u+j+p+N+C+A,M=((W=s==null?void 0:s.cashFlow)==null?void 0:W.cropPrices)||{},R=((K=s==null?void 0:s.cashFlow)==null?void 0:K.marketing)||{},Y=G=>{var ct;const S=((ct=R.byCrop)==null?void 0:ct[G])||{},Q=S.positions||[],ie=S.futuresPrice||0,fe=S.basis||0,he=ie+fe,_e=a.filter(Se=>Se.crop===G).reduce((Se,we)=>{const ut=(we.plannedAcres||0)*(we.sharePercent||100)/100;return Se+ut*(we.projectedYield||we.aph||0)},0),Re=Q.reduce((Se,we)=>we.type==="cash"||we.type==="futures"||we.type==="hta"?Se+(we.bushels||0):Se,0),Ge=Math.max(0,_e-Re),mt=Q.reduce((Se,we)=>(we.type==="cash"||we.type==="futures"||we.type==="hta")&&we.bushels>0?Se+we.bushels*we.price:Se,0),vt=Re>0?mt/Re:he;return Q.length>0&&(Re>0||he>0)?_e>0?(Re*vt+Ge*he)/_e:he:M[G]||0},_=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=S.projectedYield||S.aph||0,fe=Q*ie,he=Y(S.crop);return G+fe*he},0),X=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((G,S)=>{var Q,ie;return G+(((ie=(Q=s==null?void 0:s.cashFlow)==null?void 0:Q.inflows)==null?void 0:ie[S])||0)},0),B=_+X-L,k=Object.values(((xe=s==null?void 0:s.cashFlow)==null?void 0:xe.inflowsActual)||{}).reduce((G,S)=>G+(S||0),0),F=Object.values(((Ae=s==null?void 0:s.cashFlow)==null?void 0:Ae.outflowsActual)||{}).reduce((G,S)=>G+(S||0),0),T=k-F;return e.jsxs("tr",{className:"bg-blue-100 border-b font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-blue-800",children:"NET OPERATING CASH FLOW"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-800",children:h(B)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-800",children:h(T)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-800",children:""})]})})(),e.jsx("tr",{className:"bg-purple-50 border-b",children:e.jsx("td",{colSpan:"5",className:"py-2 px-4 font-bold text-purple-800",children:"CAPITAL & FINANCING"})}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:"Capital Purchases"}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:((Xd=s==null?void 0:s.cashFlow)==null?void 0:Xd.capitalPurchases)||0,onChange:a=>{var i,d,m,g,u,j;const o=(((i=s==null?void 0:s.cashFlow)==null?void 0:i.totalInflows)||0)-(((d=s==null?void 0:s.cashFlow)==null?void 0:d.totalOutflows)||0);I({cashFlow:{...s==null?void 0:s.cashFlow,capitalPurchases:a,endingCash:(((m=s==null?void 0:s.cashFlow)==null?void 0:m.beginningCash)||0)+o-a+(((g=s==null?void 0:s.cashFlow)==null?void 0:g.capitalSales)||0)-(((u=s==null?void 0:s.cashFlow)==null?void 0:u.debtPayments)||0)+(((j=s==null?void 0:s.cashFlow)==null?void 0:j.newBorrowing)||0)}})},className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:"Capital Sales"}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:((Bd=s==null?void 0:s.cashFlow)==null?void 0:Bd.capitalSales)||0,onChange:a=>{var i,d,m,g,u,j;const o=(((i=s==null?void 0:s.cashFlow)==null?void 0:i.totalInflows)||0)-(((d=s==null?void 0:s.cashFlow)==null?void 0:d.totalOutflows)||0);I({cashFlow:{...s==null?void 0:s.cashFlow,capitalSales:a,endingCash:(((m=s==null?void 0:s.cashFlow)==null?void 0:m.beginningCash)||0)+o-(((g=s==null?void 0:s.cashFlow)==null?void 0:g.capitalPurchases)||0)+a-(((u=s==null?void 0:s.cashFlow)==null?void 0:u.debtPayments)||0)+(((j=s==null?void 0:s.cashFlow)==null?void 0:j.newBorrowing)||0)}})},className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""})]}),(()=>{var d;const o=((s==null?void 0:s.debtService)||[]).reduce((m,g)=>m+(g.principalPayment||0),0),i=((d=s==null?void 0:s.cashFlow)==null?void 0:d.principalPaymentsActual)||0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Principal Payments",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Debt Service)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:h(o)}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:i,onChange:m=>{I({cashFlow:{...s==null?void 0:s.cashFlow,principalPaymentsActual:m}})},className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${o-i>=0?"text-green-600":"text-red-600"}`,children:h(o-i)})]})})(),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:"New Borrowing"}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ne,{value:((ex=s==null?void 0:s.cashFlow)==null?void 0:ex.newBorrowing)||0,onChange:a=>{var o,i;(((o=s==null?void 0:s.cashFlow)==null?void 0:o.totalInflows)||0)-(((i=s==null?void 0:s.cashFlow)==null?void 0:i.totalOutflows)||0),I({cashFlow:{...s==null?void 0:s.cashFlow,newBorrowing:a}})},className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""})]}),(()=>{var F,T,w,E,z,q,W,K,xe,Ae;const a=((F=s==null?void 0:s.cashFlow)==null?void 0:F.crops)||[],o=((T=s==null?void 0:s.cashFlow)==null?void 0:T.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],i=((w=s==null?void 0:s.cashFlow)==null?void 0:w.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],d=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100;return G+Q*((S.seedPerAcre||0)+(S.seedTreatmentPerAcre||0))},0),m=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=i.reduce((fe,he)=>fe+((S.chemicalCosts||{})[he]||0),0);return G+Q*(ie+(S.chemAppCostPerAcre||0))},0),g=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=o.reduce((fe,he)=>fe+((S.fertilizerCosts||{})[he]||0),0);return G+Q*(ie+(S.fertAppCostPerAcre||0))},0),u=a.filter(G=>G.ownership==="Rented").reduce((G,S)=>G+(S.totalRent||0),0),j=a.filter(G=>G.practice==="Irrigated").reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100;return G+Q*(S.irrigationCostPerAcre||0)},0),y=((E=s==null?void 0:s.cashFlow)==null?void 0:E.freightRates)||{},p=a.reduce((G,S)=>{const ie=(S.plannedAcres||0)*(S.sharePercent||100)/100*(S.aph||0);return G+ie*(y[S.crop]||0)},0),b=a.reduce((G,S)=>{var Ge,mt,vt,ct,Se,we,ut,Mt,At,wt,gr,ar;const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=Q*(((Ge=S.mpciElection)==null?void 0:Ge.premiumPerAcre)||0),fe=(mt=S.areaPlan)!=null&&mt.scoEnabled?Q*(((vt=S.areaPlan)==null?void 0:vt.scoPerAcre)||0):0,he=(ct=S.areaPlan)!=null&&ct.ecoEnabled?Q*(((Se=S.areaPlan)==null?void 0:Se.ecoPerAcre)||0):0,Be=(we=S.areaPlan)!=null&&we.marginPlan&&((ut=S.areaPlan)==null?void 0:ut.marginPlan)!=="none"?Q*(((Mt=S.areaPlan)==null?void 0:Mt.marginPerAcre)||0):0,_e=(At=S.privateInsurance)!=null&&At.hailEnabled?Q*(((wt=S.privateInsurance)==null?void 0:wt.hailPerAcre)||0):0,Re=(gr=S.privateInsurance)!=null&&gr.windEnabled?Q*(((ar=S.privateInsurance)==null?void 0:ar.windPerAcre)||0):0;return G+ie+fe+he+Be+_e+Re},0),N=((s==null?void 0:s.debtService)||[]).reduce((G,S)=>G+(S.interestPayment||0),0),C=["feedLivestock","fuelOil","repairs","labor","insurance","utilities","realEstateTax","otherExpenses"].reduce((G,S)=>{var Q,ie;return G+(((ie=(Q=s==null?void 0:s.cashFlow)==null?void 0:Q.outflows)==null?void 0:ie[S])||0)},0),A=d+m+g+u+j+p+b+N+C,L=((z=s==null?void 0:s.cashFlow)==null?void 0:z.cropPrices)||{},M=((q=s==null?void 0:s.cashFlow)==null?void 0:q.marketing)||{},R=G=>{var ct;const S=((ct=M.byCrop)==null?void 0:ct[G])||{},Q=S.positions||[],ie=S.futuresPrice||0,fe=S.basis||0,he=ie+fe,_e=a.filter(Se=>Se.crop===G).reduce((Se,we)=>{const ut=(we.plannedAcres||0)*(we.sharePercent||100)/100;return Se+ut*(we.projectedYield||we.aph||0)},0),Re=Q.reduce((Se,we)=>we.type==="cash"||we.type==="futures"||we.type==="hta"?Se+(we.bushels||0):Se,0),Ge=Math.max(0,_e-Re),mt=Q.reduce((Se,we)=>(we.type==="cash"||we.type==="futures"||we.type==="hta")&&we.bushels>0?Se+we.bushels*we.price:Se,0),vt=Re>0?mt/Re:he;return Q.length>0&&(Re>0||he>0)?_e>0?(Re*vt+Ge*he)/_e:he:L[G]||0},Y=a.reduce((G,S)=>{const Q=(S.plannedAcres||0)*(S.sharePercent||100)/100,ie=S.projectedYield||S.aph||0,fe=Q*ie,he=R(S.crop);return G+fe*he},0),_=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((G,S)=>{var Q,ie;return G+(((ie=(Q=s==null?void 0:s.cashFlow)==null?void 0:Q.inflows)==null?void 0:ie[S])||0)},0),U=Y+_-A,B=((s==null?void 0:s.debtService)||[]).reduce((G,S)=>G+(S.principalPayment||0),0),k=(((W=s==null?void 0:s.cashFlow)==null?void 0:W.beginningCash)||0)+U-(((K=s==null?void 0:s.cashFlow)==null?void 0:K.capitalPurchases)||0)+(((xe=s==null?void 0:s.cashFlow)==null?void 0:xe.capitalSales)||0)-B+(((Ae=s==null?void 0:s.cashFlow)==null?void 0:Ae.newBorrowing)||0);return e.jsxs("tr",{className:"bg-purple-100 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-purple-800",children:"ENDING CASH BALANCE"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-purple-800 text-lg",children:h(k)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-400",children:""})]})})()]})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:((tx=s==null?void 0:s.cashFlow)==null?void 0:tx.notes)||"",onChange:a=>I({cashFlow:{...s==null?void 0:s.cashFlow,notes:a.target.value}}),placeholder:"Add any notes about cash flow assumptions, timing, etc.",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",rows:3})]})]}),D==="fields"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Uo,{className:"w-6 h-6 text-blue-600"}),"Field Management"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]}),e.jsxs("button",{onClick:()=>{var m;const a={id:`field-${Date.now()}`,fieldName:"",practice:"Dryland",county:"",entity:"",legalId:"",fsnNumber:"",crop:"",plannedAcres:0,sharePercent:100},d=[...[...((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[],a]].sort((g,u)=>{const j=(g.crop||"zzz").toLowerCase(),y=(u.crop||"zzz").toLowerCase();return j<y?-1:j>y?1:(g.fieldName||"").localeCompare(u.fieldName||"")});I({cashFlow:{...s==null?void 0:s.cashFlow,crops:d}})},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Add Field"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Fields"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:(((rx=s==null?void 0:s.cashFlow)==null?void 0:rx.crops)||[]).length})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:(((sx=s==null?void 0:s.cashFlow)==null?void 0:sx.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0)*(o.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Irrigated"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:(((nx=s==null?void 0:s.cashFlow)==null?void 0:nx.crops)||[]).filter(a=>a.practice==="Irrigated").reduce((a,o)=>a+(o.plannedAcres||0)*(o.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Dryland"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:(((ax=s==null?void 0:s.cashFlow)==null?void 0:ax.crops)||[]).filter(a=>a.practice!=="Irrigated").reduce((a,o)=>a+(o.plannedAcres||0)*(o.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]})]}),(((lx=s==null?void 0:s.cashFlow)==null?void 0:lx.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Uo,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields defined yet."}),e.jsx("span",{className:"text-blue-600",children:'Click "Add Field" to start adding your fields.'})]})}),(((ox=s==null?void 0:s.cashFlow)==null?void 0:ox.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Entity"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Legal ID"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"FSN #"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 bg-green-50",children:"Projected Crop"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-gray-700 w-10"})]})}),e.jsx("tbody",{children:(((ix=s==null?void 0:s.cashFlow)==null?void 0:ix.crops)||[]).map(a=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:a.fieldName||"",onChange:o=>{var d;const i=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).map(m=>m.id===a.id?{...m,fieldName:o.target.value}:m);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})},placeholder:"Field name",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm font-medium"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx($e,{value:a.plannedAcres||0,onChange:o=>{var d;const i=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).map(m=>m.id===a.id?{...m,plannedAcres:o}:m);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})},decimals:1,className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:a.practice||"Dryland",onChange:o=>{var d;const i=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).map(m=>m.id===a.id?{...m,practice:o.target.value}:m);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"Dryland",children:"Dryland"}),e.jsx("option",{value:"Irrigated",children:"Irrigated"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:a.county||"",onChange:o=>{var d;const i=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).map(m=>m.id===a.id?{...m,county:o.target.value}:m);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})},placeholder:"County",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:a.entity||"",onChange:o=>{var d;const i=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).map(m=>m.id===a.id?{...m,entity:o.target.value}:m);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),((re==null?void 0:re.entities)||[]).map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:a.legalId||"",onChange:o=>{var d;const i=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).map(m=>m.id===a.id?{...m,legalId:o.target.value}:m);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})},placeholder:"Legal description",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:a.fsnNumber||"",onChange:o=>{var d;const i=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).map(m=>m.id===a.id?{...m,fsnNumber:o.target.value}:m);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})},placeholder:"FSN #",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsxs("select",{value:a.crop||"",onChange:o=>{var N,C;const i=o.target.value,d=a.crop,m=((N=s==null?void 0:s.cashFlow)==null?void 0:N.fieldAPHByCrop)||{};let u={...m[a.id]||{}};d&&a.aph&&(u[d]=a.aph);const j=u[i]||0,y={...m,[a.id]:u},b=[...(((C=s==null?void 0:s.cashFlow)==null?void 0:C.crops)||[]).map(A=>A.id===a.id?{...A,crop:i,aph:j}:A)].sort((A,L)=>{const M=(A.crop||"zzz").toLowerCase(),R=(L.crop||"zzz").toLowerCase();return M<R?-1:M>R?1:(A.fieldName||"").localeCompare(L.fieldName||"")});I({cashFlow:{...s==null?void 0:s.cashFlow,crops:b,fieldAPHByCrop:y}})},className:"w-full px-2 py-1 border border-green-300 rounded text-sm bg-white font-medium",children:[e.jsx("option",{value:"",children:"Select crop..."}),e.jsx("option",{value:"Corn",children:"Corn"}),e.jsx("option",{value:"Soybeans",children:"Soybeans"}),e.jsx("option",{value:"Wheat",children:"Wheat"}),e.jsx("option",{value:"Milo",children:"Milo"}),e.jsx("option",{value:"Oats",children:"Oats"}),e.jsx("option",{value:"Alfalfa",children:"Alfalfa"}),e.jsx("option",{value:"Sunflowers",children:"Sunflowers"}),e.jsx("option",{value:"Sorghum",children:"Sorghum"}),e.jsx("option",{value:"Cotton",children:"Cotton"}),e.jsx("option",{value:"Rice",children:"Rice"}),e.jsx("option",{value:"Barley",children:"Barley"}),e.jsx("option",{value:"Canola",children:"Canola"}),e.jsx("option",{value:"Dry Beans",children:"Dry Beans"}),e.jsx("option",{value:"Peanuts",children:"Peanuts"}),e.jsx("option",{value:"Sugar Beets",children:"Sugar Beets"}),e.jsx("option",{value:"Popcorn",children:"Popcorn"}),e.jsx("option",{value:"Fallow",children:"Fallow"}),e.jsx("option",{value:"CRP",children:"CRP"}),e.jsx("option",{value:"Pasture",children:"Pasture"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("button",{onClick:()=>{var o;if(confirm("Delete this field?")){const i=(((o=s==null?void 0:s.cashFlow)==null?void 0:o.crops)||[]).filter(d=>d.id!==a.id);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})}},className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((cx=s==null?void 0:s.cashFlow)==null?void 0:cx.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{colSpan:"7"})]})})]})}),(((dx=s==null?void 0:s.cashFlow)==null?void 0:dx.crops)||[]).filter(a=>a.crop).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((xx=s==null?void 0:s.cashFlow)==null?void 0:xx.crops)||[]).reduce((a,o)=>{const i=o.crop||"Unassigned";return a[i]=(a[i]||0)+(o.plannedAcres||0)*(o.sharePercent||100)/100,a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:`${a==="Unassigned"?"text-gray-400 italic":"text-gray-600"}`,children:a}),e.jsxs("span",{className:"font-mono",children:[o.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},a))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Practice"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((mx=s==null?void 0:s.cashFlow)==null?void 0:mx.crops)||[]).reduce((a,o)=>{const i=o.practice||"Dryland";return a[i]=(a[i]||0)+(o.plannedAcres||0)*(o.sharePercent||100)/100,a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),e.jsxs("span",{className:"font-mono",children:[o.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},a))})]})]}),(((ux=s==null?void 0:s.cashFlow)==null?void 0:ux.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 bg-amber-50 rounded-lg border border-amber-200 p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-amber-600"}),"APH by Field by Crop"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the APH (Actual Production History) for each field by crop. When you change a field's projected crop, the APH will automatically update."}),e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto bg-white",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-gray-700 sticky left-0 bg-gray-100",children:"Field Name"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-gray-700",children:"Acres"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Corn"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Soybeans"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Wheat"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Milo"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Oats"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Alfalfa"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Sunflowers"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Sorghum"})]})}),e.jsx("tbody",{children:(((hx=s==null?void 0:s.cashFlow)==null?void 0:hx.crops)||[]).map(a=>{var m;const o=((m=s==null?void 0:s.cashFlow)==null?void 0:m.fieldAPHByCrop)||{},i=o[a.id]||{},d=["Corn","Soybeans","Wheat","Milo","Oats","Alfalfa","Sunflowers","Sorghum"];return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-3 font-medium text-gray-800 sticky left-0 bg-white",children:[a.fieldName||"(unnamed)",a.crop&&e.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-green-100 text-green-700",children:a.crop})]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:(a.plannedAcres||0).toLocaleString("en-US",{maximumFractionDigits:1})}),d.map(g=>{const u=a.crop===g,j=u?a.aph||i[g]||0:i[g]||0;return e.jsx("td",{className:`py-1 px-1 ${u?"bg-green-50":"bg-amber-50"}`,children:e.jsx($e,{value:j,onChange:y=>{var N;const p={...i,[g]:y},b={...o,[a.id]:p};if(u){const C=(((N=s==null?void 0:s.cashFlow)==null?void 0:N.crops)||[]).map(A=>A.id===a.id?{...A,aph:y}:A);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:C,fieldAPHByCrop:b}})}else I({cashFlow:{...s==null?void 0:s.cashFlow,fieldAPHByCrop:b}})},decimals:1,placeholder:"0",className:`w-16 px-1 py-1 border rounded text-xs text-center font-mono ${u?"border-green-400 bg-green-100 font-semibold":"border-amber-200 bg-white"}`})},g)})]},a.id)})})]})}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-green-100 border border-green-400"}),"Current projected crop"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-amber-50 border border-amber-200"}),"Other crops (stored for when you switch)"]})]})]})]})}),D==="crops"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ar,{className:"w-6 h-6 text-green-600"}),"Crop Planning"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[((px=re==null?void 0:re.fields)==null?void 0:px.length)>0&&e.jsxs("button",{onClick:()=>{const i=[...(re.fields||[]).map(d=>({id:`crop-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fieldName:d.fieldName,crop:d.crop||"",practice:d.practice||"Dryland",county:d.county,entity:d.entity,plannedAcres:d.plannedAcres||0,sharePercent:d.sharePercent||100,aph:d.aph||0}))].sort((d,m)=>{const g=(d.crop||"zzz").toLowerCase(),u=(m.crop||"zzz").toLowerCase();return g<u?-1:g>u?1:(d.fieldName||"").localeCompare(m.fieldName||"")});I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors",title:"Load saved field definitions",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Load Saved (",re.fields.length,")"]}),(((gx=s==null?void 0:s.cashFlow)==null?void 0:gx.crops)||[]).length>0&&e.jsxs("button",{onClick:()=>{var d;const o=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).map(m=>({id:m.id,fieldName:m.fieldName,crop:m.crop,practice:m.practice,county:m.county,entity:m.entity,plannedAcres:m.plannedAcres,sharePercent:m.sharePercent,aph:m.aph})),i=f.map(m=>m.id===P?{...m,fields:o}:m);v(i),alert(`Saved ${o.length} fields for ${re.name}`)},className:"flex items-center gap-2 bg-amber-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-amber-700 transition-colors",title:"Save current fields as defaults",children:[e.jsx(bf,{className:"w-4 h-4"}),"Save Fields"]}),e.jsxs("button",{onClick:()=>{var m;const a=((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[],o={id:`crop-${Date.now()}`,fieldName:"",crop:"",practice:"Dryland",county:"",entity:ae,plannedAcres:0,sharePercent:100,aph:0},d=[...[...a,o]].sort((g,u)=>{const j=(g.crop||"zzz").toLowerCase(),y=(u.crop||"zzz").toLowerCase();return j<y?-1:j>y?1:(g.fieldName||"").localeCompare(u.fieldName||"")});I({cashFlow:{...s==null?void 0:s.cashFlow,crops:d}})},className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Add Field"]})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Planned Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:(((yx=s==null?void 0:s.cashFlow)==null?void 0:yx.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Share Acres"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:(((fx=s==null?void 0:s.cashFlow)==null?void 0:fx.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0)*(o.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Irrigated Acres"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:(((bx=s==null?void 0:s.cashFlow)==null?void 0:bx.crops)||[]).filter(a=>a.practice==="Irrigated").reduce((a,o)=>a+(o.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Dryland Acres"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700 font-mono",children:(((jx=s==null?void 0:s.cashFlow)==null?void 0:jx.crops)||[]).filter(a=>a.practice==="Dryland").reduce((a,o)=>a+(o.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:(((Nx=s==null?void 0:s.cashFlow)==null?void 0:Nx.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0)*(o.sharePercent||100)/100*(o.aph||0),0).toLocaleString("en-US",{maximumFractionDigits:0})})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Entity"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Planned Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share %"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Bushels"}),e.jsx("th",{className:"py-3 px-2 w-10"})]})}),e.jsx("tbody",{children:(((vx=s==null?void 0:s.cashFlow)==null?void 0:vx.crops)||[]).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"11",className:"py-8 text-center text-gray-500",children:'No crops added yet. Click "Add Field" to get started.'})}):(((wx=s==null?void 0:s.cashFlow)==null?void 0:wx.crops)||[]).map(a=>{var o;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:a.fieldName||"",onChange:i=>{var m;const d=(((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[]).map(g=>g.id===a.id?{...g,fieldName:i.target.value}:g);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:d}})},placeholder:"Field name",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:a.crop||"",onChange:i=>{var C,A;const d=i.target.value,m=a.crop,g=((C=s==null?void 0:s.cashFlow)==null?void 0:C.fieldAPHByCrop)||{};let j={...g[a.id]||{}};m&&a.aph&&(j[m]=a.aph);const y=j[d]||0,p={...g,[a.id]:j},N=[...(((A=s==null?void 0:s.cashFlow)==null?void 0:A.crops)||[]).map(L=>L.id===a.id?{...L,crop:d,aph:y}:L)].sort((L,M)=>{const R=(L.crop||"zzz").toLowerCase(),Y=(M.crop||"zzz").toLowerCase();return R<Y?-1:R>Y?1:(L.fieldName||"").localeCompare(M.fieldName||"")});I({cashFlow:{...s==null?void 0:s.cashFlow,crops:N,fieldAPHByCrop:p}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Corn",children:"Corn"}),e.jsx("option",{value:"Soybeans",children:"Soybeans"}),e.jsx("option",{value:"Wheat",children:"Wheat"}),e.jsx("option",{value:"Grain Sorghum",children:"Grain Sorghum"}),e.jsx("option",{value:"Oats",children:"Oats"}),e.jsx("option",{value:"Barley",children:"Barley"}),e.jsx("option",{value:"Sunflowers",children:"Sunflowers"}),e.jsx("option",{value:"Dry Beans",children:"Dry Beans"}),e.jsx("option",{value:"Alfalfa",children:"Alfalfa"}),e.jsx("option",{value:"Hay",children:"Hay"}),e.jsx("option",{value:"Cotton",children:"Cotton"}),e.jsx("option",{value:"Rice",children:"Rice"}),e.jsx("option",{value:"Popcorn",children:"Popcorn"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:a.practice||"Dryland",onChange:i=>{var m;const d=(((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[]).map(g=>g.id===a.id?{...g,practice:i.target.value}:g);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:d}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"Dryland",children:"Dryland"}),e.jsx("option",{value:"Irrigated",children:"Irrigated"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:a.county||"",onChange:i=>{var m;const d=(((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[]).map(g=>g.id===a.id?{...g,county:i.target.value}:g);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:d}})},placeholder:"County",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:a.entity||"",onChange:i=>{var m;const d=(((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[]).map(g=>g.id===a.id?{...g,entity:i.target.value}:g);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:d}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),(o=re==null?void 0:re.entities)==null?void 0:o.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx($e,{value:a.plannedAcres||0,onChange:i=>{var m;const d=(((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[]).map(g=>g.id===a.id?{...g,plannedAcres:i}:g);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:d}})},decimals:1,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx($e,{value:a.sharePercent||100,onChange:i=>{var m;const d=(((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[]).map(g=>g.id===a.id?{...g,sharePercent:i}:g);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:d}})},decimals:0,placeholder:"100",className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-gray-600",children:((a.plannedAcres||0)*(a.sharePercent||100)/100).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx($e,{value:a.aph||0,onChange:i=>{var y,p;const d=((y=s==null?void 0:s.cashFlow)==null?void 0:y.fieldAPHByCrop)||{},g={...d[a.id]||{},[a.crop]:i},u={...d,[a.id]:g},j=(((p=s==null?void 0:s.cashFlow)==null?void 0:p.crops)||[]).map(b=>b.id===a.id?{...b,aph:i}:b);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:j,fieldAPHByCrop:u}})},decimals:1,placeholder:"0",className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-gray-600",children:((a.plannedAcres||0)*(a.sharePercent||100)/100*(a.aph||0)).toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("button",{onClick:()=>{var d;const i=(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).filter(m=>m.id!==a.id);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:i}})},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},a.id)})}),(((Px=s==null?void 0:s.cashFlow)==null?void 0:Px.crops)||[]).length>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"5",className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((Cx=s==null?void 0:s.cashFlow)==null?void 0:Cx.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((Fx=s==null?void 0:s.cashFlow)==null?void 0:Fx.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0)*(o.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((Ax=s==null?void 0:s.cashFlow)==null?void 0:Ax.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0)*(o.sharePercent||100)/100*(o.aph||0),0).toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{})]})})]})}),(((kx=s==null?void 0:s.cashFlow)==null?void 0:kx.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((Dx=s==null?void 0:s.cashFlow)==null?void 0:Dx.crops)||[]).reduce((a,o)=>{const i=o.crop||"Unassigned";return a[i]=(a[i]||0)+(o.plannedAcres||0)*(o.sharePercent||100)/100,a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),e.jsxs("span",{className:"font-mono",children:[o.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},a))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Bushels by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((Tx=s==null?void 0:s.cashFlow)==null?void 0:Tx.crops)||[]).reduce((a,o)=>{const i=o.crop||"Unassigned";return a[i]=(a[i]||0)+(o.plannedAcres||0)*(o.sharePercent||100)/100*(o.aph||0),a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),e.jsxs("span",{className:"font-mono",children:[o.toLocaleString("en-US",{maximumFractionDigits:0})," bu"]})]},a))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Entity"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((Lx=s==null?void 0:s.cashFlow)==null?void 0:Lx.crops)||[]).reduce((a,o)=>{var d,m;const i=((m=(d=re==null?void 0:re.entities)==null?void 0:d.find(g=>g.id===o.entity))==null?void 0:m.name)||"Unassigned";return a[i]=(a[i]||0)+(o.plannedAcres||0)*(o.sharePercent||100)/100,a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),e.jsxs("span",{className:"font-mono",children:[o.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},a))})]})]})]})}),D==="cropRevenue"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(fr,{className:"w-6 h-6 text-green-600"}),"Crop Revenue Projections"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"View:"}),e.jsx("button",{onClick:()=>I({cashFlow:{...s==null?void 0:s.cashFlow,revenueViewMode:"byCrop"}}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${(((Ex=s==null?void 0:s.cashFlow)==null?void 0:Ex.revenueViewMode)||"byCrop")==="byCrop"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"By Crop"}),e.jsx("button",{onClick:()=>I({cashFlow:{...s==null?void 0:s.cashFlow,revenueViewMode:"byField"}}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${((Ix=s==null?void 0:s.cashFlow)==null?void 0:Ix.revenueViewMode)==="byField"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"By Field"})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Project crop revenue based on expected yields and prices. This data flows to the Summary tab under Crop Sales."}),(()=>{var y,p,b;const a=((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[],o=((p=s==null?void 0:s.cashFlow)==null?void 0:p.cropPrices)||{},i=((b=s==null?void 0:s.cashFlow)==null?void 0:b.revenueViewMode)||"byCrop",d=[...new Set(a.map(N=>N.crop).filter(Boolean))],m=d.map(N=>{const C=a.filter(_=>_.crop===N),A=C.reduce((_,X)=>_+(X.plannedAcres||0)*(X.sharePercent||100)/100,0),L=C.reduce((_,X)=>{const U=(X.plannedAcres||0)*(X.sharePercent||100)/100;return _+U*(X.projectedYield||X.aph||0)},0),M=o[N]||0,R=L*M,Y=A>0?L/A:0;return{crop:N,acres:A,bushels:L,avgYield:Y,price:M,revenue:R,fields:C}}),g=m.reduce((N,C)=>N+C.revenue,0),u=m.reduce((N,C)=>N+C.acres,0),j=m.reduce((N,C)=>N+C.bushels,0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Projected Revenue"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:h(g)}),e.jsx("div",{className:"text-xs text-green-500",children:u>0?`$${(g/u).toFixed(2)}/acre`:""})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:u.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("div",{className:"text-xs text-blue-500",children:["Across ",a.length," fields"]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:j.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-amber-500",children:"Projected production"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Crops"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:d.length}),e.jsx("div",{className:"text-xs text-purple-500",children:d.join(", ")||"None"})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-green-800 flex items-center gap-2 mb-3",children:[e.jsx(st,{className:"w-4 h-4"}),"Projected Sale Prices by Crop"]}),e.jsx("p",{className:"text-xs text-green-600 mb-4",children:"Set your expected sale price per bushel for each crop. These prices are used to calculate projected revenue."}),d.length>0?e.jsx("div",{className:"grid grid-cols-4 gap-4",children:d.map(N=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:N}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ne,{value:o[N]||0,onChange:C=>{const A={...o,[N]:C};I({cashFlow:{...s==null?void 0:s.cashFlow,cropPrices:A}})},className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono font-semibold"}),e.jsx("span",{className:"text-xs text-gray-500",children:"/bu"})]})]},N))}):e.jsx("div",{className:"text-sm text-green-600",children:"Add crops in the Crops tab to set prices."})]}),i==="byCrop"&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Revenue by Crop"}),m.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Avg Yield"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Total Bushels"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-green-700 text-right bg-green-50",children:"Price/Bu"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-green-700 text-right bg-green-50",children:"Total Revenue"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"$/Acre"})]})}),e.jsx("tbody",{children:m.map((N,C)=>e.jsxs("tr",{className:`border-b border-gray-100 ${C%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:N.crop}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:N.acres.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:N.avgYield.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:N.bushels.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700 bg-green-50",children:N.price>0?`$${N.price.toFixed(2)}`:e.jsx("span",{className:"text-red-500",children:"Set price"})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono font-semibold text-green-700 bg-green-50",children:h(N.revenue)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-600",children:N.acres>0?`$${(N.revenue/N.acres).toFixed(2)}`:""})]},N.crop))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-200 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"TOTALS"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:u.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:j.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 bg-green-100"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono font-bold text-green-700 bg-green-100",children:h(g)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-700",children:u>0?`$${(g/u).toFixed(2)}`:""})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No crops found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields and assign crops in the Fields/Crops tabs first."})]})})]}),i==="byField"&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Revenue by Field"}),a.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Proj. Yield"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Bu"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right bg-green-50",children:"Price/Bu"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right bg-green-50",children:"Revenue"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"$/Acre"})]})}),e.jsx("tbody",{children:a.map((N,C)=>{const A=(N.plannedAcres||0)*(N.sharePercent||100)/100,L=N.projectedYield||N.aph||0,M=A*L,R=o[N.crop]||0,Y=M*R;return e.jsxs("tr",{className:`border-b border-gray-100 ${C%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:N.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:N.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${N.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:N.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:A.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-500",children:(N.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right bg-blue-50",children:e.jsx($e,{value:N.projectedYield||N.aph||0,onChange:_=>{const X=a.map(U=>U.id===N.id?{...U,projectedYield:_}:U);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:X}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-right font-mono text-sm"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:M.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-green-700 bg-green-50",children:R>0?`$${R.toFixed(2)}`:e.jsx("span",{className:"text-red-500 text-xs",children:"Set"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700 bg-green-50",children:h(Y)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:A>0?`$${(Y/A).toFixed(2)}`:""})]},N.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-200 font-semibold",children:[e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-gray-700",children:"TOTALS"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:u.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-3"}),e.jsx("td",{className:"py-3 px-3 bg-blue-100"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:j.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-3 bg-green-100"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-green-700 bg-green-100",children:h(g)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-gray-700",children:u>0?`$${(g/u).toFixed(2)}`:""})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})})]}),e.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(st,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Cash Flow Integration"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Total projected crop revenue of ",e.jsx("span",{className:"font-bold",children:h(g)})," flows to your Summary tab under Crop Sales. Revenue is broken down by crop for detailed tracking."]})]})]})})]})})()]})}),D==="land"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(sl,{className:"w-6 h-6 text-purple-600"}),"Land Details"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var d,m,g,u,j,y;const a=((s==null?void 0:s.debtService)||[]).filter(p=>p.category==="realEstate"),o=a.reduce((p,b)=>p+(b.principalPayment||0),0),i=a.reduce((p,b)=>p+(b.interestPayment||0),0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Owned Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).filter(p=>p.ownership==="Owned").reduce((p,b)=>p+(b.plannedAcres||0)*(b.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Rented Acres"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:(((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[]).filter(p=>p.ownership==="Rented").reduce((p,b)=>p+(b.plannedAcres||0)*(b.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Shared Acres"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:(((g=s==null?void 0:s.cashFlow)==null?void 0:g.crops)||[]).filter(p=>p.ownership==="Shared").reduce((p,b)=>p+(b.plannedAcres||0)*(b.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:(((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[]).reduce((p,b)=>p+(b.plannedAcres||0)*(b.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Cash Rent"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:h((((j=s==null?void 0:s.cashFlow)==null?void 0:j.crops)||[]).filter(p=>p.ownership==="Rented").reduce((p,b)=>p+(b.totalRent||0),0))}),e.jsx("div",{className:"text-xs text-red-500",children:"Rented ground"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total RE Tax"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:h((((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[]).filter(p=>p.ownership==="Owned").reduce((p,b)=>p+(b.totalReTax||0),0))}),e.jsx("div",{className:"text-xs text-orange-500",children:"Owned ground"})]}),e.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 border border-teal-200",children:[e.jsx("div",{className:"text-sm text-teal-600 font-medium",children:"RE Debt Principal"}),e.jsx("div",{className:"text-2xl font-bold text-teal-700 font-mono",children:h(o)}),e.jsxs("div",{className:"text-xs text-teal-500",children:["From Balance Sheet (",a.length," loans)"]})]}),e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4 border border-cyan-200",children:[e.jsx("div",{className:"text-sm text-cyan-600 font-medium",children:"RE Debt Interest"}),e.jsx("div",{className:"text-2xl font-bold text-cyan-700 font-mono",children:h(i)}),e.jsxs("div",{className:"text-xs text-cyan-500",children:["From Balance Sheet (",a.length," loans)"]})]})]})]})})(),(((Sx=s==null?void 0:s.cashFlow)==null?void 0:Sx.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab first, then return here to enter land details."})]})}),(((Rx=s==null?void 0:s.cashFlow)==null?void 0:Rx.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Entity"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Ownership"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Rent/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Rent"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"RE Tax/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total RE Tax"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-teal-700 text-right bg-teal-50",children:"Principal/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-right bg-cyan-50",children:"Interest/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-right bg-green-50",children:"Total Pmt"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Land Owner"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Legal ID"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Assessor #"})]})}),e.jsx("tbody",{children:(()=>{var j;const a=((j=s==null?void 0:s.cashFlow)==null?void 0:j.crops)||[],o=a.filter(y=>y.ownership==="Owned").reduce((y,p)=>y+(p.plannedAcres||0)*(p.sharePercent||100)/100,0),i=((s==null?void 0:s.debtService)||[]).filter(y=>y.category==="realEstate"),d=i.reduce((y,p)=>y+(p.principalPayment||0),0),m=i.reduce((y,p)=>y+(p.interestPayment||0),0),g=o>0?d/o:0,u=o>0?m/o:0;return a.map(y=>{var A,L;const p=(y.plannedAcres||0)*(y.sharePercent||100)/100,b=y.ownership==="Owned"?p*g:0,N=y.ownership==="Owned"?p*u:0,C=b+N;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:y.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:p.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:y.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${y.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:y.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:y.county||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600 text-xs",children:((L=(A=re==null?void 0:re.entities)==null?void 0:A.find(M=>M.id===y.entity))==null?void 0:L.name)||""}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:y.ownership||"",onChange:M=>{var Y;const R=(((Y=s==null?void 0:s.cashFlow)==null?void 0:Y.crops)||[]).map(_=>_.id===y.id?{..._,ownership:M.target.value}:_);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:R}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Owned",children:"Owned"}),e.jsx("option",{value:"Rented",children:"Rented"}),e.jsx("option",{value:"Shared",children:"Shared"})]})}),e.jsx("td",{className:"py-2 px-2",children:y.ownership==="Rented"?e.jsx(ne,{value:y.rentPerAcre||0,onChange:M=>{var _;const R=p>0?M*p:0,Y=(((_=s==null?void 0:s.cashFlow)==null?void 0:_.crops)||[]).map(X=>X.id===y.id?{...X,rentPerAcre:M,totalRent:R}:X);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:Y}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2",children:y.ownership==="Rented"?e.jsx(ne,{value:y.totalRent||0,onChange:M=>{var _;const R=p>0?M/p:0,Y=(((_=s==null?void 0:s.cashFlow)==null?void 0:_.crops)||[]).map(X=>X.id===y.id?{...X,totalRent:M,rentPerAcre:R}:X);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:Y}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2",children:y.ownership==="Owned"?e.jsx(ne,{value:y.reTaxPerAcre||0,onChange:M=>{var _;const R=p>0?M*p:0,Y=(((_=s==null?void 0:s.cashFlow)==null?void 0:_.crops)||[]).map(X=>X.id===y.id?{...X,reTaxPerAcre:M,totalReTax:R}:X);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:Y}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2",children:y.ownership==="Owned"?e.jsx(ne,{value:y.totalReTax||0,onChange:M=>{var _;const R=p>0?M/p:0,Y=(((_=s==null?void 0:s.cashFlow)==null?void 0:_.crops)||[]).map(X=>X.id===y.id?{...X,totalReTax:M,reTaxPerAcre:R}:X);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:Y}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2 bg-teal-50 text-right",children:y.ownership==="Owned"?e.jsx("span",{className:"font-mono text-sm text-teal-700 font-medium",children:h(g)}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2 bg-cyan-50 text-right",children:y.ownership==="Owned"?e.jsx("span",{className:"font-mono text-sm text-cyan-700 font-medium",children:h(u)}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2 bg-green-50 text-right",children:y.ownership==="Owned"?e.jsx("span",{className:"font-mono text-sm text-green-700 font-semibold",children:h(C)}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:y.landOwner||"",onChange:M=>{var Y;const R=(((Y=s==null?void 0:s.cashFlow)==null?void 0:Y.crops)||[]).map(_=>_.id===y.id?{..._,landOwner:M.target.value}:_);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:R}})},placeholder:"Owner name",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:y.legalId||"",onChange:M=>{var Y;const R=(((Y=s==null?void 0:s.cashFlow)==null?void 0:Y.crops)||[]).map(_=>_.id===y.id?{..._,legalId:M.target.value}:_);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:R}})},placeholder:"Legal ID",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:y.assessorNumber||"",onChange:M=>{var Y;const R=(((Y=s==null?void 0:s.cashFlow)==null?void 0:Y.crops)||[]).map(_=>_.id===y.id?{..._,assessorNumber:M.target.value}:_);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:R}})},placeholder:"Assessor #",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})})]},y.id)})})()}),e.jsx("tfoot",{children:(()=>{var y;const a=((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[],o=a.filter(p=>p.ownership==="Owned").reduce((p,b)=>p+(b.plannedAcres||0)*(b.sharePercent||100)/100,0),i=((s==null?void 0:s.debtService)||[]).filter(p=>p.category==="realEstate"),d=i.reduce((p,b)=>p+(b.principalPayment||0),0),m=i.reduce((p,b)=>p+(b.interestPayment||0),0),g=d+m,u=o>0?d/o:0,j=o>0?m/o:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:a.reduce((p,b)=>p+(b.plannedAcres||0)*(b.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{colSpan:"5"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700",children:h(a.filter(p=>p.ownership==="Rented").reduce((p,b)=>p+(b.totalRent||0),0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700",children:h(a.filter(p=>p.ownership==="Owned").reduce((p,b)=>p+(b.totalReTax||0),0))}),e.jsxs("td",{className:"py-3 px-2 text-right font-mono text-teal-700 bg-teal-50",children:[h(u),"/ac"]}),e.jsxs("td",{className:"py-3 px-2 text-right font-mono text-cyan-700 bg-cyan-50",children:[h(j),"/ac"]}),e.jsx("td",{className:"py-3 px-2 text-right font-mono text-green-700 bg-green-50",children:h(g)}),e.jsx("td",{colSpan:"3"})]})})()})]})}),((($x=s==null?void 0:s.cashFlow)==null?void 0:$x.crops)||[]).filter(a=>a.landOwner).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Ownership"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((Mx=s==null?void 0:s.cashFlow)==null?void 0:Mx.crops)||[]).reduce((a,o)=>{const i=o.ownership||"Unassigned";return a[i]=(a[i]||0)+(o.plannedAcres||0)*(o.sharePercent||100)/100,a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),e.jsxs("span",{className:"font-mono",children:[o.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},a))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Land Owner"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((Ux=s==null?void 0:s.cashFlow)==null?void 0:Ux.crops)||[]).reduce((a,o)=>{const i=o.landOwner||"Unassigned";return a[i]=(a[i]||0)+(o.plannedAcres||0)*(o.sharePercent||100)/100,a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),e.jsxs("span",{className:"font-mono",children:[o.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},a))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by County"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((Ox=s==null?void 0:s.cashFlow)==null?void 0:Ox.crops)||[]).reduce((a,o)=>{const i=o.county||"Unassigned";return a[i]=(a[i]||0)+(o.plannedAcres||0)*(o.sharePercent||100)/100,a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),e.jsxs("span",{className:"font-mono",children:[o.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},a))})]})]}),(((zx=s==null?void 0:s.cashFlow)==null?void 0:zx.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-gray-600"}),"Land Cost Analysis: Rented vs Owned"]}),(()=>{var T;const a=((T=s==null?void 0:s.cashFlow)==null?void 0:T.crops)||[],o=a.filter(w=>w.ownership==="Rented"),i=o.reduce((w,E)=>w+(E.plannedAcres||0)*(E.sharePercent||100)/100,0),d=o.reduce((w,E)=>w+(E.totalRent||0),0),m=i>0?d/i:0,g=o.length>0?Math.min(...o.map(w=>w.rentPerAcre||0).filter(w=>w>0)):0,u=o.length>0?Math.max(...o.map(w=>w.rentPerAcre||0)):0,j=a.filter(w=>w.ownership==="Owned"),y=j.reduce((w,E)=>w+(E.plannedAcres||0)*(E.sharePercent||100)/100,0),p=j.reduce((w,E)=>w+(E.totalReTax||0),0),b=y>0?p/y:0;j.length>0&&Math.min(...j.map(w=>w.reTaxPerAcre||0).filter(w=>w>0)),j.length>0&&Math.max(...j.map(w=>w.reTaxPerAcre||0));const C=((s==null?void 0:s.debtService)||[]).filter(w=>w.category==="realEstate"),A=C.reduce((w,E)=>w+(E.principalPayment||0),0),L=C.reduce((w,E)=>w+(E.interestPayment||0),0),M=A+L,R=C.reduce((w,E)=>w+(E.principalAmount||0),0),Y=p+M,_=y>0?Y/y:0,X=i+y,U=d+Y,B=X>0?U/X:0,k=X>0?i/X*100:0,F=X>0?y/X*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border-2 border-blue-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-blue-800 text-lg",children:"Rented Ground"}),e.jsxs("span",{className:"text-sm bg-blue-100 text-blue-700 px-2 py-1 rounded",children:[k.toFixed(1),"% of operation"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-blue-700",children:i.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Rent"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-blue-700",children:h(d)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Avg Rent/Acre"}),e.jsx("div",{className:"text-xl font-bold font-mono text-blue-600",children:h(m)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Range"}),e.jsx("div",{className:"text-sm font-mono text-blue-600",children:g>0?`${h(g)} - ${h(u)}`:""})]})]}),o.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-100",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Fields: ",o.length]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.slice(0,5).map(w=>e.jsx("span",{className:"text-xs bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded",children:w.fieldName||"Unnamed"},w.id)),o.length>5&&e.jsxs("span",{className:"text-xs text-blue-500",children:["+",o.length-5," more"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border-2 border-green-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-green-800 text-lg",children:"Owned Ground"}),e.jsxs("span",{className:"text-sm bg-green-100 text-green-700 px-2 py-1 rounded",children:[F.toFixed(1),"% of operation"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-green-700",children:y.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"RE Tax"}),e.jsx("div",{className:"text-lg font-bold font-mono text-green-700",children:h(p)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["(",h(b),"/ac)"]})]})]}),C.length>0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 mb-3",children:[e.jsxs("div",{className:"text-xs text-green-700 font-semibold mb-2 flex items-center gap-1",children:[e.jsx(Kn,{className:"w-3 h-3"}),"Real Estate Debt (from Balance Sheet)"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Principal Pmt"}),e.jsx("div",{className:"font-mono font-semibold text-green-700",children:h(A)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Interest Pmt"}),e.jsx("div",{className:"font-mono font-semibold text-green-700",children:h(L)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Pmt"}),e.jsx("div",{className:"font-mono font-semibold text-green-700",children:h(M)})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200 text-xs text-gray-500",children:[e.jsxs("span",{className:"font-medium",children:["Loans: ",C.length]})," | Balance: ",h(R)]})]}),e.jsx("div",{className:"bg-green-100 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-700 font-semibold",children:"TOTAL OWNED COST"}),e.jsx("div",{className:"text-xs text-gray-500",children:"(Tax + Debt Payment)"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold font-mono text-green-800",children:h(Y)}),e.jsxs("div",{className:"text-sm font-mono text-green-700",children:[h(_),"/ac"]})]})]})}),j.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-green-100",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Fields: ",j.length]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[j.slice(0,5).map(w=>e.jsx("span",{className:"text-xs bg-green-50 text-green-600 px-1.5 py-0.5 rounded",children:w.fieldName||"Unnamed"},w.id)),j.length>5&&e.jsxs("span",{className:"text-xs text-green-500",children:["+",j.length-5," more"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border-2 border-purple-200 p-4",children:[e.jsx("h4",{className:"font-bold text-purple-800 mb-3",children:"Combined Land Cost Summary"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-purple-700",children:X.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Total Land Cost"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-purple-700",children:h(U)}),e.jsx("div",{className:"text-xs text-gray-500",children:"(Rent + Tax + RE Debt)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Avg Cost/Acre"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-purple-700",children:h(B)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Blended rate"})]}),e.jsxs("div",{className:"text-center border-l border-purple-200 pl-4",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Rent/Ac"}),e.jsx("div",{className:"text-xl font-bold font-mono text-blue-600",children:h(m)}),e.jsx("div",{className:"text-xs text-blue-500",children:"Rented"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Own Cost/Ac"}),e.jsx("div",{className:"text-xl font-bold font-mono text-green-600",children:h(_)}),e.jsx("div",{className:"text-xs text-green-500",children:"Tax + Debt"})]})]}),m>0&&_>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-purple-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Cost Comparison:"})," ",m>_?"Rented ground costs":"Owned ground costs"," ",e.jsxs("span",{className:"font-bold font-mono text-purple-700",children:[h(Math.abs(m-_)),"/ac"]})," more"]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${m>_?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:m>_?"Owned is cheaper":"Rented is cheaper"})]})}),X>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-100",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Ownership Distribution"}),e.jsxs("div",{className:"h-6 rounded-full overflow-hidden flex bg-gray-200",children:[k>0&&e.jsx("div",{className:"bg-blue-500 flex items-center justify-center text-white text-xs font-medium",style:{width:`${k}%`},children:k>=15?`Rented ${k.toFixed(0)}%`:""}),F>0&&e.jsx("div",{className:"bg-green-500 flex items-center justify-center text-white text-xs font-medium",style:{width:`${F}%`},children:F>=15?`Owned ${F.toFixed(0)}%`:""})]})]}),C.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-100",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Real Estate Debt Detail (from Balance Sheet Debt Service)"}),e.jsx("div",{className:"grid grid-cols-1 gap-1",children:C.map(w=>e.jsxs("div",{className:"flex justify-between items-center text-xs bg-gray-50 rounded px-2 py-1",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:w.description}),e.jsx("span",{className:"text-gray-500",children:w.lender}),e.jsxs("span",{className:"font-mono text-gray-600",children:["Bal: ",h(w.principalAmount||0)]}),e.jsxs("span",{className:"font-mono text-green-700 font-medium",children:["Pmt: ",h((w.principalPayment||0)+(w.interestPayment||0))]})]},w.id))})]})]})]})})()]})]})}),D==="variableExpenses"&&pe==="seed"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-6 h-6 text-green-600"}),"Seed Costs"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:(((Vx=s==null?void 0:s.cashFlow)==null?void 0:Vx.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0)*(o.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Seed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h((((Hx=s==null?void 0:s.cashFlow)==null?void 0:Hx.crops)||[]).reduce((a,o)=>{const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+i*(o.seedPerAcre||0)},0))})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total Treatment Cost"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h((((_x=s==null?void 0:s.cashFlow)==null?void 0:_x.crops)||[]).reduce((a,o)=>{const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+i*(o.seedTreatmentPerAcre||0)},0))})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Seed + Treatment"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:h((((Yx=s==null?void 0:s.cashFlow)==null?void 0:Yx.crops)||[]).reduce((a,o)=>{const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+i*((o.seedPerAcre||0)+(o.seedTreatmentPerAcre||0))},0))})]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-1",children:"Seed Cost Entry Method"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Choose how you want to enter seed costs for your crops"})]}),e.jsxs("select",{value:((qx=s==null?void 0:s.cashFlow)==null?void 0:qx.seedEntryMethod)||"direct",onChange:a=>{I({cashFlow:{...s==null?void 0:s.cashFlow,seedEntryMethod:a.target.value}})},className:"px-4 py-2 border border-blue-300 rounded-lg font-medium text-blue-800 bg-white min-w-[250px]",children:[e.jsx("option",{value:"direct",children:"Direct Seed Cost per Acre by Crop"}),e.jsx("option",{value:"calculator",children:"Use Population Calculator"})]})]})}),(((Wx=s==null?void 0:s.cashFlow)==null?void 0:Wx.seedEntryMethod)||"direct")==="direct"&&e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5 text-gray-600"}),"Seed Cost per Acre by Crop"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Enter the seed cost per acre for each crop. This will apply to all fields with that crop."}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:(()=>{var i,d;const a=[...new Set((((i=s==null?void 0:s.cashFlow)==null?void 0:i.crops)||[]).map(m=>m.crop).filter(Boolean))],o=((d=s==null?void 0:s.cashFlow)==null?void 0:d.seedCostsByCrop)||{};return a.length===0?e.jsx("div",{className:"col-span-4 text-sm text-gray-500",children:"No crops defined. Add crops in the Crops tab first."}):a.map(m=>e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:m}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{value:o[m]||0,onChange:g=>{var y;const u={...o,[m]:g},j=(((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[]).map(p=>p.crop===m?{...p,seedPerAcre:g}:p);I({cashFlow:{...s==null?void 0:s.cashFlow,seedCostsByCrop:u,crops:j}})},className:"w-full px-3 py-2 border border-gray-200 rounded text-right font-mono"}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:"/acre"})]})]},m))})()})]}),(((Gx=s==null?void 0:s.cashFlow)==null?void 0:Gx.seedEntryMethod)||"direct")==="calculator"&&e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(So,{className:"w-5 h-5 text-gray-600"}),"Seed Cost Calculator"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Step 1: Set Seeds Per Unit by Crop"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:(()=>{var i,d;const a=[...new Set((((i=s==null?void 0:s.cashFlow)==null?void 0:i.crops)||[]).map(m=>m.crop).filter(Boolean))],o=((d=s==null?void 0:s.cashFlow)==null?void 0:d.seedUnitsPerCrop)||{};return a.length>0?a.map(m=>e.jsxs("div",{className:"bg-white border rounded-lg p-3 flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-gray-700 min-w-[80px]",children:m}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($e,{value:o[m]||0,onChange:g=>{const u={...o,[m]:g};I({cashFlow:{...s==null?void 0:s.cashFlow,seedUnitsPerCrop:u}})},decimals:0,className:"w-28 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}),e.jsx("span",{className:"text-xs text-gray-500",children:"seeds/unit"})]})]},m)):e.jsx("div",{className:"text-sm text-gray-500",children:"Add crops in the Crops tab first."})})()})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Step 2: Set Price & Population by Crop/Practice"}),e.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Seeds/Unit"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Price/Unit"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Population"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres/Unit"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Seed $/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-center",children:"Apply"})]})}),e.jsx("tbody",{children:(()=>{var d,m,g;const a={};(((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[]).forEach(u=>{if(u.crop){const j=`${u.crop}-${u.practice||"Dryland"}`;a[j]||(a[j]={crop:u.crop,practice:u.practice||"Dryland"})}});const o=((m=s==null?void 0:s.cashFlow)==null?void 0:m.seedCalc)||{},i=((g=s==null?void 0:s.cashFlow)==null?void 0:g.seedUnitsPerCrop)||{};return Object.values(a).map(({crop:u,practice:j})=>{const y=`${u}-${j}`,p=o[y]||{pricePerUnit:0,population:0},b=i[u]||0,N=p.population>0&&b>0?b/p.population:0,C=N>0?p.pricePerUnit/N:0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:u}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${j==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:j})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-500",children:b>0?b.toLocaleString():e.jsx("span",{className:"text-amber-600",children:"Set above"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ne,{value:p.pricePerUnit||0,onChange:A=>{const L={...o,[y]:{...p,pricePerUnit:A}};I({cashFlow:{...s==null?void 0:s.cashFlow,seedCalc:L}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx($e,{value:p.population||0,onChange:A=>{const L={...o,[y]:{...p,population:A}};I({cashFlow:{...s==null?void 0:s.cashFlow,seedCalc:L}})},decimals:0,className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:N>0?N.toFixed(2):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:C>0?h(C):""}),e.jsx("td",{className:"py-2 px-3 text-center",children:e.jsx("button",{onClick:()=>{var A;if(C>0){const L=(((A=s==null?void 0:s.cashFlow)==null?void 0:A.crops)||[]).map(M=>M.crop===u&&(M.practice||"Dryland")===j?{...M,seedPerAcre:C}:M);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:L}})}},disabled:C<=0,className:`px-3 py-1 rounded text-xs font-medium ${C>0?"bg-green-600 text-white hover:bg-green-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"Apply"})})]},y)})})()})]}),Object.keys((((Qx=s==null?void 0:s.cashFlow)==null?void 0:Qx.crops)||[]).reduce((a,o)=>(o.crop&&(a[`${o.crop}-${o.practice||"Dryland"}`]=!0),a),{})).length===0&&e.jsx("div",{className:"py-4 text-center text-gray-500 text-sm",children:"Add crops in the Crops tab to set up seed pricing."})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[e.jsx("strong",{children:"Formula:"})," Acres/Unit = Seeds/Unit  Population | Seed $/Acre = Price/Unit  Acres/Unit"]})]}),(((Kx=s==null?void 0:s.cashFlow)==null?void 0:Kx.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab first, then return here to enter seed costs."})]})}),(((Jx=s==null?void 0:s.cashFlow)==null?void 0:Jx.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Seed/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Seed"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Treatment/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Treatment"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Cost"})]})}),e.jsx("tbody",{children:(((Zx=s==null?void 0:s.cashFlow)==null?void 0:Zx.crops)||[]).map(a=>{const o=(a.plannedAcres||0)*(a.sharePercent||100)/100,i=o*(a.seedPerAcre||0),d=o*(a.seedTreatmentPerAcre||0);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:a.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:a.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:a.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-green-700 font-medium",children:h(a.seedPerAcre||0)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:h(i)}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ne,{value:a.seedTreatmentPerAcre||0,onChange:m=>{var u;const g=(((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[]).map(j=>j.id===a.id?{...j,seedTreatmentPerAcre:m}:j);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:g}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:h(d)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-800",children:h(i+d)})]},a.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((Xx=s==null?void 0:s.cashFlow)==null?void 0:Xx.crops)||[]).reduce((a,o)=>a+(o.plannedAcres||0)*(o.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{colSpan:"3"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:h((((Bx=s==null?void 0:s.cashFlow)==null?void 0:Bx.crops)||[]).reduce((a,o)=>{const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+i*(o.seedPerAcre||0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-amber-700",children:h((((em=s==null?void 0:s.cashFlow)==null?void 0:em.crops)||[]).reduce((a,o)=>{const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+i*(o.seedTreatmentPerAcre||0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-700",children:h((((tm=s==null?void 0:s.cashFlow)==null?void 0:tm.crops)||[]).reduce((a,o)=>{const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+i*((o.seedPerAcre||0)+(o.seedTreatmentPerAcre||0))},0))})]})})]})}),(((rm=s==null?void 0:s.cashFlow)==null?void 0:rm.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Seed Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((sm=s==null?void 0:s.cashFlow)==null?void 0:sm.crops)||[]).reduce((a,o)=>{const i=o.crop||"Unassigned",d=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a[i]=(a[i]||0)+d*(o.seedPerAcre||0),a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),e.jsx("span",{className:"font-mono",children:h(o)})]},a))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Total Seed + Treatment by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((nm=s==null?void 0:s.cashFlow)==null?void 0:nm.crops)||[]).reduce((a,o)=>{const i=o.crop||"Unassigned",d=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a[i]=(a[i]||0)+d*((o.seedPerAcre||0)+(o.seedTreatmentPerAcre||0)),a},{})).sort((a,o)=>o[1]-a[1]).map(([a,o])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:a}),e.jsx("span",{className:"font-mono",children:h(o)})]},a))})]})]})]})}),D==="variableExpenses"&&pe==="nutrition"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-6 h-6 text-green-600"}),"Crop Nutrition"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var g,u;const a=((g=s==null?void 0:s.cashFlow)==null?void 0:g.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],o=((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[],i=o.reduce((j,y)=>j+(y.plannedAcres||0)*(y.sharePercent||100)/100,0),d=o.reduce((j,y)=>{const p=(y.plannedAcres||0)*(y.sharePercent||100)/100,b=y.fertilizerCosts||{},N=a.reduce((C,A)=>C+(b[A]||0),0)+(y.fertAppCostPerAcre||0);return j+p*N},0),m=i>0?d/i:0;return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Fertilizer Cost"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h(d)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg Cost/Acre"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h(m)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Fertilizer Types"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:a.length})]})]})})(),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Fertilizer Types Used"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Select the fertilizer types this farm uses, or add custom types."}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:(((am=s==null?void 0:s.cashFlow)==null?void 0:am.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"]).map((a,o)=>e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-1.5",children:[e.jsx("span",{className:"text-sm text-gray-700",children:a}),e.jsx("button",{onClick:()=>{var m;const d=(((m=s==null?void 0:s.cashFlow)==null?void 0:m.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"]).filter((g,u)=>u!==o);I({cashFlow:{...s==null?void 0:s.cashFlow,fertilizerTypes:d}})},className:"text-red-500 hover:text-red-700 ml-1",children:e.jsx(Qs,{className:"w-4 h-4"})})]},o))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",id:"newFertType",placeholder:"Add new fertilizer type...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm",onKeyDown:a=>{var o;if(a.key==="Enter"&&a.target.value.trim()){const i=((o=s==null?void 0:s.cashFlow)==null?void 0:o.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"];i.includes(a.target.value.trim())||I({cashFlow:{...s==null?void 0:s.cashFlow,fertilizerTypes:[...i,a.target.value.trim()]}}),a.target.value=""}}}),e.jsx("button",{onClick:()=>{var o;const a=document.getElementById("newFertType");if(a&&a.value.trim()){const i=((o=s==null?void 0:s.cashFlow)==null?void 0:o.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"];i.includes(a.value.trim())||I({cashFlow:{...s==null?void 0:s.cashFlow,fertilizerTypes:[...i,a.value.trim()]}}),a.value=""}},className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]}),(((lm=s==null?void 0:s.cashFlow)==null?void 0:lm.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab first, then return here to enter fertilizer costs."})]})}),(((om=s==null?void 0:s.cashFlow)==null?void 0:om.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),(((im=s==null?void 0:s.cashFlow)==null?void 0:im.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"]).map(a=>e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right text-xs",children:[a.replace(" Fertilizer","").replace(" Solution",""),e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]},a)),e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right text-xs",children:["Application",e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total $/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Cost"})]})}),e.jsx("tbody",{children:(((cm=s==null?void 0:s.cashFlow)==null?void 0:cm.crops)||[]).map(a=>{var y;const o=(a.plannedAcres||0)*(a.sharePercent||100)/100,i=((y=s==null?void 0:s.cashFlow)==null?void 0:y.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],d=a.fertilizerCosts||{},m=i.reduce((p,b)=>p+(d[b]||0),0),g=a.fertAppCostPerAcre||0,u=m+g,j=o*u;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:a.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:a.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:a.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),i.map(p=>e.jsx("td",{className:"py-2 px-1",children:e.jsx(ne,{value:d[p]||0,onChange:b=>{var A;const N={...d,[p]:b},C=(((A=s==null?void 0:s.cashFlow)==null?void 0:A.crops)||[]).map(L=>L.id===a.id?{...L,fertilizerCosts:N}:L);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:C}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})},p)),e.jsx("td",{className:"py-2 px-1",children:e.jsx(ne,{value:a.fertAppCostPerAcre||0,onChange:p=>{var N;const b=(((N=s==null?void 0:s.cashFlow)==null?void 0:N.crops)||[]).map(C=>C.id===a.id?{...C,fertAppCostPerAcre:p}:C);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:b}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700",children:h(u)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:h(j)})]},a.id)})}),e.jsx("tfoot",{children:(()=>{var j,y;const a=((j=s==null?void 0:s.cashFlow)==null?void 0:j.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],o=((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[],i=o.reduce((p,b)=>p+(b.plannedAcres||0)*(b.sharePercent||100)/100,0),d={};a.forEach(p=>{d[p]=o.reduce((b,N)=>{const C=(N.plannedAcres||0)*(N.sharePercent||100)/100;return b+C*((N.fertilizerCosts||{})[p]||0)},0)});const m=o.reduce((p,b)=>{const N=(b.plannedAcres||0)*(b.sharePercent||100)/100;return p+N*(b.fertAppCostPerAcre||0)},0),g=Object.values(d).reduce((p,b)=>p+b,0)+m,u=i>0?g/i:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{colSpan:"2"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:1})}),a.map(p=>e.jsx("td",{className:"py-3 px-2 text-right font-mono text-xs",children:h(d[p])},p)),e.jsx("td",{className:"py-3 px-2 text-right font-mono text-xs",children:h(m)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:h(u)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:h(g)})]})})()})]})}),(((dm=s==null?void 0:s.cashFlow)==null?void 0:dm.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Fertilizer Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:(()=>{var o,i;const a=((o=s==null?void 0:s.cashFlow)==null?void 0:o.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"];return Object.entries((((i=s==null?void 0:s.cashFlow)==null?void 0:i.crops)||[]).reduce((d,m)=>{const g=m.crop||"Unassigned",u=(m.plannedAcres||0)*(m.sharePercent||100)/100,j=a.reduce((y,p)=>y+((m.fertilizerCosts||{})[p]||0),0)+(m.fertAppCostPerAcre||0);return d[g]=(d[g]||0)+u*j,d},{})).sort((d,m)=>m[1]-d[1]).map(([d,m])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:d}),e.jsx("span",{className:"font-mono",children:h(m)})]},d))})()})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Fertilizer Type"}),e.jsx("div",{className:"space-y-2",children:(()=>{var m,g;const a=((m=s==null?void 0:s.cashFlow)==null?void 0:m.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],o=((g=s==null?void 0:s.cashFlow)==null?void 0:g.crops)||[],i=a.map(u=>{const j=o.reduce((y,p)=>{const b=(p.plannedAcres||0)*(p.sharePercent||100)/100;return y+b*((p.fertilizerCosts||{})[u]||0)},0);return{name:u,total:j}}).filter(u=>u.total>0).sort((u,j)=>j.total-u.total),d=o.reduce((u,j)=>{const y=(j.plannedAcres||0)*(j.sharePercent||100)/100;return u+y*(j.fertAppCostPerAcre||0)},0);return d>0&&i.push({name:"Application",total:d}),i.map(({name:u,total:j})=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:u}),e.jsx("span",{className:"font-mono",children:h(j)})]},u))})()})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Practice"}),e.jsx("div",{className:"space-y-2",children:(()=>{var o,i;const a=((o=s==null?void 0:s.cashFlow)==null?void 0:o.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"];return Object.entries((((i=s==null?void 0:s.cashFlow)==null?void 0:i.crops)||[]).reduce((d,m)=>{const g=m.practice||"Dryland",u=(m.plannedAcres||0)*(m.sharePercent||100)/100,j=a.reduce((y,p)=>y+((m.fertilizerCosts||{})[p]||0),0)+(m.fertAppCostPerAcre||0);return d[g]=(d[g]||0)+u*j,d},{})).sort((d,m)=>m[1]-d[1]).map(([d,m])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:d}),e.jsx("span",{className:"font-mono",children:h(m)})]},d))})()})]})]})]})}),D==="variableExpenses"&&pe==="protection"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-6 h-6 text-red-600"}),"Crop Protection"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var g,u;const a=((g=s==null?void 0:s.cashFlow)==null?void 0:g.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],o=((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[],i=o.reduce((j,y)=>j+(y.plannedAcres||0)*(y.sharePercent||100)/100,0),d=o.reduce((j,y)=>{const p=(y.plannedAcres||0)*(y.sharePercent||100)/100,b=y.chemicalCosts||{},N=a.reduce((A,L)=>A+(b[L]||0),0),C=y.chemAppCostPerAcre||0;return j+p*(N+C)},0),m=i>0?d/i:0;return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Chemical Cost"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:h(d)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg Cost/Acre"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h(m)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Chemical Types"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:a.length})]})]})})(),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Chemical Types Used"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Select the chemical types this farm uses, or add custom types."}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:(((xm=s==null?void 0:s.cashFlow)==null?void 0:xm.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"]).map((a,o)=>e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-1.5",children:[e.jsx("span",{className:"text-sm text-gray-700",children:a}),e.jsx("button",{onClick:()=>{var m;const d=(((m=s==null?void 0:s.cashFlow)==null?void 0:m.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"]).filter((g,u)=>u!==o);I({cashFlow:{...s==null?void 0:s.cashFlow,chemicalTypes:d}})},className:"text-red-500 hover:text-red-700 ml-1",children:e.jsx(Qs,{className:"w-4 h-4"})})]},o))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",id:"newChemType",placeholder:"Add new chemical type...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm",onKeyDown:a=>{var o;if(a.key==="Enter"&&a.target.value.trim()){const i=((o=s==null?void 0:s.cashFlow)==null?void 0:o.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"];i.includes(a.target.value.trim())||I({cashFlow:{...s==null?void 0:s.cashFlow,chemicalTypes:[...i,a.target.value.trim()]}}),a.target.value=""}}}),e.jsx("button",{onClick:()=>{var o;const a=document.getElementById("newChemType");if(a&&a.value.trim()){const i=((o=s==null?void 0:s.cashFlow)==null?void 0:o.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"];i.includes(a.value.trim())||I({cashFlow:{...s==null?void 0:s.cashFlow,chemicalTypes:[...i,a.value.trim()]}}),a.value=""}},className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]}),(((mm=s==null?void 0:s.cashFlow)==null?void 0:mm.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab first, then return here to enter chemical costs."})]})}),(((um=s==null?void 0:s.cashFlow)==null?void 0:um.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),(((hm=s==null?void 0:s.cashFlow)==null?void 0:hm.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"]).map(a=>e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right text-xs",children:[a.replace(" Herbicide","").replace("Emerge",""),e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]},a)),e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right text-xs",children:["Application",e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total $/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Cost"})]})}),e.jsx("tbody",{children:(((pm=s==null?void 0:s.cashFlow)==null?void 0:pm.crops)||[]).map(a=>{var y;const o=(a.plannedAcres||0)*(a.sharePercent||100)/100,i=((y=s==null?void 0:s.cashFlow)==null?void 0:y.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],d=a.chemicalCosts||{},m=i.reduce((p,b)=>p+(d[b]||0),0),g=a.chemAppCostPerAcre||0,u=m+g,j=o*u;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:a.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:a.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:a.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),i.map(p=>e.jsx("td",{className:"py-2 px-1",children:e.jsx(ne,{value:d[p]||0,onChange:b=>{var A;const N={...d,[p]:b},C=(((A=s==null?void 0:s.cashFlow)==null?void 0:A.crops)||[]).map(L=>L.id===a.id?{...L,chemicalCosts:N}:L);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:C}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})},p)),e.jsx("td",{className:"py-2 px-1",children:e.jsx(ne,{value:a.chemAppCostPerAcre||0,onChange:p=>{var N;const b=(((N=s==null?void 0:s.cashFlow)==null?void 0:N.crops)||[]).map(C=>C.id===a.id?{...C,chemAppCostPerAcre:p}:C);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:b}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700",children:h(u)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:h(j)})]},a.id)})}),e.jsx("tfoot",{children:(()=>{var j,y;const a=((j=s==null?void 0:s.cashFlow)==null?void 0:j.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],o=((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[],i=o.reduce((p,b)=>p+(b.plannedAcres||0)*(b.sharePercent||100)/100,0),d={};a.forEach(p=>{d[p]=o.reduce((b,N)=>{const C=(N.plannedAcres||0)*(N.sharePercent||100)/100;return b+C*((N.chemicalCosts||{})[p]||0)},0)});const m=o.reduce((p,b)=>{const N=(b.plannedAcres||0)*(b.sharePercent||100)/100;return p+N*(b.chemAppCostPerAcre||0)},0),g=Object.values(d).reduce((p,b)=>p+b,0)+m,u=i>0?g/i:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{colSpan:"2"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:1})}),a.map(p=>e.jsx("td",{className:"py-3 px-2 text-right font-mono text-xs",children:h(d[p])},p)),e.jsx("td",{className:"py-3 px-2 text-right font-mono text-xs",children:h(m)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:h(u)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:h(g)})]})})()})]})}),(((gm=s==null?void 0:s.cashFlow)==null?void 0:gm.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Chemical Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:(()=>{var o,i;const a=((o=s==null?void 0:s.cashFlow)==null?void 0:o.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"];return Object.entries((((i=s==null?void 0:s.cashFlow)==null?void 0:i.crops)||[]).reduce((d,m)=>{const g=m.crop||"Unassigned",u=(m.plannedAcres||0)*(m.sharePercent||100)/100,j=a.reduce((p,b)=>p+((m.chemicalCosts||{})[b]||0),0),y=m.chemAppCostPerAcre||0;return d[g]=(d[g]||0)+u*(j+y),d},{})).sort((d,m)=>m[1]-d[1]).map(([d,m])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:d}),e.jsx("span",{className:"font-mono",children:h(m)})]},d))})()})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Chemical Type"}),e.jsx("div",{className:"space-y-2",children:(()=>{var m,g;const a=((m=s==null?void 0:s.cashFlow)==null?void 0:m.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],o=((g=s==null?void 0:s.cashFlow)==null?void 0:g.crops)||[],i=a.map(u=>{const j=o.reduce((y,p)=>{const b=(p.plannedAcres||0)*(p.sharePercent||100)/100;return y+b*((p.chemicalCosts||{})[u]||0)},0);return{name:u,total:j}}).filter(u=>u.total>0).sort((u,j)=>j.total-u.total),d=o.reduce((u,j)=>{const y=(j.plannedAcres||0)*(j.sharePercent||100)/100;return u+y*(j.chemAppCostPerAcre||0)},0);return d>0&&i.push({name:"Application",total:d}),i.map(({name:u,total:j})=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:u}),e.jsx("span",{className:"font-mono",children:h(j)})]},u))})()})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Practice"}),e.jsx("div",{className:"space-y-2",children:(()=>{var o,i;const a=((o=s==null?void 0:s.cashFlow)==null?void 0:o.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"];return Object.entries((((i=s==null?void 0:s.cashFlow)==null?void 0:i.crops)||[]).reduce((d,m)=>{const g=m.practice||"Dryland",u=(m.plannedAcres||0)*(m.sharePercent||100)/100,j=a.reduce((p,b)=>p+((m.chemicalCosts||{})[b]||0),0),y=m.chemAppCostPerAcre||0;return d[g]=(d[g]||0)+u*(j+y),d},{})).sort((d,m)=>m[1]-d[1]).map(([d,m])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:d}),e.jsx("span",{className:"font-mono",children:h(m)})]},d))})()})]})]})]})}),D==="variableExpenses"&&pe==="irrigation"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($r,{className:"w-6 h-6 text-cyan-600"}),"Irrigation Costs"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var m;const a=(((m=s==null?void 0:s.cashFlow)==null?void 0:m.crops)||[]).filter(g=>g.practice==="Irrigated"),o=a.reduce((g,u)=>g+(u.plannedAcres||0)*(u.sharePercent||100)/100,0),i=a.reduce((g,u)=>{const j=(u.plannedAcres||0)*(u.sharePercent||100)/100;return g+j*(u.irrigationCostPerAcre||0)},0),d=o>0?i/o:0;return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4 border border-cyan-200",children:[e.jsx("div",{className:"text-sm text-cyan-600 font-medium",children:"Irrigated Acres"}),e.jsx("div",{className:"text-2xl font-bold text-cyan-700 font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Irrigation Cost"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h(i)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg Cost/Acre"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h(d)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Irrigated Fields"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:a.length})]})]})})(),(()=>{var o;return(((o=s==null?void 0:s.cashFlow)==null?void 0:o.crops)||[]).filter(i=>i.practice==="Irrigated").length===0?e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No irrigated fields found."}),e.jsx("span",{className:"text-blue-600",children:'Add irrigated fields in the Crops tab (set Practice to "Irrigated") to enter irrigation costs.'})]})}):null})(),(()=>{var o;const a=(((o=s==null?void 0:s.cashFlow)==null?void 0:o.crops)||[]).filter(i=>i.practice==="Irrigated");return a.length===0?null:e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Energy Source"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share %"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right",children:["Irrigation",e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Cost"})]})}),e.jsx("tbody",{children:a.map(i=>{const d=(i.plannedAcres||0)*(i.sharePercent||100)/100,m=d*(i.irrigationCostPerAcre||0);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:i.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:i.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsxs("select",{value:i.irrigationEnergyType||"Electric",onChange:g=>{var j;const u=(((j=s==null?void 0:s.cashFlow)==null?void 0:j.crops)||[]).map(y=>y.id===i.id?{...y,irrigationEnergyType:g.target.value}:y);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:u}})},className:"px-2 py-1 border border-gray-200 rounded text-xs bg-white",children:[e.jsx("option",{value:"Electric",children:"Electric"}),e.jsx("option",{value:"Diesel",children:"Diesel"}),e.jsx("option",{value:"Natural Gas",children:"Natural Gas"}),e.jsx("option",{value:"Propane",children:"Propane"}),e.jsx("option",{value:"Gravity",children:"Gravity"})]})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:(i.plannedAcres||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:[(i.sharePercent||100).toFixed(1),"%"]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:d.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-1",children:e.jsx(ne,{value:i.irrigationCostPerAcre||0,onChange:g=>{var j;const u=(((j=s==null?void 0:s.cashFlow)==null?void 0:j.crops)||[]).map(y=>y.id===i.id?{...y,irrigationCostPerAcre:g}:y);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:u}})},className:"w-24 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:h(m)})]},i.id)})}),e.jsx("tfoot",{children:(()=>{const i=a.reduce((g,u)=>g+(u.plannedAcres||0)*(u.sharePercent||100)/100,0),d=a.reduce((g,u)=>{const j=(u.plannedAcres||0)*(u.sharePercent||100)/100;return g+j*(u.irrigationCostPerAcre||0)},0),m=i>0?d/i:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-2 text-right font-mono text-blue-700",children:h(m)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:h(d)})]})})()})]})})})(),(()=>{var o;const a=(((o=s==null?void 0:s.cashFlow)==null?void 0:o.crops)||[]).filter(i=>i.practice==="Irrigated");return a.length===0?null:e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Irrigation Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries(a.reduce((i,d)=>{const m=d.crop||"Unassigned",g=(d.plannedAcres||0)*(d.sharePercent||100)/100;return i[m]=(i[m]||0)+g*(d.irrigationCostPerAcre||0),i},{})).sort((i,d)=>d[1]-i[1]).map(([i,d])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:i}),e.jsx("span",{className:"font-mono",children:h(d)})]},i))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Energy Type"}),e.jsx("div",{className:"space-y-2",children:Object.entries(a.reduce((i,d)=>{const m=d.irrigationEnergyType||"Electric",g=(d.plannedAcres||0)*(d.sharePercent||100)/100;return i[m]=(i[m]||0)+g*(d.irrigationCostPerAcre||0),i},{})).sort((i,d)=>d[1]-i[1]).map(([i,d])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:i}),e.jsx("span",{className:"font-mono",children:h(d)})]},i))}),e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[e.jsx("span",{className:"text-gray-700",children:"Total Irrigation Cost:"}),e.jsx("span",{className:"font-mono text-green-700",children:h(a.reduce((i,d)=>{const m=(d.plannedAcres||0)*(d.sharePercent||100)/100;return i+m*(d.irrigationCostPerAcre||0)},0))})]})})]})]})})()]})}),D==="variableExpenses"&&pe==="freight"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ar,{className:"w-6 h-6 text-orange-600"}),"Freight Costs"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var g,u;const a=((g=s==null?void 0:s.cashFlow)==null?void 0:g.crops)||[],o=((u=s==null?void 0:s.cashFlow)==null?void 0:u.freightRates)||{},i=a.reduce((j,y)=>{const p=(y.plannedAcres||0)*(y.sharePercent||100)/100;return j+p*(y.aph||0)},0),d=a.reduce((j,y)=>{const b=(y.plannedAcres||0)*(y.sharePercent||100)/100*(y.aph||0),N=o[y.crop]||0;return j+b*N},0),m=[...new Set(a.map(j=>j.crop).filter(Boolean))];return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Freight Cost"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h(d)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg $/Bushel"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",i>0?(d/i).toFixed(3):"0.000"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Crop Types"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:m.length})]})]})})(),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Freight Rates by Crop ($/Bushel)"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Set the freight cost per bushel for each crop type. This rate will apply to all fields with that crop."}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:(()=>{var d,m;const a=((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[],o=[...new Set(a.map(g=>g.crop).filter(Boolean))],i=((m=s==null?void 0:s.cashFlow)==null?void 0:m.freightRates)||{};return o.length===0?e.jsx("div",{className:"col-span-4 text-sm text-gray-500",children:"No crops defined. Add crops in the Crops tab first."}):o.map(g=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 w-24",children:[g,":"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"$"}),e.jsx("input",{type:"number",step:"0.001",value:i[g]||"",onChange:u=>{const j=parseFloat(u.target.value)||0,y={...i,[g]:j};I({cashFlow:{...s==null?void 0:s.cashFlow,freightRates:y}})},placeholder:"0.000",className:"w-24 pl-6 pr-2 py-1.5 border border-gray-300 rounded text-sm font-mono text-right"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"/bu"})]},g))})()})]}),(()=>{var i,d;const a=((i=s==null?void 0:s.cashFlow)==null?void 0:i.crops)||[],o=((d=s==null?void 0:s.cashFlow)==null?void 0:d.freightRates)||{};return a.length===0?e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab to calculate freight costs."})]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Bushels"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Freight/Bu"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Freight"})]})}),e.jsx("tbody",{children:a.map(m=>{const g=(m.plannedAcres||0)*(m.sharePercent||100)/100,u=g*(m.aph||0),j=o[m.crop]||0,y=u*j;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:m.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:m.crop||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:m.practice||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:g.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:(m.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:u.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-blue-600",children:["$",j.toFixed(3)]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:h(y)})]},m.id)})}),e.jsx("tfoot",{children:(()=>{const m=a.reduce((y,p)=>y+(p.plannedAcres||0)*(p.sharePercent||100)/100,0),g=a.reduce((y,p)=>{const b=(p.plannedAcres||0)*(p.sharePercent||100)/100;return y+b*(p.aph||0)},0),u=a.reduce((y,p)=>{const N=(p.plannedAcres||0)*(p.sharePercent||100)/100*(p.aph||0),C=o[p.crop]||0;return y+N*C},0),j=g>0?u/g:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:m.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:g.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:["$",j.toFixed(3)]}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:h(u)})]})})()})]})})})(),(()=>{var i,d;const a=((i=s==null?void 0:s.cashFlow)==null?void 0:i.crops)||[],o=((d=s==null?void 0:s.cashFlow)==null?void 0:d.freightRates)||{};return a.length===0?null:e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Freight Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries(a.reduce((m,g)=>{const u=g.crop||"Unassigned",y=(g.plannedAcres||0)*(g.sharePercent||100)/100*(g.aph||0),p=o[u]||0;return m[u]=(m[u]||0)+y*p,m},{})).sort((m,g)=>g[1]-m[1]).map(([m,g])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:m}),e.jsx("span",{className:"font-mono",children:h(g)})]},m))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Freight Cost by Practice"}),e.jsx("div",{className:"space-y-2",children:Object.entries(a.reduce((m,g)=>{const u=g.practice||"Unassigned",y=(g.plannedAcres||0)*(g.sharePercent||100)/100*(g.aph||0),p=o[g.crop]||0;return m[u]=(m[u]||0)+y*p,m},{})).sort((m,g)=>g[1]-m[1]).map(([m,g])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:m}),e.jsx("span",{className:"font-mono",children:h(g)})]},m))}),e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[e.jsx("span",{className:"text-gray-700",children:"Total Freight:"}),e.jsx("span",{className:"font-mono text-green-700",children:h(a.reduce((m,g)=>{const j=(g.plannedAcres||0)*(g.sharePercent||100)/100*(g.aph||0),y=o[g.crop]||0;return m+j*y},0))})]})})]})]})})()]})}),D==="cropInsurance"&&ye==="guarantees"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-6 h-6 text-purple-600"}),"Insurance Guarantees"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"View your guaranteed bushels and revenue protection based on your insurance elections. Guarantees are calculated using your APH, coverage level, and projected prices."}),(()=>{var u,j;const a=((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[],o=((j=s==null?void 0:s.cashFlow)==null?void 0:j.springPrices)||{},i=a.reduce((y,p)=>y+(p.plannedAcres||0)*(p.sharePercent||100)/100,0),d=a.reduce((y,p)=>{const b=(p.plannedAcres||0)*(p.sharePercent||100)/100;return y+b*(p.aph||0)},0),m=a.reduce((y,p)=>{const b=(p.plannedAcres||0)*(p.sharePercent||100)/100,C=((p.mpciElection||{}).coverageLevel||75)/100;return y+b*(p.aph||0)*C},0),g=a.reduce((y,p)=>{const b=(p.plannedAcres||0)*(p.sharePercent||100)/100,N=p.mpciElection||{},C=(N.coverageLevel||75)/100,A=o[p.crop]||N.projectedPrice||0;return y+b*(p.aph||0)*C*A},0);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"APH Bushels (100%)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:d.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Guaranteed Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:m.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Revenue Guarantee"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h(g)})]})]})})(),(((ym=s==null?void 0:s.cashFlow)==null?void 0:ym.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Coverage %"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Spring Price"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right bg-green-50",children:"Guar. Bushels"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-amber-700 text-right bg-amber-50",children:"Revenue Guar."})]})}),e.jsx("tbody",{children:(((fm=s==null?void 0:s.cashFlow)==null?void 0:fm.crops)||[]).map(a=>{var j,y;const o=(a.plannedAcres||0)*(a.sharePercent||100)/100,i=a.mpciElection||{},d=(i.coverageLevel||75)/100,m=((y=(j=s==null?void 0:s.cashFlow)==null?void 0:j.springPrices)==null?void 0:y[a.crop])||i.projectedPrice||0,g=o*(a.aph||0)*d,u=g*m;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:a.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:a.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:a.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:(a.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:[i.coverageLevel||75,"%"]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700 bg-blue-50",children:m>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(m):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700 bg-green-50",children:g.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-amber-700 bg-amber-50",children:m>0?h(u):""})]},a.id)})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})})]})}),D==="cropInsurance"&&ye==="mpci"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-6 h-6 text-blue-600"}),"MPCI Elections"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Multi-Peril Crop Insurance (MPCI) elections including coverage levels, plan types, and projected prices."}),(()=>{var y,p,b,N;const a=((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[],o=((p=s==null?void 0:s.cashFlow)==null?void 0:p.springPrices)||{},i=((b=s==null?void 0:s.cashFlow)==null?void 0:b.springPriceYear)||new Date().getFullYear(),d=((N=s==null?void 0:s.cashFlow)==null?void 0:N.springPricesFetched)||!1,m=[...new Set(a.map(C=>C.crop).filter(Boolean))];if(m.length===0)return null;const g=(C,A)=>{const L={...o,[C]:A},M=a.map(R=>R.crop===C?{...R,mpciElection:{...R.mpciElection||{},projectedPrice:A}}:R);I({cashFlow:{...s==null?void 0:s.cashFlow,springPrices:L,crops:M}})},u={2025:{Corn:4.7,Soybeans:11.55,Wheat:5.65,"Grain Sorghum":4.35},2026:{Corn:4.35,Soybeans:10.65,Wheat:5.35,"Grain Sorghum":4.1},2027:{Corn:4.5,Soybeans:10.75,Wheat:5.45,"Grain Sorghum":4.25}},j=async()=>{const C=Pe||new Date().getFullYear(),A=u[C]||u[2026],L={...o};let M=[...a];m.forEach(R=>{A[R]&&(L[R]=A[R],M=M.map(Y=>Y.crop===R?{...Y,mpciElection:{...Y.mpciElection||{},projectedPrice:A[R]}}:Y))}),I({cashFlow:{...s==null?void 0:s.cashFlow,springPrices:L,springPriceYear:C,springPricesFetched:!0,crops:M}})};return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),"Spring Discovery Prices by Crop"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[d&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3"}),i," prices loaded"]}),e.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:"RMA prices typically released Feb/March"}),e.jsxs("button",{onClick:j,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(nl,{className:"w-3.5 h-3.5"}),"Fetch ",Pe||new Date().getFullYear()," RMA Prices"]})]})]}),e.jsx("p",{className:"text-xs text-blue-600 mb-3",children:'Enter spring projected prices manually or click "Fetch RMA Prices" to auto-fill. These will apply to all fields with the same crop.'}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map(C=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:C}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ne,{value:o[C]||0,onChange:A=>g(C,A),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono font-semibold"}),e.jsx("span",{className:"text-xs text-gray-500",children:"/bu"})]})]},C))})]})})(),(((bm=s==null?void 0:s.cashFlow)==null?void 0:bm.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Plan Type"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Coverage Level"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-blue-700 text-right bg-blue-50",children:"Spring Price"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Premium/Ac"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Premium"})]})}),e.jsx("tbody",{children:(((jm=s==null?void 0:s.cashFlow)==null?void 0:jm.crops)||[]).map(a=>{var g,u;const o=(a.plannedAcres||0)*(a.sharePercent||100)/100,i=a.mpciElection||{},d=((u=(g=s==null?void 0:s.cashFlow)==null?void 0:g.springPrices)==null?void 0:u[a.crop])||i.projectedPrice||0,m=o*(i.premiumPerAcre||0);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:a.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:a.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:a.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:(a.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:i.planType||"RP",onChange:j=>{var p;const y=(((p=s==null?void 0:s.cashFlow)==null?void 0:p.crops)||[]).map(b=>b.id===a.id?{...b,mpciElection:{...i,planType:j.target.value}}:b);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:y}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"RP",children:"RP (Revenue Protection)"}),e.jsx("option",{value:"RP-HPE",children:"RP-HPE (w/ Harvest Price Exclusion)"}),e.jsx("option",{value:"YP",children:"YP (Yield Protection)"}),e.jsx("option",{value:"ARP",children:"ARP (Area Revenue Protection)"}),e.jsx("option",{value:"AYP",children:"AYP (Area Yield Protection)"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:i.coverageLevel||75,onChange:j=>{var p;const y=(((p=s==null?void 0:s.cashFlow)==null?void 0:p.crops)||[]).map(b=>b.id===a.id?{...b,mpciElection:{...i,coverageLevel:parseInt(j.target.value)}}:b);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:y}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:50,children:"50%"}),e.jsx("option",{value:55,children:"55%"}),e.jsx("option",{value:60,children:"60%"}),e.jsx("option",{value:65,children:"65%"}),e.jsx("option",{value:70,children:"70%"}),e.jsx("option",{value:75,children:"75%"}),e.jsx("option",{value:80,children:"80%"}),e.jsx("option",{value:85,children:"85%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-blue-50",children:e.jsx("span",{className:"font-mono font-semibold text-blue-700",children:d>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(d):""})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ne,{value:i.premiumPerAcre||0,onChange:j=>{var p;const y=(((p=s==null?void 0:s.cashFlow)==null?void 0:p.crops)||[]).map(b=>b.id===a.id?{...b,mpciElection:{...i,premiumPerAcre:j}}:b);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:y}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700",children:h(m)})]},a.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"9",className:"py-3 px-3 text-right text-gray-700",children:"Total MPCI Premium:"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:h((((Nm=s==null?void 0:s.cashFlow)==null?void 0:Nm.crops)||[]).reduce((a,o)=>{var d;const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+i*(((d=o.mpciElection)==null?void 0:d.premiumPerAcre)||0)},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})})]})}),D==="cropInsurance"&&ye==="areaPlans"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-6 h-6 text-cyan-600"}),"Area Plans"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var R,Y,_,X,U,B,k;const a=((R=s==null?void 0:s.cashFlow)==null?void 0:R.crops)||[],o=f.find(F=>F.id===re);o!=null&&o.entities;const i=((Y=s==null?void 0:s.cashFlow)==null?void 0:Y.areaPrices)||{},d=((_=s==null?void 0:s.cashFlow)==null?void 0:_.countyYields)||{},m=((X=s==null?void 0:s.cashFlow)==null?void 0:X.areaState)||"NE",g=(F,T)=>{const w=a.map(E=>E.id===F?{...E,...T}:E);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:w}})},u=F=>{I({cashFlow:{...s==null?void 0:s.cashFlow,areaPrices:{...i,...F}}})},j=F=>{I({cashFlow:{...s==null?void 0:s.cashFlow,countyYields:{...d,...F}}})},y=F=>{I({cashFlow:{...s==null?void 0:s.cashFlow,areaState:F}})},p=[...new Set(a.map(F=>F.county).filter(Boolean))],b=[...new Set(a.map(F=>F.crop).filter(Boolean))],N={2025:{Corn:{projected:4.7,harvest:4.35},Soybeans:{projected:11.55,harvest:10.5},Wheat:{projected:5.65,harvest:5.3},"Grain Sorghum":{projected:4.35,harvest:4.1}},2026:{Corn:{projected:4.35,harvest:4.3},Soybeans:{projected:10.65,harvest:10.55},Wheat:{projected:5.35,harvest:5.25},"Grain Sorghum":{projected:4.1,harvest:4.05}},2027:{Corn:{projected:4.5,harvest:4.45},Soybeans:{projected:10.75,harvest:10.65},Wheat:{projected:5.45,harvest:5.35},"Grain Sorghum":{projected:4.25,harvest:4.2}}},C={NE:{"Cedar-Corn-Irrigated":{expected:215,actual:208},"Cedar-Corn-Dryland":{expected:168,actual:158},"Cedar-Wheat-Dryland":{expected:52,actual:48},"Cedar-Soybeans-Dryland":{expected:50,actual:46},"Cedar-Soybeans-Irrigated":{expected:62,actual:58},"Dixon-Corn-Irrigated":{expected:210,actual:202},"Dixon-Corn-Dryland":{expected:165,actual:155},"Dixon-Soybeans-Dryland":{expected:48,actual:45},"Dixon-Soybeans-Irrigated":{expected:60,actual:56},"Dixon-Wheat-Dryland":{expected:50,actual:46}},IA:{"Story-Corn-Dryland":{expected:195,actual:188},"Story-Soybeans-Dryland":{expected:58,actual:55},"Polk-Corn-Dryland":{expected:190,actual:182},"Polk-Soybeans-Dryland":{expected:56,actual:53}},KS:{"Sedgwick-Wheat-Dryland":{expected:42,actual:38},"Sedgwick-Corn-Irrigated":{expected:200,actual:192},"Sedgwick-Grain Sorghum-Dryland":{expected:85,actual:78}}},A=()=>{const F=Pe||new Date().getFullYear(),T=N[F]||N[2026],w={...i};b.forEach(E=>{T[E]&&(w[E]=T[E])}),I({cashFlow:{...s==null?void 0:s.cashFlow,areaPrices:w,areaPriceYear:F,areaPricesFetched:!0}})},L=()=>{const F=C[m]||{},T={...d};p.forEach(w=>{b.forEach(E=>{[...new Set(a.filter(q=>q.county===w&&q.crop===E).map(q=>q.practice))].forEach(q=>{const W=`${w}-${E}-${q}`;F[W]&&(T[W]=F[W])})})}),I({cashFlow:{...s==null?void 0:s.cashFlow,countyYields:T,countyYieldsFetched:!0}})},M=["NE","IA","KS","SD","MN","MO","CO","WY","TX","OK"];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"State:"}),e.jsx("select",{value:m,onChange:F=>y(F.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:M.map(F=>e.jsx("option",{value:F,children:F},F))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),"Area Plan Prices by Crop"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[((U=s==null?void 0:s.cashFlow)==null?void 0:U.areaPricesFetched)&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3"}),((B=s==null?void 0:s.cashFlow)==null?void 0:B.areaPriceYear)||Pe," prices loaded"]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Fetch ",Pe," RMA Prices"]})]})]}),e.jsx("p",{className:"text-xs text-blue-600 mb-4",children:"Projected prices (Feb/March) and harvest prices (Oct/Nov) for area-based coverage. Click fetch or enter manually."}),b.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(F=>{var T,w;return e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:F}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-blue-600 block mb-1",children:"Projected Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"$"}),e.jsx(ne,{value:((T=i[F])==null?void 0:T.projected)||0,onChange:E=>u({[F]:{...i[F],projected:E}}),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-green-600 block mb-1",children:"Harvest Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"$"}),e.jsx(ne,{value:((w=i[F])==null?void 0:w.harvest)||0,onChange:E=>u({[F]:{...i[F],harvest:E}}),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]})]})]},F)})}):e.jsx("div",{className:"text-sm text-blue-600",children:"Add crops in the Crops tab to set area prices."})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-amber-800 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-4 h-4"}),"County Expected Yields (",m,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[((k=s==null?void 0:s.cashFlow)==null?void 0:k.countyYieldsFetched)&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3"}),"Yields loaded"]}),e.jsxs("button",{onClick:L,className:"flex items-center gap-1 px-3 py-1.5 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Fetch ",m," County Yields"]})]})]}),e.jsx("p",{className:"text-xs text-amber-600 mb-4",children:"Expected and actual county yields from RMA for area plan calculations. Select state above then fetch or enter manually."}),p.length>0&&b.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-amber-100",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"County"}),e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"Crop"}),e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"Practice"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-blue-700 bg-blue-50",children:"Expected Yield"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-green-700 bg-green-50",children:"Actual County Yield"})]})}),e.jsx("tbody",{children:p.flatMap(F=>b.flatMap(T=>[...new Set(a.filter(E=>E.county===F&&E.crop===T).map(E=>E.practice))].map(E=>{var q,W;const z=`${F}-${T}-${E}`;return e.jsxs("tr",{className:"border-b border-amber-100 hover:bg-amber-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-700",children:F}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:T}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${E==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:E})}),e.jsx("td",{className:"py-2 px-3 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx($e,{value:((q=d[z])==null?void 0:q.expected)||0,onChange:K=>j({[z]:{...d[z],expected:K}}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-right font-mono text-sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:"bu"})]})}),e.jsx("td",{className:"py-2 px-3 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx($e,{value:((W=d[z])==null?void 0:W.actual)||0,onChange:K=>j({[z]:{...d[z],actual:K}}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-right font-mono text-sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:"bu"})]})})]},z)})))})]})}):e.jsx("div",{className:"text-sm text-amber-600",children:"Add fields with counties and crops to set expected yields."})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Area Plan Elections by Field"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select which area-based coverage options to elect for each field. Set coverage levels and premiums per acre."}),a.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-center bg-cyan-50",children:"SCO"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-right bg-cyan-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-center bg-green-50",children:"ECO"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 bg-green-50",children:"Level"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-right bg-green-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 bg-purple-50",children:"Margin Plan"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 bg-purple-50",children:"Cov%"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-right bg-purple-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Premium"})]})}),e.jsx("tbody",{children:a.map(F=>{const T=(F.plannedAcres||0)*(F.sharePercent||100)/100,w=F.areaPlan||{},E=w.scoEnabled?T*(w.scoPerAcre||0):0,z=w.ecoEnabled?T*(w.ecoPerAcre||0):0,q=w.marginPlan&&w.marginPlan!=="none"?T*(w.marginPerAcre||0):0,W=E+z+q;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:F.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:F.crop||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:F.county||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:T.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2 text-center bg-cyan-50",children:e.jsx("input",{type:"checkbox",checked:w.scoEnabled||!1,onChange:K=>g(F.id,{areaPlan:{...w,scoEnabled:K.target.checked}}),className:"w-4 h-4 text-cyan-600"})}),e.jsx("td",{className:"py-2 px-2 bg-cyan-50",children:e.jsx(ne,{value:w.scoPerAcre||0,onChange:K=>g(F.id,{areaPlan:{...w,scoPerAcre:K}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!w.scoEnabled})}),e.jsx("td",{className:"py-2 px-2 text-center bg-green-50",children:e.jsx("input",{type:"checkbox",checked:w.ecoEnabled||!1,onChange:K=>g(F.id,{areaPlan:{...w,ecoEnabled:K.target.checked}}),className:"w-4 h-4 text-green-600"})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsxs("select",{value:w.ecoLevel||"90",onChange:K=>g(F.id,{areaPlan:{...w,ecoLevel:K.target.value}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!w.ecoEnabled,children:[e.jsx("option",{value:"90",children:"90%"}),e.jsx("option",{value:"95",children:"95%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsx(ne,{value:w.ecoPerAcre||0,onChange:K=>g(F.id,{areaPlan:{...w,ecoPerAcre:K}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!w.ecoEnabled})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsxs("select",{value:w.marginPlan||"none",onChange:K=>g(F.id,{areaPlan:{...w,marginPlan:K.target.value}}),className:"w-20 px-1 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"mp",children:"MP"}),e.jsx("option",{value:"mco",children:"MCO"})]})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsxs("select",{value:w.marginCoverage||"80",onChange:K=>g(F.id,{areaPlan:{...w,marginCoverage:K.target.value}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!w.marginPlan||w.marginPlan==="none",children:[e.jsx("option",{value:"70",children:"70%"}),e.jsx("option",{value:"75",children:"75%"}),e.jsx("option",{value:"80",children:"80%"}),e.jsx("option",{value:"85",children:"85%"}),e.jsx("option",{value:"90",children:"90%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsx(ne,{value:w.marginPerAcre||0,onChange:K=>g(F.id,{areaPlan:{...w,marginPerAcre:K}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!w.marginPlan||w.marginPlan==="none"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-700",children:h(W)})]},F.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"4",className:"py-3 px-3 text-right text-gray-700",children:"Totals:"}),e.jsx("td",{colSpan:"2",className:"py-3 px-3 text-right font-mono text-cyan-700 bg-cyan-50",children:h(a.reduce((F,T)=>{var E,z;const w=(T.plannedAcres||0)*(T.sharePercent||100)/100;return F+((E=T.areaPlan)!=null&&E.scoEnabled?w*(((z=T.areaPlan)==null?void 0:z.scoPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-right font-mono text-green-700 bg-green-50",children:h(a.reduce((F,T)=>{var E,z;const w=(T.plannedAcres||0)*(T.sharePercent||100)/100;return F+((E=T.areaPlan)!=null&&E.ecoEnabled?w*(((z=T.areaPlan)==null?void 0:z.ecoPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-right font-mono text-purple-700 bg-purple-50",children:h(a.reduce((F,T)=>{var E,z,q;const w=(T.plannedAcres||0)*(T.sharePercent||100)/100;return F+((E=T.areaPlan)!=null&&E.marginPlan&&((z=T.areaPlan)==null?void 0:z.marginPlan)!=="none"?w*(((q=T.areaPlan)==null?void 0:q.marginPerAcre)||0):0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-gray-800",children:h(a.reduce((F,T)=>{var W,K,xe,Ae,G,S,Q;const w=(T.plannedAcres||0)*(T.sharePercent||100)/100,E=(W=T.areaPlan)!=null&&W.scoEnabled?w*(((K=T.areaPlan)==null?void 0:K.scoPerAcre)||0):0,z=(xe=T.areaPlan)!=null&&xe.ecoEnabled?w*(((Ae=T.areaPlan)==null?void 0:Ae.ecoPerAcre)||0):0,q=(G=T.areaPlan)!=null&&G.marginPlan&&((S=T.areaPlan)==null?void 0:S.marginPlan)!=="none"?w*(((Q=T.areaPlan)==null?void 0:Q.marginPerAcre)||0):0;return F+E+z+q},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Area Plans Premium Summary"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"rounded-lg p-3 bg-cyan-50 border border-cyan-200",children:[e.jsx("div",{className:"text-sm font-medium text-cyan-700",children:"SCO Premium"}),e.jsx("div",{className:"text-xl font-bold font-mono text-cyan-800",children:h(a.reduce((F,T)=>{var E,z;const w=(T.plannedAcres||0)*(T.sharePercent||100)/100;return F+((E=T.areaPlan)!=null&&E.scoEnabled?w*(((z=T.areaPlan)==null?void 0:z.scoPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-green-50 border border-green-200",children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"ECO Premium"}),e.jsx("div",{className:"text-xl font-bold font-mono text-green-800",children:h(a.reduce((F,T)=>{var E,z;const w=(T.plannedAcres||0)*(T.sharePercent||100)/100;return F+((E=T.areaPlan)!=null&&E.ecoEnabled?w*(((z=T.areaPlan)==null?void 0:z.ecoPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-purple-50 border border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:"Margin Plan (MP/MCO)"}),e.jsx("div",{className:"text-xl font-bold font-mono text-purple-800",children:h(a.reduce((F,T)=>{var E,z,q;const w=(T.plannedAcres||0)*(T.sharePercent||100)/100;return F+((E=T.areaPlan)!=null&&E.marginPlan&&((z=T.areaPlan)==null?void 0:z.marginPlan)!=="none"?w*(((q=T.areaPlan)==null?void 0:q.marginPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-200 border border-gray-300",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Total Area Plans"}),e.jsx("div",{className:"text-xl font-bold font-mono text-gray-800",children:h(a.reduce((F,T)=>{var W,K,xe,Ae,G,S,Q;const w=(T.plannedAcres||0)*(T.sharePercent||100)/100,E=(W=T.areaPlan)!=null&&W.scoEnabled?w*(((K=T.areaPlan)==null?void 0:K.scoPerAcre)||0):0,z=(xe=T.areaPlan)!=null&&xe.ecoEnabled?w*(((Ae=T.areaPlan)==null?void 0:Ae.ecoPerAcre)||0):0,q=(G=T.areaPlan)!=null&&G.marginPlan&&((S=T.areaPlan)==null?void 0:S.marginPlan)!=="none"?w*(((Q=T.areaPlan)==null?void 0:Q.marginPerAcre)||0):0;return F+E+z+q},0))})]})]})]})]})})()]})}),D==="cropInsurance"&&ye==="privateProducts"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(al,{className:"w-6 h-6 text-orange-600"}),"Private Products (Hail & Wind)"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Private crop insurance products including hail and wind coverage. Enter your elections and premiums by field."}),(()=>{var d;const a=((d=s==null?void 0:s.cashFlow)==null?void 0:d.crops)||[],o=a.reduce((m,g)=>{var j,y;const u=(g.plannedAcres||0)*(g.sharePercent||100)/100;return m+((j=g.privateInsurance)!=null&&j.hailEnabled?u*(((y=g.privateInsurance)==null?void 0:y.hailPerAcre)||0):0)},0),i=a.reduce((m,g)=>{var j,y;const u=(g.plannedAcres||0)*(g.sharePercent||100)/100;return m+((j=g.privateInsurance)!=null&&j.windEnabled?u*(((y=g.privateInsurance)==null?void 0:y.windPerAcre)||0):0)},0);return e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Hail Premium"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:h(o)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Wind Premium"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:h(i)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Private Insurance"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700 font-mono",children:h(o+i)})]})]})})(),(((vm=s==null?void 0:s.cashFlow)==null?void 0:vm.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-center bg-orange-50",children:"Hail"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 bg-orange-50",children:"Hail Coverage"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-right bg-orange-50",children:"Hail $/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-right bg-orange-50",children:"Hail Total"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-center bg-purple-50",children:"Wind"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-right bg-purple-50",children:"Wind $/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-right bg-purple-50",children:"Wind Total"})]})}),e.jsx("tbody",{children:(((wm=s==null?void 0:s.cashFlow)==null?void 0:wm.crops)||[]).map(a=>{const o=(a.plannedAcres||0)*(a.sharePercent||100)/100,i=a.privateInsurance||{},d=i.hailEnabled?o*(i.hailPerAcre||0):0,m=i.windEnabled?o*(i.windPerAcre||0):0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:a.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:a.crop||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2 text-center bg-orange-50",children:e.jsx("input",{type:"checkbox",checked:i.hailEnabled||!1,onChange:g=>{var j;const u=(((j=s==null?void 0:s.cashFlow)==null?void 0:j.crops)||[]).map(y=>y.id===a.id?{...y,privateInsurance:{...i,hailEnabled:g.target.checked}}:y);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:u}})},className:"w-4 h-4 text-orange-600"})}),e.jsx("td",{className:"py-2 px-2 bg-orange-50",children:e.jsxs("select",{value:i.hailCoverage||"100",onChange:g=>{var j;const u=(((j=s==null?void 0:s.cashFlow)==null?void 0:j.crops)||[]).map(y=>y.id===a.id?{...y,privateInsurance:{...i,hailCoverage:g.target.value}}:y);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:u}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",disabled:!i.hailEnabled,children:[e.jsx("option",{value:"50",children:"50%"}),e.jsx("option",{value:"75",children:"75%"}),e.jsx("option",{value:"100",children:"100%"}),e.jsx("option",{value:"Companion",children:"Companion"})]})}),e.jsx("td",{className:"py-2 px-2 bg-orange-50",children:e.jsx(ne,{value:i.hailPerAcre||0,onChange:g=>{var j;const u=(((j=s==null?void 0:s.cashFlow)==null?void 0:j.crops)||[]).map(y=>y.id===a.id?{...y,privateInsurance:{...i,hailPerAcre:g}}:y);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:u}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!i.hailEnabled})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-orange-700 bg-orange-50",children:i.hailEnabled?h(d):""}),e.jsx("td",{className:"py-2 px-2 text-center bg-purple-50",children:e.jsx("input",{type:"checkbox",checked:i.windEnabled||!1,onChange:g=>{var j;const u=(((j=s==null?void 0:s.cashFlow)==null?void 0:j.crops)||[]).map(y=>y.id===a.id?{...y,privateInsurance:{...i,windEnabled:g.target.checked}}:y);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:u}})},className:"w-4 h-4 text-purple-600"})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsx(ne,{value:i.windPerAcre||0,onChange:g=>{var j;const u=(((j=s==null?void 0:s.cashFlow)==null?void 0:j.crops)||[]).map(y=>y.id===a.id?{...y,privateInsurance:{...i,windPerAcre:g}}:y);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:u}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!i.windEnabled})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-700 bg-purple-50",children:i.windEnabled?h(m):""})]},a.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"6",className:"py-3 px-3 text-right text-gray-700",children:"Totals:"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700 bg-orange-50",children:h((((Pm=s==null?void 0:s.cashFlow)==null?void 0:Pm.crops)||[]).reduce((a,o)=>{var d,m;const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+((d=o.privateInsurance)!=null&&d.hailEnabled?i*(((m=o.privateInsurance)==null?void 0:m.hailPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"2",className:"bg-purple-50"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-700 bg-purple-50",children:h((((Cm=s==null?void 0:s.cashFlow)==null?void 0:Cm.crops)||[]).reduce((a,o)=>{var d,m;const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+((d=o.privateInsurance)!=null&&d.windEnabled?i*(((m=o.privateInsurance)==null?void 0:m.windPerAcre)||0):0)},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})})]})})]})]}),se==="cowCalf"&&e.jsx("main",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(x0,{className:"w-10 h-10 text-amber-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Cow/Calf Enterprise"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-lg mx-auto",children:"The Cow/Calf enterprise module is coming soon. This will include herd management, pasture costs, calf sales projections, and veterinary expense tracking."}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx("button",{onClick:()=>ue(null),className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Back to Enterprises"})})]})}),se==="custom"&&e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-0",children:[{id:"summary",label:"Summary",icon:st},{id:"sizeScope",label:"Custom Revenue",icon:Ut},{id:"expenses",label:"Expenses",icon:gs}].map(a=>e.jsxs("button",{onClick:()=>H(a.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${D===a.id?"border-purple-500 text-purple-600 bg-purple-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))})})}),D==="summary"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(st,{className:"w-6 h-6 text-purple-600"}),"Custom Farming Summary"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]}),(()=>{var b;const a=((b=s==null?void 0:s.cashFlow)==null?void 0:b.customFarming)||{},o=a.jobs||[],i=a.expenses||{},d=o.reduce((N,C)=>N+(C.acresPlanned||0),0),m=o.reduce((N,C)=>N+(C.acresPlanned||0)*(C.ratePerAcre||0),0),g=o.length,j=["fuel","labor","depreciation","debtPrincipal","debtInterest","repairs","insurance","utilities","supplies","licenseFees","professional","other"].reduce((N,C)=>N+(i[C]||0),0),y=m-j,p=m>0?y/m*100:0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Custom Jobs"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:g}),e.jsx("div",{className:"text-xs text-purple-500",children:"Active job types"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:d.toLocaleString()}),e.jsx("div",{className:"text-xs text-blue-500",children:"Across all jobs"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Projected Revenue"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:h(m)}),e.jsx("div",{className:"text-xs text-green-500",children:"From custom work"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${y>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${y>=0?"text-green-700":"text-red-700"}`,children:"Net Income"}),e.jsx("div",{className:`text-2xl font-bold font-mono ${y>=0?"text-green-800":"text-red-800"}`,children:h(y)}),e.jsxs("div",{className:`text-xs ${y>=0?"text-green-600":"text-red-600"}`,children:[p.toFixed(1),"% margin"]})]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-purple-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-purple-800",children:"Job Type"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-purple-800",children:"Crop"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Acres"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Rate/Acre"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Revenue"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No custom jobs defined. Go to Custom Revenue tab to add jobs."})}):o.map(N=>{const C=(N.acresPlanned||0)*(N.ratePerAcre||0);return e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:N.jobType}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:N.crop||"All / None"}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:(N.acresPlanned||0).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:h(N.ratePerAcre||0)}),e.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-green-700",children:h(C)})]},N.id)})}),o.length>0&&e.jsx("tfoot",{className:"bg-gray-100 font-semibold",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-800",colSpan:"2",children:"Total"}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:d.toLocaleString()}),e.jsxs("td",{className:"px-4 py-3 text-right font-mono text-gray-500",children:[d>0?h(m/d):"-"," avg"]}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-green-700",children:h(m)})]})})]})})]})})()]})}),D==="sizeScope"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-6 h-6 text-purple-600"}),"Custom Revenue"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Define custom jobs, crop, acres planned, and rate per acre."})]})}),(()=>{var C,A;const a=((C=s==null?void 0:s.cashFlow)==null?void 0:C.customFarming)||{},o=a.jobs||[],i=((A=s==null?void 0:s.cashFlow)==null?void 0:A.crops)||[],d=[...new Set(i.map(L=>L.crop))].filter(Boolean),m=["Corn","Soybeans","Wheat","Grass Hay","Alfalfa","Oats","Sunflowers","Milo","Sorghum","Barley","Corn Silage","Triticale","Millet","Canola","Dry Beans","Sugar Beets","Cotton","Rice"],g=[...new Set([...m,...d])],u=["Planting","Spraying","Harvesting (Combining)","Hay - Swathing","Hay - Baling","Hay - Stacking","Chopping Silage","Chopping Hay","Chopping Earlage","Packing Silage","Tillage","Strip Tilling","Fertilizer Application","Trucking/Hauling","Other"],j=L=>{const M={id:`job-${Date.now()}`,jobType:L,crop:"",acresPlanned:0,ratePerAcre:0,notes:""};I({cashFlow:{...s==null?void 0:s.cashFlow,customFarming:{...a,jobs:[...o,M]}}})},y=(L,M,R)=>{const Y=o.map(_=>_.id===L?{..._,[M]:R}:_);I({cashFlow:{...s==null?void 0:s.cashFlow,customFarming:{...a,jobs:Y}}})},p=L=>{const M=o.filter(R=>R.id!==L);I({cashFlow:{...s==null?void 0:s.cashFlow,customFarming:{...a,jobs:M}}})},b=o.reduce((L,M)=>L+(M.acresPlanned||0),0),N=o.reduce((L,M)=>L+(M.acresPlanned||0)*(M.ratePerAcre||0),0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Add Custom Job:"}),e.jsxs("select",{className:"px-4 py-2 border border-purple-300 rounded-lg bg-white text-gray-700 focus:ring-2 focus:ring-purple-500",value:"",onChange:L=>{L.target.value&&(j(L.target.value),L.target.value="")},children:[e.jsx("option",{value:"",children:"Select job type..."}),u.map(L=>e.jsx("option",{value:L,children:L},L))]})]})}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-purple-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-purple-800",children:"Job Type"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-purple-800",children:"Crop"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Acres Planned"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Rate/Acre"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Revenue"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-purple-800 w-20",children:"Actions"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ar,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"No custom jobs added yet"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Select a job type from the dropdown above"})]})})}):o.map(L=>{const M=(L.acresPlanned||0)*(L.ratePerAcre||0);return e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ar,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:L.jobType})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{value:L.crop||"",onChange:R=>y(L.id,"crop",R.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm bg-white",children:[e.jsx("option",{value:"",children:"All / None"}),g.map(R=>e.jsx("option",{value:R,children:R},R))]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx($e,{value:L.acresPlanned||0,onChange:R=>y(L.id,"acresPlanned",R),decimals:0,className:"w-full px-3 py-1.5 border border-gray-300 rounded text-right font-mono"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(ne,{value:L.ratePerAcre||0,onChange:R=>y(L.id,"ratePerAcre",R),className:"w-full px-3 py-1.5 border border-gray-300 rounded text-right font-mono"})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-green-700",children:h(M)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>p(L.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",title:"Delete job",children:e.jsx(nt,{className:"w-4 h-4"})})})]},L.id)})}),o.length>0&&e.jsx("tfoot",{className:"bg-purple-100 font-semibold",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-purple-800",colSpan:"2",children:"Total"}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-purple-700",children:b.toLocaleString()}),e.jsxs("td",{className:"px-4 py-3 text-right font-mono text-purple-600",children:[b>0?h(N/b):"-"," avg"]}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-green-700",children:h(N)}),e.jsx("td",{className:"px-4 py-3"})]})})]})})]})})()]})}),D==="expenses"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2 mb-6",children:[e.jsx(gs,{className:"w-6 h-6 text-purple-600"}),"Custom Farming Expenses"]}),(()=>{var p;const a=((p=s==null?void 0:s.cashFlow)==null?void 0:p.customFarming)||{},o=a.expenses||{},i=a.jobs||[],d=i.reduce((b,N)=>b+(N.acresPlanned||0),0),m=(b,N)=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFarming:{...a,expenses:{...o,[b]:N}}}})},g=[{key:"fuel",label:"Fuel & Oil",icon:pf},{key:"labor",label:"Labor",icon:ll},{key:"depreciation",label:"Depreciation",icon:jf},{key:"debtPrincipal",label:"Debt Principal",icon:Kn},{key:"debtInterest",label:"Debt Interest",icon:ff},{key:"repairs",label:"Repairs & Maintenance",icon:Nf},{key:"insurance",label:"Insurance",icon:Rr},{key:"utilities",label:"Utilities",icon:vf},{key:"supplies",label:"Supplies",icon:yf},{key:"licenseFees",label:"License & Fees",icon:Ue},{key:"professional",label:"Professional Services",icon:mf},{key:"other",label:"Other Expenses",icon:gf}],u=g.reduce((b,N)=>b+(o[N.key]||0),0),j=i.reduce((b,N)=>b+(N.acresPlanned||0)*(N.ratePerAcre||0),0),y=j-u;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:g.map(b=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b.icon,{className:"w-4 h-4 text-purple-600"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:b.label})]}),d>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[h((o[b.key]||0)/d),"/ac"]})]}),e.jsx(ne,{value:o[b.key]||0,onChange:N=>m(b.key,N),className:"w-full px-3 py-2 border border-gray-300 rounded text-right font-mono"})]},b.key))}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Revenue"}),e.jsx("div",{className:"text-xl font-bold text-green-700 font-mono",children:h(j)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Expenses"}),e.jsx("div",{className:"text-xl font-bold text-red-700 font-mono",children:h(u)})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${y>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${y>=0?"text-green-700":"text-red-700"}`,children:"Net Income"}),e.jsx("div",{className:`text-xl font-bold font-mono ${y>=0?"text-green-800":"text-red-800"}`,children:h(y)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Profit Margin"}),e.jsxs("div",{className:"text-xl font-bold text-purple-700 font-mono",children:[j>0?(y/j*100).toFixed(1):"0.0","%"]})]})]})]})})()]})})]}),se==="customFeeding"&&e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-0",children:[{id:"summary",label:"Summary",icon:st},{id:"sizeScope",label:"Size & Scope",icon:Ut},{id:"revenue",label:"Revenue",icon:fr},{id:"feedingSummary",label:"Feeding Summary",icon:Ut},{id:"feedInventory",label:"Feed Inventory",icon:Yt},{id:"expenses",label:"Expenses",icon:gs}].map(a=>e.jsxs("button",{onClick:()=>H(a.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${D===a.id?"border-orange-500 text-orange-600 bg-orange-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))})})}),D==="summary"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(st,{className:"w-6 h-6 text-orange-600"}),"Custom Feeding Cash Flow Summary"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]}),(()=>{var _e;const a=((_e=s==null?void 0:s.cashFlow)==null?void 0:_e.customFeeding)||{},o=a.feedingSummary||{},i=a.feedInventory||[],d=a.expenses||{},m=a.sizeScope||{},g=a.revenue||{},u=["January","February","March","April","May","June","July","August","September","October","November","December"],j=o.currentHead||0,y=o.headDays||0;o.avgDaysOnFeed;const p=o.estimatedADG||0,b=o.totalLbFed||i.reduce((Re,Ge)=>Re+(Ge.asFedAmount||0),0);o.totalDryMatterFed||i.reduce((Re,Ge)=>Re+(Ge.dryMatterAmount||0),0);const N=o.currentEstAvgWeight||0,C=o.estimatedBreakEvenCWT||0,A=i.reduce((Re,Ge)=>Re+(Ge.totalCost||0),0),L=d.feed||A,M=d.yardage||0,R=d.delivery||0,Y=d.managementFee||0,_=d.insurance||0,X=d.processing||0,U=d.vetMed||0,B=d.bedding||0,k=d.profitShare||0,F=d.interest||0,T=d.salesTax||0,w=d.other||0,E=L+M+R+Y+_+X+U+B+k+F+T+w,z=y>0?E/y:0,q=y>0&&p>0?y*p:0,W=q>0?E/q:0,K=g.yardageRatePerDay||0,xe=u.reduce((Re,Ge)=>{var mt;return Re+(((mt=m[Ge])==null?void 0:mt.projected)||0)},0),Ae=xe*K,G=g.feedMarkupIncome||0,S=g.otherIncome||0,Q=Ae+G+S,ie=Q-E,fe=Pe||new Date().getFullYear(),he=fe%4===0&&fe%100!==0||fe%400===0?366:365,Be=he>0?xe/he:0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Current Head"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:j.toLocaleString()})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Projected Head Days"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:xe.toLocaleString()})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Avg Head on Feed"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:Be.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Est. ADG"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:[p.toFixed(2)," lbs"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total lb Fed"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:b.toLocaleString()})]}),e.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 border border-teal-200",children:[e.jsx("div",{className:"text-sm text-teal-600 font-medium",children:"Total Feed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-teal-700 font-mono",children:h(A)})]}),e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4 border border-cyan-200",children:[e.jsx("div",{className:"text-sm text-cyan-600 font-medium",children:"Current Est. Avg Wt"}),e.jsxs("div",{className:"text-2xl font-bold text-cyan-700 font-mono",children:[N.toLocaleString()," lbs"]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Est. Break Even CWT"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700 font-mono",children:["$",C.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg border border-green-200 p-4",children:[e.jsxs("h3",{className:"font-bold text-green-800 mb-4 flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Total Revenue"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Yardage Income"}),e.jsx("span",{className:"font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(Ae)})]}),e.jsx("div",{className:"flex justify-between text-xs text-gray-500 pl-4",children:e.jsxs("span",{children:[xe.toLocaleString()," hd days  $",K.toFixed(2),"/day"]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Feed Markup"}),e.jsx("span",{className:"font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(G)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Income"}),e.jsx("span",{className:"font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(S)})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-green-200",children:[e.jsx("span",{children:"Total Revenue"}),e.jsx("span",{className:"font-mono text-green-700",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(Q)})]})]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg border border-red-200 p-4",children:[e.jsx("h3",{className:"font-bold text-red-800 mb-4",children:"Total Expenses"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Feed"}),e.jsx("span",{className:"font-mono",children:h(L)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Yardage"}),e.jsx("span",{className:"font-mono",children:h(M)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vet & Med"}),e.jsx("span",{className:"font-mono",children:h(U)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Processing"}),e.jsx("span",{className:"font-mono",children:h(X)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other"}),e.jsx("span",{className:"font-mono",children:h(R+Y+_+B+k+F+T+w)})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-red-200",children:[e.jsx("span",{children:"Total Expenses"}),e.jsx("span",{className:"font-mono text-red-700",children:h(E)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`rounded-lg border p-4 ${ie>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("h3",{className:`font-bold mb-2 ${ie>=0?"text-green-800":"text-red-800"}`,children:"Net Income"}),e.jsx("div",{className:`text-3xl font-bold font-mono ${ie>=0?"text-green-700":"text-red-700"}`,children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(ie)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Revenue - Expenses"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4",children:[e.jsx("h3",{className:"font-bold text-blue-800 mb-3",children:"Per Unit Analysis"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cost/Head Day"}),e.jsx("span",{className:"font-mono font-semibold",children:h(z)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cost/lb Gain"}),e.jsx("span",{className:"font-mono font-semibold",children:h(W)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Revenue/Head Day"}),e.jsx("span",{className:"font-mono font-semibold text-green-700",children:xe>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(Q/xe):"$0.00"})]})]})]})]})]})]})})()]})}),D==="sizeScope"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-6 h-6 text-orange-600"}),"Size & Scope Projection"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Compare projected monthly head days against last year's actuals to plan capacity and cash flow."}),(()=>{var L;const a=((L=s==null?void 0:s.cashFlow)==null?void 0:L.customFeeding)||{},o=a.sizeScope||{},i=["January","February","March","April","May","June","July","August","September","October","November","December"],d=[31,28,31,30,31,30,31,31,30,31,30,31],m=(M,R)=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,sizeScope:{...o,[M]:R}}}})},g=(M,R,Y)=>{const _=o[M]||{};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,sizeScope:{...o,[M]:{..._,[R]:Y}}}}})},u=o.yardCapacity||0,j=u*365,y=i.reduce((M,R)=>{var Y;return M+(((Y=o[R])==null?void 0:Y.projected)||0)},0),p=i.reduce((M,R)=>{var Y;return M+(((Y=o[R])==null?void 0:Y.actual)||0)},0),b=y-p,N=p>0?(y-p)/p*100:0,C=j>0?y/j*100:0,A=j>0?p/j*100:0;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-orange-700 block mb-1",children:"Yard Capacity (Head)"}),e.jsx($e,{value:u,onChange:M=>m("yardCapacity",M),decimals:0,className:"w-32 px-3 py-2 border border-orange-300 rounded-lg text-right font-mono text-lg font-bold bg-white"})]}),e.jsxs("div",{className:"border-l border-orange-300 pl-6",children:[e.jsx("div",{className:"text-sm text-orange-600",children:"Annual Capacity (Head Days)"}),e.jsx("div",{className:"text-xl font-bold text-orange-700 font-mono",children:j.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-orange-500",children:[u.toLocaleString()," head  365 days"]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-center px-4 py-2 bg-white rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Projected Utilization"}),e.jsxs("div",{className:`text-xl font-bold font-mono ${C>100?"text-red-600":C>85?"text-amber-600":"text-blue-700"}`,children:[C.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center px-4 py-2 bg-white rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Last Year Utilization"}),e.jsxs("div",{className:`text-xl font-bold font-mono ${A>100?"text-red-600":A>85?"text-amber-600":"text-gray-700"}`,children:[A.toFixed(1),"%"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Projected Head Days"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:y.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-blue-500",children:[Pe||new Date().getFullYear()," Projection"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Last Year Actual"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700 font-mono",children:p.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(Pe||new Date().getFullYear())-1," Actual"]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${b>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${b>=0?"text-green-600":"text-red-600"}`,children:"Variance"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${b>=0?"text-green-700":"text-red-700"}`,children:[b>=0?"+":"",b.toLocaleString("en-US",{maximumFractionDigits:0})]}),e.jsxs("div",{className:`text-xs ${b>=0?"text-green-500":"text-red-500"}`,children:[N>=0?"+":"",N.toFixed(1),"% vs last year"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Avg Monthly Projected"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:(y/12).toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-orange-500",children:"Head days per month"})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Month"}),e.jsx("th",{className:"py-3 px-3 text-right font-semibold text-orange-700 bg-orange-50",children:"Capacity"}),e.jsxs("th",{className:"py-3 px-4 text-right font-semibold text-blue-700 bg-blue-50",children:[Pe||new Date().getFullYear()," Projected"]}),e.jsx("th",{className:"py-3 px-3 text-right font-semibold text-purple-700 bg-purple-50",children:"Util %"}),e.jsxs("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:[(Pe||new Date().getFullYear())-1," Actual"]}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Variance"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"% Change"})]})}),e.jsx("tbody",{children:i.map((M,R)=>{const Y=o[M]||{},_=Y.projected||0,X=Y.actual||0,U=_-X,B=X>0?(_-X)/X*100:0,k=u*d[R],F=k>0?_/k*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${R%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-4 font-medium text-gray-800",children:M}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-orange-700 bg-orange-50",children:k.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-2 bg-blue-50",children:e.jsx($e,{value:_,onChange:T=>g(M,"projected",T),decimals:0,className:"w-full px-3 py-1.5 border border-blue-200 rounded text-right font-mono bg-white"})}),e.jsx("td",{className:`py-2 px-3 text-right font-mono bg-purple-50 ${F>100?"text-red-600 font-bold":F>85?"text-amber-600":"text-purple-700"}`,children:u>0?`${F.toFixed(1)}%`:""}),e.jsx("td",{className:"py-2 px-2",children:e.jsx($e,{value:X,onChange:T=>g(M,"actual",T),decimals:0,className:"w-full px-3 py-1.5 border border-gray-200 rounded text-right font-mono"})}),e.jsxs("td",{className:`py-2 px-4 text-right font-mono ${U>=0?"text-green-600":"text-red-600"}`,children:[U>=0?"+":"",U.toLocaleString("en-US",{maximumFractionDigits:0})]}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${B>=0?"text-green-600":"text-red-600"}`,children:X>0?`${B>=0?"+":""}${B.toFixed(1)}%`:""})]},M)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Annual Total"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700 bg-orange-100",children:j.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-700 bg-blue-100",children:y.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:`py-3 px-3 text-right font-mono bg-purple-100 ${C>100?"text-red-700":"text-purple-700"}`,children:u>0?`${C.toFixed(1)}%`:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-700",children:p.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("td",{className:`py-3 px-4 text-right font-mono ${b>=0?"text-green-700":"text-red-700"}`,children:[b>=0?"+":"",b.toLocaleString("en-US",{maximumFractionDigits:0})]}),e.jsx("td",{className:`py-3 px-4 text-right font-mono ${N>=0?"text-green-700":"text-red-700"}`,children:p>0?`${N>=0?"+":""}${N.toFixed(1)}%`:""})]})})]})}),e.jsx("div",{className:"mt-6 grid grid-cols-4 gap-4",children:[{label:"Q1",months:["January","February","March"]},{label:"Q2",months:["April","May","June"]},{label:"Q3",months:["July","August","September"]},{label:"Q4",months:["October","November","December"]}].map(M=>{const R=M.months.reduce((X,U)=>{var B;return X+(((B=o[U])==null?void 0:B.projected)||0)},0),Y=M.months.reduce((X,U)=>{var B;return X+(((B=o[U])==null?void 0:B.actual)||0)},0),_=R-Y;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2 text-center",children:M.label}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Projected:"}),e.jsx("span",{className:"font-mono text-blue-700",children:R.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Actual:"}),e.jsx("span",{className:"font-mono text-gray-600",children:Y.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-t",children:[e.jsx("span",{className:"text-gray-600",children:"Variance:"}),e.jsxs("span",{className:`font-mono font-semibold ${_>=0?"text-green-600":"text-red-600"}`,children:[_>=0?"+":"",_.toLocaleString()]})]})]})]},M.label)})})]})})()]})}),D==="revenue"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-0",children:[{id:"yardage",label:"Yardage Income",icon:fr},{id:"other",label:"Other Income",icon:gs}].map(a=>e.jsxs("button",{onClick:()=>Er(a.id),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors ${Ze===a.id?"border-green-500 text-green-600 bg-green-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))})})}),Ze==="yardage"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(fr,{className:"w-6 h-6 text-green-600"}),"Yardage Income"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var p;const a=((p=s==null?void 0:s.cashFlow)==null?void 0:p.customFeeding)||{},o=a.sizeScope||{},i=a.revenue||{},d=["January","February","March","April","May","June","July","August","September","October","November","December"],m=(b,N)=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,revenue:{...i,[b]:N}}}})},g=i.yardageRatePerDay||0,j=d.map(b=>{var C;return(((C=o[b])==null?void 0:C.projected)||0)*g}).reduce((b,N)=>b+N,0),y=d.reduce((b,N)=>{var C;return b+(((C=o[N])==null?void 0:C.projected)||0)},0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-green-700 block mb-1",children:"Yardage Rate ($/Head/Day)"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:"$"}),e.jsx(ne,{value:g,onChange:b=>m("yardageRatePerDay",b),className:"w-24 px-3 py-2 border border-green-300 rounded-lg text-right font-mono text-lg font-bold bg-white"})]})]}),e.jsxs("div",{className:"border-l border-green-300 pl-6",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Projected Head Days"}),e.jsx("div",{className:"text-xl font-bold text-green-700 font-mono",children:y.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-green-500",children:"From Size & Scope projections"})]})]}),e.jsxs("div",{className:"text-center px-6 py-3 bg-white rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Yardage Income"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(j)})]})]})}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Monthly Yardage Income"}),e.jsx("div",{className:"border rounded-lg overflow-hidden mb-6",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Month"}),e.jsx("th",{className:"py-3 px-3 text-right font-semibold text-gray-600",children:"Days"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-blue-700 bg-blue-50",children:"Projected Head Days"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-orange-700 bg-orange-50",children:"Avg Head on Feed"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Rate/Day"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-green-700 bg-green-50",children:"Yardage Income"})]})}),e.jsx("tbody",{children:d.map((b,N)=>{var _;const C=((_=o[b])==null?void 0:_.projected)||0,A=C*g,L=Pe||new Date().getFullYear(),M=N,R=new Date(L,M+1,0).getDate(),Y=R>0?C/R:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${N%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-4 font-medium text-gray-800",children:b}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:R}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-blue-700 bg-blue-50",children:C.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-orange-700 bg-orange-50",children:Y.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-600",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(g)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-green-700 bg-green-50",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(A)})]},b)})}),e.jsx("tfoot",{children:(()=>{const b=Pe||new Date().getFullYear(),N=b%4===0&&b%100!==0||b%400===0?366:365,C=N>0?y/N:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Annual Total"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-gray-600",children:N}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-700 bg-blue-100",children:y.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono font-semibold text-orange-700 bg-orange-100",children:C.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-600",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(g)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700 bg-green-100",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(j)})]})})()})]})}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Quarterly Yardage Income Summary"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"Q1",months:["January","February","March"]},{label:"Q2",months:["April","May","June"]},{label:"Q3",months:["July","August","September"]},{label:"Q4",months:["October","November","December"]}].map(b=>{const N=b.months.reduce((A,L)=>{var M;return A+(((M=o[L])==null?void 0:M.projected)||0)},0),C=N*g;return e.jsxs("div",{className:"border rounded-lg p-4 bg-green-50",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2 text-center",children:b.label}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Head Days:"}),e.jsx("span",{className:"font-mono text-blue-700",children:N.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-t border-green-200",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Yardage Income:"}),e.jsx("span",{className:"font-mono font-semibold text-green-700",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(C)})]})]})]},b.label)})})]})})()]}),Ze==="other"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(gs,{className:"w-6 h-6 text-blue-600"}),"Other Income"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var b;const a=((b=s==null?void 0:s.cashFlow)==null?void 0:b.customFeeding)||{},o=a.revenue||{},i=(N,C)=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,revenue:{...o,[N]:C}}}})},d=o.processingIncome||0,m=o.vetMedIncome||0,g=o.interestIncome||0,u=o.beddingIncome||0,j=o.otherIncome||0,y=o.feedMarkupIncome||0,p=d+m+g+u+j+y;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 col-span-3",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Other Income"}),e.jsx("div",{className:"text-3xl font-bold text-blue-700 font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(p)}),e.jsx("div",{className:"text-xs text-blue-500",children:"Sum of all other income categories"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Income Categories"}),e.jsx("div",{className:"text-3xl font-bold text-green-700",children:"6"}),e.jsx("div",{className:"text-xs text-green-500",children:"Active categories"})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Income Category"}),e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-500",children:"Description"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-green-700 bg-green-50 w-48",children:"Annual Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Processing Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Charges for cattle processing services"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ne,{value:d,onChange:N=>i("processingIncome",N),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Vet & Medicine Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Reimbursement for veterinary and medical services"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ne,{value:m,onChange:N=>i("vetMedIncome",N),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Interest Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Interest charged on cattle owner accounts"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ne,{value:g,onChange:N=>i("interestIncome",N),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Bedding Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Charges for bedding materials provided"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ne,{value:u,onChange:N=>i("beddingIncome",N),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Feed Markup Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Margin on feed sales to cattle owners"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ne,{value:y,onChange:N=>i("feedMarkupIncome",N),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Other Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Miscellaneous income not categorized above"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ne,{value:j,onChange:N=>i("otherIncome",N),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]})]}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-green-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Total Other Income"}),e.jsx("td",{className:"py-3 px-4"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700 text-lg",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(p)})]})})]})}),e.jsx("div",{className:"mt-6 grid grid-cols-6 gap-2",children:[{label:"Processing",value:d,color:"bg-blue-500"},{label:"Vet & Med",value:m,color:"bg-purple-500"},{label:"Interest",value:g,color:"bg-amber-500"},{label:"Bedding",value:u,color:"bg-orange-500"},{label:"Feed Markup",value:y,color:"bg-green-500"},{label:"Other",value:j,color:"bg-gray-500"}].map(N=>{const C=p>0?N.value/p*100:0;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-32 bg-gray-100 rounded-lg relative overflow-hidden mb-2",children:e.jsx("div",{className:`absolute bottom-0 left-0 right-0 ${N.color} transition-all`,style:{height:`${C}%`}})}),e.jsx("div",{className:"text-xs font-medium text-gray-700",children:N.label}),e.jsxs("div",{className:"text-xs text-gray-500",children:[C.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm font-mono font-semibold text-gray-700",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(N.value)})]},N.label)})})]})})()]})]}),D==="feedingSummary"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-6 h-6 text-orange-600"}),"Feeding Summary"]})}),(()=>{var g;const a=((g=s==null?void 0:s.cashFlow)==null?void 0:g.customFeeding)||{},o=a.feedingSummary||{};a.feedInventory;const i=(u,j)=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedingSummary:{...o,[u]:j}}}})},d=o.headDays>0&&o.totalLbFed>0?o.totalLbFed/o.headDays:0,m=o.headDays>0&&o.totalDryMatterFed>0?o.totalDryMatterFed/o.headDays:0;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4 text-center bg-gray-100 -mx-4 -mt-4 px-4 py-2 rounded-t-lg",children:"Current Invoice Period"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Head"}),e.jsx($e,{value:o.currentHead||0,onChange:u=>i("currentHead",u),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Head Days"}),e.jsx($e,{value:o.headDays||0,onChange:u=>i("headDays",u),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Average Days on Feed"}),e.jsx($e,{value:o.avgDaysOnFeed||0,onChange:u=>i("avgDaysOnFeed",u),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Estimated Avg Daily Gain (lbs)"}),e.jsx($e,{value:o.estimatedADG||0,onChange:u=>i("estimatedADG",u),decimals:2,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total lb Fed"}),e.jsx($e,{value:o.totalLbFed||0,onChange:u=>i("totalLbFed",u),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Average lb Fed"}),e.jsxs("span",{className:"font-mono text-gray-600 bg-gray-100 px-3 py-2 rounded",children:[d.toFixed(0)," lbs"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Dry Matter lb Fed"}),e.jsx($e,{value:o.totalDryMatterFed||0,onChange:u=>i("totalDryMatterFed",u),decimals:2,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Average Dry Matter lb Fed"}),e.jsxs("span",{className:"font-mono text-gray-600 bg-gray-100 px-3 py-2 rounded",children:[m.toFixed(2)," lbs"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Est. Average Weight"}),e.jsx($e,{value:o.currentEstAvgWeight||0,onChange:u=>i("currentEstAvgWeight",u),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Estimated Break Even CWT"}),e.jsx(ne,{value:o.estimatedBreakEvenCWT||0,onChange:u=>i("estimatedBreakEvenCWT",u),className:"w-32 px-3 py-2 border rounded text-right font-mono"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4 text-center bg-gray-100 -mx-4 -mt-4 px-4 py-2 rounded-t-lg",children:"Total Through Period"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Head (Cumulative)"}),e.jsx($e,{value:o.totalHeadCumulative||0,onChange:u=>i("totalHeadCumulative",u),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Head Days (Cumulative)"}),e.jsx($e,{value:o.totalHeadDaysCumulative||0,onChange:u=>i("totalHeadDaysCumulative",u),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Avg Days on Feed"}),e.jsx($e,{value:o.totalAvgDaysOnFeed||0,onChange:u=>i("totalAvgDaysOnFeed",u),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Est. ADG (lbs)"}),e.jsx($e,{value:o.totalEstimatedADG||0,onChange:u=>i("totalEstimatedADG",u),decimals:2,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total lb Fed (Cumulative)"}),e.jsx($e,{value:o.totalLbFedCumulative||0,onChange:u=>i("totalLbFedCumulative",u),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Avg lb Fed (Cumulative)"}),e.jsxs("span",{className:"font-mono text-gray-600 bg-gray-100 px-3 py-2 rounded",children:[o.totalHeadDaysCumulative>0?(o.totalLbFedCumulative/o.totalHeadDaysCumulative).toFixed(0):0," lbs"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Dry Matter Fed (Cum)"}),e.jsx($e,{value:o.totalDryMatterFedCumulative||0,onChange:u=>i("totalDryMatterFedCumulative",u),decimals:2,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Avg Dry Matter lb Fed (Cum)"}),e.jsxs("span",{className:"font-mono text-gray-600 bg-gray-100 px-3 py-2 rounded",children:[o.totalHeadDaysCumulative>0?(o.totalDryMatterFedCumulative/o.totalHeadDaysCumulative).toFixed(2):0," lbs"]})]})]})]})]})})})()]})}),D==="feedInventory"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-6 h-6 text-amber-600"}),"Feed Inventory & Costs"]}),e.jsxs("button",{onClick:()=>{var d;const a=((d=s==null?void 0:s.cashFlow)==null?void 0:d.customFeeding)||{},o=a.feedInventory||[],i={id:`feed-${Date.now()}`,name:"",asFedAmount:0,asFedCostPerTon:0,dryMatterAmount:0,dryMatterCostPerTon:0,totalCost:0};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedInventory:[...o,i]}}})},className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Add Feed"]})]}),(()=>{var j;const a=((j=s==null?void 0:s.cashFlow)==null?void 0:j.customFeeding)||{},o=a.feedInventory||[],i=o.reduce((y,p)=>y+(p.asFedAmount||0),0),d=o.reduce((y,p)=>y+(p.dryMatterAmount||0),0),m=o.reduce((y,p)=>y+(p.totalCost||0),0),g=i>0?m/i*2e3:0,u=d>0?m/d*2e3:0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total As Fed (lbs)"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:i.toLocaleString()})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Avg As Fed Cost/Ton"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h(g)})]}),e.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 border border-teal-200",children:[e.jsx("div",{className:"text-sm text-teal-600 font-medium",children:"Total Dry Matter (lbs)"}),e.jsx("div",{className:"text-2xl font-bold text-teal-700 font-mono",children:d.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Feed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:h(m)})]})]}),o.length===0?e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(Yt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No feeds added yet."}),e.jsx("span",{className:"text-amber-600",children:'Click "Add Feed" to start adding your feed inventory.'})]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Feed"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"As Fed Amount (lbs)"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"As Fed Cost/Ton"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Dry Matter Amount"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Dry Matter Cost/Ton"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right bg-green-50",children:"Total Feed Cost"}),e.jsx("th",{className:"py-3 px-2 w-10"})]})}),e.jsx("tbody",{children:o.map(y=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:y.name||"",onChange:p=>{const b=o.map(N=>N.id===y.id?{...N,name:p.target.value}:N);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedInventory:b}}})},placeholder:"Feed name",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx($e,{value:y.asFedAmount||0,onChange:p=>{const b=p>0&&y.asFedCostPerTon>0?p/2e3*y.asFedCostPerTon:y.totalCost||0,N=o.map(C=>C.id===y.id?{...C,asFedAmount:p,totalCost:b}:C);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedInventory:N}}})},decimals:0,className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ne,{value:y.asFedCostPerTon||0,onChange:p=>{const b=y.asFedAmount>0&&p>0?y.asFedAmount/2e3*p:y.totalCost||0,N=o.map(C=>C.id===y.id?{...C,asFedCostPerTon:p,totalCost:b}:C);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedInventory:N}}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx($e,{value:y.dryMatterAmount||0,onChange:p=>{const b=o.map(N=>N.id===y.id?{...N,dryMatterAmount:p}:N);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedInventory:b}}})},decimals:0,className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ne,{value:y.dryMatterCostPerTon||0,onChange:p=>{const b=o.map(N=>N.id===y.id?{...N,dryMatterCostPerTon:p}:N);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedInventory:b}}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsx(ne,{value:y.totalCost||0,onChange:p=>{const b=o.map(N=>N.id===y.id?{...N,totalCost:p}:N);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedInventory:b}}})},className:"w-32 px-2 py-1 border border-green-300 rounded text-right font-mono font-semibold"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("button",{onClick:()=>{if(confirm("Delete this feed?")){const p=o.filter(b=>b.id!==y.id);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedInventory:p}}})}},className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},y.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Total"}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono",children:[i.toLocaleString()," lbs"]}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:h(g)}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono",children:[d.toLocaleString("en-US",{maximumFractionDigits:0})," lbs"]}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:h(u)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700 bg-green-50",children:h(m)}),e.jsx("td",{})]})})]})}),e.jsxs("div",{className:"mt-6 bg-amber-50 rounded-lg border border-amber-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-amber-800 mb-3",children:"Quick Add Common Feeds"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Corn Silage","Mixed Hay","Cracked Corn","Alfalfa Hay","Distillers","Earlage","HMC","Liquid Protein","Cane Silage","Wheatlage","Cattle Premix","QLF Liquid","MGA"].map(y=>e.jsxs("button",{onClick:()=>{if(!o.some(b=>b.name===y)){const b={id:`feed-${Date.now()}-${Math.random()}`,name:y,asFedAmount:0,asFedCostPerTon:0,dryMatterAmount:0,dryMatterCostPerTon:0,totalCost:0};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedInventory:[...o,b]}}})}},className:"px-3 py-1 text-sm bg-white border border-amber-300 rounded hover:bg-amber-100 text-amber-800",children:["+ ",y]},y))})]})]})})()]})}),D==="expenses"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(gs,{className:"w-6 h-6 text-red-600"}),"Summary of All Feeding Expenses"]})}),(()=>{var A;const a=((A=s==null?void 0:s.cashFlow)==null?void 0:A.customFeeding)||{},o=a.feedingSummary||{},i=a.expenses||{},d=a.feedInventory||[],m=(L,M)=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,expenses:{...i,[L]:M}}}})},g=o.headDays||0,u=g>0&&(o.estimatedADG||0)>0?g*o.estimatedADG:0,j=o.totalHeadDaysCumulative||0,y=j>0&&(o.totalEstimatedADG||o.estimatedADG||0)>0?j*(o.totalEstimatedADG||o.estimatedADG):0,p=d.reduce((L,M)=>L+(M.totalCost||0),0),b=[{key:"feed",label:"Feed",current:i.feed||p,cumulative:i.feedCumulative||0},{key:"yardage",label:"Yardage",current:i.yardage||0,cumulative:i.yardageCumulative||0},{key:"delivery",label:"Delivery",current:i.delivery||0,cumulative:i.deliveryCumulative||0},{key:"managementFee",label:"Management Fee",current:i.managementFee||0,cumulative:i.managementFeeCumulative||0},{key:"insurance",label:"Insurance",current:i.insurance||0,cumulative:i.insuranceCumulative||0},{key:"processing",label:"Processing",current:i.processing||0,cumulative:i.processingCumulative||0},{key:"vetMed",label:"Vet & Med",current:i.vetMed||0,cumulative:i.vetMedCumulative||0},{key:"bedding",label:"Bedding",current:i.bedding||0,cumulative:i.beddingCumulative||0},{key:"profitShare",label:"Profit Share",current:i.profitShare||0,cumulative:i.profitShareCumulative||0},{key:"interest",label:"Interest",current:i.interest||0,cumulative:i.interestCumulative||0},{key:"salesTax",label:"Sales Tax or GST",current:i.salesTax||0,cumulative:i.salesTaxCumulative||0},{key:"other",label:"Other",current:i.other||0,cumulative:i.otherCumulative||0}],N=b.reduce((L,M)=>L+M.current,0),C=b.reduce((L,M)=>L+M.cumulative,0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Expense Category"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Current Invoice Period"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Per Head Day"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-purple-700 text-right bg-purple-50",children:"Per lb/Gain"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Through Period"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Per Head Day"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-purple-700 text-right bg-purple-50",children:"Per lb/Gain"})]})}),e.jsx("tbody",{children:b.map(L=>{const M=g>0?L.current/g:0,R=u>0?L.current/u:0,Y=j>0?L.cumulative/j:0,_=y>0?L.cumulative/y:0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-700",children:L.label}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ne,{value:L.current,onChange:X=>m(L.key,X),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-blue-700 bg-blue-50",children:h(M)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-700 bg-purple-50",children:h(R)}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ne,{value:L.cumulative,onChange:X=>m(`${L.key}Cumulative`,X),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-blue-700 bg-blue-50",children:h(Y)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-700 bg-purple-50",children:h(_)})]},L.key)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-bold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-800",children:"Total Expenses"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700",children:h(N)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-800 bg-blue-100",children:h(g>0?N/g:0)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-800 bg-purple-100",children:h(u>0?N/u:0)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700",children:h(C)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-800 bg-blue-100",children:h(j>0?C/j:0)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-800 bg-purple-100",children:h(y>0?C/y:0)})]})})]})}),e.jsx("div",{className:"mt-6 bg-red-100 border-2 border-red-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-800",children:"Your Total Amount Due"}),e.jsx("div",{className:"text-sm text-red-600",children:"Current Invoice Period"})]}),e.jsx("div",{className:"text-3xl font-bold font-mono text-red-800",children:h(N)})]})})]})})()]})}),D==="capacity"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($r,{className:"w-6 h-6 text-orange-600"}),"Yard Capacity & Pens"]}),e.jsxs("button",{onClick:()=>{var d;const a=((d=s==null?void 0:s.cashFlow)==null?void 0:d.customFeeding)||{},o=a.pens||[],i={id:`pen-${Date.now()}`,name:`Pen ${o.length+1}`,headCapacity:0,occupancyPercent:85,notes:""};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,pens:[...o,i]}}})},className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Add Pen"]})]}),(()=>{var g;const o=(((g=s==null?void 0:s.cashFlow)==null?void 0:g.customFeeding)||{}).pens||[],i=o.reduce((u,j)=>u+(j.headCapacity||0),0),d=o.length>0?o.reduce((u,j)=>u+(j.occupancyPercent||0),0)/o.length:0,m=i*(d/100);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Pens"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:o.length})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Capacity"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:i.toLocaleString()}),e.jsx("div",{className:"text-xs text-blue-500",children:"head"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Avg Occupancy"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:[d.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Avg Head on Feed"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:m.toLocaleString("en-US",{maximumFractionDigits:0})})]})]})})(),(((Am=(Fm=s==null?void 0:s.cashFlow)==null?void 0:Fm.customFeeding)==null?void 0:Am.pens)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700",children:"Pen Name"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Head Capacity"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Occupancy %"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Avg Head"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700",children:"Notes"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 w-16"})]})}),e.jsx("tbody",{children:(((Dm=(km=s==null?void 0:s.cashFlow)==null?void 0:km.customFeeding)==null?void 0:Dm.pens)||[]).map(a=>{const o=(a.headCapacity||0)*((a.occupancyPercent||0)/100);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4",children:e.jsx("input",{type:"text",value:a.name||"",onChange:i=>{var g;const d=((g=s==null?void 0:s.cashFlow)==null?void 0:g.customFeeding)||{},m=(d.pens||[]).map(u=>u.id===a.id?{...u,name:i.target.value}:u);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...d,pens:m}}})},className:"w-full px-2 py-1 border border-gray-200 rounded"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx($e,{value:a.headCapacity||0,onChange:i=>{var g;const d=((g=s==null?void 0:s.cashFlow)==null?void 0:g.customFeeding)||{},m=(d.pens||[]).map(u=>u.id===a.id?{...u,headCapacity:i}:u);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...d,pens:m}}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx($e,{value:a.occupancyPercent||0,onChange:i=>{var g;const d=((g=s==null?void 0:s.cashFlow)==null?void 0:g.customFeeding)||{},m=(d.pens||[]).map(u=>u.id===a.id?{...u,occupancyPercent:i}:u);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...d,pens:m}}})},decimals:1,className:"w-20 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-600",children:o.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("input",{type:"text",value:a.notes||"",onChange:i=>{var g;const d=((g=s==null?void 0:s.cashFlow)==null?void 0:g.customFeeding)||{},m=(d.pens||[]).map(u=>u.id===a.id?{...u,notes:i.target.value}:u);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...d,pens:m}}})},placeholder:"Notes...",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("button",{onClick:()=>{var m;const i=((m=s==null?void 0:s.cashFlow)==null?void 0:m.customFeeding)||{},d=(i.pens||[]).filter(g=>g.id!==a.id);I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...i,pens:d}}})},className:"text-red-500 hover:text-red-700",children:e.jsx(Qs,{className:"w-4 h-4"})})})]},a.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:(((Lm=(Tm=s==null?void 0:s.cashFlow)==null?void 0:Tm.customFeeding)==null?void 0:Lm.pens)||[]).reduce((a,o)=>a+(o.headCapacity||0),0).toLocaleString()}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:(()=>{var o,i;const a=((i=(o=s==null?void 0:s.cashFlow)==null?void 0:o.customFeeding)==null?void 0:i.pens)||[];return a.length>0?(a.reduce((d,m)=>d+(m.occupancyPercent||0),0)/a.length).toFixed(1)+"%":""})()}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-purple-700",children:(()=>{var o,i;return(((i=(o=s==null?void 0:s.cashFlow)==null?void 0:o.customFeeding)==null?void 0:i.pens)||[]).reduce((d,m)=>d+(m.headCapacity||0)*((m.occupancyPercent||0)/100),0).toLocaleString("en-US",{maximumFractionDigits:0})})()}),e.jsx("td",{colSpan:"2"})]})})]})}):e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6 text-center",children:[e.jsx($r,{className:"w-12 h-12 text-orange-400 mx-auto mb-3"}),e.jsx("p",{className:"text-orange-700 font-medium",children:"No pens configured"}),e.jsx("p",{className:"text-orange-600 text-sm",children:'Click "Add Pen" to start setting up your yard capacity.'})]}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Average Days on Feed"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{value:((Im=(Em=s==null?void 0:s.cashFlow)==null?void 0:Em.customFeeding)==null?void 0:Im.avgDaysOnFeed)||150,onChange:a=>{var i;const o=((i=s==null?void 0:s.cashFlow)==null?void 0:i.customFeeding)||{};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...o,avgDaysOnFeed:a}}})},className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("span",{className:"text-gray-500",children:"days"})]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:e.jsxs("div",{children:["Turns per year: ",e.jsx("span",{className:"font-mono font-semibold",children:(365/(((Rm=(Sm=s==null?void 0:s.cashFlow)==null?void 0:Sm.customFeeding)==null?void 0:Rm.avgDaysOnFeed)||150)).toFixed(2)})]})})]})})]})}),D==="yardage"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(fr,{className:"w-6 h-6 text-green-600"}),"Yardage & Income Settings"]})}),(()=>{var _;const a=((_=s==null?void 0:s.cashFlow)==null?void 0:_.customFeeding)||{},o=a.pens||[],i=o.reduce((X,U)=>X+(U.headCapacity||0),0),d=o.length>0?o.reduce((X,U)=>X+(U.occupancyPercent||0),0)/o.length:0,m=i*(d/100),g=a.avgDaysOnFeed||150,u=g>0?365/g:0,j=m*u,y=a.yardageRate||0,p=m*365*y,b=a.feedMarkupPercent||0,N=a.feedCostPerHeadPerDay||0,C=m*365*N,A=C*(b/100),L=a.processingFeePerHead||0,M=j*L,R=a.otherIncome||0,Y=p+A+M+R;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 border-b pb-2",children:"Yardage Charges"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yardage Rate (per head/day)"}),e.jsx(ne,{value:a.yardageRate||0,onChange:X=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,yardageRate:X}}})},className:"w-40 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Annual Yardage Income"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:h(p)}),e.jsxs("div",{className:"text-xs text-green-500 mt-1",children:[m.toLocaleString("en-US",{maximumFractionDigits:0})," head  365 days  ",h(y)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 border-b pb-2",children:"Feed Markup"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feed Markup Percentage"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{value:a.feedMarkupPercent||0,onChange:X=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedMarkupPercent:X}}})},decimals:1,className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("span",{className:"text-gray-500",children:"%"})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Annual Feed Markup Income"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h(A)}),e.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:[h(C)," feed cost  ",b,"%"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 border-b pb-2",children:"Processing Fees"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Fee (per head)"}),e.jsx(ne,{value:a.processingFeePerHead||0,onChange:X=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,processingFeePerHead:X}}})},className:"w-40 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Annual Processing Income"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:h(M)}),e.jsxs("div",{className:"text-xs text-purple-500 mt-1",children:[j.toLocaleString("en-US",{maximumFractionDigits:0})," head  ",h(L)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 border-b pb-2",children:"Other Income"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Annual Income"}),e.jsx(ne,{value:a.otherIncome||0,onChange:X=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,otherIncome:X}}})},className:"w-40 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manure sales, commodity commissions, etc."})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Other Income"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h(R)})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200 p-6",children:[e.jsx("h3",{className:"font-bold text-green-800 mb-4",children:"Total Revenue Summary"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Yardage"}),e.jsx("div",{className:"text-lg font-bold font-mono text-green-700",children:h(p)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Feed Markup"}),e.jsx("div",{className:"text-lg font-bold font-mono text-blue-700",children:h(A)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Processing"}),e.jsx("div",{className:"text-lg font-bold font-mono text-purple-700",children:h(M)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Other"}),e.jsx("div",{className:"text-lg font-bold font-mono text-amber-700",children:h(R)})]}),e.jsxs("div",{className:"text-center bg-white rounded-lg p-2 border border-green-300",children:[e.jsx("div",{className:"text-xs text-green-600 uppercase tracking-wide font-semibold",children:"Total Revenue"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-green-800",children:h(Y)})]})]})]})]})})()]})}),D==="feed"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-6 h-6 text-amber-600"}),"Feed Costs"]})}),(()=>{var j,y,p,b,N,C,A,L,M,R,Y;const a=((j=s==null?void 0:s.cashFlow)==null?void 0:j.customFeeding)||{},o=a.pens||[],i=o.reduce((_,X)=>_+(X.headCapacity||0),0),d=o.length>0?o.reduce((_,X)=>_+(X.occupancyPercent||0),0)/o.length:0,m=i*(d/100),g=a.feedCostPerHeadPerDay||0,u=m*365*g;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Avg Head on Feed"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:m.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Feed Cost/Head/Day"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h(g)})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Daily Feed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:h(m*g)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Annual Feed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:h(u)})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Feed Cost per Head per Day"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Enter the average feed cost per head per day. This is typically the blended cost of all feed ingredients."}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Head per Day"}),e.jsx(ne,{value:a.feedCostPerHeadPerDay||0,onChange:_=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedCostPerHeadPerDay:_}}})},className:"w-40 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("div",{children:["Monthly per head: ",e.jsx("span",{className:"font-mono font-semibold",children:h(g*30)})]}),e.jsxs("div",{children:["Per head @ 150 days: ",e.jsx("span",{className:"font-mono font-semibold",children:h(g*150)})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-amber-50 rounded-lg border border-amber-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-amber-800 mb-4",children:"Feed Cost Breakdown (Reference)"}),e.jsx("p",{className:"text-sm text-amber-600 mb-4",children:"Optional: Break down your feed costs by ingredient for reference. This helps validate your per-head-per-day cost."}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Corn/Grain"}),e.jsx(ne,{value:((y=a.feedBreakdown)==null?void 0:y.corn)||0,onChange:_=>{const X=a.feedBreakdown||{};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedBreakdown:{...X,corn:_}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Silage"}),e.jsx(ne,{value:((p=a.feedBreakdown)==null?void 0:p.silage)||0,onChange:_=>{const X=a.feedBreakdown||{};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedBreakdown:{...X,silage:_}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Hay/Roughage"}),e.jsx(ne,{value:((b=a.feedBreakdown)==null?void 0:b.hay)||0,onChange:_=>{const X=a.feedBreakdown||{};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedBreakdown:{...X,hay:_}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Distillers/Byproducts"}),e.jsx(ne,{value:((N=a.feedBreakdown)==null?void 0:N.distillers)||0,onChange:_=>{const X=a.feedBreakdown||{};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedBreakdown:{...X,distillers:_}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Supplement/Mineral"}),e.jsx(ne,{value:((C=a.feedBreakdown)==null?void 0:C.supplement)||0,onChange:_=>{const X=a.feedBreakdown||{};I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,feedBreakdown:{...X,supplement:_}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between font-semibold",children:[e.jsx("span",{className:"text-sm text-amber-800",children:"Breakdown Total"}),e.jsx("span",{className:"font-mono text-amber-800",children:h((((A=a.feedBreakdown)==null?void 0:A.corn)||0)+(((L=a.feedBreakdown)==null?void 0:L.silage)||0)+(((M=a.feedBreakdown)==null?void 0:M.hay)||0)+(((R=a.feedBreakdown)==null?void 0:R.distillers)||0)+(((Y=a.feedBreakdown)==null?void 0:Y.supplement)||0))})]})]})]})]})]})})()]})}),D==="operating"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Gs,{className:"w-6 h-6 text-gray-600"}),"Operating Expenses"]})}),(()=>{var C;const a=((C=s==null?void 0:s.cashFlow)==null?void 0:C.customFeeding)||{},o=a.expenses||{},i=(o.labor||0)+(o.utilities||0)+(o.repairs||0)+(o.fuel||0)+(o.insurance||0)+(o.vetSupplies||0)+(o.bedding||0)+(o.deathLoss||0)+(o.misc||0),d=a.pens||[],m=d.reduce((A,L)=>A+(L.headCapacity||0),0),g=d.length>0?d.reduce((A,L)=>A+(L.occupancyPercent||0),0)/d.length:0,u=m*(g/100),j=a.avgDaysOnFeed||150,y=j>0?365/j:0,p=u*y,b=p>0?i/p:0,N=(A,L)=>{I({cashFlow:{...s==null?void 0:s.cashFlow,customFeeding:{...a,expenses:{...o,[A]:L}}}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Operating Expenses"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:h(i)})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Head Fed/Year"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:p.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Operating Cost/Head"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:h(b)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Monthly Operating"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h(i/12)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Labor & Personnel"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Labor (Annual)"}),e.jsx(ne,{value:o.labor||0,onChange:A=>N("labor",A),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Utilities & Overhead"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Utilities"}),e.jsx(ne,{value:o.utilities||0,onChange:A=>N("utilities",A),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Insurance"}),e.jsx(ne,{value:o.insurance||0,onChange:A=>N("insurance",A),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Equipment & Maintenance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Repairs & Maintenance"}),e.jsx(ne,{value:o.repairs||0,onChange:A=>N("repairs",A),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Fuel & Equipment"}),e.jsx(ne,{value:o.fuel||0,onChange:A=>N("fuel",A),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Animal Health & Supplies"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Vet & Health Supplies"}),e.jsx(ne,{value:o.vetSupplies||0,onChange:A=>N("vetSupplies",A),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Bedding"}),e.jsx(ne,{value:o.bedding||0,onChange:A=>N("bedding",A),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Death Loss (absorbed)"}),e.jsx(ne,{value:o.deathLoss||0,onChange:A=>N("deathLoss",A),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Other Expenses"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Miscellaneous"}),e.jsx(ne,{value:o.misc||0,onChange:A=>N("misc",A),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg border border-red-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-red-800 mb-3",children:"Expense Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Labor"}),e.jsx("span",{className:"font-mono",children:h(o.labor||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Utilities"}),e.jsx("span",{className:"font-mono",children:h(o.utilities||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Repairs"}),e.jsx("span",{className:"font-mono",children:h(o.repairs||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fuel"}),e.jsx("span",{className:"font-mono",children:h(o.fuel||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Insurance"}),e.jsx("span",{className:"font-mono",children:h(o.insurance||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vet & Supplies"}),e.jsx("span",{className:"font-mono",children:h(o.vetSupplies||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bedding"}),e.jsx("span",{className:"font-mono",children:h(o.bedding||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Death Loss"}),e.jsx("span",{className:"font-mono",children:h(o.deathLoss||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Miscellaneous"}),e.jsx("span",{className:"font-mono",children:h(o.misc||0)})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-red-200",children:[e.jsx("span",{className:"text-red-800",children:"TOTAL"}),e.jsx("span",{className:"font-mono text-red-800",children:h(i)})]})]})]})]})]})]})})()]})})]}),se==="feedlot"&&e.jsx("main",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(u0,{className:"w-10 h-10 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Feedlot Enterprise"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-lg mx-auto",children:"The Feedlot enterprise module is coming soon. This will include feeder cattle purchases, feed costs, death loss tracking, closeout analysis, and finished cattle sales."}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx("button",{onClick:()=>ue(null),className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Back to Enterprises"})})]})})]}),t==="cropInsurance"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-purple-700 to-purple-600 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>r("landing"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Back to Dashboard",children:e.jsx(Qn,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(Rr,{className:"w-7 h-7"}),"Crop Insurance"]}),e.jsx("p",{className:"text-purple-200 text-sm",children:re==null?void 0:re.name})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-purple-200 text-xs block mb-1",children:"Crop Year"}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white font-semibold",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,className:"text-gray-800",children:i},i)})})]})})]})})}),e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"insuranceSummary",label:"Insurance Summary",icon:zo},{id:"guarantees",label:"Guarantees",icon:Rr},{id:"mpci",label:"MPCI Elections",icon:Ue},{id:"areaPlans",label:"Area Plans",icon:Yt},{id:"privateProducts",label:"Private Products",icon:al}].map(a=>e.jsxs("button",{onClick:()=>He(a.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${ye===a.id?"border-purple-600 text-purple-700 bg-purple-50":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[ye==="insuranceSummary"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(zo,{className:"w-6 h-6 text-blue-600"}),"Crop Insurance Summary"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var C,A;const a=((C=s==null?void 0:s.cashFlow)==null?void 0:C.crops)||[],o=((A=s==null?void 0:s.cashFlow)==null?void 0:A.springPrices)||{},i=a.reduce((L,M)=>{var Y;const R=(M.plannedAcres||0)*(M.sharePercent||100)/100;return L+R*(((Y=M.mpciElection)==null?void 0:Y.premiumPerAcre)||0)},0),d=a.reduce((L,M)=>{var Y,_;const R=(M.plannedAcres||0)*(M.sharePercent||100)/100;return L+((Y=M.areaPlan)!=null&&Y.scoEnabled?R*(((_=M.areaPlan)==null?void 0:_.scoPerAcre)||0):0)},0),m=a.reduce((L,M)=>{var Y,_;const R=(M.plannedAcres||0)*(M.sharePercent||100)/100;return L+((Y=M.areaPlan)!=null&&Y.ecoEnabled?R*(((_=M.areaPlan)==null?void 0:_.ecoPerAcre)||0):0)},0),g=a.reduce((L,M)=>{var Y,_,X;const R=(M.plannedAcres||0)*(M.sharePercent||100)/100;return L+((Y=M.areaPlan)!=null&&Y.marginPlan&&((_=M.areaPlan)==null?void 0:_.marginPlan)!=="none"?R*(((X=M.areaPlan)==null?void 0:X.marginPerAcre)||0):0)},0),u=a.reduce((L,M)=>{var Y,_;const R=(M.plannedAcres||0)*(M.sharePercent||100)/100;return L+((Y=M.privateInsurance)!=null&&Y.hailEnabled?R*(((_=M.privateInsurance)==null?void 0:_.hailPerAcre)||0):0)},0),j=a.reduce((L,M)=>{var Y,_;const R=(M.plannedAcres||0)*(M.sharePercent||100)/100;return L+((Y=M.privateInsurance)!=null&&Y.windEnabled?R*(((_=M.privateInsurance)==null?void 0:_.windPerAcre)||0):0)},0),y=i+d+m+g+u+j,p=a.reduce((L,M)=>L+(M.plannedAcres||0)*(M.sharePercent||100)/100,0),b=a.reduce((L,M)=>{var _;const R=(M.plannedAcres||0)*(M.sharePercent||100)/100,Y=(((_=M.mpciElection)==null?void 0:_.coverageLevel)||75)/100;return L+R*(M.aph||0)*Y},0),N=a.reduce((L,M)=>{var X,U;const R=(M.plannedAcres||0)*(M.sharePercent||100)/100,Y=(((X=M.mpciElection)==null?void 0:X.coverageLevel)||75)/100,_=o[M.crop]||((U=M.mpciElection)==null?void 0:U.projectedPrice)||0;return L+R*(M.aph||0)*Y*_},0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Insurance Premium"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h(y)}),e.jsx("div",{className:"text-xs text-blue-500",children:p>0?`$${(y/p).toFixed(2)}/acre`:""})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres Insured"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:p.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("div",{className:"text-xs text-green-500",children:["Across ",a.length," fields"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Guaranteed Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:b.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-purple-500",children:"Based on MPCI coverage"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Revenue Guarantee"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h(N)}),e.jsx("div",{className:"text-xs text-amber-500",children:"At spring projected prices"})]})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Premium Breakdown by Type"}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"MPCI"}),e.jsx("div",{className:"text-lg font-bold text-gray-800 font-mono",children:h(i)})]}),e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-3 border border-cyan-200",children:[e.jsx("div",{className:"text-xs text-cyan-600 font-medium",children:"SCO"}),e.jsx("div",{className:"text-lg font-bold text-cyan-700 font-mono",children:h(d)})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"ECO"}),e.jsx("div",{className:"text-lg font-bold text-green-700 font-mono",children:h(m)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"MP/MCO"}),e.jsx("div",{className:"text-lg font-bold text-purple-700 font-mono",children:h(g)})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 border border-orange-200",children:[e.jsx("div",{className:"text-xs text-orange-600 font-medium",children:"Hail"}),e.jsx("div",{className:"text-lg font-bold text-orange-700 font-mono",children:h(u)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Wind"}),e.jsx("div",{className:"text-lg font-bold text-red-700 font-mono",children:h(j)})]})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Field-by-Field Insurance Detail"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This data flows to Cash Flow projections as variable crop expense."}),a.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Guar. Bu"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-amber-700 text-right bg-amber-50",children:"Rev. Guar."}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"MPCI"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-cyan-700 text-right",children:"SCO"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right",children:"ECO"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-purple-700 text-right",children:"MP/MCO"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-orange-700 text-right",children:"Hail"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-red-700 text-right",children:"Wind"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-800 text-right bg-gray-100",children:"Total"})]})}),e.jsx("tbody",{children:a.map((L,M)=>{var q,W,K,xe,Ae,G,S,Q,ie,fe,he,Be,_e,Re;const R=(L.plannedAcres||0)*(L.sharePercent||100)/100,Y=(((q=L.mpciElection)==null?void 0:q.coverageLevel)||75)/100,_=o[L.crop]||((W=L.mpciElection)==null?void 0:W.projectedPrice)||0,X=R*(L.aph||0)*Y,U=X*_,B=R*(((K=L.mpciElection)==null?void 0:K.premiumPerAcre)||0),k=(xe=L.areaPlan)!=null&&xe.scoEnabled?R*(((Ae=L.areaPlan)==null?void 0:Ae.scoPerAcre)||0):0,F=(G=L.areaPlan)!=null&&G.ecoEnabled?R*(((S=L.areaPlan)==null?void 0:S.ecoPerAcre)||0):0,T=(Q=L.areaPlan)!=null&&Q.marginPlan&&((ie=L.areaPlan)==null?void 0:ie.marginPlan)!=="none"?R*(((fe=L.areaPlan)==null?void 0:fe.marginPerAcre)||0):0,w=(he=L.privateInsurance)!=null&&he.hailEnabled?R*(((Be=L.privateInsurance)==null?void 0:Be.hailPerAcre)||0):0,E=(_e=L.privateInsurance)!=null&&_e.windEnabled?R*(((Re=L.privateInsurance)==null?void 0:Re.windPerAcre)||0):0,z=B+k+F+T+w+E;return e.jsxs("tr",{className:`border-b border-gray-100 ${M%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:L.fieldName}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:L.crop}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:R.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:L.aph||0}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-blue-700 bg-blue-50",children:X.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-amber-700 bg-amber-50",children:h(U)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:h(B)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-cyan-700",children:k>0?h(k):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-green-700",children:F>0?h(F):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-700",children:T>0?h(T):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-orange-700",children:w>0?h(w):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-red-700",children:E>0?h(E):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-800 bg-gray-100",children:h(z)})]},L.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-200 font-semibold",children:[e.jsx("td",{colSpan:"2",className:"py-3 px-3 text-gray-700",children:"TOTALS"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:p.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-3"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700 bg-blue-100",children:b.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-amber-700 bg-amber-100",children:h(N)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:h(i)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-cyan-700",children:h(d)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:h(m)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-700",children:h(g)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700",children:h(u)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700",children:h(j)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-gray-800 bg-gray-300",children:h(y)})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})}),e.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(st,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Cash Flow Integration"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Total insurance premium of ",e.jsx("span",{className:"font-bold",children:h(y)})," flows to your Row Crop cash flow projection as a variable expense. Insurance costs are calculated per-field and included in the Variable Crop Expenses section."]})]})]})})]})})()]})}),ye==="guarantees"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-6 h-6 text-purple-600"}),"Coverage Guarantees"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"View calculated coverage guarantees based on your MPCI elections. Guaranteed bushels and revenue are calculated using APH, coverage level, and spring projected prices."}),(()=>{var u,j;const a=((u=s==null?void 0:s.cashFlow)==null?void 0:u.crops)||[],o=((j=s==null?void 0:s.cashFlow)==null?void 0:j.springPrices)||{},i=a.reduce((y,p)=>y+(p.plannedAcres||0)*(p.sharePercent||100)/100,0),d=a.reduce((y,p)=>{const b=(p.plannedAcres||0)*(p.sharePercent||100)/100;return y+b*(p.aph||0)},0),m=a.reduce((y,p)=>{var C;const b=(p.plannedAcres||0)*(p.sharePercent||100)/100,N=(((C=p.mpciElection)==null?void 0:C.coverageLevel)||75)/100;return y+b*(p.aph||0)*N},0),g=a.reduce((y,p)=>{var A,L;const b=(p.plannedAcres||0)*(p.sharePercent||100)/100,N=(((A=p.mpciElection)==null?void 0:A.coverageLevel)||75)/100,C=o[p.crop]||((L=p.mpciElection)==null?void 0:L.projectedPrice)||0;return y+b*(p.aph||0)*N*C},0);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-gray-800 font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"APH Bushels (100%)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:d.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Guaranteed Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:m.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Revenue Guarantee"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h(g)})]})]})})(),((($m=s==null?void 0:s.cashFlow)==null?void 0:$m.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Coverage %"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Spring Price"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right bg-green-50",children:"Guar. Bushels"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-amber-700 text-right bg-amber-50",children:"Revenue Guar."})]})}),e.jsx("tbody",{children:(((Mm=s==null?void 0:s.cashFlow)==null?void 0:Mm.crops)||[]).map(a=>{var j,y;const o=(a.plannedAcres||0)*(a.sharePercent||100)/100,i=a.mpciElection||{},d=(i.coverageLevel||75)/100,m=((y=(j=s==null?void 0:s.cashFlow)==null?void 0:j.springPrices)==null?void 0:y[a.crop])||i.projectedPrice||0,g=o*(a.aph||0)*d,u=g*m;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:a.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:a.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:a.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:(a.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:[i.coverageLevel||75,"%"]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700 bg-blue-50",children:m>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(m):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700 bg-green-50",children:g.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-amber-700 bg-amber-50",children:m>0?h(u):""})]},a.id)})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})})]})}),ye==="mpci"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-6 h-6 text-blue-600"}),"MPCI Elections"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Multi-Peril Crop Insurance (MPCI) elections including coverage levels, plan types, and projected prices."}),(()=>{var y,p,b,N;const a=((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[],o=((p=s==null?void 0:s.cashFlow)==null?void 0:p.springPrices)||{},i=((b=s==null?void 0:s.cashFlow)==null?void 0:b.springPriceYear)||new Date().getFullYear(),d=((N=s==null?void 0:s.cashFlow)==null?void 0:N.springPricesFetched)||!1,m=[...new Set(a.map(C=>C.crop).filter(Boolean))];if(m.length===0)return null;const g=(C,A)=>{const L={...o,[C]:A},M=a.map(R=>R.crop===C?{...R,mpciElection:{...R.mpciElection||{},projectedPrice:A}}:R);I({cashFlow:{...s==null?void 0:s.cashFlow,springPrices:L,crops:M}})},u={2025:{Corn:4.7,Soybeans:11.55,Wheat:5.65,"Grain Sorghum":4.35},2026:{Corn:4.35,Soybeans:10.65,Wheat:5.35,"Grain Sorghum":4.1},2027:{Corn:4.5,Soybeans:10.75,Wheat:5.45,"Grain Sorghum":4.25}},j=async()=>{const C=Pe||new Date().getFullYear(),A=u[C]||u[2026],L={...o};let M=[...a];m.forEach(R=>{A[R]&&(L[R]=A[R],M=M.map(Y=>Y.crop===R?{...Y,mpciElection:{...Y.mpciElection||{},projectedPrice:A[R]}}:Y))}),I({cashFlow:{...s==null?void 0:s.cashFlow,springPrices:L,springPriceYear:C,springPricesFetched:!0,crops:M}})};return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),"Spring Discovery Prices by Crop"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[d&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3"}),i," prices loaded"]}),e.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:"RMA prices typically released Feb/March"}),e.jsxs("button",{onClick:j,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Fetch ",Pe," RMA Prices"]})]})]}),e.jsx("p",{className:"text-xs text-blue-600 mb-4",children:'Enter spring projected prices manually or click "Fetch RMA Prices" to auto-fill. These will apply to all fields with the same crop.'}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map(C=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:C}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ne,{value:o[C]||0,onChange:A=>g(C,A),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono font-semibold"}),e.jsx("span",{className:"text-xs text-gray-500",children:"/bu"})]})]},C))})]})})(),(((Um=s==null?void 0:s.cashFlow)==null?void 0:Um.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Plan Type"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Coverage Level"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-blue-700 text-right bg-blue-50",children:"Spring Price"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Premium/Ac"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Premium"})]})}),e.jsx("tbody",{children:(((Om=s==null?void 0:s.cashFlow)==null?void 0:Om.crops)||[]).map(a=>{var g,u;const o=(a.plannedAcres||0)*(a.sharePercent||100)/100,i=a.mpciElection||{},d=((u=(g=s==null?void 0:s.cashFlow)==null?void 0:g.springPrices)==null?void 0:u[a.crop])||i.projectedPrice||0,m=o*(i.premiumPerAcre||0);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:a.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:a.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:a.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:(a.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:i.planType||"RP",onChange:j=>{var p;const y=(((p=s==null?void 0:s.cashFlow)==null?void 0:p.crops)||[]).map(b=>b.id===a.id?{...b,mpciElection:{...i,planType:j.target.value}}:b);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:y}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"RP",children:"RP"}),e.jsx("option",{value:"RP-HPE",children:"RP-HPE"}),e.jsx("option",{value:"YP",children:"YP"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:i.coverageLevel||75,onChange:j=>{var p;const y=(((p=s==null?void 0:s.cashFlow)==null?void 0:p.crops)||[]).map(b=>b.id===a.id?{...b,mpciElection:{...i,coverageLevel:parseInt(j.target.value)}}:b);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:y}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:50,children:"50%"}),e.jsx("option",{value:55,children:"55%"}),e.jsx("option",{value:60,children:"60%"}),e.jsx("option",{value:65,children:"65%"}),e.jsx("option",{value:70,children:"70%"}),e.jsx("option",{value:75,children:"75%"}),e.jsx("option",{value:80,children:"80%"}),e.jsx("option",{value:85,children:"85%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-blue-50",children:e.jsx("span",{className:"font-mono font-semibold text-blue-700",children:d>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(d):""})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ne,{value:i.premiumPerAcre||0,onChange:j=>{var p;const y=(((p=s==null?void 0:s.cashFlow)==null?void 0:p.crops)||[]).map(b=>b.id===a.id?{...b,mpciElection:{...i,premiumPerAcre:j}}:b);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:y}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700",children:h(m)})]},a.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"9",className:"py-3 px-3 text-right text-gray-700",children:"Total MPCI Premium:"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:h((((zm=s==null?void 0:s.cashFlow)==null?void 0:zm.crops)||[]).reduce((a,o)=>{var d;const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+i*(((d=o.mpciElection)==null?void 0:d.premiumPerAcre)||0)},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})})]})}),ye==="areaPlans"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-6 h-6 text-cyan-600"}),"Area Plans"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),(()=>{var M,R,Y,_,X,U,B;const a=((M=s==null?void 0:s.cashFlow)==null?void 0:M.crops)||[],o=((R=s==null?void 0:s.cashFlow)==null?void 0:R.areaPrices)||{},i=((Y=s==null?void 0:s.cashFlow)==null?void 0:Y.countyYields)||{},d=((_=s==null?void 0:s.cashFlow)==null?void 0:_.areaState)||"NE",m=(k,F)=>{const T=a.map(w=>w.id===k?{...w,...F}:w);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:T}})},g=k=>{I({cashFlow:{...s==null?void 0:s.cashFlow,areaPrices:{...o,...k}}})},u=k=>{I({cashFlow:{...s==null?void 0:s.cashFlow,countyYields:{...i,...k}}})},j=k=>{I({cashFlow:{...s==null?void 0:s.cashFlow,areaState:k}})},y=[...new Set(a.map(k=>k.county).filter(Boolean))],p=[...new Set(a.map(k=>k.crop).filter(Boolean))],b={2025:{Corn:{projected:4.7,harvest:4.35},Soybeans:{projected:11.55,harvest:10.5},Wheat:{projected:5.65,harvest:5.3},"Grain Sorghum":{projected:4.35,harvest:4.1}},2026:{Corn:{projected:4.35,harvest:4.3},Soybeans:{projected:10.65,harvest:10.55},Wheat:{projected:5.35,harvest:5.25},"Grain Sorghum":{projected:4.1,harvest:4.05}},2027:{Corn:{projected:4.5,harvest:4.45},Soybeans:{projected:10.75,harvest:10.65},Wheat:{projected:5.45,harvest:5.35},"Grain Sorghum":{projected:4.25,harvest:4.2}}},N={NE:{"Cedar-Corn-Irrigated":{expected:215,actual:208},"Cedar-Corn-Dryland":{expected:168,actual:158},"Cedar-Wheat-Dryland":{expected:52,actual:48},"Cedar-Soybeans-Dryland":{expected:50,actual:46},"Cedar-Soybeans-Irrigated":{expected:62,actual:58},"Dixon-Corn-Irrigated":{expected:210,actual:202},"Dixon-Corn-Dryland":{expected:165,actual:155},"Dixon-Soybeans-Dryland":{expected:48,actual:45},"Dixon-Soybeans-Irrigated":{expected:60,actual:56},"Dixon-Wheat-Dryland":{expected:50,actual:46}},IA:{"Story-Corn-Dryland":{expected:195,actual:188},"Story-Soybeans-Dryland":{expected:58,actual:55}},KS:{"Sedgwick-Wheat-Dryland":{expected:42,actual:38},"Sedgwick-Corn-Irrigated":{expected:200,actual:192}}},C=()=>{const k=Pe||new Date().getFullYear(),F=b[k]||b[2026],T={...o};p.forEach(w=>{F[w]&&(T[w]=F[w])}),I({cashFlow:{...s==null?void 0:s.cashFlow,areaPrices:T,areaPriceYear:k,areaPricesFetched:!0}})},A=()=>{const k=N[d]||{},F={...i};y.forEach(T=>{p.forEach(w=>{[...new Set(a.filter(z=>z.county===T&&z.crop===w).map(z=>z.practice))].forEach(z=>{const q=`${T}-${w}-${z}`;k[q]&&(F[q]=k[q])})})}),I({cashFlow:{...s==null?void 0:s.cashFlow,countyYields:F,countyYieldsFetched:!0}})},L=["NE","IA","KS","SD","MN","MO","CO","WY","TX","OK"];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"State:"}),e.jsx("select",{value:d,onChange:k=>j(k.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:L.map(k=>e.jsx("option",{value:k,children:k},k))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),"Area Plan Prices by Crop"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[((X=s==null?void 0:s.cashFlow)==null?void 0:X.areaPricesFetched)&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3"}),((U=s==null?void 0:s.cashFlow)==null?void 0:U.areaPriceYear)||Pe," prices loaded"]}),e.jsxs("button",{onClick:C,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Fetch ",Pe," RMA Prices"]})]})]}),e.jsx("p",{className:"text-xs text-blue-600 mb-4",children:"Projected prices (Feb/March) and harvest prices (Oct/Nov) for area-based coverage."}),p.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(k=>{var F,T;return e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:k}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-blue-600 block mb-1",children:"Projected Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"$"}),e.jsx(ne,{value:((F=o[k])==null?void 0:F.projected)||0,onChange:w=>g({[k]:{...o[k],projected:w}}),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-green-600 block mb-1",children:"Harvest Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"$"}),e.jsx(ne,{value:((T=o[k])==null?void 0:T.harvest)||0,onChange:w=>g({[k]:{...o[k],harvest:w}}),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]})]})]},k)})}):e.jsx("div",{className:"text-sm text-blue-600",children:"Add crops in the Row Crop enterprise to set area prices."})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-amber-800 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-4 h-4"}),"County Expected Yields (",d,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[((B=s==null?void 0:s.cashFlow)==null?void 0:B.countyYieldsFetched)&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3"}),"Yields loaded"]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-1 px-3 py-1.5 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Fetch ",d," County Yields"]})]})]}),e.jsx("p",{className:"text-xs text-amber-600 mb-4",children:"Expected and actual county yields from RMA for area plan calculations."}),y.length>0&&p.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-amber-100",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"County"}),e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"Crop"}),e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"Practice"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-blue-700 bg-blue-50",children:"Expected Yield"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-green-700 bg-green-50",children:"Actual County Yield"})]})}),e.jsx("tbody",{children:y.flatMap(k=>p.flatMap(F=>[...new Set(a.filter(w=>w.county===k&&w.crop===F).map(w=>w.practice))].map(w=>{var z,q;const E=`${k}-${F}-${w}`;return e.jsxs("tr",{className:"border-b border-amber-100 hover:bg-amber-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-700",children:k}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:F}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${w==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:w})}),e.jsx("td",{className:"py-2 px-3 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx($e,{value:((z=i[E])==null?void 0:z.expected)||0,onChange:W=>u({[E]:{...i[E],expected:W}}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-right font-mono text-sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:"bu"})]})}),e.jsx("td",{className:"py-2 px-3 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx($e,{value:((q=i[E])==null?void 0:q.actual)||0,onChange:W=>u({[E]:{...i[E],actual:W}}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-right font-mono text-sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:"bu"})]})})]},E)})))})]})}):e.jsx("div",{className:"text-sm text-amber-600",children:"Add fields with counties and crops to set expected yields."})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Area Plan Elections by Field"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select which area-based coverage options to elect for each field. SCO, ECO, and MP/MCO (mutually exclusive)."}),a.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-center bg-cyan-50",children:"SCO"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-right bg-cyan-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-center bg-green-50",children:"ECO"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 bg-green-50",children:"Level"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-right bg-green-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 bg-purple-50",children:"Margin Plan"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 bg-purple-50",children:"Cov%"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-right bg-purple-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Premium"})]})}),e.jsx("tbody",{children:a.map(k=>{const F=(k.plannedAcres||0)*(k.sharePercent||100)/100,T=k.areaPlan||{},w=T.scoEnabled?F*(T.scoPerAcre||0):0,E=T.ecoEnabled?F*(T.ecoPerAcre||0):0,z=T.marginPlan&&T.marginPlan!=="none"?F*(T.marginPerAcre||0):0,q=w+E+z;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:k.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:k.crop||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:k.county||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:F.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2 text-center bg-cyan-50",children:e.jsx("input",{type:"checkbox",checked:T.scoEnabled||!1,onChange:W=>m(k.id,{areaPlan:{...T,scoEnabled:W.target.checked}}),className:"w-4 h-4 text-cyan-600"})}),e.jsx("td",{className:"py-2 px-2 bg-cyan-50",children:e.jsx(ne,{value:T.scoPerAcre||0,onChange:W=>m(k.id,{areaPlan:{...T,scoPerAcre:W}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!T.scoEnabled})}),e.jsx("td",{className:"py-2 px-2 text-center bg-green-50",children:e.jsx("input",{type:"checkbox",checked:T.ecoEnabled||!1,onChange:W=>m(k.id,{areaPlan:{...T,ecoEnabled:W.target.checked}}),className:"w-4 h-4 text-green-600"})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsxs("select",{value:T.ecoLevel||"90",onChange:W=>m(k.id,{areaPlan:{...T,ecoLevel:W.target.value}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!T.ecoEnabled,children:[e.jsx("option",{value:"90",children:"90%"}),e.jsx("option",{value:"95",children:"95%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsx(ne,{value:T.ecoPerAcre||0,onChange:W=>m(k.id,{areaPlan:{...T,ecoPerAcre:W}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!T.ecoEnabled})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsxs("select",{value:T.marginPlan||"none",onChange:W=>m(k.id,{areaPlan:{...T,marginPlan:W.target.value}}),className:"w-20 px-1 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"mp",children:"MP"}),e.jsx("option",{value:"mco",children:"MCO"})]})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsxs("select",{value:T.marginCoverage||"80",onChange:W=>m(k.id,{areaPlan:{...T,marginCoverage:W.target.value}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!T.marginPlan||T.marginPlan==="none",children:[e.jsx("option",{value:"70",children:"70%"}),e.jsx("option",{value:"75",children:"75%"}),e.jsx("option",{value:"80",children:"80%"}),e.jsx("option",{value:"85",children:"85%"}),e.jsx("option",{value:"90",children:"90%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsx(ne,{value:T.marginPerAcre||0,onChange:W=>m(k.id,{areaPlan:{...T,marginPerAcre:W}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!T.marginPlan||T.marginPlan==="none"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-700",children:h(q)})]},k.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"4",className:"py-3 px-3 text-right text-gray-700",children:"Totals:"}),e.jsx("td",{colSpan:"2",className:"py-3 px-3 text-right font-mono text-cyan-700 bg-cyan-50",children:h(a.reduce((k,F)=>{var w,E;const T=(F.plannedAcres||0)*(F.sharePercent||100)/100;return k+((w=F.areaPlan)!=null&&w.scoEnabled?T*(((E=F.areaPlan)==null?void 0:E.scoPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-right font-mono text-green-700 bg-green-50",children:h(a.reduce((k,F)=>{var w,E;const T=(F.plannedAcres||0)*(F.sharePercent||100)/100;return k+((w=F.areaPlan)!=null&&w.ecoEnabled?T*(((E=F.areaPlan)==null?void 0:E.ecoPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-right font-mono text-purple-700 bg-purple-50",children:h(a.reduce((k,F)=>{var w,E,z;const T=(F.plannedAcres||0)*(F.sharePercent||100)/100;return k+((w=F.areaPlan)!=null&&w.marginPlan&&((E=F.areaPlan)==null?void 0:E.marginPlan)!=="none"?T*(((z=F.areaPlan)==null?void 0:z.marginPerAcre)||0):0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-gray-800",children:h(a.reduce((k,F)=>{var q,W,K,xe,Ae,G,S;const T=(F.plannedAcres||0)*(F.sharePercent||100)/100,w=(q=F.areaPlan)!=null&&q.scoEnabled?T*(((W=F.areaPlan)==null?void 0:W.scoPerAcre)||0):0,E=(K=F.areaPlan)!=null&&K.ecoEnabled?T*(((xe=F.areaPlan)==null?void 0:xe.ecoPerAcre)||0):0,z=(Ae=F.areaPlan)!=null&&Ae.marginPlan&&((G=F.areaPlan)==null?void 0:G.marginPlan)!=="none"?T*(((S=F.areaPlan)==null?void 0:S.marginPerAcre)||0):0;return k+w+E+z},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Area Plans Premium Summary"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"rounded-lg p-3 bg-cyan-50 border border-cyan-200",children:[e.jsx("div",{className:"text-sm font-medium text-cyan-700",children:"SCO Premium"}),e.jsx("div",{className:"text-xl font-bold font-mono text-cyan-800",children:h(a.reduce((k,F)=>{var w,E;const T=(F.plannedAcres||0)*(F.sharePercent||100)/100;return k+((w=F.areaPlan)!=null&&w.scoEnabled?T*(((E=F.areaPlan)==null?void 0:E.scoPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-green-50 border border-green-200",children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"ECO Premium"}),e.jsx("div",{className:"text-xl font-bold font-mono text-green-800",children:h(a.reduce((k,F)=>{var w,E;const T=(F.plannedAcres||0)*(F.sharePercent||100)/100;return k+((w=F.areaPlan)!=null&&w.ecoEnabled?T*(((E=F.areaPlan)==null?void 0:E.ecoPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-purple-50 border border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:"Margin Plan (MP/MCO)"}),e.jsx("div",{className:"text-xl font-bold font-mono text-purple-800",children:h(a.reduce((k,F)=>{var w,E,z;const T=(F.plannedAcres||0)*(F.sharePercent||100)/100;return k+((w=F.areaPlan)!=null&&w.marginPlan&&((E=F.areaPlan)==null?void 0:E.marginPlan)!=="none"?T*(((z=F.areaPlan)==null?void 0:z.marginPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-200 border border-gray-300",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Total Area Plans"}),e.jsx("div",{className:"text-xl font-bold font-mono text-gray-800",children:h(a.reduce((k,F)=>{var q,W,K,xe,Ae,G,S;const T=(F.plannedAcres||0)*(F.sharePercent||100)/100,w=(q=F.areaPlan)!=null&&q.scoEnabled?T*(((W=F.areaPlan)==null?void 0:W.scoPerAcre)||0):0,E=(K=F.areaPlan)!=null&&K.ecoEnabled?T*(((xe=F.areaPlan)==null?void 0:xe.ecoPerAcre)||0):0,z=(Ae=F.areaPlan)!=null&&Ae.marginPlan&&((G=F.areaPlan)==null?void 0:G.marginPlan)!=="none"?T*(((S=F.areaPlan)==null?void 0:S.marginPerAcre)||0):0;return k+w+E+z},0))})]})]})]})]})})()]})}),ye==="privateProducts"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(al,{className:"w-6 h-6 text-orange-600"}),"Private Products (Hail & Wind)"]}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,children:i},i)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Private crop insurance products including hail and wind coverage by field."}),(((Vm=s==null?void 0:s.cashFlow)==null?void 0:Vm.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-center bg-orange-50",children:"Hail"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 bg-orange-50",children:"Coverage"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-right bg-orange-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-right bg-orange-50",children:"Premium"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-red-700 text-center bg-red-50",children:"Wind"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-red-700 text-right bg-red-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-red-700 text-right bg-red-50",children:"Premium"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total"})]})}),e.jsx("tbody",{children:(((Hm=s==null?void 0:s.cashFlow)==null?void 0:Hm.crops)||[]).map(a=>{const o=(a.plannedAcres||0)*(a.sharePercent||100)/100,i=a.privateInsurance||{},d=i.hailEnabled?o*(i.hailPerAcre||0):0,m=i.windEnabled?o*(i.windPerAcre||0):0,g=d+m;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:a.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:a.crop||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2 text-center bg-orange-50",children:e.jsx("input",{type:"checkbox",checked:i.hailEnabled||!1,onChange:u=>{var y;const j=(((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[]).map(p=>p.id===a.id?{...p,privateInsurance:{...i,hailEnabled:u.target.checked}}:p);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:j}})},className:"w-4 h-4 text-orange-600"})}),e.jsx("td",{className:"py-2 px-2 bg-orange-50",children:e.jsxs("select",{value:i.hailCoverage||"100",onChange:u=>{var y;const j=(((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[]).map(p=>p.id===a.id?{...p,privateInsurance:{...i,hailCoverage:u.target.value}}:p);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:j}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!i.hailEnabled,children:[e.jsx("option",{value:"50",children:"50%"}),e.jsx("option",{value:"75",children:"75%"}),e.jsx("option",{value:"100",children:"100%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-orange-50",children:e.jsx(ne,{value:i.hailPerAcre||0,onChange:u=>{var y;const j=(((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[]).map(p=>p.id===a.id?{...p,privateInsurance:{...i,hailPerAcre:u}}:p);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:j}})},className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!i.hailEnabled})}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-orange-700 bg-orange-50",children:i.hailEnabled?h(d):""}),e.jsx("td",{className:"py-2 px-2 text-center bg-red-50",children:e.jsx("input",{type:"checkbox",checked:i.windEnabled||!1,onChange:u=>{var y;const j=(((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[]).map(p=>p.id===a.id?{...p,privateInsurance:{...i,windEnabled:u.target.checked}}:p);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:j}})},className:"w-4 h-4 text-red-600"})}),e.jsx("td",{className:"py-2 px-2 bg-red-50",children:e.jsx(ne,{value:i.windPerAcre||0,onChange:u=>{var y;const j=(((y=s==null?void 0:s.cashFlow)==null?void 0:y.crops)||[]).map(p=>p.id===a.id?{...p,privateInsurance:{...i,windPerAcre:u}}:p);I({cashFlow:{...s==null?void 0:s.cashFlow,crops:j}})},className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!i.windEnabled})}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-red-700 bg-red-50",children:i.windEnabled?h(m):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-700",children:h(g)})]},a.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"6",className:"py-3 px-3 text-right text-gray-700",children:"Totals:"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700 bg-orange-50",children:h((((_m=s==null?void 0:s.cashFlow)==null?void 0:_m.crops)||[]).reduce((a,o)=>{var d,m;const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+((d=o.privateInsurance)!=null&&d.hailEnabled?i*(((m=o.privateInsurance)==null?void 0:m.hailPerAcre)||0):0)},0))}),e.jsx("td",{className:"py-3 px-3 bg-red-50"}),e.jsx("td",{className:"py-3 px-3 bg-red-50"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700 bg-red-50",children:h((((Ym=s==null?void 0:s.cashFlow)==null?void 0:Ym.crops)||[]).reduce((a,o)=>{var d,m;const i=(o.plannedAcres||0)*(o.sharePercent||100)/100;return a+((d=o.privateInsurance)!=null&&d.windEnabled?i*(((m=o.privateInsurance)==null?void 0:m.windPerAcre)||0):0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-gray-800",children:h((((qm=s==null?void 0:s.cashFlow)==null?void 0:qm.crops)||[]).reduce((a,o)=>{var g,u,j,y;const i=(o.plannedAcres||0)*(o.sharePercent||100)/100,d=(g=o.privateInsurance)!=null&&g.hailEnabled?i*(((u=o.privateInsurance)==null?void 0:u.hailPerAcre)||0):0,m=(j=o.privateInsurance)!=null&&j.windEnabled?i*(((y=o.privateInsurance)==null?void 0:y.windPerAcre)||0):0;return a+d+m},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})})]})})]})]}),t==="marketing"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-amber-700 to-amber-600 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>r("landing"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Back to Dashboard",children:e.jsx(Qn,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(st,{className:"w-7 h-7"}),"Crop Marketing"]}),e.jsx("p",{className:"text-amber-200 text-sm",children:re==null?void 0:re.name})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-amber-200 text-xs block mb-1",children:"Marketing Year"}),e.jsx("select",{value:Pe||new Date().getFullYear(),onChange:a=>ze(parseInt(a.target.value)),className:"px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white font-semibold",children:[...Array(5)].map((a,o)=>{const i=new Date().getFullYear()+o-1;return e.jsx("option",{value:i,className:"text-gray-800",children:i},i)})})]})})]})})}),e.jsx("div",{className:"bg-amber-800 border-b border-amber-900",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("div",{className:"flex gap-1",children:[{id:"positions",label:"Positions",icon:"ClipboardList"},{id:"scenarios",label:"Scenarios",icon:"Calculator"}].map(a=>e.jsx("button",{onClick:()=>jt(a.id),className:`px-4 py-3 text-sm font-medium transition-colors flex items-center gap-2 ${Ie===a.id?"bg-white text-amber-800 rounded-t-lg":"text-amber-100 hover:bg-amber-700"}`,children:a.label},a.id))})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:(()=>{var _,X;const a=((_=s==null?void 0:s.cashFlow)==null?void 0:_.crops)||[],o=((X=s==null?void 0:s.cashFlow)==null?void 0:X.marketing)||{},i=[...new Set(a.map(U=>U.crop).filter(Boolean))],d={Corn:"DEC",Soybeans:"NOV",Wheat:"JUL","Grain Sorghum":"DEC"},m={2025:{Corn:4.35,Soybeans:10.55,Wheat:5.2,"Grain Sorghum":4.15},2026:{Corn:4.55,Soybeans:10.7,Wheat:5.35,"Grain Sorghum":4.35},2027:{Corn:4.65,Soybeans:10.85,Wheat:5.5,"Grain Sorghum":4.45}},g=U=>{I({cashFlow:{...s==null?void 0:s.cashFlow,marketing:{...o,...U}}})},u=(U,B)=>{const k=o.byCrop||{},F={...k,[U]:{...k[U],...B}};g({byCrop:F})},j=U=>{var T;const k=(((T=o.byCrop)==null?void 0:T[U])||{}).positions||[],F={id:Date.now(),type:"cash",action:"sell",bushels:0,price:0,date:new Date().toISOString().split("T")[0],notes:""};u(U,{positions:[...k,F]})},y=(U,B,k)=>{var w;const T=((((w=o.byCrop)==null?void 0:w[U])||{}).positions||[]).map(E=>E.id===B?{...E,...k}:E);u(U,{positions:T})},p=(U,B)=>{var T;const F=((((T=o.byCrop)==null?void 0:T[U])||{}).positions||[]).filter(w=>w.id!==B);u(U,{positions:F})},b=(U,B)=>{const k=String(B).slice(-2);return{Corn:`ZCZ${k}`,Soybeans:`ZSX${k}`,Wheat:`ZWZ${k}`,"Grain Sorghum":`ZCZ${k}`}[U]||null},N=async()=>{var k,F;const U=Pe||new Date().getFullYear(),B=o.barchartApiKey;if(!B){const T=m[U]||m[2026],w={...o.byCrop};i.forEach(E=>{T[E]&&(w[E]={...w[E],futuresPrice:T[E],priceSource:"embedded"})}),g({byCrop:w,futuresPricesFetched:!0,futuresPricesYear:U,priceSource:"embedded"});return}O(!0),Le(null);try{const T=i.map(W=>b(W,U)).filter(Boolean).join(",");if(!T)throw new Error("No valid futures symbols for selected crops");const w=await fetch(`https://ondemand.websol.barchart.com/getQuote.json?apikey=${B}&symbols=${T}&fields=lastPrice,contractMonth,contractYear`);if(!w.ok)throw new Error(`API error: ${w.status}`);const E=await w.json();if(((k=E.status)==null?void 0:k.code)!==200)throw new Error(((F=E.status)==null?void 0:F.message)||"API request failed");const z={...o.byCrop},q=E.results||[];i.forEach(W=>{var Ae;const K=b(W,U),xe=q.find(G=>G.symbol===K);if(xe&&xe.lastPrice){const G=xe.lastPrice>100?xe.lastPrice/100:xe.lastPrice;z[W]={...z[W],futuresPrice:G,priceSource:"barchart",lastUpdated:new Date().toISOString()}}else{const G=(Ae=m[U]||m[2026])==null?void 0:Ae[W];G&&(z[W]={...z[W],futuresPrice:G,priceSource:"embedded"})}}),g({byCrop:z,futuresPricesFetched:!0,futuresPricesYear:U,priceSource:"barchart",lastFetchTime:new Date().toISOString()})}catch(T){console.error("Futures fetch error:",T),Le(T.message);const w=m[U]||m[2026],E={...o.byCrop};i.forEach(z=>{w[z]&&(E[z]={...E[z],futuresPrice:w[z],priceSource:"embedded"})}),g({byCrop:E,futuresPricesFetched:!0,futuresPricesYear:U,priceSource:"embedded"})}finally{O(!1)}},C=i.map(U=>{var ie;const B=a.filter(fe=>fe.crop===U),k=B.reduce((fe,he)=>fe+(he.plannedAcres||0)*(he.sharePercent||100)/100,0),F=B.reduce((fe,he)=>{const Be=(he.plannedAcres||0)*(he.sharePercent||100)/100;return fe+Be*(he.projectedYield||he.aph||0)},0),T=((ie=o.byCrop)==null?void 0:ie[U])||{},w=T.positions||[],E=T.futuresPrice||0,z=T.basis||0,q=E+z,W=w.reduce((fe,he)=>he.type==="cash"||he.type==="futures"||he.type==="hta"?fe+(he.bushels||0):fe,0),K=Math.max(0,F-W),xe=F>0?W/F*100:0,Ae=w.reduce((fe,he)=>(he.type==="cash"||he.type==="futures"||he.type==="hta")&&he.bushels>0?fe+he.bushels*he.price:fe,0),G=W>0?Ae/W:q,S=F>0?(W*G+K*q)/F:q,Q=F*S;return{crop:U,futuresMonth:d[U]||"DEC",totalAcres:k,totalBushels:F,futuresPrice:E,basis:z,cashPrice:q,positions:w,pricedBushels:W,openBushels:K,pricedPercent:xe,weightedAvgPrice:G,blendedPrice:S,projectedRevenue:Q}}),A=C.reduce((U,B)=>U+B.totalBushels,0),L=C.reduce((U,B)=>U+B.pricedBushels,0),M=C.reduce((U,B)=>U+B.openBushels,0),R=A>0?L/A*100:0,Y=C.reduce((U,B)=>U+B.projectedRevenue,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total Production"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:A.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-amber-500",children:"Bushels"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Priced"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:L.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-green-500",children:[R.toFixed(1),"% sold"]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Open / Unpriced"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:M.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-red-500",children:[(100-R).toFixed(1),"% open"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Crops Tracked"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:i.length}),e.jsx("div",{className:"text-xs text-blue-500",children:i.join(", ")||"None"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Projected Revenue"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:h(Y)}),e.jsx("div",{className:"text-xs text-purple-500",children:"Blended pricing"})]})]}),Ie==="positions"&&e.jsxs(e.Fragment,{children:[Nt&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Gs,{className:"w-5 h-5 text-amber-600"}),"Futures Price API Settings"]}),e.jsx("button",{onClick:()=>We(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Qs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Barchart OnDemand API"})," provides real-time futures prices by contract year. Get your API key at ",e.jsx("a",{href:"https://www.barchart.com/ondemand",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 underline",children:"barchart.com/ondemand"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barchart API Key"}),e.jsx("input",{type:"password",value:o.barchartApiKey||"",onChange:U=>g({barchartApiKey:U.target.value}),placeholder:"Enter your Barchart OnDemand API key",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.jsx("strong",{children:"Contract Symbols Used:"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs font-mono",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Corn:"}),e.jsxs("span",{children:["ZCZ",String(Pe).slice(-2)," (Dec)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Soybeans:"}),e.jsxs("span",{children:["ZSX",String(Pe).slice(-2)," (Nov)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Wheat:"}),e.jsxs("span",{children:["ZWZ",String(Pe).slice(-2)," (Dec)"]})]})]})]}),!o.barchartApiKey&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"No API key?"})," Embedded prices will be used as fallback."]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>We(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Close"}),e.jsxs("button",{onClick:()=>{We(!1),N()},className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 flex items-center gap-2",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Fetch Prices"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-amber-600"}),"Futures Prices & Basis"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[o.futuresPricesFetched&&e.jsxs("span",{className:`text-xs px-2 py-1 rounded flex items-center gap-1 ${o.priceSource==="barchart"?"text-green-600 bg-green-100":"text-amber-600 bg-amber-100"}`,children:[e.jsx(ps,{className:"w-3 h-3"}),o.futuresPricesYear||Pe," (",o.priceSource==="barchart"?"Barchart":"Embedded",")"]}),ce&&e.jsxs("span",{className:"text-xs text-red-600 bg-red-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(xf,{className:"w-3 h-3"}),"Error: ",ce.substring(0,30),"..."]}),e.jsx("button",{onClick:()=>We(!0),className:"p-1.5 text-gray-500 hover:text-amber-600 hover:bg-amber-50 rounded",title:"API Settings",children:e.jsx(Gs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:N,disabled:$t,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm font-medium ${$t?"bg-gray-300 text-gray-500 cursor-wait":"bg-amber-600 text-white hover:bg-amber-700"}`,children:$t?e.jsxs(e.Fragment,{children:[e.jsx(nl,{className:"w-4 h-4 animate-spin"}),"Fetching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fr,{className:"w-4 h-4"}),"Fetch ",Pe," Futures"]})})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Set new crop futures prices and local basis by crop. Cash Price = Futures + Basis.",!o.barchartApiKey&&e.jsxs("span",{className:"text-amber-600 ml-1",children:["(Click ",e.jsx(Gs,{className:"w-3 h-3 inline"})," to add Barchart API key for live prices)"]})]}),i.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(U=>{var B,k;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:U.crop}),e.jsxs("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:[U.futuresMonth," ",Pe]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Futures"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"$"}),e.jsx(ne,{value:U.futuresPrice,onChange:F=>u(U.crop,{futuresPrice:F}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Basis"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"$"}),e.jsx(ne,{value:((k=(B=o.byCrop)==null?void 0:B[U.crop])==null?void 0:k.basis)||0,onChange:F=>u(U.crop,{basis:F}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm",allowNegative:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Cash Price"}),e.jsxs("div",{className:"px-2 py-1.5 bg-green-100 border border-green-300 rounded text-right font-mono text-sm font-semibold text-green-700",children:["$",U.cashPrice.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Production:"}),e.jsxs("span",{className:"font-mono font-medium",children:[U.totalBushels.toLocaleString("en-US",{maximumFractionDigits:0})," bu"]})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-green-600",children:"Priced:"}),e.jsxs("span",{className:"font-mono font-medium text-green-700",children:[U.pricedBushels.toLocaleString("en-US",{maximumFractionDigits:0})," bu (",U.pricedPercent.toFixed(0),"%)"]})]}),U.pricedBushels>0&&e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Priced @ Avg:"}),e.jsxs("span",{className:"font-mono text-gray-600",children:["$",U.weightedAvgPrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1 pt-1 border-t border-gray-100",children:[e.jsx("span",{className:"text-amber-600 font-medium",children:"Blended Price:"}),e.jsxs("span",{className:"font-mono font-semibold text-amber-700",children:["$",U.blendedPrice.toFixed(2)]})]})]})]},U.crop)})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No crops found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields and crops."})]})})]}),C.map(U=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800",children:[U.crop," Positions"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded font-medium ${U.pricedPercent>=75?"bg-green-100 text-green-700":U.pricedPercent>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[U.pricedPercent.toFixed(0),"% Priced"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[U.pricedBushels.toLocaleString()," of ",U.totalBushels.toLocaleString()," bu"]})]})]}),e.jsxs("button",{onClick:()=>j(U.crop),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Add Position"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Priced Bushels"}),e.jsx("div",{className:"text-lg font-bold text-green-700 font-mono",children:U.pricedBushels.toLocaleString()})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Open Bushels"}),e.jsx("div",{className:"text-lg font-bold text-red-700 font-mono",children:U.openBushels.toLocaleString()})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:[e.jsx("div",{className:"text-xs text-amber-600 font-medium",children:"Positions Avg Price"}),e.jsxs("div",{className:"text-lg font-bold text-amber-700 font-mono",children:["$",U.weightedAvgPrice.toFixed(2)]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Blended Price"}),e.jsxs("div",{className:"text-lg font-bold text-blue-700 font-mono",children:["$",U.blendedPrice.toFixed(2)]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Projected Revenue"}),e.jsx("div",{className:"text-lg font-bold text-purple-700 font-mono",children:h(U.projectedRevenue)})]})]}),U.positions.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700",children:"Action"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700 text-right",children:"Bushels"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700 text-right",children:"Price"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700 text-right",children:"Value"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700",children:"Date"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700",children:"Notes"}),e.jsx("th",{className:"py-2 px-3"})]})}),e.jsx("tbody",{children:U.positions.map((B,k)=>e.jsxs("tr",{className:`border-b border-gray-100 ${k%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-3",children:e.jsxs("select",{value:B.type,onChange:F=>y(U.crop,B.id,{type:F.target.value}),className:"px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"cash",children:"Cash Sale"}),e.jsx("option",{value:"futures",children:"Futures"}),e.jsx("option",{value:"hta",children:"HTA Contract"}),e.jsx("option",{value:"basis",children:"Basis Contract"}),e.jsx("option",{value:"put",children:"Put Option"}),e.jsx("option",{value:"call",children:"Call Option"})]})}),e.jsx("td",{className:"py-2 px-3",children:e.jsxs("select",{value:B.action,onChange:F=>y(U.crop,B.id,{action:F.target.value}),className:"px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"sell",children:"Sell"}),e.jsx("option",{value:"buy",children:"Buy"})]})}),e.jsx("td",{className:"py-2 px-3",children:e.jsx($e,{value:B.bushels||0,onChange:F=>y(U.crop,B.id,{bushels:F}),className:"w-24 px-2 py-1 border border-gray-200 rounded text-right font-mono text-sm"})}),e.jsx("td",{className:"py-2 px-3",children:e.jsx(ne,{value:B.price||0,onChange:F=>y(U.crop,B.id,{price:F}),className:"w-20 px-2 py-1 border border-gray-200 rounded text-right font-mono text-sm"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:h((B.bushels||0)*(B.price||0))}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("input",{type:"date",value:B.date||"",onChange:F=>y(U.crop,B.id,{date:F.target.value}),className:"px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("input",{type:"text",value:B.notes||"",onChange:F=>y(U.crop,B.id,{notes:F.target.value}),placeholder:"Notes...",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("button",{onClick:()=>p(U.crop,B.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})})]},B.id))})]})}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:'No positions yet. Click "Add Position" to start tracking sales.'})})]},U.crop)),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(st,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Cash Flow Integration"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Marketing prices flow to Cash Flow  Row Crop  Crop Revenue. When positions are entered, the ",e.jsx("span",{className:"font-bold",children:"weighted average price"})," (for priced bushels) and ",e.jsx("span",{className:"font-bold",children:"cash price"})," (for open bushels) are blended to calculate projected crop revenue. Total projected revenue: ",e.jsx("span",{className:"font-bold",children:h(Y)})]})]})]})})]}),Ie==="scenarios"&&e.jsx(e.Fragment,{children:(()=>{var Gm,Qm,Km,Jm,Zm;const U=o.scenarios||{},B=U.selectedCrop||i[0]||"",k=C.find(Ce=>Ce.crop===B)||C[0]||{},F=a.filter(Ce=>Ce.crop===B),T=((Gm=s==null?void 0:s.cashFlow)==null?void 0:Gm.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],w=((Qm=s==null?void 0:s.cashFlow)==null?void 0:Qm.chemicalTypes)||["Herbicide","Fungicide","Insecticide","Growth Regulator"];let E=0,z=0,q=0,W=0,K=0,xe=0,Ae=0,G=0;F.forEach(Ce=>{const yt=(Ce.plannedAcres||0)*(Ce.sharePercent||100)/100;E+=yt,z+=yt*((Ce.seedPerAcre||0)+(Ce.seedTreatmentPerAcre||0));const Ys=Ce.fertilizerCosts||{},$a=T.reduce((lr,qs)=>lr+(Ys[qs]||0),0)+(Ce.fertAppCostPerAcre||0);q+=yt*$a;const Ma=Ce.chemicalCosts||{},Ua=w.reduce((lr,qs)=>lr+(Ma[qs]||0),0)+(Ce.chemAppCostPerAcre||0);W+=yt*Ua,K+=yt*(Ce.irrigationCostPerAcre||0);const On=Ce.projectedYield||Ce.aph||0;xe+=yt*(Ce.freightPerBushel||0)*On,Ae+=yt*(Ce.rentPerAcre||0);const Gr=Ce.insurance||{};["Multiperil","Hail","ECO","SCO"].forEach(lr=>{var qs,Xm,Bm,eu,tu;(qs=Gr[lr])!=null&&qs.enabled&&(G+=(Xm=Gr[lr])!=null&&Xm.useTotal?((Bm=Gr[lr])==null?void 0:Bm.totalCost)||0:yt*(((eu=Gr[lr])==null?void 0:eu.perAcre)||((tu=Gr[lr])==null?void 0:tu.premiumPerAcre)||0))})});const S=E>0?z/E:0,Q=E>0?q/E:0,ie=E>0?W/E:0,fe=E>0?K/E:0,he=E>0?xe/E:0,Be=E>0?Ae/E:0,_e=E>0?G/E:0,Re=S+Q+ie+fe+he+Be+_e,Ge=(Km=U.costOverrides)==null?void 0:Km[B],mt=Ge!==void 0?Ge:Re,vt=((Jm=o.byCrop)==null?void 0:Jm[B])||{},ct=vt.futuresPrice||0,Se=vt.basis||0,we=((Zm=U.scenarioFutures)==null?void 0:Zm[B])??ct,ut=we+Se,Mt=k.totalBushels||0,At=k.pricedBushels||0,wt=k.openBushels||0,gr=Mt>0?At/Mt*100:0,ar=vt.positions||[],Sa=ar.reduce((Ce,yt)=>(yt.type==="cash"||yt.type==="futures"||yt.type==="hta")&&yt.bushels>0?Ce+yt.bushels*yt.price:Ce,0),Mn=At>0?Sa/At:0,kp=Mt>0?(At*Mn+wt*ut)/Mt:ut,Un=At*Mn,Wm=wt*ut,ao=Un+Wm,Dp=E>0?Mt/E:0,Tp=E>0?ao/E:0,Ra=mt*E,Hs=ao-Ra,_s=E>0?Hs/E:0,Lp=Math.max(0,Ra-Un),lo=wt>0?Lp/wt:0,Ep=lo-Se,Ip=[-1,-.5,-.25,0,.25,.5,1];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(So,{className:"w-6 h-6 text-amber-600"}),"Scenario Analysis"]}),e.jsx("select",{value:B,onChange:Ce=>g({scenarios:{...U,selectedCrop:Ce.target.value}}),className:"px-4 py-2 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white text-lg",children:i.map(Ce=>e.jsx("option",{value:Ce,children:Ce},Ce))})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Production"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:[Mt.toLocaleString()," bu"]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[E.toLocaleString()," acres @ ",Dp.toFixed(1)," bu/ac"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Priced Bushels"}),e.jsx("div",{className:"text-xl font-bold text-green-700 font-mono",children:At.toLocaleString()}),e.jsxs("div",{className:"text-xs text-green-500",children:[gr.toFixed(0),"% sold"]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Open Bushels"}),e.jsx("div",{className:"text-xl font-bold text-red-700 font-mono",children:wt.toLocaleString()}),e.jsxs("div",{className:"text-xs text-red-500",children:[(100-gr).toFixed(0),"% open"]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-xs text-amber-600 font-medium",children:"Wtd Avg (Priced)"}),e.jsxs("div",{className:"text-xl font-bold text-amber-700 font-mono",children:["$",Mn.toFixed(2)]}),e.jsx("div",{className:"text-xs text-amber-500",children:"locked in price"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Scenario Cash"}),e.jsxs("div",{className:"text-xl font-bold text-blue-700 font-mono",children:["$",ut.toFixed(2)]}),e.jsx("div",{className:"text-xs text-blue-500",children:"on open bu"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Blended Price"}),e.jsxs("div",{className:"text-xl font-bold text-purple-700 font-mono",children:["$",kp.toFixed(2)]}),e.jsx("div",{className:"text-xs text-purple-500",children:"all production"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${_s>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-xs font-medium ${_s>=0?"text-green-600":"text-red-600"}`,children:"P&L / Acre"}),e.jsx("div",{className:`text-xl font-bold font-mono ${_s>=0?"text-green-700":"text-red-700"}`,children:h(_s)}),e.jsx("div",{className:`text-xs ${_s>=0?"text-green-500":"text-red-500"}`,children:"scenario result"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Gs,{className:"w-5 h-5 text-amber-600"}),"Scenario Inputs"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-600 block mb-1",children:["Scenario Futures Price",e.jsxs("span",{className:"text-gray-400 ml-2",children:["(Current: $",ct.toFixed(2),")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ne,{value:we,onChange:Ce=>g({scenarios:{...U,scenarioFutures:{...U.scenarioFutures,[B]:Ce}}}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg font-mono text-lg"}),e.jsx("button",{onClick:()=>g({scenarios:{...U,scenarioFutures:{...U.scenarioFutures,[B]:ct}}}),className:"px-3 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200",children:"Reset"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Local Basis"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg font-mono text-lg",children:["$",Se>=0?"+":"",Se.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Set in Positions tab"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx("label",{className:"text-sm text-amber-600 block mb-1 font-medium",children:"Scenario Cash Price"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",ut.toFixed(2)]}),e.jsx("p",{className:"text-xs text-amber-500",children:"Futures + Basis"})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("label",{className:"text-sm text-gray-600 block mb-1",children:["Cost of Production ($/Acre)",e.jsxs("span",{className:"text-green-600 ml-2",children:["(from Cash Flow: $",Re.toFixed(2),")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ne,{value:mt,onChange:Ce=>g({scenarios:{...U,costOverrides:{...U.costOverrides,[B]:Ce}}}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg font-mono text-lg"}),e.jsx("button",{onClick:()=>{const Ce={...U.costOverrides};delete Ce[B],g({scenarios:{...U,costOverrides:Ce}})},className:"px-3 py-2 bg-green-100 text-green-600 rounded-lg text-sm hover:bg-green-200",title:"Use calculated cost from Cash Flow",children:"Auto"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg text-xs",children:[e.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Cost Breakdown ($/Acre)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Seed:"}),e.jsxs("span",{className:"font-mono",children:["$",S.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fertilizer:"}),e.jsxs("span",{className:"font-mono",children:["$",Q.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Chemicals:"}),e.jsxs("span",{className:"font-mono",children:["$",ie.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Irrigation:"}),e.jsxs("span",{className:"font-mono",children:["$",fe.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Freight:"}),e.jsxs("span",{className:"font-mono",children:["$",he.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Land/Rent:"}),e.jsxs("span",{className:"font-mono",children:["$",Be.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Insurance:"}),e.jsxs("span",{className:"font-mono",children:["$",_e.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1 mt-1",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"font-mono",children:["$",Re.toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-amber-600"}),"Scenario Results"]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"Revenue from Priced"}),e.jsxs("div",{className:"text-xs text-green-500",children:[At.toLocaleString()," bu @ $",Mn.toFixed(2)]})]}),e.jsx("div",{className:"text-xl font-bold text-green-700 font-mono",children:h(Un)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-amber-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-amber-700",children:"Revenue from Open"}),e.jsxs("div",{className:"text-xs text-amber-500",children:[wt.toLocaleString()," bu @ $",ut.toFixed(2)]})]}),e.jsx("div",{className:"text-xl font-bold text-amber-700 font-mono",children:h(Wm)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg border-2 border-blue-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Total Projected Revenue"}),e.jsxs("div",{className:"text-xs text-blue-500",children:["$",Tp.toFixed(2),"/acre"]})]}),e.jsx("div",{className:"text-xl font-bold text-blue-700 font-mono",children:h(ao)})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-red-700",children:"Total Costs"}),e.jsxs("div",{className:"text-xs text-red-500",children:[E.toLocaleString()," ac @ $",mt.toFixed(2)]})]}),e.jsxs("div",{className:"text-xl font-bold text-red-700 font-mono",children:["(",h(Ra),")"]})]}),e.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg border-2 ${Hs>=0?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${Hs>=0?"text-green-700":"text-red-700"}`,children:"Net Profit/Loss"}),e.jsxs("div",{className:`text-xs ${Hs>=0?"text-green-500":"text-red-500"}`,children:[h(_s),"/acre"]})]}),e.jsx("div",{className:`text-2xl font-bold font-mono ${Hs>=0?"text-green-700":"text-red-700"}`,children:h(Hs)})]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:"Breakeven on Open Bushels"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-purple-600",children:"Breakeven Cash Price"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:["$",lo.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-purple-600",children:"Breakeven Futures"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:["$",Ep.toFixed(2)]})]})]}),e.jsxs("p",{className:"text-xs text-purple-500 mt-2",children:["Need $",lo.toFixed(2)," cash on ",wt.toLocaleString()," open bu to cover remaining costs after priced revenue."]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-amber-600"}),"Futures Price Scenarios"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["See how different futures prices affect your ",B," P&L with ",wt.toLocaleString()," open bushels."]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Futures Change"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Futures Price"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Cash Price"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Open Revenue"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Total Revenue"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Total P&L"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"P&L/Acre"})]})}),e.jsx("tbody",{children:Ip.map((Ce,yt)=>{const Ys=ct+Ce,$a=Ys+Se,Ma=wt*$a,Ua=Un+Ma,On=Ua-Ra,Gr=E>0?On/E:0,lr=Math.abs(Ys-we)<.01;return e.jsxs("tr",{className:`border-b border-gray-100 cursor-pointer hover:bg-amber-50 transition-colors ${lr?"bg-amber-100 font-semibold":Ce===0?"bg-gray-50":""}`,onClick:()=>g({scenarios:{...U,scenarioFutures:{...U.scenarioFutures,[B]:Ys}}}),children:[e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ce<0?"bg-red-100 text-red-700":Ce>0?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:Ce===0?"Current":(Ce>0?"+":"")+"$"+Ce.toFixed(2)}),lr&&e.jsx("span",{className:"ml-2 text-amber-600",children:""})]}),e.jsxs("td",{className:"py-3 px-4 text-right font-mono",children:["$",Ys.toFixed(2)]}),e.jsxs("td",{className:"py-3 px-4 text-right font-mono",children:["$",$a.toFixed(2)]}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:h(Ma)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:h(Ua)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono font-semibold ${On>=0?"text-green-700":"text-red-700"}`,children:h(On)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono ${Gr>=0?"text-green-700":"text-red-700"}`,children:h(Gr)})]},yt)})})]})}),e.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Click any row to apply that scenario"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(m0,{className:"w-5 h-5 text-amber-600"}),B," Position Review"]}),ar.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-4 text-left font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"py-2 px-4 text-right font-semibold text-gray-700",children:"Bushels"}),e.jsx("th",{className:"py-2 px-4 text-right font-semibold text-gray-700",children:"Price"}),e.jsx("th",{className:"py-2 px-4 text-right font-semibold text-gray-700",children:"Value"}),e.jsx("th",{className:"py-2 px-4 text-left font-semibold text-gray-700",children:"Date"}),e.jsx("th",{className:"py-2 px-4 text-left font-semibold text-gray-700",children:"Notes"})]})}),e.jsxs("tbody",{children:[ar.filter(Ce=>Ce.bushels>0).map((Ce,yt)=>e.jsxs("tr",{className:`border-b border-gray-100 ${yt%2===0?"":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-4",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${Ce.type==="cash"?"bg-green-100 text-green-700":Ce.type==="futures"?"bg-blue-100 text-blue-700":Ce.type==="hta"?"bg-purple-100 text-purple-700":Ce.type==="basis"?"bg-amber-100 text-amber-700":Ce.type==="put"?"bg-red-100 text-red-700":"bg-teal-100 text-teal-700"}`,children:Ce.type.toUpperCase()})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono",children:Ce.bushels.toLocaleString()}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono",children:["$",Ce.price.toFixed(2)]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-green-700",children:h(Ce.bushels*Ce.price)}),e.jsx("td",{className:"py-2 px-4 text-gray-600",children:Ce.date||""}),e.jsx("td",{className:"py-2 px-4 text-gray-500",children:Ce.notes||""})]},Ce.id)),e.jsxs("tr",{className:"bg-amber-50 font-semibold",children:[e.jsx("td",{className:"py-3 px-4",children:"PRICED TOTAL"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:At.toLocaleString()}),e.jsxs("td",{className:"py-3 px-4 text-right font-mono",children:["$",Mn.toFixed(2)," avg"]}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700",children:h(Un)}),e.jsx("td",{colSpan:"2"})]})]})]})}):e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[e.jsxs("p",{className:"text-gray-500",children:["No positions entered for ",B,"."]}),e.jsx("button",{onClick:()=>jt("positions"),className:"mt-3 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"Add Positions"})]})]})]})})()})]})})()})]}),t==="refinanceCalc"&&e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>r("landing"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Qn,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Refinance Calculator"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[re==null?void 0:re.name,"  Analyze debt restructuring scenarios"]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(nl,{className:"w-6 h-6 text-teal-600"})})]}),e.jsx("main",{className:"p-6 max-w-7xl mx-auto",children:(()=>{const a=(s==null?void 0:s.debtService)||[],o=a.filter(k=>Es.selectedDebts.includes(k.id)),{newLoanTerms:i}=Es,d=k=>k.currentBalance||k.principalAmount||k.principal||0,m=o.reduce((k,F)=>k+d(F),0),g=o.reduce((k,F)=>k+(F.annualPayment||F.totalPayment||0),0),u=o.reduce((k,F)=>k+(F.principalPayment||0),0),j=o.reduce((k,F)=>k+(F.interestPayment||0),0),y=m>0?o.reduce((k,F)=>k+d(F)*(F.interestRate||0),0)/m:0,p=m+(i.closingCosts||0)+(i.cashOut||0),b=i.interestRate/100/12,N=(i.amortYears||i.termYears)*12,C=p>0&&b>0?p*b*Math.pow(1+b,N)/(Math.pow(1+b,N)-1):0,A=C*12,L=p*(i.interestRate/100),M=A-L,R=A-g,Y=L-j,_=M-u,X=i.interestRate-y,U=-R,B=(i.cashOut||0)-(i.closingCosts||0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 border border-teal-200",children:[e.jsx("div",{className:"text-sm text-teal-600 font-medium",children:"Debts Selected"}),e.jsx("div",{className:"text-2xl font-bold text-teal-700",children:o.length}),e.jsxs("div",{className:"text-xs text-teal-500 mt-1",children:["of ",a.length," total"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Current Balance"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h(m)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"New Loan Amount"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:h(p)}),(i.closingCosts>0||i.cashOut>0)&&e.jsxs("div",{className:"text-xs text-amber-500 mt-1",children:["+",h(i.closingCosts)," costs +",h(i.cashOut)," cash out"]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${U>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${U>=0?"text-green-600":"text-red-600"}`,children:"Annual Cash Flow Impact"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${U>=0?"text-green-700":"text-red-700"}`,children:[U>=0?"+":"",h(U)]}),e.jsx("div",{className:`text-xs mt-1 ${U>=0?"text-green-500":"text-red-500"}`,children:U>=0?"More cash available":"Less cash available"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Select Debts to Refinance"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Lt(k=>({...k,selectedDebts:a.map(F=>F.id)})),className:"px-3 py-1 text-xs bg-teal-100 text-teal-700 rounded hover:bg-teal-200",children:"Select All"}),e.jsx("button",{onClick:()=>Lt(k=>({...k,selectedDebts:[]})),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"})]})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 text-left w-10",children:e.jsx("input",{type:"checkbox",checked:o.length===a.length&&a.length>0,onChange:k=>{k.target.checked?Lt(F=>({...F,selectedDebts:a.map(T=>T.id)})):Lt(F=>({...F,selectedDebts:[]}))},className:"rounded"})}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Description"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Lender"}),e.jsx("th",{className:"py-2 px-3 text-right",children:"Balance"}),e.jsx("th",{className:"py-2 px-3 text-right",children:"Rate"}),e.jsx("th",{className:"py-2 px-3 text-right",children:"Annual Pmt"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Category"})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-8 text-center text-gray-500",children:"No debts found. Add debts in the Balance Sheet view."})}):a.map(k=>{const F=Es.selectedDebts.includes(k.id);return e.jsxs("tr",{className:`border-b hover:bg-gray-50 cursor-pointer ${F?"bg-teal-50":""}`,onClick:()=>{Lt(T=>({...T,selectedDebts:F?T.selectedDebts.filter(w=>w!==k.id):[...T.selectedDebts,k.id]}))},children:[e.jsx("td",{className:"py-2 px-3",onClick:T=>T.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:F,onChange:T=>{Lt(w=>({...w,selectedDebts:T.target.checked?[...w.selectedDebts,k.id]:w.selectedDebts.filter(E=>E!==k.id)}))},className:"rounded"})}),e.jsx("td",{className:"py-2 px-3 font-medium",children:k.description||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:k.lender||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:h(k.currentBalance||k.principalAmount||k.principal||0)}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:[(k.interestRate||0).toFixed(2),"%"]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:h(k.annualPayment||k.totalPayment||0)}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${k.category==="realEstate"?"bg-blue-100 text-blue-700":k.category==="intermediate"?"bg-purple-100 text-purple-700":"bg-amber-100 text-amber-700"}`,children:k.category==="realEstate"?"RE":k.category==="intermediate"?"Int":"Curr"})})]},k.id)})})]})}),o.length>0&&e.jsxs("div",{className:"p-3 bg-teal-50 border-t flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-teal-700",children:[e.jsx("strong",{children:o.length})," debt(s) selected totaling ",e.jsx("strong",{className:"font-mono",children:h(m)})]}),e.jsxs("span",{className:"text-sm text-teal-600",children:["Weighted Avg Rate: ",e.jsxs("strong",{children:[y.toFixed(2),"%"]})]})]})]}),o.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsx("h3",{className:"font-semibold text-gray-800",children:"Refinance Impact Analysis"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"py-2 text-left text-gray-600",children:"Metric"}),e.jsx("th",{className:"py-2 text-right text-blue-600",children:"Current"}),e.jsx("th",{className:"py-2 text-right text-teal-600",children:"After Refi"}),e.jsx("th",{className:"py-2 text-right text-gray-600",children:"Change"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium",children:"Weighted Avg Interest Rate"}),e.jsxs("td",{className:"py-3 text-right font-mono text-blue-700",children:[y.toFixed(2),"%"]}),e.jsxs("td",{className:"py-3 text-right font-mono text-teal-700",children:[i.interestRate.toFixed(2),"%"]}),e.jsxs("td",{className:`py-3 text-right font-mono font-semibold ${X<=0?"text-green-600":"text-red-600"}`,children:[X>=0?"+":"",X.toFixed(2),"%"]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium",children:"Annual Payment"}),e.jsx("td",{className:"py-3 text-right font-mono text-blue-700",children:h(g)}),e.jsx("td",{className:"py-3 text-right font-mono text-teal-700",children:h(A)}),e.jsxs("td",{className:`py-3 text-right font-mono font-semibold ${R<=0?"text-green-600":"text-red-600"}`,children:[R>=0?"+":"",h(R)]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium pl-4 text-gray-600",children:" Principal Portion"}),e.jsx("td",{className:"py-3 text-right font-mono text-blue-600",children:h(u)}),e.jsx("td",{className:"py-3 text-right font-mono text-teal-600",children:h(M)}),e.jsxs("td",{className:`py-3 text-right font-mono ${_>=0?"text-green-600":"text-red-600"}`,children:[_>=0?"+":"",h(_)]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium pl-4 text-gray-600",children:" Interest Portion"}),e.jsx("td",{className:"py-3 text-right font-mono text-blue-600",children:h(j)}),e.jsx("td",{className:"py-3 text-right font-mono text-teal-600",children:h(L)}),e.jsxs("td",{className:`py-3 text-right font-mono ${Y<=0?"text-green-600":"text-red-600"}`,children:[Y>=0?"+":"",h(Y)]})]}),e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("td",{className:"py-3 font-semibold",children:"Total Loan Balance"}),e.jsx("td",{className:"py-3 text-right font-mono font-semibold text-blue-700",children:h(m)}),e.jsx("td",{className:"py-3 text-right font-mono font-semibold text-teal-700",children:h(p)}),e.jsxs("td",{className:`py-3 text-right font-mono font-semibold ${p-m<=0?"text-green-600":"text-amber-600"}`,children:[p-m>=0?"+":"",h(p-m)]})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:`rounded-lg p-4 ${U>=0?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${U>=0?"text-green-600":"text-red-600"}`,children:"Annual Cash Flow Change"}),e.jsxs("div",{className:`text-xl font-bold font-mono ${U>=0?"text-green-700":"text-red-700"}`,children:[U>=0?"+":"",h(U)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:U>=0?"Improved operating cash":"Reduced operating cash"})]}),e.jsxs("div",{className:`rounded-lg p-4 ${B>=0?"bg-blue-50 border border-blue-200":"bg-amber-50 border border-amber-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${B>=0?"text-blue-600":"text-amber-600"}`,children:"Net Cash at Closing"}),e.jsxs("div",{className:`text-xl font-bold font-mono ${B>=0?"text-blue-700":"text-amber-700"}`,children:[B>=0?"+":"",h(B)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Cash out minus closing costs"})]}),e.jsxs("div",{className:"rounded-lg p-4 bg-purple-50 border border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-600",children:"Monthly Payment"}),e.jsx("div",{className:"text-xl font-bold font-mono text-purple-700",children:h(C)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["vs ",h(g/12)," current"]})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Balance Sheet Impact"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Liabilities Change:"}),e.jsxs("span",{className:`ml-2 font-mono font-semibold ${p-m<=0?"text-green-600":"text-amber-600"}`,children:[p-m>=0?"+":"",h(p-m)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Assets Change:"}),e.jsxs("span",{className:`ml-2 font-mono font-semibold ${B>=0?"text-green-600":"text-amber-600"}`,children:[B>=0?"+":"",h(B)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Net Worth Impact:"}),e.jsx("span",{className:`ml-2 font-mono font-semibold ${B-(p-m)>=0?"text-green-600":"text-red-600"}`,children:h(B-(p-m))}),e.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(closing costs)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Working Capital Impact:"}),e.jsxs("span",{className:`ml-2 font-mono font-semibold ${B-_>=0?"text-green-600":"text-red-600"}`,children:[B-_>=0?"+":"",h(B-_)]})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-teal-50",children:e.jsx("h3",{className:"font-semibold text-teal-800",children:"New Loan Terms"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest Rate (%)"}),e.jsx("input",{type:"number",step:"0.125",value:i.interestRate,onChange:k=>Lt(F=>({...F,newLoanTerms:{...F.newLoanTerms,interestRate:parseFloat(k.target.value)||0}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loan Term (Years)"}),e.jsx("input",{type:"number",value:i.termYears,onChange:k=>Lt(F=>({...F,newLoanTerms:{...F.newLoanTerms,termYears:parseInt(k.target.value)||0}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amortization (Years)"}),e.jsx("input",{type:"number",value:i.amortYears,onChange:k=>Lt(F=>({...F,newLoanTerms:{...F.newLoanTerms,amortYears:parseInt(k.target.value)||0}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave same as term for fully amortizing"})]}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Closing Costs"}),e.jsx(ne,{value:i.closingCosts,onChange:k=>Lt(F=>({...F,newLoanTerms:{...F.newLoanTerms,closingCosts:k}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Added to loan balance"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cash Out"}),e.jsx(ne,{value:i.cashOut,onChange:k=>Lt(F=>({...F,newLoanTerms:{...F.newLoanTerms,cashOut:k}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Additional borrowing for liquidity"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsx("h3",{className:"font-semibold text-gray-700",children:"Quick Rate Scenarios"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[5.5,6,6.5,7,7.5,8].map(k=>e.jsxs("button",{onClick:()=>Lt(F=>({...F,newLoanTerms:{...F.newLoanTerms,interestRate:k}})),className:`px-3 py-2 rounded text-sm font-mono ${i.interestRate===k?"bg-teal-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[k.toFixed(1),"%"]},k))})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsx("h3",{className:"font-semibold text-gray-700",children:"Quick Term Scenarios"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[10,15,20,25,30,35].map(k=>e.jsxs("button",{onClick:()=>Lt(F=>({...F,newLoanTerms:{...F.newLoanTerms,termYears:k,amortYears:k}})),className:`px-3 py-2 rounded text-sm ${i.termYears===k?"bg-teal-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[k," yr"]},k))})})]}),o.length>0&&e.jsxs("div",{className:"bg-teal-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm font-medium opacity-90",children:"Summary"}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Rate:"}),e.jsxs("span",{className:"font-mono",children:[y.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-80",children:"New Rate:"}),e.jsxs("span",{className:"font-mono",children:[i.interestRate.toFixed(2),"%"]})]}),e.jsx("hr",{className:"border-teal-400 my-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Pmt:"}),e.jsx("span",{className:"font-mono",children:h(g)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-80",children:"New Pmt:"}),e.jsx("span",{className:"font-mono",children:h(A)})]}),e.jsx("hr",{className:"border-teal-400 my-2"}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Cash Flow Impact:"}),e.jsxs("span",{className:"font-mono",children:[U>=0?"+":"",h(U)]})]})]})]})]})]})]})})()})]})]})}const h0={USERNAME:"justin@1p1ag.com",PASSWORD:"1p1ag2026"};function Tf({onLogin:t}){const[r,n]=Ee.useState(""),[l,c]=Ee.useState(""),[x,f]=Ee.useState(""),v=P=>{P.preventDefault(),r===h0.USERNAME&&l===h0.PASSWORD?(localStorage.setItem("farmAuth","true"),t()):f("Invalid username or password")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-800 to-green-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"1P1 Ag"}),e.jsx("p",{className:"text-gray-500",children:"Farm Financial Management"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:r,onChange:P=>n(P.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Enter email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:l,onChange:P=>c(P.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Enter password"})]}),x&&e.jsx("p",{className:"text-red-600 text-sm",children:x}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700",children:"Sign In"})]})]})})}function Lf(){const[t,r]=Ee.useState(!1),[n,l]=Ee.useState(!0);return Ee.useEffect(()=>{r(localStorage.getItem("farmAuth")==="true"),l(!1)},[]),n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):t?e.jsx(Df,{}):e.jsx(Tf,{onLogin:()=>r(!0)})}Yo.createRoot(document.getElementById("root")).render(e.jsx(C0.StrictMode,{children:e.jsx(Lf,{})}));
