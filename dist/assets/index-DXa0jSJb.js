(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))c(y);new MutationObserver(y=>{for(const w of y)if(w.type==="childList")for(const $ of w.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&c($)}).observe(document,{childList:!0,subtree:!0});function l(y){const w={};return y.integrity&&(w.integrity=y.integrity),y.referrerPolicy&&(w.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?w.credentials="include":y.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function c(y){if(y.ep)return;y.ep=!0;const w=l(y);fetch(y.href,w)}})();function bb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kh={exports:{}},si={},Jh={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vl=Symbol.for("react.element"),yb=Symbol.for("react.portal"),fb=Symbol.for("react.fragment"),jb=Symbol.for("react.strict_mode"),Nb=Symbol.for("react.profiler"),vb=Symbol.for("react.provider"),wb=Symbol.for("react.context"),Cb=Symbol.for("react.forward_ref"),Fb=Symbol.for("react.suspense"),Pb=Symbol.for("react.memo"),kb=Symbol.for("react.lazy"),Tu=Symbol.iterator;function Ab(t){return t===null||typeof t!="object"?null:(t=Tu&&t[Tu]||t["@@iterator"],typeof t=="function"?t:null)}var Qh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zh=Object.assign,Xh={};function gn(t,a,l){this.props=t,this.context=a,this.refs=Xh,this.updater=l||Qh}gn.prototype.isReactComponent={};gn.prototype.setState=function(t,a){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,a,"setState")};gn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bh(){}Bh.prototype=gn.prototype;function ld(t,a,l){this.props=t,this.context=a,this.refs=Xh,this.updater=l||Qh}var od=ld.prototype=new Bh;od.constructor=ld;Zh(od,gn.prototype);od.isPureReactComponent=!0;var Su=Array.isArray,ep=Object.prototype.hasOwnProperty,id={current:null},tp={key:!0,ref:!0,__self:!0,__source:!0};function sp(t,a,l){var c,y={},w=null,$=null;if(a!=null)for(c in a.ref!==void 0&&($=a.ref),a.key!==void 0&&(w=""+a.key),a)ep.call(a,c)&&!tp.hasOwnProperty(c)&&(y[c]=a[c]);var M=arguments.length-2;if(M===1)y.children=l;else if(1<M){for(var O=Array(M),W=0;W<M;W++)O[W]=arguments[W+2];y.children=O}if(t&&t.defaultProps)for(c in M=t.defaultProps,M)y[c]===void 0&&(y[c]=M[c]);return{$$typeof:vl,type:t,key:w,ref:$,props:y,_owner:id.current}}function Lb(t,a){return{$$typeof:vl,type:t.type,key:a,ref:t.ref,props:t.props,_owner:t._owner}}function cd(t){return typeof t=="object"&&t!==null&&t.$$typeof===vl}function Db(t){var a={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(l){return a[l]})}var Eu=/\/+/g;function $i(t,a){return typeof t=="object"&&t!==null&&t.key!=null?Db(""+t.key):a.toString(36)}function fo(t,a,l,c,y){var w=typeof t;(w==="undefined"||w==="boolean")&&(t=null);var $=!1;if(t===null)$=!0;else switch(w){case"string":case"number":$=!0;break;case"object":switch(t.$$typeof){case vl:case yb:$=!0}}if($)return $=t,y=y($),t=c===""?"."+$i($,0):c,Su(y)?(l="",t!=null&&(l=t.replace(Eu,"$&/")+"/"),fo(y,a,l,"",function(W){return W})):y!=null&&(cd(y)&&(y=Lb(y,l+(!y.key||$&&$.key===y.key?"":(""+y.key).replace(Eu,"$&/")+"/")+t)),a.push(y)),1;if($=0,c=c===""?".":c+":",Su(t))for(var M=0;M<t.length;M++){w=t[M];var O=c+$i(w,M);$+=fo(w,a,l,O,y)}else if(O=Ab(t),typeof O=="function")for(t=O.call(t),M=0;!(w=t.next()).done;)w=w.value,O=c+$i(w,M++),$+=fo(w,a,l,O,y);else if(w==="object")throw a=String(t),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return $}function Gl(t,a,l){if(t==null)return t;var c=[],y=0;return fo(t,c,"","",function(w){return a.call(l,w,y++)}),c}function Tb(t){if(t._status===-1){var a=t._result;a=a(),a.then(function(l){(t._status===0||t._status===-1)&&(t._status=1,t._result=l)},function(l){(t._status===0||t._status===-1)&&(t._status=2,t._result=l)}),t._status===-1&&(t._status=0,t._result=a)}if(t._status===1)return t._result.default;throw t._result}var rs={current:null},jo={transition:null},Sb={ReactCurrentDispatcher:rs,ReactCurrentBatchConfig:jo,ReactCurrentOwner:id};function rp(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Gl,forEach:function(t,a,l){Gl(t,function(){a.apply(this,arguments)},l)},count:function(t){var a=0;return Gl(t,function(){a++}),a},toArray:function(t){return Gl(t,function(a){return a})||[]},only:function(t){if(!cd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=gn;Xe.Fragment=fb;Xe.Profiler=Nb;Xe.PureComponent=ld;Xe.StrictMode=jb;Xe.Suspense=Fb;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sb;Xe.act=rp;Xe.cloneElement=function(t,a,l){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var c=Zh({},t.props),y=t.key,w=t.ref,$=t._owner;if(a!=null){if(a.ref!==void 0&&(w=a.ref,$=id.current),a.key!==void 0&&(y=""+a.key),t.type&&t.type.defaultProps)var M=t.type.defaultProps;for(O in a)ep.call(a,O)&&!tp.hasOwnProperty(O)&&(c[O]=a[O]===void 0&&M!==void 0?M[O]:a[O])}var O=arguments.length-2;if(O===1)c.children=l;else if(1<O){M=Array(O);for(var W=0;W<O;W++)M[W]=arguments[W+2];c.children=M}return{$$typeof:vl,type:t.type,key:y,ref:w,props:c,_owner:$}};Xe.createContext=function(t){return t={$$typeof:wb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vb,_context:t},t.Consumer=t};Xe.createElement=sp;Xe.createFactory=function(t){var a=sp.bind(null,t);return a.type=t,a};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:Cb,render:t}};Xe.isValidElement=cd;Xe.lazy=function(t){return{$$typeof:kb,_payload:{_status:-1,_result:t},_init:Tb}};Xe.memo=function(t,a){return{$$typeof:Pb,type:t,compare:a===void 0?null:a}};Xe.startTransition=function(t){var a=jo.transition;jo.transition={};try{t()}finally{jo.transition=a}};Xe.unstable_act=rp;Xe.useCallback=function(t,a){return rs.current.useCallback(t,a)};Xe.useContext=function(t){return rs.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return rs.current.useDeferredValue(t)};Xe.useEffect=function(t,a){return rs.current.useEffect(t,a)};Xe.useId=function(){return rs.current.useId()};Xe.useImperativeHandle=function(t,a,l){return rs.current.useImperativeHandle(t,a,l)};Xe.useInsertionEffect=function(t,a){return rs.current.useInsertionEffect(t,a)};Xe.useLayoutEffect=function(t,a){return rs.current.useLayoutEffect(t,a)};Xe.useMemo=function(t,a){return rs.current.useMemo(t,a)};Xe.useReducer=function(t,a,l){return rs.current.useReducer(t,a,l)};Xe.useRef=function(t){return rs.current.useRef(t)};Xe.useState=function(t){return rs.current.useState(t)};Xe.useSyncExternalStore=function(t,a,l){return rs.current.useSyncExternalStore(t,a,l)};Xe.useTransition=function(){return rs.current.useTransition()};Xe.version="18.3.1";Jh.exports=Xe;var je=Jh.exports;const Jt=bb(je);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb=je,$b=Symbol.for("react.element"),Ib=Symbol.for("react.fragment"),Rb=Object.prototype.hasOwnProperty,Mb=Eb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hb={key:!0,ref:!0,__self:!0,__source:!0};function ap(t,a,l){var c,y={},w=null,$=null;l!==void 0&&(w=""+l),a.key!==void 0&&(w=""+a.key),a.ref!==void 0&&($=a.ref);for(c in a)Rb.call(a,c)&&!Hb.hasOwnProperty(c)&&(y[c]=a[c]);if(t&&t.defaultProps)for(c in a=t.defaultProps,a)y[c]===void 0&&(y[c]=a[c]);return{$$typeof:$b,type:t,key:w,ref:$,props:y,_owner:Mb.current}}si.Fragment=Ib;si.jsx=ap;si.jsxs=ap;Kh.exports=si;var e=Kh.exports,uc={},np={exports:{}},Ns={},lp={exports:{}},op={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function a(fe,Oe){var Ie=fe.length;fe.push(Oe);e:for(;0<Ie;){var Be=Ie-1>>>1,st=fe[Be];if(0<y(st,Oe))fe[Be]=Oe,fe[Ie]=st,Ie=Be;else break e}}function l(fe){return fe.length===0?null:fe[0]}function c(fe){if(fe.length===0)return null;var Oe=fe[0],Ie=fe.pop();if(Ie!==Oe){fe[0]=Ie;e:for(var Be=0,st=fe.length,ws=st>>>1;Be<ws;){var ms=2*(Be+1)-1,Mt=fe[ms],us=ms+1,ns=fe[us];if(0>y(Mt,Ie))us<st&&0>y(ns,Mt)?(fe[Be]=ns,fe[us]=Ie,Be=us):(fe[Be]=Mt,fe[ms]=Ie,Be=ms);else if(us<st&&0>y(ns,Ie))fe[Be]=ns,fe[us]=Ie,Be=us;else break e}}return Oe}function y(fe,Oe){var Ie=fe.sortIndex-Oe.sortIndex;return Ie!==0?Ie:fe.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;t.unstable_now=function(){return w.now()}}else{var $=Date,M=$.now();t.unstable_now=function(){return $.now()-M}}var O=[],W=[],ne=1,ae=null,B=3,xe=!1,ce=!1,me=!1,ze=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(fe){for(var Oe=l(W);Oe!==null;){if(Oe.callback===null)c(W);else if(Oe.startTime<=fe)c(W),Oe.sortIndex=Oe.expirationTime,a(O,Oe);else break;Oe=l(W)}}function de(fe){if(me=!1,Z(fe),!ce)if(l(O)!==null)ce=!0,kt(Fe);else{var Oe=l(W);Oe!==null&&ht(de,Oe.startTime-fe)}}function Fe(fe,Oe){ce=!1,me&&(me=!1,Q(De),De=-1),xe=!0;var Ie=B;try{for(Z(Oe),ae=l(O);ae!==null&&(!(ae.expirationTime>Oe)||fe&&!Dt());){var Be=ae.callback;if(typeof Be=="function"){ae.callback=null,B=ae.priorityLevel;var st=Be(ae.expirationTime<=Oe);Oe=t.unstable_now(),typeof st=="function"?ae.callback=st:ae===l(O)&&c(O),Z(Oe)}else c(O);ae=l(O)}if(ae!==null)var ws=!0;else{var ms=l(W);ms!==null&&ht(de,ms.startTime-Oe),ws=!1}return ws}finally{ae=null,B=Ie,xe=!1}}var Ne=!1,Ae=null,De=-1,it=5,Pe=-1;function Dt(){return!(t.unstable_now()-Pe<it)}function ct(){if(Ae!==null){var fe=t.unstable_now();Pe=fe;var Oe=!0;try{Oe=Ae(!0,fe)}finally{Oe?J():(Ne=!1,Ae=null)}}else Ne=!1}var J;if(typeof G=="function")J=function(){G(ct)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Ve=ue.port2;ue.port1.onmessage=ct,J=function(){Ve.postMessage(null)}}else J=function(){ze(ct,0)};function kt(fe){Ae=fe,Ne||(Ne=!0,J())}function ht(fe,Oe){De=ze(function(){fe(t.unstable_now())},Oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(fe){fe.callback=null},t.unstable_continueExecution=function(){ce||xe||(ce=!0,kt(Fe))},t.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<fe?Math.floor(1e3/fe):5},t.unstable_getCurrentPriorityLevel=function(){return B},t.unstable_getFirstCallbackNode=function(){return l(O)},t.unstable_next=function(fe){switch(B){case 1:case 2:case 3:var Oe=3;break;default:Oe=B}var Ie=B;B=Oe;try{return fe()}finally{B=Ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(fe,Oe){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Ie=B;B=fe;try{return Oe()}finally{B=Ie}},t.unstable_scheduleCallback=function(fe,Oe,Ie){var Be=t.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Be+Ie:Be):Ie=Be,fe){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=Ie+st,fe={id:ne++,callback:Oe,priorityLevel:fe,startTime:Ie,expirationTime:st,sortIndex:-1},Ie>Be?(fe.sortIndex=Ie,a(W,fe),l(O)===null&&fe===l(W)&&(me?(Q(De),De=-1):me=!0,ht(de,Ie-Be))):(fe.sortIndex=st,a(O,fe),ce||xe||(ce=!0,kt(Fe))),fe},t.unstable_shouldYield=Dt,t.unstable_wrapCallback=function(fe){var Oe=B;return function(){var Ie=B;B=Oe;try{return fe.apply(this,arguments)}finally{B=Ie}}}})(op);lp.exports=op;var Ob=lp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb=je,js=Ob;function pe(t){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ip=new Set,nl={};function Aa(t,a){cn(t,a),cn(t+"Capture",a)}function cn(t,a){for(nl[t]=a,t=0;t<a.length;t++)ip.add(a[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=Object.prototype.hasOwnProperty,Vb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$u={},Iu={};function Ub(t){return hc.call(Iu,t)?!0:hc.call($u,t)?!1:Vb.test(t)?Iu[t]=!0:($u[t]=!0,!1)}function Yb(t,a,l,c){if(l!==null&&l.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return c?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wb(t,a,l,c){if(a===null||typeof a>"u"||Yb(t,a,l,c))return!0;if(c)return!1;if(l!==null)switch(l.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function as(t,a,l,c,y,w,$){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=c,this.attributeNamespace=y,this.mustUseProperty=l,this.propertyName=t,this.type=a,this.sanitizeURL=w,this.removeEmptyString=$}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wt[t]=new as(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var a=t[0];Wt[a]=new as(a,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wt[t]=new as(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wt[t]=new as(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wt[t]=new as(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wt[t]=new as(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wt[t]=new as(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wt[t]=new as(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wt[t]=new as(t,5,!1,t.toLowerCase(),null,!1,!1)});var dd=/[\-:]([a-z])/g;function xd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var a=t.replace(dd,xd);Wt[a]=new as(a,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var a=t.replace(dd,xd);Wt[a]=new as(a,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var a=t.replace(dd,xd);Wt[a]=new as(a,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wt[t]=new as(t,1,!1,t.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new as("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wt[t]=new as(t,1,!1,t.toLowerCase(),null,!0,!0)});function md(t,a,l,c){var y=Wt.hasOwnProperty(a)?Wt[a]:null;(y!==null?y.type!==0:c||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(Wb(a,l,y,c)&&(l=null),c||y===null?Ub(a)&&(l===null?t.removeAttribute(a):t.setAttribute(a,""+l)):y.mustUseProperty?t[y.propertyName]=l===null?y.type===3?!1:"":l:(a=y.attributeName,c=y.attributeNamespace,l===null?t.removeAttribute(a):(y=y.type,l=y===3||y===4&&l===!0?"":""+l,c?t.setAttributeNS(c,a,l):t.setAttribute(a,l))))}var Fr=zb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kl=Symbol.for("react.element"),Wa=Symbol.for("react.portal"),_a=Symbol.for("react.fragment"),ud=Symbol.for("react.strict_mode"),pc=Symbol.for("react.profiler"),cp=Symbol.for("react.provider"),dp=Symbol.for("react.context"),hd=Symbol.for("react.forward_ref"),gc=Symbol.for("react.suspense"),bc=Symbol.for("react.suspense_list"),pd=Symbol.for("react.memo"),Mr=Symbol.for("react.lazy"),xp=Symbol.for("react.offscreen"),Ru=Symbol.iterator;function In(t){return t===null||typeof t!="object"?null:(t=Ru&&t[Ru]||t["@@iterator"],typeof t=="function"?t:null)}var Ft=Object.assign,Ii;function _n(t){if(Ii===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ii=a&&a[1]||""}return`
`+Ii+t}var Ri=!1;function Mi(t,a){if(!t||Ri)return"";Ri=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(W){var c=W}Reflect.construct(t,[],a)}else{try{a.call()}catch(W){c=W}t.call(a.prototype)}else{try{throw Error()}catch(W){c=W}t()}}catch(W){if(W&&c&&typeof W.stack=="string"){for(var y=W.stack.split(`
`),w=c.stack.split(`
`),$=y.length-1,M=w.length-1;1<=$&&0<=M&&y[$]!==w[M];)M--;for(;1<=$&&0<=M;$--,M--)if(y[$]!==w[M]){if($!==1||M!==1)do if($--,M--,0>M||y[$]!==w[M]){var O=`
`+y[$].replace(" at new "," at ");return t.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",t.displayName)),O}while(1<=$&&0<=M);break}}}finally{Ri=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?_n(t):""}function _b(t){switch(t.tag){case 5:return _n(t.type);case 16:return _n("Lazy");case 13:return _n("Suspense");case 19:return _n("SuspenseList");case 0:case 2:case 15:return t=Mi(t.type,!1),t;case 11:return t=Mi(t.type.render,!1),t;case 1:return t=Mi(t.type,!0),t;default:return""}}function yc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _a:return"Fragment";case Wa:return"Portal";case pc:return"Profiler";case ud:return"StrictMode";case gc:return"Suspense";case bc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dp:return(t.displayName||"Context")+".Consumer";case cp:return(t._context.displayName||"Context")+".Provider";case hd:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pd:return a=t.displayName||null,a!==null?a:yc(t.type)||"Memo";case Mr:a=t._payload,t=t._init;try{return yc(t(a))}catch{}}return null}function qb(t){var a=t.type;switch(t.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=a.render,t=t.displayName||t.name||"",a.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yc(a);case 8:return a===ud?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mp(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Gb(t){var a=mp(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),c=""+t[a];if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,w=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return y.call(this)},set:function($){c=""+$,w.call(this,$)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function($){c=""+$},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Jl(t){t._valueTracker||(t._valueTracker=Gb(t))}function up(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return t&&(c=mp(t)?t.checked?"true":"false":t.value),t=c,t!==l?(a.setValue(t),!0):!1}function To(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fc(t,a){var l=a.checked;return Ft({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function Mu(t,a){var l=a.defaultValue==null?"":a.defaultValue,c=a.checked!=null?a.checked:a.defaultChecked;l=Zr(a.value!=null?a.value:l),t._wrapperState={initialChecked:c,initialValue:l,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function hp(t,a){a=a.checked,a!=null&&md(t,"checked",a,!1)}function jc(t,a){hp(t,a);var l=Zr(a.value),c=a.type;if(l!=null)c==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}a.hasOwnProperty("value")?Nc(t,a.type,l):a.hasOwnProperty("defaultValue")&&Nc(t,a.type,Zr(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(t.defaultChecked=!!a.defaultChecked)}function Hu(t,a,l){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var c=a.type;if(!(c!=="submit"&&c!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+t._wrapperState.initialValue,l||a===t.value||(t.value=a),t.defaultValue=a}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function Nc(t,a,l){(a!=="number"||To(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var qn=Array.isArray;function sn(t,a,l,c){if(t=t.options,a){a={};for(var y=0;y<l.length;y++)a["$"+l[y]]=!0;for(l=0;l<t.length;l++)y=a.hasOwnProperty("$"+t[l].value),t[l].selected!==y&&(t[l].selected=y),y&&c&&(t[l].defaultSelected=!0)}else{for(l=""+Zr(l),a=null,y=0;y<t.length;y++){if(t[y].value===l){t[y].selected=!0,c&&(t[y].defaultSelected=!0);return}a!==null||t[y].disabled||(a=t[y])}a!==null&&(a.selected=!0)}}function vc(t,a){if(a.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Ft({},a,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ou(t,a){var l=a.value;if(l==null){if(l=a.children,a=a.defaultValue,l!=null){if(a!=null)throw Error(pe(92));if(qn(l)){if(1<l.length)throw Error(pe(93));l=l[0]}a=l}a==null&&(a=""),l=a}t._wrapperState={initialValue:Zr(l)}}function pp(t,a){var l=Zr(a.value),c=Zr(a.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),a.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),c!=null&&(t.defaultValue=""+c)}function zu(t){var a=t.textContent;a===t._wrapperState.initialValue&&a!==""&&a!==null&&(t.value=a)}function gp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wc(t,a){return t==null||t==="http://www.w3.org/1999/xhtml"?gp(a):t==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ql,bp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,l,c,y){MSApp.execUnsafeLocalFunction(function(){return t(a,l,c,y)})}:t}(function(t,a){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=a;else{for(Ql=Ql||document.createElement("div"),Ql.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Ql.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;a.firstChild;)t.appendChild(a.firstChild)}});function ll(t,a){if(a){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=a;return}}t.textContent=a}var Jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kb=["Webkit","ms","Moz","O"];Object.keys(Jn).forEach(function(t){Kb.forEach(function(a){a=a+t.charAt(0).toUpperCase()+t.substring(1),Jn[a]=Jn[t]})});function yp(t,a,l){return a==null||typeof a=="boolean"||a===""?"":l||typeof a!="number"||a===0||Jn.hasOwnProperty(t)&&Jn[t]?(""+a).trim():a+"px"}function fp(t,a){t=t.style;for(var l in a)if(a.hasOwnProperty(l)){var c=l.indexOf("--")===0,y=yp(l,a[l],c);l==="float"&&(l="cssFloat"),c?t.setProperty(l,y):t[l]=y}}var Jb=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cc(t,a){if(a){if(Jb[t]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(pe(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(pe(61))}if(a.style!=null&&typeof a.style!="object")throw Error(pe(62))}}function Fc(t,a){if(t.indexOf("-")===-1)return typeof a.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=null;function gd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kc=null,rn=null,an=null;function Vu(t){if(t=Fl(t)){if(typeof kc!="function")throw Error(pe(280));var a=t.stateNode;a&&(a=oi(a),kc(t.stateNode,t.type,a))}}function jp(t){rn?an?an.push(t):an=[t]:rn=t}function Np(){if(rn){var t=rn,a=an;if(an=rn=null,Vu(t),a)for(t=0;t<a.length;t++)Vu(a[t])}}function vp(t,a){return t(a)}function wp(){}var Hi=!1;function Cp(t,a,l){if(Hi)return t(a,l);Hi=!0;try{return vp(t,a,l)}finally{Hi=!1,(rn!==null||an!==null)&&(wp(),Np())}}function ol(t,a){var l=t.stateNode;if(l===null)return null;var c=oi(l);if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(pe(231,a,typeof l));return l}var Ac=!1;if(Nr)try{var Rn={};Object.defineProperty(Rn,"passive",{get:function(){Ac=!0}}),window.addEventListener("test",Rn,Rn),window.removeEventListener("test",Rn,Rn)}catch{Ac=!1}function Qb(t,a,l,c,y,w,$,M,O){var W=Array.prototype.slice.call(arguments,3);try{a.apply(l,W)}catch(ne){this.onError(ne)}}var Qn=!1,So=null,Eo=!1,Lc=null,Zb={onError:function(t){Qn=!0,So=t}};function Xb(t,a,l,c,y,w,$,M,O){Qn=!1,So=null,Qb.apply(Zb,arguments)}function Bb(t,a,l,c,y,w,$,M,O){if(Xb.apply(this,arguments),Qn){if(Qn){var W=So;Qn=!1,So=null}else throw Error(pe(198));Eo||(Eo=!0,Lc=W)}}function La(t){var a=t,l=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,a.flags&4098&&(l=a.return),t=a.return;while(t)}return a.tag===3?l:null}function Fp(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function Uu(t){if(La(t)!==t)throw Error(pe(188))}function ey(t){var a=t.alternate;if(!a){if(a=La(t),a===null)throw Error(pe(188));return a!==t?null:t}for(var l=t,c=a;;){var y=l.return;if(y===null)break;var w=y.alternate;if(w===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===l)return Uu(y),t;if(w===c)return Uu(y),a;w=w.sibling}throw Error(pe(188))}if(l.return!==c.return)l=y,c=w;else{for(var $=!1,M=y.child;M;){if(M===l){$=!0,l=y,c=w;break}if(M===c){$=!0,c=y,l=w;break}M=M.sibling}if(!$){for(M=w.child;M;){if(M===l){$=!0,l=w,c=y;break}if(M===c){$=!0,c=w,l=y;break}M=M.sibling}if(!$)throw Error(pe(189))}}if(l.alternate!==c)throw Error(pe(190))}if(l.tag!==3)throw Error(pe(188));return l.stateNode.current===l?t:a}function Pp(t){return t=ey(t),t!==null?kp(t):null}function kp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var a=kp(t);if(a!==null)return a;t=t.sibling}return null}var Ap=js.unstable_scheduleCallback,Yu=js.unstable_cancelCallback,ty=js.unstable_shouldYield,sy=js.unstable_requestPaint,Lt=js.unstable_now,ry=js.unstable_getCurrentPriorityLevel,bd=js.unstable_ImmediatePriority,Lp=js.unstable_UserBlockingPriority,$o=js.unstable_NormalPriority,ay=js.unstable_LowPriority,Dp=js.unstable_IdlePriority,ri=null,rr=null;function ny(t){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(ri,t,void 0,(t.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:iy,ly=Math.log,oy=Math.LN2;function iy(t){return t>>>=0,t===0?32:31-(ly(t)/oy|0)|0}var Zl=64,Xl=4194304;function Gn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Io(t,a){var l=t.pendingLanes;if(l===0)return 0;var c=0,y=t.suspendedLanes,w=t.pingedLanes,$=l&268435455;if($!==0){var M=$&~y;M!==0?c=Gn(M):(w&=$,w!==0&&(c=Gn(w)))}else $=l&~y,$!==0?c=Gn($):w!==0&&(c=Gn(w));if(c===0)return 0;if(a!==0&&a!==c&&!(a&y)&&(y=c&-c,w=a&-a,y>=w||y===16&&(w&4194240)!==0))return a;if(c&4&&(c|=l&16),a=t.entangledLanes,a!==0)for(t=t.entanglements,a&=c;0<a;)l=31-Vs(a),y=1<<l,c|=t[l],a&=~y;return c}function cy(t,a){switch(t){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dy(t,a){for(var l=t.suspendedLanes,c=t.pingedLanes,y=t.expirationTimes,w=t.pendingLanes;0<w;){var $=31-Vs(w),M=1<<$,O=y[$];O===-1?(!(M&l)||M&c)&&(y[$]=cy(M,a)):O<=a&&(t.expiredLanes|=M),w&=~M}}function Dc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tp(){var t=Zl;return Zl<<=1,!(Zl&4194240)&&(Zl=64),t}function Oi(t){for(var a=[],l=0;31>l;l++)a.push(t);return a}function wl(t,a,l){t.pendingLanes|=a,a!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,a=31-Vs(a),t[a]=l}function xy(t,a){var l=t.pendingLanes&~a;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=a,t.mutableReadLanes&=a,t.entangledLanes&=a,a=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<l;){var y=31-Vs(l),w=1<<y;a[y]=0,c[y]=-1,t[y]=-1,l&=~w}}function yd(t,a){var l=t.entangledLanes|=a;for(t=t.entanglements;l;){var c=31-Vs(l),y=1<<c;y&a|t[c]&a&&(t[c]|=a),l&=~y}}var xt=0;function Sp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ep,fd,$p,Ip,Rp,Tc=!1,Bl=[],Yr=null,Wr=null,_r=null,il=new Map,cl=new Map,Or=[],my="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wu(t,a){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":il.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(a.pointerId)}}function Mn(t,a,l,c,y,w){return t===null||t.nativeEvent!==w?(t={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:w,targetContainers:[y]},a!==null&&(a=Fl(a),a!==null&&fd(a)),t):(t.eventSystemFlags|=c,a=t.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),t)}function uy(t,a,l,c,y){switch(a){case"focusin":return Yr=Mn(Yr,t,a,l,c,y),!0;case"dragenter":return Wr=Mn(Wr,t,a,l,c,y),!0;case"mouseover":return _r=Mn(_r,t,a,l,c,y),!0;case"pointerover":var w=y.pointerId;return il.set(w,Mn(il.get(w)||null,t,a,l,c,y)),!0;case"gotpointercapture":return w=y.pointerId,cl.set(w,Mn(cl.get(w)||null,t,a,l,c,y)),!0}return!1}function Mp(t){var a=ya(t.target);if(a!==null){var l=La(a);if(l!==null){if(a=l.tag,a===13){if(a=Fp(l),a!==null){t.blockedOn=a,Rp(t.priority,function(){$p(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function No(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var l=Sc(t.domEventName,t.eventSystemFlags,a[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var c=new l.constructor(l.type,l);Pc=c,l.target.dispatchEvent(c),Pc=null}else return a=Fl(l),a!==null&&fd(a),t.blockedOn=l,!1;a.shift()}return!0}function _u(t,a,l){No(t)&&l.delete(a)}function hy(){Tc=!1,Yr!==null&&No(Yr)&&(Yr=null),Wr!==null&&No(Wr)&&(Wr=null),_r!==null&&No(_r)&&(_r=null),il.forEach(_u),cl.forEach(_u)}function Hn(t,a){t.blockedOn===a&&(t.blockedOn=null,Tc||(Tc=!0,js.unstable_scheduleCallback(js.unstable_NormalPriority,hy)))}function dl(t){function a(y){return Hn(y,t)}if(0<Bl.length){Hn(Bl[0],t);for(var l=1;l<Bl.length;l++){var c=Bl[l];c.blockedOn===t&&(c.blockedOn=null)}}for(Yr!==null&&Hn(Yr,t),Wr!==null&&Hn(Wr,t),_r!==null&&Hn(_r,t),il.forEach(a),cl.forEach(a),l=0;l<Or.length;l++)c=Or[l],c.blockedOn===t&&(c.blockedOn=null);for(;0<Or.length&&(l=Or[0],l.blockedOn===null);)Mp(l),l.blockedOn===null&&Or.shift()}var nn=Fr.ReactCurrentBatchConfig,Ro=!0;function py(t,a,l,c){var y=xt,w=nn.transition;nn.transition=null;try{xt=1,jd(t,a,l,c)}finally{xt=y,nn.transition=w}}function gy(t,a,l,c){var y=xt,w=nn.transition;nn.transition=null;try{xt=4,jd(t,a,l,c)}finally{xt=y,nn.transition=w}}function jd(t,a,l,c){if(Ro){var y=Sc(t,a,l,c);if(y===null)Ji(t,a,c,Mo,l),Wu(t,c);else if(uy(y,t,a,l,c))c.stopPropagation();else if(Wu(t,c),a&4&&-1<my.indexOf(t)){for(;y!==null;){var w=Fl(y);if(w!==null&&Ep(w),w=Sc(t,a,l,c),w===null&&Ji(t,a,c,Mo,l),w===y)break;y=w}y!==null&&c.stopPropagation()}else Ji(t,a,c,null,l)}}var Mo=null;function Sc(t,a,l,c){if(Mo=null,t=gd(c),t=ya(t),t!==null)if(a=La(t),a===null)t=null;else if(l=a.tag,l===13){if(t=Fp(a),t!==null)return t;t=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null);return Mo=t,null}function Hp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ry()){case bd:return 1;case Lp:return 4;case $o:case ay:return 16;case Dp:return 536870912;default:return 16}default:return 16}}var Vr=null,Nd=null,vo=null;function Op(){if(vo)return vo;var t,a=Nd,l=a.length,c,y="value"in Vr?Vr.value:Vr.textContent,w=y.length;for(t=0;t<l&&a[t]===y[t];t++);var $=l-t;for(c=1;c<=$&&a[l-c]===y[w-c];c++);return vo=y.slice(t,1<c?1-c:void 0)}function wo(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function eo(){return!0}function qu(){return!1}function vs(t){function a(l,c,y,w,$){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=w,this.target=$,this.currentTarget=null;for(var M in t)t.hasOwnProperty(M)&&(l=t[M],this[M]=l?l(w):w[M]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?eo:qu,this.isPropagationStopped=qu,this}return Ft(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),a}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vd=vs(bn),Cl=Ft({},bn,{view:0,detail:0}),by=vs(Cl),zi,Vi,On,ai=Ft({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==On&&(On&&t.type==="mousemove"?(zi=t.screenX-On.screenX,Vi=t.screenY-On.screenY):Vi=zi=0,On=t),zi)},movementY:function(t){return"movementY"in t?t.movementY:Vi}}),Gu=vs(ai),yy=Ft({},ai,{dataTransfer:0}),fy=vs(yy),jy=Ft({},Cl,{relatedTarget:0}),Ui=vs(jy),Ny=Ft({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),vy=vs(Ny),wy=Ft({},bn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cy=vs(wy),Fy=Ft({},bn,{data:0}),Ku=vs(Fy),Py={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ky={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ay={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ly(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Ay[t])?!!a[t]:!1}function wd(){return Ly}var Dy=Ft({},Cl,{key:function(t){if(t.key){var a=Py[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=wo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ky[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wd,charCode:function(t){return t.type==="keypress"?wo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ty=vs(Dy),Sy=Ft({},ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ju=vs(Sy),Ey=Ft({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wd}),$y=vs(Ey),Iy=Ft({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ry=vs(Iy),My=Ft({},ai,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hy=vs(My),Oy=[9,13,27,32],Cd=Nr&&"CompositionEvent"in window,Zn=null;Nr&&"documentMode"in document&&(Zn=document.documentMode);var zy=Nr&&"TextEvent"in window&&!Zn,zp=Nr&&(!Cd||Zn&&8<Zn&&11>=Zn),Qu=" ",Zu=!1;function Vp(t,a){switch(t){case"keyup":return Oy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Up(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qa=!1;function Vy(t,a){switch(t){case"compositionend":return Up(a);case"keypress":return a.which!==32?null:(Zu=!0,Qu);case"textInput":return t=a.data,t===Qu&&Zu?null:t;default:return null}}function Uy(t,a){if(qa)return t==="compositionend"||!Cd&&Vp(t,a)?(t=Op(),vo=Nd=Vr=null,qa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return zp&&a.locale!=="ko"?null:a.data;default:return null}}var Yy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Yy[t.type]:a==="textarea"}function Yp(t,a,l,c){jp(c),a=Ho(a,"onChange"),0<a.length&&(l=new vd("onChange","change",null,l,c),t.push({event:l,listeners:a}))}var Xn=null,xl=null;function Wy(t){eg(t,0)}function ni(t){var a=Ja(t);if(up(a))return t}function _y(t,a){if(t==="change")return a}var Wp=!1;if(Nr){var Yi;if(Nr){var Wi="oninput"in document;if(!Wi){var Bu=document.createElement("div");Bu.setAttribute("oninput","return;"),Wi=typeof Bu.oninput=="function"}Yi=Wi}else Yi=!1;Wp=Yi&&(!document.documentMode||9<document.documentMode)}function eh(){Xn&&(Xn.detachEvent("onpropertychange",_p),xl=Xn=null)}function _p(t){if(t.propertyName==="value"&&ni(xl)){var a=[];Yp(a,xl,t,gd(t)),Cp(Wy,a)}}function qy(t,a,l){t==="focusin"?(eh(),Xn=a,xl=l,Xn.attachEvent("onpropertychange",_p)):t==="focusout"&&eh()}function Gy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ni(xl)}function Ky(t,a){if(t==="click")return ni(a)}function Jy(t,a){if(t==="input"||t==="change")return ni(a)}function Qy(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Ys=typeof Object.is=="function"?Object.is:Qy;function ml(t,a){if(Ys(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var l=Object.keys(t),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!hc.call(a,y)||!Ys(t[y],a[y]))return!1}return!0}function th(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sh(t,a){var l=th(t);t=0;for(var c;l;){if(l.nodeType===3){if(c=t+l.textContent.length,t<=a&&c>=a)return{node:l,offset:a-t};t=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=th(l)}}function qp(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?qp(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Gp(){for(var t=window,a=To();a instanceof t.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)t=a.contentWindow;else break;a=To(t.document)}return a}function Fd(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}function Zy(t){var a=Gp(),l=t.focusedElem,c=t.selectionRange;if(a!==l&&l&&l.ownerDocument&&qp(l.ownerDocument.documentElement,l)){if(c!==null&&Fd(l)){if(a=c.start,t=c.end,t===void 0&&(t=a),"selectionStart"in l)l.selectionStart=a,l.selectionEnd=Math.min(t,l.value.length);else if(t=(a=l.ownerDocument||document)&&a.defaultView||window,t.getSelection){t=t.getSelection();var y=l.textContent.length,w=Math.min(c.start,y);c=c.end===void 0?w:Math.min(c.end,y),!t.extend&&w>c&&(y=c,c=w,w=y),y=sh(l,w);var $=sh(l,c);y&&$&&(t.rangeCount!==1||t.anchorNode!==y.node||t.anchorOffset!==y.offset||t.focusNode!==$.node||t.focusOffset!==$.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),t.removeAllRanges(),w>c?(t.addRange(a),t.extend($.node,$.offset)):(a.setEnd($.node,$.offset),t.addRange(a)))}}for(a=[],t=l;t=t.parentNode;)t.nodeType===1&&a.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<a.length;l++)t=a[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xy=Nr&&"documentMode"in document&&11>=document.documentMode,Ga=null,Ec=null,Bn=null,$c=!1;function rh(t,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;$c||Ga==null||Ga!==To(c)||(c=Ga,"selectionStart"in c&&Fd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Bn&&ml(Bn,c)||(Bn=c,c=Ho(Ec,"onSelect"),0<c.length&&(a=new vd("onSelect","select",null,a,l),t.push({event:a,listeners:c}),a.target=Ga)))}function to(t,a){var l={};return l[t.toLowerCase()]=a.toLowerCase(),l["Webkit"+t]="webkit"+a,l["Moz"+t]="moz"+a,l}var Ka={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},_i={},Kp={};Nr&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function li(t){if(_i[t])return _i[t];if(!Ka[t])return t;var a=Ka[t],l;for(l in a)if(a.hasOwnProperty(l)&&l in Kp)return _i[t]=a[l];return t}var Jp=li("animationend"),Qp=li("animationiteration"),Zp=li("animationstart"),Xp=li("transitionend"),Bp=new Map,ah="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,a){Bp.set(t,a),Aa(a,[t])}for(var qi=0;qi<ah.length;qi++){var Gi=ah[qi],By=Gi.toLowerCase(),ef=Gi[0].toUpperCase()+Gi.slice(1);Br(By,"on"+ef)}Br(Jp,"onAnimationEnd");Br(Qp,"onAnimationIteration");Br(Zp,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(Xp,"onTransitionEnd");cn("onMouseEnter",["mouseout","mouseover"]);cn("onMouseLeave",["mouseout","mouseover"]);cn("onPointerEnter",["pointerout","pointerover"]);cn("onPointerLeave",["pointerout","pointerover"]);Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kn));function nh(t,a,l){var c=t.type||"unknown-event";t.currentTarget=l,Bb(c,a,void 0,t),t.currentTarget=null}function eg(t,a){a=(a&4)!==0;for(var l=0;l<t.length;l++){var c=t[l],y=c.event;c=c.listeners;e:{var w=void 0;if(a)for(var $=c.length-1;0<=$;$--){var M=c[$],O=M.instance,W=M.currentTarget;if(M=M.listener,O!==w&&y.isPropagationStopped())break e;nh(y,M,W),w=O}else for($=0;$<c.length;$++){if(M=c[$],O=M.instance,W=M.currentTarget,M=M.listener,O!==w&&y.isPropagationStopped())break e;nh(y,M,W),w=O}}}if(Eo)throw t=Lc,Eo=!1,Lc=null,t}function yt(t,a){var l=a[Oc];l===void 0&&(l=a[Oc]=new Set);var c=t+"__bubble";l.has(c)||(tg(a,t,2,!1),l.add(c))}function Ki(t,a,l){var c=0;a&&(c|=4),tg(l,t,c,a)}var so="_reactListening"+Math.random().toString(36).slice(2);function ul(t){if(!t[so]){t[so]=!0,ip.forEach(function(l){l!=="selectionchange"&&(tf.has(l)||Ki(l,!1,t),Ki(l,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[so]||(a[so]=!0,Ki("selectionchange",!1,a))}}function tg(t,a,l,c){switch(Hp(a)){case 1:var y=py;break;case 4:y=gy;break;default:y=jd}l=y.bind(null,a,l,t),y=void 0,!Ac||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),c?y!==void 0?t.addEventListener(a,l,{capture:!0,passive:y}):t.addEventListener(a,l,!0):y!==void 0?t.addEventListener(a,l,{passive:y}):t.addEventListener(a,l,!1)}function Ji(t,a,l,c,y){var w=c;if(!(a&1)&&!(a&2)&&c!==null)e:for(;;){if(c===null)return;var $=c.tag;if($===3||$===4){var M=c.stateNode.containerInfo;if(M===y||M.nodeType===8&&M.parentNode===y)break;if($===4)for($=c.return;$!==null;){var O=$.tag;if((O===3||O===4)&&(O=$.stateNode.containerInfo,O===y||O.nodeType===8&&O.parentNode===y))return;$=$.return}for(;M!==null;){if($=ya(M),$===null)return;if(O=$.tag,O===5||O===6){c=w=$;continue e}M=M.parentNode}}c=c.return}Cp(function(){var W=w,ne=gd(l),ae=[];e:{var B=Bp.get(t);if(B!==void 0){var xe=vd,ce=t;switch(t){case"keypress":if(wo(l)===0)break e;case"keydown":case"keyup":xe=Ty;break;case"focusin":ce="focus",xe=Ui;break;case"focusout":ce="blur",xe=Ui;break;case"beforeblur":case"afterblur":xe=Ui;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=fy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=$y;break;case Jp:case Qp:case Zp:xe=vy;break;case Xp:xe=Ry;break;case"scroll":xe=by;break;case"wheel":xe=Hy;break;case"copy":case"cut":case"paste":xe=Cy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=Ju}var me=(a&4)!==0,ze=!me&&t==="scroll",Q=me?B!==null?B+"Capture":null:B;me=[];for(var G=W,Z;G!==null;){Z=G;var de=Z.stateNode;if(Z.tag===5&&de!==null&&(Z=de,Q!==null&&(de=ol(G,Q),de!=null&&me.push(hl(G,de,Z)))),ze)break;G=G.return}0<me.length&&(B=new xe(B,ce,null,l,ne),ae.push({event:B,listeners:me}))}}if(!(a&7)){e:{if(B=t==="mouseover"||t==="pointerover",xe=t==="mouseout"||t==="pointerout",B&&l!==Pc&&(ce=l.relatedTarget||l.fromElement)&&(ya(ce)||ce[vr]))break e;if((xe||B)&&(B=ne.window===ne?ne:(B=ne.ownerDocument)?B.defaultView||B.parentWindow:window,xe?(ce=l.relatedTarget||l.toElement,xe=W,ce=ce?ya(ce):null,ce!==null&&(ze=La(ce),ce!==ze||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(xe=null,ce=W),xe!==ce)){if(me=Gu,de="onMouseLeave",Q="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(me=Ju,de="onPointerLeave",Q="onPointerEnter",G="pointer"),ze=xe==null?B:Ja(xe),Z=ce==null?B:Ja(ce),B=new me(de,G+"leave",xe,l,ne),B.target=ze,B.relatedTarget=Z,de=null,ya(ne)===W&&(me=new me(Q,G+"enter",ce,l,ne),me.target=Z,me.relatedTarget=ze,de=me),ze=de,xe&&ce)t:{for(me=xe,Q=ce,G=0,Z=me;Z;Z=Va(Z))G++;for(Z=0,de=Q;de;de=Va(de))Z++;for(;0<G-Z;)me=Va(me),G--;for(;0<Z-G;)Q=Va(Q),Z--;for(;G--;){if(me===Q||Q!==null&&me===Q.alternate)break t;me=Va(me),Q=Va(Q)}me=null}else me=null;xe!==null&&lh(ae,B,xe,me,!1),ce!==null&&ze!==null&&lh(ae,ze,ce,me,!0)}}e:{if(B=W?Ja(W):window,xe=B.nodeName&&B.nodeName.toLowerCase(),xe==="select"||xe==="input"&&B.type==="file")var Fe=_y;else if(Xu(B))if(Wp)Fe=Jy;else{Fe=Gy;var Ne=qy}else(xe=B.nodeName)&&xe.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(Fe=Ky);if(Fe&&(Fe=Fe(t,W))){Yp(ae,Fe,l,ne);break e}Ne&&Ne(t,B,W),t==="focusout"&&(Ne=B._wrapperState)&&Ne.controlled&&B.type==="number"&&Nc(B,"number",B.value)}switch(Ne=W?Ja(W):window,t){case"focusin":(Xu(Ne)||Ne.contentEditable==="true")&&(Ga=Ne,Ec=W,Bn=null);break;case"focusout":Bn=Ec=Ga=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,rh(ae,l,ne);break;case"selectionchange":if(Xy)break;case"keydown":case"keyup":rh(ae,l,ne)}var Ae;if(Cd)e:{switch(t){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else qa?Vp(t,l)&&(De="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(zp&&l.locale!=="ko"&&(qa||De!=="onCompositionStart"?De==="onCompositionEnd"&&qa&&(Ae=Op()):(Vr=ne,Nd="value"in Vr?Vr.value:Vr.textContent,qa=!0)),Ne=Ho(W,De),0<Ne.length&&(De=new Ku(De,t,null,l,ne),ae.push({event:De,listeners:Ne}),Ae?De.data=Ae:(Ae=Up(l),Ae!==null&&(De.data=Ae)))),(Ae=zy?Vy(t,l):Uy(t,l))&&(W=Ho(W,"onBeforeInput"),0<W.length&&(ne=new Ku("onBeforeInput","beforeinput",null,l,ne),ae.push({event:ne,listeners:W}),ne.data=Ae))}eg(ae,a)})}function hl(t,a,l){return{instance:t,listener:a,currentTarget:l}}function Ho(t,a){for(var l=a+"Capture",c=[];t!==null;){var y=t,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=ol(t,l),w!=null&&c.unshift(hl(t,w,y)),w=ol(t,a),w!=null&&c.push(hl(t,w,y))),t=t.return}return c}function Va(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lh(t,a,l,c,y){for(var w=a._reactName,$=[];l!==null&&l!==c;){var M=l,O=M.alternate,W=M.stateNode;if(O!==null&&O===c)break;M.tag===5&&W!==null&&(M=W,y?(O=ol(l,w),O!=null&&$.unshift(hl(l,O,M))):y||(O=ol(l,w),O!=null&&$.push(hl(l,O,M)))),l=l.return}$.length!==0&&t.push({event:a,listeners:$})}var sf=/\r\n?/g,rf=/\u0000|\uFFFD/g;function oh(t){return(typeof t=="string"?t:""+t).replace(sf,`
`).replace(rf,"")}function ro(t,a,l){if(a=oh(a),oh(t)!==a&&l)throw Error(pe(425))}function Oo(){}var Ic=null,Rc=null;function Mc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Hc=typeof setTimeout=="function"?setTimeout:void 0,af=typeof clearTimeout=="function"?clearTimeout:void 0,ih=typeof Promise=="function"?Promise:void 0,nf=typeof queueMicrotask=="function"?queueMicrotask:typeof ih<"u"?function(t){return ih.resolve(null).then(t).catch(lf)}:Hc;function lf(t){setTimeout(function(){throw t})}function Qi(t,a){var l=a,c=0;do{var y=l.nextSibling;if(t.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(c===0){t.removeChild(y),dl(a);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=y}while(l);dl(a)}function qr(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return t}function ch(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return t;a--}else l==="/$"&&a++}t=t.previousSibling}return null}var yn=Math.random().toString(36).slice(2),sr="__reactFiber$"+yn,pl="__reactProps$"+yn,vr="__reactContainer$"+yn,Oc="__reactEvents$"+yn,of="__reactListeners$"+yn,cf="__reactHandles$"+yn;function ya(t){var a=t[sr];if(a)return a;for(var l=t.parentNode;l;){if(a=l[vr]||l[sr]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(t=ch(t);t!==null;){if(l=t[sr])return l;t=ch(t)}return a}t=l,l=t.parentNode}return null}function Fl(t){return t=t[sr]||t[vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ja(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function oi(t){return t[pl]||null}var zc=[],Qa=-1;function ea(t){return{current:t}}function ft(t){0>Qa||(t.current=zc[Qa],zc[Qa]=null,Qa--)}function ut(t,a){Qa++,zc[Qa]=t.current,t.current=a}var Xr={},Zt=ea(Xr),cs=ea(!1),wa=Xr;function dn(t,a){var l=t.type.contextTypes;if(!l)return Xr;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===a)return c.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in l)y[w]=a[w];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=y),y}function ds(t){return t=t.childContextTypes,t!=null}function zo(){ft(cs),ft(Zt)}function dh(t,a,l){if(Zt.current!==Xr)throw Error(pe(168));ut(Zt,a),ut(cs,l)}function sg(t,a,l){var c=t.stateNode;if(a=a.childContextTypes,typeof c.getChildContext!="function")return l;c=c.getChildContext();for(var y in c)if(!(y in a))throw Error(pe(108,qb(t)||"Unknown",y));return Ft({},l,c)}function Vo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,wa=Zt.current,ut(Zt,t),ut(cs,cs.current),!0}function xh(t,a,l){var c=t.stateNode;if(!c)throw Error(pe(169));l?(t=sg(t,a,wa),c.__reactInternalMemoizedMergedChildContext=t,ft(cs),ft(Zt),ut(Zt,t)):ft(cs),ut(cs,l)}var br=null,ii=!1,Zi=!1;function rg(t){br===null?br=[t]:br.push(t)}function df(t){ii=!0,rg(t)}function ta(){if(!Zi&&br!==null){Zi=!0;var t=0,a=xt;try{var l=br;for(xt=1;t<l.length;t++){var c=l[t];do c=c(!0);while(c!==null)}br=null,ii=!1}catch(y){throw br!==null&&(br=br.slice(t+1)),Ap(bd,ta),y}finally{xt=a,Zi=!1}}return null}var Za=[],Xa=0,Uo=null,Yo=0,As=[],Ls=0,Ca=null,yr=1,fr="";function ga(t,a){Za[Xa++]=Yo,Za[Xa++]=Uo,Uo=t,Yo=a}function ag(t,a,l){As[Ls++]=yr,As[Ls++]=fr,As[Ls++]=Ca,Ca=t;var c=yr;t=fr;var y=32-Vs(c)-1;c&=~(1<<y),l+=1;var w=32-Vs(a)+y;if(30<w){var $=y-y%5;w=(c&(1<<$)-1).toString(32),c>>=$,y-=$,yr=1<<32-Vs(a)+y|l<<y|c,fr=w+t}else yr=1<<w|l<<y|c,fr=t}function Pd(t){t.return!==null&&(ga(t,1),ag(t,1,0))}function kd(t){for(;t===Uo;)Uo=Za[--Xa],Za[Xa]=null,Yo=Za[--Xa],Za[Xa]=null;for(;t===Ca;)Ca=As[--Ls],As[Ls]=null,fr=As[--Ls],As[Ls]=null,yr=As[--Ls],As[Ls]=null}var fs=null,ys=null,jt=!1,zs=null;function ng(t,a){var l=Ds(5,null,null,0);l.elementType="DELETED",l.stateNode=a,l.return=t,a=t.deletions,a===null?(t.deletions=[l],t.flags|=16):a.push(l)}function mh(t,a){switch(t.tag){case 5:var l=t.type;return a=a.nodeType!==1||l.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(t.stateNode=a,fs=t,ys=qr(a.firstChild),!0):!1;case 6:return a=t.pendingProps===""||a.nodeType!==3?null:a,a!==null?(t.stateNode=a,fs=t,ys=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(l=Ca!==null?{id:yr,overflow:fr}:null,t.memoizedState={dehydrated:a,treeContext:l,retryLane:1073741824},l=Ds(18,null,null,0),l.stateNode=a,l.return=t,t.child=l,fs=t,ys=null,!0):!1;default:return!1}}function Vc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uc(t){if(jt){var a=ys;if(a){var l=a;if(!mh(t,a)){if(Vc(t))throw Error(pe(418));a=qr(l.nextSibling);var c=fs;a&&mh(t,a)?ng(c,l):(t.flags=t.flags&-4097|2,jt=!1,fs=t)}}else{if(Vc(t))throw Error(pe(418));t.flags=t.flags&-4097|2,jt=!1,fs=t}}}function uh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fs=t}function ao(t){if(t!==fs)return!1;if(!jt)return uh(t),jt=!0,!1;var a;if((a=t.tag!==3)&&!(a=t.tag!==5)&&(a=t.type,a=a!=="head"&&a!=="body"&&!Mc(t.type,t.memoizedProps)),a&&(a=ys)){if(Vc(t))throw lg(),Error(pe(418));for(;a;)ng(t,a),a=qr(a.nextSibling)}if(uh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(a===0){ys=qr(t.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++}t=t.nextSibling}ys=null}}else ys=fs?qr(t.stateNode.nextSibling):null;return!0}function lg(){for(var t=ys;t;)t=qr(t.nextSibling)}function xn(){ys=fs=null,jt=!1}function Ad(t){zs===null?zs=[t]:zs.push(t)}var xf=Fr.ReactCurrentBatchConfig;function zn(t,a,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(pe(309));var c=l.stateNode}if(!c)throw Error(pe(147,t));var y=c,w=""+t;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function($){var M=y.refs;$===null?delete M[w]:M[w]=$},a._stringRef=w,a)}if(typeof t!="string")throw Error(pe(284));if(!l._owner)throw Error(pe(290,t))}return t}function no(t,a){throw t=Object.prototype.toString.call(a),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t))}function hh(t){var a=t._init;return a(t._payload)}function og(t){function a(Q,G){if(t){var Z=Q.deletions;Z===null?(Q.deletions=[G],Q.flags|=16):Z.push(G)}}function l(Q,G){if(!t)return null;for(;G!==null;)a(Q,G),G=G.sibling;return null}function c(Q,G){for(Q=new Map;G!==null;)G.key!==null?Q.set(G.key,G):Q.set(G.index,G),G=G.sibling;return Q}function y(Q,G){return Q=Qr(Q,G),Q.index=0,Q.sibling=null,Q}function w(Q,G,Z){return Q.index=Z,t?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<G?(Q.flags|=2,G):Z):(Q.flags|=2,G)):(Q.flags|=1048576,G)}function $(Q){return t&&Q.alternate===null&&(Q.flags|=2),Q}function M(Q,G,Z,de){return G===null||G.tag!==6?(G=ac(Z,Q.mode,de),G.return=Q,G):(G=y(G,Z),G.return=Q,G)}function O(Q,G,Z,de){var Fe=Z.type;return Fe===_a?ne(Q,G,Z.props.children,de,Z.key):G!==null&&(G.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Mr&&hh(Fe)===G.type)?(de=y(G,Z.props),de.ref=zn(Q,G,Z),de.return=Q,de):(de=Do(Z.type,Z.key,Z.props,null,Q.mode,de),de.ref=zn(Q,G,Z),de.return=Q,de)}function W(Q,G,Z,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=nc(Z,Q.mode,de),G.return=Q,G):(G=y(G,Z.children||[]),G.return=Q,G)}function ne(Q,G,Z,de,Fe){return G===null||G.tag!==7?(G=va(Z,Q.mode,de,Fe),G.return=Q,G):(G=y(G,Z),G.return=Q,G)}function ae(Q,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number")return G=ac(""+G,Q.mode,Z),G.return=Q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Kl:return Z=Do(G.type,G.key,G.props,null,Q.mode,Z),Z.ref=zn(Q,null,G),Z.return=Q,Z;case Wa:return G=nc(G,Q.mode,Z),G.return=Q,G;case Mr:var de=G._init;return ae(Q,de(G._payload),Z)}if(qn(G)||In(G))return G=va(G,Q.mode,Z,null),G.return=Q,G;no(Q,G)}return null}function B(Q,G,Z,de){var Fe=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Fe!==null?null:M(Q,G,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Kl:return Z.key===Fe?O(Q,G,Z,de):null;case Wa:return Z.key===Fe?W(Q,G,Z,de):null;case Mr:return Fe=Z._init,B(Q,G,Fe(Z._payload),de)}if(qn(Z)||In(Z))return Fe!==null?null:ne(Q,G,Z,de,null);no(Q,Z)}return null}function xe(Q,G,Z,de,Fe){if(typeof de=="string"&&de!==""||typeof de=="number")return Q=Q.get(Z)||null,M(G,Q,""+de,Fe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case Kl:return Q=Q.get(de.key===null?Z:de.key)||null,O(G,Q,de,Fe);case Wa:return Q=Q.get(de.key===null?Z:de.key)||null,W(G,Q,de,Fe);case Mr:var Ne=de._init;return xe(Q,G,Z,Ne(de._payload),Fe)}if(qn(de)||In(de))return Q=Q.get(Z)||null,ne(G,Q,de,Fe,null);no(G,de)}return null}function ce(Q,G,Z,de){for(var Fe=null,Ne=null,Ae=G,De=G=0,it=null;Ae!==null&&De<Z.length;De++){Ae.index>De?(it=Ae,Ae=null):it=Ae.sibling;var Pe=B(Q,Ae,Z[De],de);if(Pe===null){Ae===null&&(Ae=it);break}t&&Ae&&Pe.alternate===null&&a(Q,Ae),G=w(Pe,G,De),Ne===null?Fe=Pe:Ne.sibling=Pe,Ne=Pe,Ae=it}if(De===Z.length)return l(Q,Ae),jt&&ga(Q,De),Fe;if(Ae===null){for(;De<Z.length;De++)Ae=ae(Q,Z[De],de),Ae!==null&&(G=w(Ae,G,De),Ne===null?Fe=Ae:Ne.sibling=Ae,Ne=Ae);return jt&&ga(Q,De),Fe}for(Ae=c(Q,Ae);De<Z.length;De++)it=xe(Ae,Q,De,Z[De],de),it!==null&&(t&&it.alternate!==null&&Ae.delete(it.key===null?De:it.key),G=w(it,G,De),Ne===null?Fe=it:Ne.sibling=it,Ne=it);return t&&Ae.forEach(function(Dt){return a(Q,Dt)}),jt&&ga(Q,De),Fe}function me(Q,G,Z,de){var Fe=In(Z);if(typeof Fe!="function")throw Error(pe(150));if(Z=Fe.call(Z),Z==null)throw Error(pe(151));for(var Ne=Fe=null,Ae=G,De=G=0,it=null,Pe=Z.next();Ae!==null&&!Pe.done;De++,Pe=Z.next()){Ae.index>De?(it=Ae,Ae=null):it=Ae.sibling;var Dt=B(Q,Ae,Pe.value,de);if(Dt===null){Ae===null&&(Ae=it);break}t&&Ae&&Dt.alternate===null&&a(Q,Ae),G=w(Dt,G,De),Ne===null?Fe=Dt:Ne.sibling=Dt,Ne=Dt,Ae=it}if(Pe.done)return l(Q,Ae),jt&&ga(Q,De),Fe;if(Ae===null){for(;!Pe.done;De++,Pe=Z.next())Pe=ae(Q,Pe.value,de),Pe!==null&&(G=w(Pe,G,De),Ne===null?Fe=Pe:Ne.sibling=Pe,Ne=Pe);return jt&&ga(Q,De),Fe}for(Ae=c(Q,Ae);!Pe.done;De++,Pe=Z.next())Pe=xe(Ae,Q,De,Pe.value,de),Pe!==null&&(t&&Pe.alternate!==null&&Ae.delete(Pe.key===null?De:Pe.key),G=w(Pe,G,De),Ne===null?Fe=Pe:Ne.sibling=Pe,Ne=Pe);return t&&Ae.forEach(function(ct){return a(Q,ct)}),jt&&ga(Q,De),Fe}function ze(Q,G,Z,de){if(typeof Z=="object"&&Z!==null&&Z.type===_a&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Kl:e:{for(var Fe=Z.key,Ne=G;Ne!==null;){if(Ne.key===Fe){if(Fe=Z.type,Fe===_a){if(Ne.tag===7){l(Q,Ne.sibling),G=y(Ne,Z.props.children),G.return=Q,Q=G;break e}}else if(Ne.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Mr&&hh(Fe)===Ne.type){l(Q,Ne.sibling),G=y(Ne,Z.props),G.ref=zn(Q,Ne,Z),G.return=Q,Q=G;break e}l(Q,Ne);break}else a(Q,Ne);Ne=Ne.sibling}Z.type===_a?(G=va(Z.props.children,Q.mode,de,Z.key),G.return=Q,Q=G):(de=Do(Z.type,Z.key,Z.props,null,Q.mode,de),de.ref=zn(Q,G,Z),de.return=Q,Q=de)}return $(Q);case Wa:e:{for(Ne=Z.key;G!==null;){if(G.key===Ne)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){l(Q,G.sibling),G=y(G,Z.children||[]),G.return=Q,Q=G;break e}else{l(Q,G);break}else a(Q,G);G=G.sibling}G=nc(Z,Q.mode,de),G.return=Q,Q=G}return $(Q);case Mr:return Ne=Z._init,ze(Q,G,Ne(Z._payload),de)}if(qn(Z))return ce(Q,G,Z,de);if(In(Z))return me(Q,G,Z,de);no(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,G!==null&&G.tag===6?(l(Q,G.sibling),G=y(G,Z),G.return=Q,Q=G):(l(Q,G),G=ac(Z,Q.mode,de),G.return=Q,Q=G),$(Q)):l(Q,G)}return ze}var mn=og(!0),ig=og(!1),Wo=ea(null),_o=null,Ba=null,Ld=null;function Dd(){Ld=Ba=_o=null}function Td(t){var a=Wo.current;ft(Wo),t._currentValue=a}function Yc(t,a,l){for(;t!==null;){var c=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),t===l)break;t=t.return}}function ln(t,a){_o=t,Ld=Ba=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&a&&(is=!0),t.firstContext=null)}function Ss(t){var a=t._currentValue;if(Ld!==t)if(t={context:t,memoizedValue:a,next:null},Ba===null){if(_o===null)throw Error(pe(308));Ba=t,_o.dependencies={lanes:0,firstContext:t}}else Ba=Ba.next=t;return a}var fa=null;function Sd(t){fa===null?fa=[t]:fa.push(t)}function cg(t,a,l,c){var y=a.interleaved;return y===null?(l.next=l,Sd(a)):(l.next=y.next,y.next=l),a.interleaved=l,wr(t,c)}function wr(t,a){t.lanes|=a;var l=t.alternate;for(l!==null&&(l.lanes|=a),l=t,t=t.return;t!==null;)t.childLanes|=a,l=t.alternate,l!==null&&(l.childLanes|=a),l=t,t=t.return;return l.tag===3?l.stateNode:null}var Hr=!1;function Ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dg(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,a){return{eventTime:t,lane:a,tag:0,payload:null,callback:null,next:null}}function Gr(t,a,l){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,at&2){var y=c.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),c.pending=a,wr(t,l)}return y=c.interleaved,y===null?(a.next=a,Sd(c)):(a.next=y.next,y.next=a),c.interleaved=a,wr(t,l)}function Co(t,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194240)!==0)){var c=a.lanes;c&=t.pendingLanes,l|=c,a.lanes=l,yd(t,l)}}function ph(t,a){var l=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var $={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};w===null?y=w=$:w=w.next=$,l=l.next}while(l!==null);w===null?y=w=a:w=w.next=a}else y=w=a;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:c.shared,effects:c.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=a:t.next=a,l.lastBaseUpdate=a}function qo(t,a,l,c){var y=t.updateQueue;Hr=!1;var w=y.firstBaseUpdate,$=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var O=M,W=O.next;O.next=null,$===null?w=W:$.next=W,$=O;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,M=ne.lastBaseUpdate,M!==$&&(M===null?ne.firstBaseUpdate=W:M.next=W,ne.lastBaseUpdate=O))}if(w!==null){var ae=y.baseState;$=0,ne=W=O=null,M=w;do{var B=M.lane,xe=M.eventTime;if((c&B)===B){ne!==null&&(ne=ne.next={eventTime:xe,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var ce=t,me=M;switch(B=a,xe=l,me.tag){case 1:if(ce=me.payload,typeof ce=="function"){ae=ce.call(xe,ae,B);break e}ae=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=me.payload,B=typeof ce=="function"?ce.call(xe,ae,B):ce,B==null)break e;ae=Ft({},ae,B);break e;case 2:Hr=!0}}M.callback!==null&&M.lane!==0&&(t.flags|=64,B=y.effects,B===null?y.effects=[M]:B.push(M))}else xe={eventTime:xe,lane:B,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ne===null?(W=ne=xe,O=ae):ne=ne.next=xe,$|=B;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;B=M,M=B.next,B.next=null,y.lastBaseUpdate=B,y.shared.pending=null}}while(!0);if(ne===null&&(O=ae),y.baseState=O,y.firstBaseUpdate=W,y.lastBaseUpdate=ne,a=y.shared.interleaved,a!==null){y=a;do $|=y.lane,y=y.next;while(y!==a)}else w===null&&(y.shared.lanes=0);Pa|=$,t.lanes=$,t.memoizedState=ae}}function gh(t,a,l){if(t=a.effects,a.effects=null,t!==null)for(a=0;a<t.length;a++){var c=t[a],y=c.callback;if(y!==null){if(c.callback=null,c=l,typeof y!="function")throw Error(pe(191,y));y.call(c)}}}var Pl={},ar=ea(Pl),gl=ea(Pl),bl=ea(Pl);function ja(t){if(t===Pl)throw Error(pe(174));return t}function $d(t,a){switch(ut(bl,a),ut(gl,t),ut(ar,Pl),t=a.nodeType,t){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:wc(null,"");break;default:t=t===8?a.parentNode:a,a=t.namespaceURI||null,t=t.tagName,a=wc(a,t)}ft(ar),ut(ar,a)}function un(){ft(ar),ft(gl),ft(bl)}function xg(t){ja(bl.current);var a=ja(ar.current),l=wc(a,t.type);a!==l&&(ut(gl,t),ut(ar,l))}function Id(t){gl.current===t&&(ft(ar),ft(gl))}var wt=ea(0);function Go(t){for(var a=t;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Xi=[];function Rd(){for(var t=0;t<Xi.length;t++)Xi[t]._workInProgressVersionPrimary=null;Xi.length=0}var Fo=Fr.ReactCurrentDispatcher,Bi=Fr.ReactCurrentBatchConfig,Fa=0,Ct=null,It=null,zt=null,Ko=!1,el=!1,yl=0,mf=0;function Gt(){throw Error(pe(321))}function Md(t,a){if(a===null)return!1;for(var l=0;l<a.length&&l<t.length;l++)if(!Ys(t[l],a[l]))return!1;return!0}function Hd(t,a,l,c,y,w){if(Fa=w,Ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Fo.current=t===null||t.memoizedState===null?gf:bf,t=l(c,y),el){w=0;do{if(el=!1,yl=0,25<=w)throw Error(pe(301));w+=1,zt=It=null,a.updateQueue=null,Fo.current=yf,t=l(c,y)}while(el)}if(Fo.current=Jo,a=It!==null&&It.next!==null,Fa=0,zt=It=Ct=null,Ko=!1,a)throw Error(pe(300));return t}function Od(){var t=yl!==0;return yl=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ct.memoizedState=zt=t:zt=zt.next=t,zt}function Es(){if(It===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var a=zt===null?Ct.memoizedState:zt.next;if(a!==null)zt=a,It=t;else{if(t===null)throw Error(pe(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},zt===null?Ct.memoizedState=zt=t:zt=zt.next=t}return zt}function fl(t,a){return typeof a=="function"?a(t):a}function ec(t){var a=Es(),l=a.queue;if(l===null)throw Error(pe(311));l.lastRenderedReducer=t;var c=It,y=c.baseQueue,w=l.pending;if(w!==null){if(y!==null){var $=y.next;y.next=w.next,w.next=$}c.baseQueue=y=w,l.pending=null}if(y!==null){w=y.next,c=c.baseState;var M=$=null,O=null,W=w;do{var ne=W.lane;if((Fa&ne)===ne)O!==null&&(O=O.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),c=W.hasEagerState?W.eagerState:t(c,W.action);else{var ae={lane:ne,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};O===null?(M=O=ae,$=c):O=O.next=ae,Ct.lanes|=ne,Pa|=ne}W=W.next}while(W!==null&&W!==w);O===null?$=c:O.next=M,Ys(c,a.memoizedState)||(is=!0),a.memoizedState=c,a.baseState=$,a.baseQueue=O,l.lastRenderedState=c}if(t=l.interleaved,t!==null){y=t;do w=y.lane,Ct.lanes|=w,Pa|=w,y=y.next;while(y!==t)}else y===null&&(l.lanes=0);return[a.memoizedState,l.dispatch]}function tc(t){var a=Es(),l=a.queue;if(l===null)throw Error(pe(311));l.lastRenderedReducer=t;var c=l.dispatch,y=l.pending,w=a.memoizedState;if(y!==null){l.pending=null;var $=y=y.next;do w=t(w,$.action),$=$.next;while($!==y);Ys(w,a.memoizedState)||(is=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),l.lastRenderedState=w}return[w,c]}function mg(){}function ug(t,a){var l=Ct,c=Es(),y=a(),w=!Ys(c.memoizedState,y);if(w&&(c.memoizedState=y,is=!0),c=c.queue,zd(gg.bind(null,l,c,t),[t]),c.getSnapshot!==a||w||zt!==null&&zt.memoizedState.tag&1){if(l.flags|=2048,jl(9,pg.bind(null,l,c,y,a),void 0,null),Vt===null)throw Error(pe(349));Fa&30||hg(l,a,y)}return y}function hg(t,a,l){t.flags|=16384,t={getSnapshot:a,value:l},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.stores=[t]):(l=a.stores,l===null?a.stores=[t]:l.push(t))}function pg(t,a,l,c){a.value=l,a.getSnapshot=c,bg(a)&&yg(t)}function gg(t,a,l){return l(function(){bg(a)&&yg(t)})}function bg(t){var a=t.getSnapshot;t=t.value;try{var l=a();return!Ys(t,l)}catch{return!0}}function yg(t){var a=wr(t,1);a!==null&&Us(a,t,1,-1)}function bh(t){var a=tr();return typeof t=="function"&&(t=t()),a.memoizedState=a.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fl,lastRenderedState:t},a.queue=t,t=t.dispatch=pf.bind(null,Ct,t),[a.memoizedState,t]}function jl(t,a,l,c){return t={tag:t,create:a,destroy:l,deps:c,next:null},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.lastEffect=t.next=t):(l=a.lastEffect,l===null?a.lastEffect=t.next=t:(c=l.next,l.next=t,t.next=c,a.lastEffect=t)),t}function fg(){return Es().memoizedState}function Po(t,a,l,c){var y=tr();Ct.flags|=t,y.memoizedState=jl(1|a,l,void 0,c===void 0?null:c)}function ci(t,a,l,c){var y=Es();c=c===void 0?null:c;var w=void 0;if(It!==null){var $=It.memoizedState;if(w=$.destroy,c!==null&&Md(c,$.deps)){y.memoizedState=jl(a,l,w,c);return}}Ct.flags|=t,y.memoizedState=jl(1|a,l,w,c)}function yh(t,a){return Po(8390656,8,t,a)}function zd(t,a){return ci(2048,8,t,a)}function jg(t,a){return ci(4,2,t,a)}function Ng(t,a){return ci(4,4,t,a)}function vg(t,a){if(typeof a=="function")return t=t(),a(t),function(){a(null)};if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function wg(t,a,l){return l=l!=null?l.concat([t]):null,ci(4,4,vg.bind(null,a,t),l)}function Vd(){}function Cg(t,a){var l=Es();a=a===void 0?null:a;var c=l.memoizedState;return c!==null&&a!==null&&Md(a,c[1])?c[0]:(l.memoizedState=[t,a],t)}function Fg(t,a){var l=Es();a=a===void 0?null:a;var c=l.memoizedState;return c!==null&&a!==null&&Md(a,c[1])?c[0]:(t=t(),l.memoizedState=[t,a],t)}function Pg(t,a,l){return Fa&21?(Ys(l,a)||(l=Tp(),Ct.lanes|=l,Pa|=l,t.baseState=!0),a):(t.baseState&&(t.baseState=!1,is=!0),t.memoizedState=l)}function uf(t,a){var l=xt;xt=l!==0&&4>l?l:4,t(!0);var c=Bi.transition;Bi.transition={};try{t(!1),a()}finally{xt=l,Bi.transition=c}}function kg(){return Es().memoizedState}function hf(t,a,l){var c=Jr(t);if(l={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null},Ag(t))Lg(a,l);else if(l=cg(t,a,l,c),l!==null){var y=ss();Us(l,t,c,y),Dg(l,a,c)}}function pf(t,a,l){var c=Jr(t),y={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ag(t))Lg(a,y);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var $=a.lastRenderedState,M=w($,l);if(y.hasEagerState=!0,y.eagerState=M,Ys(M,$)){var O=a.interleaved;O===null?(y.next=y,Sd(a)):(y.next=O.next,O.next=y),a.interleaved=y;return}}catch{}finally{}l=cg(t,a,y,c),l!==null&&(y=ss(),Us(l,t,c,y),Dg(l,a,c))}}function Ag(t){var a=t.alternate;return t===Ct||a!==null&&a===Ct}function Lg(t,a){el=Ko=!0;var l=t.pending;l===null?a.next=a:(a.next=l.next,l.next=a),t.pending=a}function Dg(t,a,l){if(l&4194240){var c=a.lanes;c&=t.pendingLanes,l|=c,a.lanes=l,yd(t,l)}}var Jo={readContext:Ss,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},gf={readContext:Ss,useCallback:function(t,a){return tr().memoizedState=[t,a===void 0?null:a],t},useContext:Ss,useEffect:yh,useImperativeHandle:function(t,a,l){return l=l!=null?l.concat([t]):null,Po(4194308,4,vg.bind(null,a,t),l)},useLayoutEffect:function(t,a){return Po(4194308,4,t,a)},useInsertionEffect:function(t,a){return Po(4,2,t,a)},useMemo:function(t,a){var l=tr();return a=a===void 0?null:a,t=t(),l.memoizedState=[t,a],t},useReducer:function(t,a,l){var c=tr();return a=l!==void 0?l(a):a,c.memoizedState=c.baseState=a,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},c.queue=t,t=t.dispatch=hf.bind(null,Ct,t),[c.memoizedState,t]},useRef:function(t){var a=tr();return t={current:t},a.memoizedState=t},useState:bh,useDebugValue:Vd,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=bh(!1),a=t[0];return t=uf.bind(null,t[1]),tr().memoizedState=t,[a,t]},useMutableSource:function(){},useSyncExternalStore:function(t,a,l){var c=Ct,y=tr();if(jt){if(l===void 0)throw Error(pe(407));l=l()}else{if(l=a(),Vt===null)throw Error(pe(349));Fa&30||hg(c,a,l)}y.memoizedState=l;var w={value:l,getSnapshot:a};return y.queue=w,yh(gg.bind(null,c,w,t),[t]),c.flags|=2048,jl(9,pg.bind(null,c,w,l,a),void 0,null),l},useId:function(){var t=tr(),a=Vt.identifierPrefix;if(jt){var l=fr,c=yr;l=(c&~(1<<32-Vs(c)-1)).toString(32)+l,a=":"+a+"R"+l,l=yl++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=mf++,a=":"+a+"r"+l.toString(32)+":";return t.memoizedState=a},unstable_isNewReconciler:!1},bf={readContext:Ss,useCallback:Cg,useContext:Ss,useEffect:zd,useImperativeHandle:wg,useInsertionEffect:jg,useLayoutEffect:Ng,useMemo:Fg,useReducer:ec,useRef:fg,useState:function(){return ec(fl)},useDebugValue:Vd,useDeferredValue:function(t){var a=Es();return Pg(a,It.memoizedState,t)},useTransition:function(){var t=ec(fl)[0],a=Es().memoizedState;return[t,a]},useMutableSource:mg,useSyncExternalStore:ug,useId:kg,unstable_isNewReconciler:!1},yf={readContext:Ss,useCallback:Cg,useContext:Ss,useEffect:zd,useImperativeHandle:wg,useInsertionEffect:jg,useLayoutEffect:Ng,useMemo:Fg,useReducer:tc,useRef:fg,useState:function(){return tc(fl)},useDebugValue:Vd,useDeferredValue:function(t){var a=Es();return It===null?a.memoizedState=t:Pg(a,It.memoizedState,t)},useTransition:function(){var t=tc(fl)[0],a=Es().memoizedState;return[t,a]},useMutableSource:mg,useSyncExternalStore:ug,useId:kg,unstable_isNewReconciler:!1};function Hs(t,a){if(t&&t.defaultProps){a=Ft({},a),t=t.defaultProps;for(var l in t)a[l]===void 0&&(a[l]=t[l]);return a}return a}function Wc(t,a,l,c){a=t.memoizedState,l=l(c,a),l=l==null?a:Ft({},a,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var di={isMounted:function(t){return(t=t._reactInternals)?La(t)===t:!1},enqueueSetState:function(t,a,l){t=t._reactInternals;var c=ss(),y=Jr(t),w=jr(c,y);w.payload=a,l!=null&&(w.callback=l),a=Gr(t,w,y),a!==null&&(Us(a,t,y,c),Co(a,t,y))},enqueueReplaceState:function(t,a,l){t=t._reactInternals;var c=ss(),y=Jr(t),w=jr(c,y);w.tag=1,w.payload=a,l!=null&&(w.callback=l),a=Gr(t,w,y),a!==null&&(Us(a,t,y,c),Co(a,t,y))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var l=ss(),c=Jr(t),y=jr(l,c);y.tag=2,a!=null&&(y.callback=a),a=Gr(t,y,c),a!==null&&(Us(a,t,c,l),Co(a,t,c))}};function fh(t,a,l,c,y,w,$){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,w,$):a.prototype&&a.prototype.isPureReactComponent?!ml(l,c)||!ml(y,w):!0}function Tg(t,a,l){var c=!1,y=Xr,w=a.contextType;return typeof w=="object"&&w!==null?w=Ss(w):(y=ds(a)?wa:Zt.current,c=a.contextTypes,w=(c=c!=null)?dn(t,y):Xr),a=new a(l,w),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=di,t.stateNode=a,a._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=y,t.__reactInternalMemoizedMaskedChildContext=w),a}function jh(t,a,l,c){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==t&&di.enqueueReplaceState(a,a.state,null)}function _c(t,a,l,c){var y=t.stateNode;y.props=l,y.state=t.memoizedState,y.refs={},Ed(t);var w=a.contextType;typeof w=="object"&&w!==null?y.context=Ss(w):(w=ds(a)?wa:Zt.current,y.context=dn(t,w)),y.state=t.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(Wc(t,a,w,l),y.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&di.enqueueReplaceState(y,y.state,null),qo(t,l,y,c),y.state=t.memoizedState),typeof y.componentDidMount=="function"&&(t.flags|=4194308)}function hn(t,a){try{var l="",c=a;do l+=_b(c),c=c.return;while(c);var y=l}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:t,source:a,stack:y,digest:null}}function sc(t,a,l){return{value:t,source:null,stack:l??null,digest:a??null}}function qc(t,a){try{console.error(a.value)}catch(l){setTimeout(function(){throw l})}}var ff=typeof WeakMap=="function"?WeakMap:Map;function Sg(t,a,l){l=jr(-1,l),l.tag=3,l.payload={element:null};var c=a.value;return l.callback=function(){Zo||(Zo=!0,sd=c),qc(t,a)},l}function Eg(t,a,l){l=jr(-1,l),l.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var y=a.value;l.payload=function(){return c(y)},l.callback=function(){qc(t,a)}}var w=t.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(l.callback=function(){qc(t,a),typeof c!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var $=a.stack;this.componentDidCatch(a.value,{componentStack:$!==null?$:""})}),l}function Nh(t,a,l){var c=t.pingCache;if(c===null){c=t.pingCache=new ff;var y=new Set;c.set(a,y)}else y=c.get(a),y===void 0&&(y=new Set,c.set(a,y));y.has(l)||(y.add(l),t=Ef.bind(null,t,a,l),a.then(t,t))}function vh(t){do{var a;if((a=t.tag===13)&&(a=t.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return t;t=t.return}while(t!==null);return null}function wh(t,a,l,c,y){return t.mode&1?(t.flags|=65536,t.lanes=y,t):(t===a?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(a=jr(-1,1),a.tag=2,Gr(l,a,1))),l.lanes|=1),t)}var jf=Fr.ReactCurrentOwner,is=!1;function ts(t,a,l,c){a.child=t===null?ig(a,null,l,c):mn(a,t.child,l,c)}function Ch(t,a,l,c,y){l=l.render;var w=a.ref;return ln(a,y),c=Hd(t,a,l,c,w,y),l=Od(),t!==null&&!is?(a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~y,Cr(t,a,y)):(jt&&l&&Pd(a),a.flags|=1,ts(t,a,c,y),a.child)}function Fh(t,a,l,c,y){if(t===null){var w=l.type;return typeof w=="function"&&!Jd(w)&&w.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(a.tag=15,a.type=w,$g(t,a,w,c,y)):(t=Do(l.type,null,c,a,a.mode,y),t.ref=a.ref,t.return=a,a.child=t)}if(w=t.child,!(t.lanes&y)){var $=w.memoizedProps;if(l=l.compare,l=l!==null?l:ml,l($,c)&&t.ref===a.ref)return Cr(t,a,y)}return a.flags|=1,t=Qr(w,c),t.ref=a.ref,t.return=a,a.child=t}function $g(t,a,l,c,y){if(t!==null){var w=t.memoizedProps;if(ml(w,c)&&t.ref===a.ref)if(is=!1,a.pendingProps=c=w,(t.lanes&y)!==0)t.flags&131072&&(is=!0);else return a.lanes=t.lanes,Cr(t,a,y)}return Gc(t,a,l,c,y)}function Ig(t,a,l){var c=a.pendingProps,y=c.children,w=t!==null?t.memoizedState:null;if(c.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(tn,bs),bs|=l;else{if(!(l&1073741824))return t=w!==null?w.baseLanes|l:l,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:t,cachePool:null,transitions:null},a.updateQueue=null,ut(tn,bs),bs|=t,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=w!==null?w.baseLanes:l,ut(tn,bs),bs|=c}else w!==null?(c=w.baseLanes|l,a.memoizedState=null):c=l,ut(tn,bs),bs|=c;return ts(t,a,y,l),a.child}function Rg(t,a){var l=a.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(a.flags|=512,a.flags|=2097152)}function Gc(t,a,l,c,y){var w=ds(l)?wa:Zt.current;return w=dn(a,w),ln(a,y),l=Hd(t,a,l,c,w,y),c=Od(),t!==null&&!is?(a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~y,Cr(t,a,y)):(jt&&c&&Pd(a),a.flags|=1,ts(t,a,l,y),a.child)}function Ph(t,a,l,c,y){if(ds(l)){var w=!0;Vo(a)}else w=!1;if(ln(a,y),a.stateNode===null)ko(t,a),Tg(a,l,c),_c(a,l,c,y),c=!0;else if(t===null){var $=a.stateNode,M=a.memoizedProps;$.props=M;var O=$.context,W=l.contextType;typeof W=="object"&&W!==null?W=Ss(W):(W=ds(l)?wa:Zt.current,W=dn(a,W));var ne=l.getDerivedStateFromProps,ae=typeof ne=="function"||typeof $.getSnapshotBeforeUpdate=="function";ae||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(M!==c||O!==W)&&jh(a,$,c,W),Hr=!1;var B=a.memoizedState;$.state=B,qo(a,c,$,y),O=a.memoizedState,M!==c||B!==O||cs.current||Hr?(typeof ne=="function"&&(Wc(a,l,ne,c),O=a.memoizedState),(M=Hr||fh(a,l,M,c,B,O,W))?(ae||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(a.flags|=4194308)):(typeof $.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=O),$.props=c,$.state=O,$.context=W,c=M):(typeof $.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{$=a.stateNode,dg(t,a),M=a.memoizedProps,W=a.type===a.elementType?M:Hs(a.type,M),$.props=W,ae=a.pendingProps,B=$.context,O=l.contextType,typeof O=="object"&&O!==null?O=Ss(O):(O=ds(l)?wa:Zt.current,O=dn(a,O));var xe=l.getDerivedStateFromProps;(ne=typeof xe=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(M!==ae||B!==O)&&jh(a,$,c,O),Hr=!1,B=a.memoizedState,$.state=B,qo(a,c,$,y);var ce=a.memoizedState;M!==ae||B!==ce||cs.current||Hr?(typeof xe=="function"&&(Wc(a,l,xe,c),ce=a.memoizedState),(W=Hr||fh(a,l,W,c,B,ce,O)||!1)?(ne||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(c,ce,O),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(c,ce,O)),typeof $.componentDidUpdate=="function"&&(a.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof $.componentDidUpdate!="function"||M===t.memoizedProps&&B===t.memoizedState||(a.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&B===t.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ce),$.props=c,$.state=ce,$.context=O,c=W):(typeof $.componentDidUpdate!="function"||M===t.memoizedProps&&B===t.memoizedState||(a.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&B===t.memoizedState||(a.flags|=1024),c=!1)}return Kc(t,a,l,c,w,y)}function Kc(t,a,l,c,y,w){Rg(t,a);var $=(a.flags&128)!==0;if(!c&&!$)return y&&xh(a,l,!1),Cr(t,a,w);c=a.stateNode,jf.current=a;var M=$&&typeof l.getDerivedStateFromError!="function"?null:c.render();return a.flags|=1,t!==null&&$?(a.child=mn(a,t.child,null,w),a.child=mn(a,null,M,w)):ts(t,a,M,w),a.memoizedState=c.state,y&&xh(a,l,!0),a.child}function Mg(t){var a=t.stateNode;a.pendingContext?dh(t,a.pendingContext,a.pendingContext!==a.context):a.context&&dh(t,a.context,!1),$d(t,a.containerInfo)}function kh(t,a,l,c,y){return xn(),Ad(y),a.flags|=256,ts(t,a,l,c),a.child}var Jc={dehydrated:null,treeContext:null,retryLane:0};function Qc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hg(t,a,l){var c=a.pendingProps,y=wt.current,w=!1,$=(a.flags&128)!==0,M;if((M=$)||(M=t!==null&&t.memoizedState===null?!1:(y&2)!==0),M?(w=!0,a.flags&=-129):(t===null||t.memoizedState!==null)&&(y|=1),ut(wt,y&1),t===null)return Uc(a),t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(a.mode&1?t.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):($=c.children,t=c.fallback,w?(c=a.mode,w=a.child,$={mode:"hidden",children:$},!(c&1)&&w!==null?(w.childLanes=0,w.pendingProps=$):w=ui($,c,0,null),t=va(t,c,l,null),w.return=a,t.return=a,w.sibling=t,a.child=w,a.child.memoizedState=Qc(l),a.memoizedState=Jc,t):Ud(a,$));if(y=t.memoizedState,y!==null&&(M=y.dehydrated,M!==null))return Nf(t,a,$,c,M,y,l);if(w){w=c.fallback,$=a.mode,y=t.child,M=y.sibling;var O={mode:"hidden",children:c.children};return!($&1)&&a.child!==y?(c=a.child,c.childLanes=0,c.pendingProps=O,a.deletions=null):(c=Qr(y,O),c.subtreeFlags=y.subtreeFlags&14680064),M!==null?w=Qr(M,w):(w=va(w,$,l,null),w.flags|=2),w.return=a,c.return=a,c.sibling=w,a.child=c,c=w,w=a.child,$=t.child.memoizedState,$=$===null?Qc(l):{baseLanes:$.baseLanes|l,cachePool:null,transitions:$.transitions},w.memoizedState=$,w.childLanes=t.childLanes&~l,a.memoizedState=Jc,c}return w=t.child,t=w.sibling,c=Qr(w,{mode:"visible",children:c.children}),!(a.mode&1)&&(c.lanes=l),c.return=a,c.sibling=null,t!==null&&(l=a.deletions,l===null?(a.deletions=[t],a.flags|=16):l.push(t)),a.child=c,a.memoizedState=null,c}function Ud(t,a){return a=ui({mode:"visible",children:a},t.mode,0,null),a.return=t,t.child=a}function lo(t,a,l,c){return c!==null&&Ad(c),mn(a,t.child,null,l),t=Ud(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Nf(t,a,l,c,y,w,$){if(l)return a.flags&256?(a.flags&=-257,c=sc(Error(pe(422))),lo(t,a,$,c)):a.memoizedState!==null?(a.child=t.child,a.flags|=128,null):(w=c.fallback,y=a.mode,c=ui({mode:"visible",children:c.children},y,0,null),w=va(w,y,$,null),w.flags|=2,c.return=a,w.return=a,c.sibling=w,a.child=c,a.mode&1&&mn(a,t.child,null,$),a.child.memoizedState=Qc($),a.memoizedState=Jc,w);if(!(a.mode&1))return lo(t,a,$,null);if(y.data==="$!"){if(c=y.nextSibling&&y.nextSibling.dataset,c)var M=c.dgst;return c=M,w=Error(pe(419)),c=sc(w,c,void 0),lo(t,a,$,c)}if(M=($&t.childLanes)!==0,is||M){if(c=Vt,c!==null){switch($&-$){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(c.suspendedLanes|$)?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,wr(t,y),Us(c,t,y,-1))}return Kd(),c=sc(Error(pe(421))),lo(t,a,$,c)}return y.data==="$?"?(a.flags|=128,a.child=t.child,a=$f.bind(null,t),y._reactRetry=a,null):(t=w.treeContext,ys=qr(y.nextSibling),fs=a,jt=!0,zs=null,t!==null&&(As[Ls++]=yr,As[Ls++]=fr,As[Ls++]=Ca,yr=t.id,fr=t.overflow,Ca=a),a=Ud(a,c.children),a.flags|=4096,a)}function Ah(t,a,l){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a),Yc(t.return,a,l)}function rc(t,a,l,c,y){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=l,w.tailMode=y)}function Og(t,a,l){var c=a.pendingProps,y=c.revealOrder,w=c.tail;if(ts(t,a,c.children,l),c=wt.current,c&2)c=c&1|2,a.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ah(t,l,a);else if(t.tag===19)Ah(t,l,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(ut(wt,c),!(a.mode&1))a.memoizedState=null;else switch(y){case"forwards":for(l=a.child,y=null;l!==null;)t=l.alternate,t!==null&&Go(t)===null&&(y=l),l=l.sibling;l=y,l===null?(y=a.child,a.child=null):(y=l.sibling,l.sibling=null),rc(a,!1,y,l,w);break;case"backwards":for(l=null,y=a.child,a.child=null;y!==null;){if(t=y.alternate,t!==null&&Go(t)===null){a.child=y;break}t=y.sibling,y.sibling=l,l=y,y=t}rc(a,!0,l,null,w);break;case"together":rc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ko(t,a){!(a.mode&1)&&t!==null&&(t.alternate=null,a.alternate=null,a.flags|=2)}function Cr(t,a,l){if(t!==null&&(a.dependencies=t.dependencies),Pa|=a.lanes,!(l&a.childLanes))return null;if(t!==null&&a.child!==t.child)throw Error(pe(153));if(a.child!==null){for(t=a.child,l=Qr(t,t.pendingProps),a.child=l,l.return=a;t.sibling!==null;)t=t.sibling,l=l.sibling=Qr(t,t.pendingProps),l.return=a;l.sibling=null}return a.child}function vf(t,a,l){switch(a.tag){case 3:Mg(a),xn();break;case 5:xg(a);break;case 1:ds(a.type)&&Vo(a);break;case 4:$d(a,a.stateNode.containerInfo);break;case 10:var c=a.type._context,y=a.memoizedProps.value;ut(Wo,c._currentValue),c._currentValue=y;break;case 13:if(c=a.memoizedState,c!==null)return c.dehydrated!==null?(ut(wt,wt.current&1),a.flags|=128,null):l&a.child.childLanes?Hg(t,a,l):(ut(wt,wt.current&1),t=Cr(t,a,l),t!==null?t.sibling:null);ut(wt,wt.current&1);break;case 19:if(c=(l&a.childLanes)!==0,t.flags&128){if(c)return Og(t,a,l);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ut(wt,wt.current),c)break;return null;case 22:case 23:return a.lanes=0,Ig(t,a,l)}return Cr(t,a,l)}var zg,Zc,Vg,Ug;zg=function(t,a){for(var l=a.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};Zc=function(){};Vg=function(t,a,l,c){var y=t.memoizedProps;if(y!==c){t=a.stateNode,ja(ar.current);var w=null;switch(l){case"input":y=fc(t,y),c=fc(t,c),w=[];break;case"select":y=Ft({},y,{value:void 0}),c=Ft({},c,{value:void 0}),w=[];break;case"textarea":y=vc(t,y),c=vc(t,c),w=[];break;default:typeof y.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=Oo)}Cc(l,c);var $;l=null;for(W in y)if(!c.hasOwnProperty(W)&&y.hasOwnProperty(W)&&y[W]!=null)if(W==="style"){var M=y[W];for($ in M)M.hasOwnProperty($)&&(l||(l={}),l[$]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(nl.hasOwnProperty(W)?w||(w=[]):(w=w||[]).push(W,null));for(W in c){var O=c[W];if(M=y!=null?y[W]:void 0,c.hasOwnProperty(W)&&O!==M&&(O!=null||M!=null))if(W==="style")if(M){for($ in M)!M.hasOwnProperty($)||O&&O.hasOwnProperty($)||(l||(l={}),l[$]="");for($ in O)O.hasOwnProperty($)&&M[$]!==O[$]&&(l||(l={}),l[$]=O[$])}else l||(w||(w=[]),w.push(W,l)),l=O;else W==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,M=M?M.__html:void 0,O!=null&&M!==O&&(w=w||[]).push(W,O)):W==="children"?typeof O!="string"&&typeof O!="number"||(w=w||[]).push(W,""+O):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(nl.hasOwnProperty(W)?(O!=null&&W==="onScroll"&&yt("scroll",t),w||M===O||(w=[])):(w=w||[]).push(W,O))}l&&(w=w||[]).push("style",l);var W=w;(a.updateQueue=W)&&(a.flags|=4)}};Ug=function(t,a,l,c){l!==c&&(a.flags|=4)};function Vn(t,a){if(!jt)switch(t.tailMode){case"hidden":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Kt(t){var a=t.alternate!==null&&t.alternate.child===t.child,l=0,c=0;if(a)for(var y=t.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&14680064,c|=y.flags&14680064,y.return=t,y=y.sibling;else for(y=t.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=t,y=y.sibling;return t.subtreeFlags|=c,t.childLanes=l,a}function wf(t,a,l){var c=a.pendingProps;switch(kd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(a),null;case 1:return ds(a.type)&&zo(),Kt(a),null;case 3:return c=a.stateNode,un(),ft(cs),ft(Zt),Rd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(ao(a)?a.flags|=4:t===null||t.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,zs!==null&&(nd(zs),zs=null))),Zc(t,a),Kt(a),null;case 5:Id(a);var y=ja(bl.current);if(l=a.type,t!==null&&a.stateNode!=null)Vg(t,a,l,c,y),t.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!c){if(a.stateNode===null)throw Error(pe(166));return Kt(a),null}if(t=ja(ar.current),ao(a)){c=a.stateNode,l=a.type;var w=a.memoizedProps;switch(c[sr]=a,c[pl]=w,t=(a.mode&1)!==0,l){case"dialog":yt("cancel",c),yt("close",c);break;case"iframe":case"object":case"embed":yt("load",c);break;case"video":case"audio":for(y=0;y<Kn.length;y++)yt(Kn[y],c);break;case"source":yt("error",c);break;case"img":case"image":case"link":yt("error",c),yt("load",c);break;case"details":yt("toggle",c);break;case"input":Mu(c,w),yt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!w.multiple},yt("invalid",c);break;case"textarea":Ou(c,w),yt("invalid",c)}Cc(l,w),y=null;for(var $ in w)if(w.hasOwnProperty($)){var M=w[$];$==="children"?typeof M=="string"?c.textContent!==M&&(w.suppressHydrationWarning!==!0&&ro(c.textContent,M,t),y=["children",M]):typeof M=="number"&&c.textContent!==""+M&&(w.suppressHydrationWarning!==!0&&ro(c.textContent,M,t),y=["children",""+M]):nl.hasOwnProperty($)&&M!=null&&$==="onScroll"&&yt("scroll",c)}switch(l){case"input":Jl(c),Hu(c,w,!0);break;case"textarea":Jl(c),zu(c);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(c.onclick=Oo)}c=y,a.updateQueue=c,c!==null&&(a.flags|=4)}else{$=y.nodeType===9?y:y.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gp(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=$.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=$.createElement(l,{is:c.is}):(t=$.createElement(l),l==="select"&&($=t,c.multiple?$.multiple=!0:c.size&&($.size=c.size))):t=$.createElementNS(t,l),t[sr]=a,t[pl]=c,zg(t,a,!1,!1),a.stateNode=t;e:{switch($=Fc(l,c),l){case"dialog":yt("cancel",t),yt("close",t),y=c;break;case"iframe":case"object":case"embed":yt("load",t),y=c;break;case"video":case"audio":for(y=0;y<Kn.length;y++)yt(Kn[y],t);y=c;break;case"source":yt("error",t),y=c;break;case"img":case"image":case"link":yt("error",t),yt("load",t),y=c;break;case"details":yt("toggle",t),y=c;break;case"input":Mu(t,c),y=fc(t,c),yt("invalid",t);break;case"option":y=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},y=Ft({},c,{value:void 0}),yt("invalid",t);break;case"textarea":Ou(t,c),y=vc(t,c),yt("invalid",t);break;default:y=c}Cc(l,y),M=y;for(w in M)if(M.hasOwnProperty(w)){var O=M[w];w==="style"?fp(t,O):w==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&bp(t,O)):w==="children"?typeof O=="string"?(l!=="textarea"||O!=="")&&ll(t,O):typeof O=="number"&&ll(t,""+O):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(nl.hasOwnProperty(w)?O!=null&&w==="onScroll"&&yt("scroll",t):O!=null&&md(t,w,O,$))}switch(l){case"input":Jl(t),Hu(t,c,!1);break;case"textarea":Jl(t),zu(t);break;case"option":c.value!=null&&t.setAttribute("value",""+Zr(c.value));break;case"select":t.multiple=!!c.multiple,w=c.value,w!=null?sn(t,!!c.multiple,w,!1):c.defaultValue!=null&&sn(t,!!c.multiple,c.defaultValue,!0);break;default:typeof y.onClick=="function"&&(t.onclick=Oo)}switch(l){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Kt(a),null;case 6:if(t&&a.stateNode!=null)Ug(t,a,t.memoizedProps,c);else{if(typeof c!="string"&&a.stateNode===null)throw Error(pe(166));if(l=ja(bl.current),ja(ar.current),ao(a)){if(c=a.stateNode,l=a.memoizedProps,c[sr]=a,(w=c.nodeValue!==l)&&(t=fs,t!==null))switch(t.tag){case 3:ro(c.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ro(c.nodeValue,l,(t.mode&1)!==0)}w&&(a.flags|=4)}else c=(l.nodeType===9?l:l.ownerDocument).createTextNode(c),c[sr]=a,a.stateNode=c}return Kt(a),null;case 13:if(ft(wt),c=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jt&&ys!==null&&a.mode&1&&!(a.flags&128))lg(),xn(),a.flags|=98560,w=!1;else if(w=ao(a),c!==null&&c.dehydrated!==null){if(t===null){if(!w)throw Error(pe(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(pe(317));w[sr]=a}else xn(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Kt(a),w=!1}else zs!==null&&(nd(zs),zs=null),w=!0;if(!w)return a.flags&65536?a:null}return a.flags&128?(a.lanes=l,a):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(a.child.flags|=8192,a.mode&1&&(t===null||wt.current&1?Rt===0&&(Rt=3):Kd())),a.updateQueue!==null&&(a.flags|=4),Kt(a),null);case 4:return un(),Zc(t,a),t===null&&ul(a.stateNode.containerInfo),Kt(a),null;case 10:return Td(a.type._context),Kt(a),null;case 17:return ds(a.type)&&zo(),Kt(a),null;case 19:if(ft(wt),w=a.memoizedState,w===null)return Kt(a),null;if(c=(a.flags&128)!==0,$=w.rendering,$===null)if(c)Vn(w,!1);else{if(Rt!==0||t!==null&&t.flags&128)for(t=a.child;t!==null;){if($=Go(t),$!==null){for(a.flags|=128,Vn(w,!1),c=$.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),a.subtreeFlags=0,c=l,l=a.child;l!==null;)w=l,t=c,w.flags&=14680066,$=w.alternate,$===null?(w.childLanes=0,w.lanes=t,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=$.childLanes,w.lanes=$.lanes,w.child=$.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=$.memoizedProps,w.memoizedState=$.memoizedState,w.updateQueue=$.updateQueue,w.type=$.type,t=$.dependencies,w.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return ut(wt,wt.current&1|2),a.child}t=t.sibling}w.tail!==null&&Lt()>pn&&(a.flags|=128,c=!0,Vn(w,!1),a.lanes=4194304)}else{if(!c)if(t=Go($),t!==null){if(a.flags|=128,c=!0,l=t.updateQueue,l!==null&&(a.updateQueue=l,a.flags|=4),Vn(w,!0),w.tail===null&&w.tailMode==="hidden"&&!$.alternate&&!jt)return Kt(a),null}else 2*Lt()-w.renderingStartTime>pn&&l!==1073741824&&(a.flags|=128,c=!0,Vn(w,!1),a.lanes=4194304);w.isBackwards?($.sibling=a.child,a.child=$):(l=w.last,l!==null?l.sibling=$:a.child=$,w.last=$)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=Lt(),a.sibling=null,l=wt.current,ut(wt,c?l&1|2:l&1),a):(Kt(a),null);case 22:case 23:return Gd(),c=a.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(a.flags|=8192),c&&a.mode&1?bs&1073741824&&(Kt(a),a.subtreeFlags&6&&(a.flags|=8192)):Kt(a),null;case 24:return null;case 25:return null}throw Error(pe(156,a.tag))}function Cf(t,a){switch(kd(a),a.tag){case 1:return ds(a.type)&&zo(),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return un(),ft(cs),ft(Zt),Rd(),t=a.flags,t&65536&&!(t&128)?(a.flags=t&-65537|128,a):null;case 5:return Id(a),null;case 13:if(ft(wt),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(pe(340));xn()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ft(wt),null;case 4:return un(),null;case 10:return Td(a.type._context),null;case 22:case 23:return Gd(),null;case 24:return null;default:return null}}var oo=!1,Qt=!1,Ff=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function en(t,a){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(c){Pt(t,a,c)}else l.current=null}function Xc(t,a,l){try{l()}catch(c){Pt(t,a,c)}}var Lh=!1;function Pf(t,a){if(Ic=Ro,t=Gp(),Fd(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,w=c.focusNode;c=c.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var $=0,M=-1,O=-1,W=0,ne=0,ae=t,B=null;t:for(;;){for(var xe;ae!==l||y!==0&&ae.nodeType!==3||(M=$+y),ae!==w||c!==0&&ae.nodeType!==3||(O=$+c),ae.nodeType===3&&($+=ae.nodeValue.length),(xe=ae.firstChild)!==null;)B=ae,ae=xe;for(;;){if(ae===t)break t;if(B===l&&++W===y&&(M=$),B===w&&++ne===c&&(O=$),(xe=ae.nextSibling)!==null)break;ae=B,B=ae.parentNode}ae=xe}l=M===-1||O===-1?null:{start:M,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Rc={focusedElem:t,selectionRange:l},Ro=!1,Ee=a;Ee!==null;)if(a=Ee,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Ee=t;else for(;Ee!==null;){a=Ee;try{var ce=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var me=ce.memoizedProps,ze=ce.memoizedState,Q=a.stateNode,G=Q.getSnapshotBeforeUpdate(a.elementType===a.type?me:Hs(a.type,me),ze);Q.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Z=a.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(de){Pt(a,a.return,de)}if(t=a.sibling,t!==null){t.return=a.return,Ee=t;break}Ee=a.return}return ce=Lh,Lh=!1,ce}function tl(t,a,l){var c=a.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var y=c=c.next;do{if((y.tag&t)===t){var w=y.destroy;y.destroy=void 0,w!==void 0&&Xc(a,l,w)}y=y.next}while(y!==c)}}function xi(t,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&t)===t){var c=l.create;l.destroy=c()}l=l.next}while(l!==a)}}function Bc(t){var a=t.ref;if(a!==null){var l=t.stateNode;switch(t.tag){case 5:t=l;break;default:t=l}typeof a=="function"?a(t):a.current=t}}function Yg(t){var a=t.alternate;a!==null&&(t.alternate=null,Yg(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&(delete a[sr],delete a[pl],delete a[Oc],delete a[of],delete a[cf])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wg(t){return t.tag===5||t.tag===3||t.tag===4}function Dh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ed(t,a,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(t,a):l.insertBefore(t,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(t,l)):(a=l,a.appendChild(t)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Oo));else if(c!==4&&(t=t.child,t!==null))for(ed(t,a,l),t=t.sibling;t!==null;)ed(t,a,l),t=t.sibling}function td(t,a,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?l.insertBefore(t,a):l.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(td(t,a,l),t=t.sibling;t!==null;)td(t,a,l),t=t.sibling}var Ut=null,Os=!1;function Sr(t,a,l){for(l=l.child;l!==null;)_g(t,a,l),l=l.sibling}function _g(t,a,l){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(ri,l)}catch{}switch(l.tag){case 5:Qt||en(l,a);case 6:var c=Ut,y=Os;Ut=null,Sr(t,a,l),Ut=c,Os=y,Ut!==null&&(Os?(t=Ut,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):Ut.removeChild(l.stateNode));break;case 18:Ut!==null&&(Os?(t=Ut,l=l.stateNode,t.nodeType===8?Qi(t.parentNode,l):t.nodeType===1&&Qi(t,l),dl(t)):Qi(Ut,l.stateNode));break;case 4:c=Ut,y=Os,Ut=l.stateNode.containerInfo,Os=!0,Sr(t,a,l),Ut=c,Os=y;break;case 0:case 11:case 14:case 15:if(!Qt&&(c=l.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){y=c=c.next;do{var w=y,$=w.destroy;w=w.tag,$!==void 0&&(w&2||w&4)&&Xc(l,a,$),y=y.next}while(y!==c)}Sr(t,a,l);break;case 1:if(!Qt&&(en(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=l.memoizedProps,c.state=l.memoizedState,c.componentWillUnmount()}catch(M){Pt(l,a,M)}Sr(t,a,l);break;case 21:Sr(t,a,l);break;case 22:l.mode&1?(Qt=(c=Qt)||l.memoizedState!==null,Sr(t,a,l),Qt=c):Sr(t,a,l);break;default:Sr(t,a,l)}}function Th(t){var a=t.updateQueue;if(a!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new Ff),a.forEach(function(c){var y=If.bind(null,t,c);l.has(c)||(l.add(c),c.then(y,y))})}}function Rs(t,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c];try{var w=t,$=a,M=$;e:for(;M!==null;){switch(M.tag){case 5:Ut=M.stateNode,Os=!1;break e;case 3:Ut=M.stateNode.containerInfo,Os=!0;break e;case 4:Ut=M.stateNode.containerInfo,Os=!0;break e}M=M.return}if(Ut===null)throw Error(pe(160));_g(w,$,y),Ut=null,Os=!1;var O=y.alternate;O!==null&&(O.return=null),y.return=null}catch(W){Pt(y,a,W)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)qg(a,t),a=a.sibling}function qg(t,a){var l=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rs(a,t),Xs(t),c&4){try{tl(3,t,t.return),xi(3,t)}catch(me){Pt(t,t.return,me)}try{tl(5,t,t.return)}catch(me){Pt(t,t.return,me)}}break;case 1:Rs(a,t),Xs(t),c&512&&l!==null&&en(l,l.return);break;case 5:if(Rs(a,t),Xs(t),c&512&&l!==null&&en(l,l.return),t.flags&32){var y=t.stateNode;try{ll(y,"")}catch(me){Pt(t,t.return,me)}}if(c&4&&(y=t.stateNode,y!=null)){var w=t.memoizedProps,$=l!==null?l.memoizedProps:w,M=t.type,O=t.updateQueue;if(t.updateQueue=null,O!==null)try{M==="input"&&w.type==="radio"&&w.name!=null&&hp(y,w),Fc(M,$);var W=Fc(M,w);for($=0;$<O.length;$+=2){var ne=O[$],ae=O[$+1];ne==="style"?fp(y,ae):ne==="dangerouslySetInnerHTML"?bp(y,ae):ne==="children"?ll(y,ae):md(y,ne,ae,W)}switch(M){case"input":jc(y,w);break;case"textarea":pp(y,w);break;case"select":var B=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var xe=w.value;xe!=null?sn(y,!!w.multiple,xe,!1):B!==!!w.multiple&&(w.defaultValue!=null?sn(y,!!w.multiple,w.defaultValue,!0):sn(y,!!w.multiple,w.multiple?[]:"",!1))}y[pl]=w}catch(me){Pt(t,t.return,me)}}break;case 6:if(Rs(a,t),Xs(t),c&4){if(t.stateNode===null)throw Error(pe(162));y=t.stateNode,w=t.memoizedProps;try{y.nodeValue=w}catch(me){Pt(t,t.return,me)}}break;case 3:if(Rs(a,t),Xs(t),c&4&&l!==null&&l.memoizedState.isDehydrated)try{dl(a.containerInfo)}catch(me){Pt(t,t.return,me)}break;case 4:Rs(a,t),Xs(t);break;case 13:Rs(a,t),Xs(t),y=t.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(_d=Lt())),c&4&&Th(t);break;case 22:if(ne=l!==null&&l.memoizedState!==null,t.mode&1?(Qt=(W=Qt)||ne,Rs(a,t),Qt=W):Rs(a,t),Xs(t),c&8192){if(W=t.memoizedState!==null,(t.stateNode.isHidden=W)&&!ne&&t.mode&1)for(Ee=t,ne=t.child;ne!==null;){for(ae=Ee=ne;Ee!==null;){switch(B=Ee,xe=B.child,B.tag){case 0:case 11:case 14:case 15:tl(4,B,B.return);break;case 1:en(B,B.return);var ce=B.stateNode;if(typeof ce.componentWillUnmount=="function"){c=B,l=B.return;try{a=c,ce.props=a.memoizedProps,ce.state=a.memoizedState,ce.componentWillUnmount()}catch(me){Pt(c,l,me)}}break;case 5:en(B,B.return);break;case 22:if(B.memoizedState!==null){Eh(ae);continue}}xe!==null?(xe.return=B,Ee=xe):Eh(ae)}ne=ne.sibling}e:for(ne=null,ae=t;;){if(ae.tag===5){if(ne===null){ne=ae;try{y=ae.stateNode,W?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(M=ae.stateNode,O=ae.memoizedProps.style,$=O!=null&&O.hasOwnProperty("display")?O.display:null,M.style.display=yp("display",$))}catch(me){Pt(t,t.return,me)}}}else if(ae.tag===6){if(ne===null)try{ae.stateNode.nodeValue=W?"":ae.memoizedProps}catch(me){Pt(t,t.return,me)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===t)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===t)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===t)break e;ne===ae&&(ne=null),ae=ae.return}ne===ae&&(ne=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Rs(a,t),Xs(t),c&4&&Th(t);break;case 21:break;default:Rs(a,t),Xs(t)}}function Xs(t){var a=t.flags;if(a&2){try{e:{for(var l=t.return;l!==null;){if(Wg(l)){var c=l;break e}l=l.return}throw Error(pe(160))}switch(c.tag){case 5:var y=c.stateNode;c.flags&32&&(ll(y,""),c.flags&=-33);var w=Dh(t);td(t,w,y);break;case 3:case 4:var $=c.stateNode.containerInfo,M=Dh(t);ed(t,M,$);break;default:throw Error(pe(161))}}catch(O){Pt(t,t.return,O)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function kf(t,a,l){Ee=t,Gg(t)}function Gg(t,a,l){for(var c=(t.mode&1)!==0;Ee!==null;){var y=Ee,w=y.child;if(y.tag===22&&c){var $=y.memoizedState!==null||oo;if(!$){var M=y.alternate,O=M!==null&&M.memoizedState!==null||Qt;M=oo;var W=Qt;if(oo=$,(Qt=O)&&!W)for(Ee=y;Ee!==null;)$=Ee,O=$.child,$.tag===22&&$.memoizedState!==null?$h(y):O!==null?(O.return=$,Ee=O):$h(y);for(;w!==null;)Ee=w,Gg(w),w=w.sibling;Ee=y,oo=M,Qt=W}Sh(t)}else y.subtreeFlags&8772&&w!==null?(w.return=y,Ee=w):Sh(t)}}function Sh(t){for(;Ee!==null;){var a=Ee;if(a.flags&8772){var l=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Qt||xi(5,a);break;case 1:var c=a.stateNode;if(a.flags&4&&!Qt)if(l===null)c.componentDidMount();else{var y=a.elementType===a.type?l.memoizedProps:Hs(a.type,l.memoizedProps);c.componentDidUpdate(y,l.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&gh(a,w,c);break;case 3:var $=a.updateQueue;if($!==null){if(l=null,a.child!==null)switch(a.child.tag){case 5:l=a.child.stateNode;break;case 1:l=a.child.stateNode}gh(a,$,l)}break;case 5:var M=a.stateNode;if(l===null&&a.flags&4){l=M;var O=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&l.focus();break;case"img":O.src&&(l.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var W=a.alternate;if(W!==null){var ne=W.memoizedState;if(ne!==null){var ae=ne.dehydrated;ae!==null&&dl(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}Qt||a.flags&512&&Bc(a)}catch(B){Pt(a,a.return,B)}}if(a===t){Ee=null;break}if(l=a.sibling,l!==null){l.return=a.return,Ee=l;break}Ee=a.return}}function Eh(t){for(;Ee!==null;){var a=Ee;if(a===t){Ee=null;break}var l=a.sibling;if(l!==null){l.return=a.return,Ee=l;break}Ee=a.return}}function $h(t){for(;Ee!==null;){var a=Ee;try{switch(a.tag){case 0:case 11:case 15:var l=a.return;try{xi(4,a)}catch(O){Pt(a,l,O)}break;case 1:var c=a.stateNode;if(typeof c.componentDidMount=="function"){var y=a.return;try{c.componentDidMount()}catch(O){Pt(a,y,O)}}var w=a.return;try{Bc(a)}catch(O){Pt(a,w,O)}break;case 5:var $=a.return;try{Bc(a)}catch(O){Pt(a,$,O)}}}catch(O){Pt(a,a.return,O)}if(a===t){Ee=null;break}var M=a.sibling;if(M!==null){M.return=a.return,Ee=M;break}Ee=a.return}}var Af=Math.ceil,Qo=Fr.ReactCurrentDispatcher,Yd=Fr.ReactCurrentOwner,Ts=Fr.ReactCurrentBatchConfig,at=0,Vt=null,St=null,Yt=0,bs=0,tn=ea(0),Rt=0,Nl=null,Pa=0,mi=0,Wd=0,sl=null,os=null,_d=0,pn=1/0,gr=null,Zo=!1,sd=null,Kr=null,io=!1,Ur=null,Xo=0,rl=0,rd=null,Ao=-1,Lo=0;function ss(){return at&6?Lt():Ao!==-1?Ao:Ao=Lt()}function Jr(t){return t.mode&1?at&2&&Yt!==0?Yt&-Yt:xf.transition!==null?(Lo===0&&(Lo=Tp()),Lo):(t=xt,t!==0||(t=window.event,t=t===void 0?16:Hp(t.type)),t):1}function Us(t,a,l,c){if(50<rl)throw rl=0,rd=null,Error(pe(185));wl(t,l,c),(!(at&2)||t!==Vt)&&(t===Vt&&(!(at&2)&&(mi|=l),Rt===4&&zr(t,Yt)),xs(t,c),l===1&&at===0&&!(a.mode&1)&&(pn=Lt()+500,ii&&ta()))}function xs(t,a){var l=t.callbackNode;dy(t,a);var c=Io(t,t===Vt?Yt:0);if(c===0)l!==null&&Yu(l),t.callbackNode=null,t.callbackPriority=0;else if(a=c&-c,t.callbackPriority!==a){if(l!=null&&Yu(l),a===1)t.tag===0?df(Ih.bind(null,t)):rg(Ih.bind(null,t)),nf(function(){!(at&6)&&ta()}),l=null;else{switch(Sp(c)){case 1:l=bd;break;case 4:l=Lp;break;case 16:l=$o;break;case 536870912:l=Dp;break;default:l=$o}l=tb(l,Kg.bind(null,t))}t.callbackPriority=a,t.callbackNode=l}}function Kg(t,a){if(Ao=-1,Lo=0,at&6)throw Error(pe(327));var l=t.callbackNode;if(on()&&t.callbackNode!==l)return null;var c=Io(t,t===Vt?Yt:0);if(c===0)return null;if(c&30||c&t.expiredLanes||a)a=Bo(t,c);else{a=c;var y=at;at|=2;var w=Qg();(Vt!==t||Yt!==a)&&(gr=null,pn=Lt()+500,Na(t,a));do try{Tf();break}catch(M){Jg(t,M)}while(!0);Dd(),Qo.current=w,at=y,St!==null?a=0:(Vt=null,Yt=0,a=Rt)}if(a!==0){if(a===2&&(y=Dc(t),y!==0&&(c=y,a=ad(t,y))),a===1)throw l=Nl,Na(t,0),zr(t,c),xs(t,Lt()),l;if(a===6)zr(t,c);else{if(y=t.current.alternate,!(c&30)&&!Lf(y)&&(a=Bo(t,c),a===2&&(w=Dc(t),w!==0&&(c=w,a=ad(t,w))),a===1))throw l=Nl,Na(t,0),zr(t,c),xs(t,Lt()),l;switch(t.finishedWork=y,t.finishedLanes=c,a){case 0:case 1:throw Error(pe(345));case 2:ba(t,os,gr);break;case 3:if(zr(t,c),(c&130023424)===c&&(a=_d+500-Lt(),10<a)){if(Io(t,0)!==0)break;if(y=t.suspendedLanes,(y&c)!==c){ss(),t.pingedLanes|=t.suspendedLanes&y;break}t.timeoutHandle=Hc(ba.bind(null,t,os,gr),a);break}ba(t,os,gr);break;case 4:if(zr(t,c),(c&4194240)===c)break;for(a=t.eventTimes,y=-1;0<c;){var $=31-Vs(c);w=1<<$,$=a[$],$>y&&(y=$),c&=~w}if(c=y,c=Lt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Af(c/1960))-c,10<c){t.timeoutHandle=Hc(ba.bind(null,t,os,gr),c);break}ba(t,os,gr);break;case 5:ba(t,os,gr);break;default:throw Error(pe(329))}}}return xs(t,Lt()),t.callbackNode===l?Kg.bind(null,t):null}function ad(t,a){var l=sl;return t.current.memoizedState.isDehydrated&&(Na(t,a).flags|=256),t=Bo(t,a),t!==2&&(a=os,os=l,a!==null&&nd(a)),t}function nd(t){os===null?os=t:os.push.apply(os,t)}function Lf(t){for(var a=t;;){if(a.flags&16384){var l=a.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var c=0;c<l.length;c++){var y=l[c],w=y.getSnapshot;y=y.value;try{if(!Ys(w(),y))return!1}catch{return!1}}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function zr(t,a){for(a&=~Wd,a&=~mi,t.suspendedLanes|=a,t.pingedLanes&=~a,t=t.expirationTimes;0<a;){var l=31-Vs(a),c=1<<l;t[l]=-1,a&=~c}}function Ih(t){if(at&6)throw Error(pe(327));on();var a=Io(t,0);if(!(a&1))return xs(t,Lt()),null;var l=Bo(t,a);if(t.tag!==0&&l===2){var c=Dc(t);c!==0&&(a=c,l=ad(t,c))}if(l===1)throw l=Nl,Na(t,0),zr(t,a),xs(t,Lt()),l;if(l===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=a,ba(t,os,gr),xs(t,Lt()),null}function qd(t,a){var l=at;at|=1;try{return t(a)}finally{at=l,at===0&&(pn=Lt()+500,ii&&ta())}}function ka(t){Ur!==null&&Ur.tag===0&&!(at&6)&&on();var a=at;at|=1;var l=Ts.transition,c=xt;try{if(Ts.transition=null,xt=1,t)return t()}finally{xt=c,Ts.transition=l,at=a,!(at&6)&&ta()}}function Gd(){bs=tn.current,ft(tn)}function Na(t,a){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,af(l)),St!==null)for(l=St.return;l!==null;){var c=l;switch(kd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&zo();break;case 3:un(),ft(cs),ft(Zt),Rd();break;case 5:Id(c);break;case 4:un();break;case 13:ft(wt);break;case 19:ft(wt);break;case 10:Td(c.type._context);break;case 22:case 23:Gd()}l=l.return}if(Vt=t,St=t=Qr(t.current,null),Yt=bs=a,Rt=0,Nl=null,Wd=mi=Pa=0,os=sl=null,fa!==null){for(a=0;a<fa.length;a++)if(l=fa[a],c=l.interleaved,c!==null){l.interleaved=null;var y=c.next,w=l.pending;if(w!==null){var $=w.next;w.next=y,c.next=$}l.pending=c}fa=null}return t}function Jg(t,a){do{var l=St;try{if(Dd(),Fo.current=Jo,Ko){for(var c=Ct.memoizedState;c!==null;){var y=c.queue;y!==null&&(y.pending=null),c=c.next}Ko=!1}if(Fa=0,zt=It=Ct=null,el=!1,yl=0,Yd.current=null,l===null||l.return===null){Rt=1,Nl=a,St=null;break}e:{var w=t,$=l.return,M=l,O=a;if(a=Yt,M.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=O,ne=M,ae=ne.tag;if(!(ne.mode&1)&&(ae===0||ae===11||ae===15)){var B=ne.alternate;B?(ne.updateQueue=B.updateQueue,ne.memoizedState=B.memoizedState,ne.lanes=B.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var xe=vh($);if(xe!==null){xe.flags&=-257,wh(xe,$,M,w,a),xe.mode&1&&Nh(w,W,a),a=xe,O=W;var ce=a.updateQueue;if(ce===null){var me=new Set;me.add(O),a.updateQueue=me}else ce.add(O);break e}else{if(!(a&1)){Nh(w,W,a),Kd();break e}O=Error(pe(426))}}else if(jt&&M.mode&1){var ze=vh($);if(ze!==null){!(ze.flags&65536)&&(ze.flags|=256),wh(ze,$,M,w,a),Ad(hn(O,M));break e}}w=O=hn(O,M),Rt!==4&&(Rt=2),sl===null?sl=[w]:sl.push(w),w=$;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var Q=Sg(w,O,a);ph(w,Q);break e;case 1:M=O;var G=w.type,Z=w.stateNode;if(!(w.flags&128)&&(typeof G.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Kr===null||!Kr.has(Z)))){w.flags|=65536,a&=-a,w.lanes|=a;var de=Eg(w,M,a);ph(w,de);break e}}w=w.return}while(w!==null)}Xg(l)}catch(Fe){a=Fe,St===l&&l!==null&&(St=l=l.return);continue}break}while(!0)}function Qg(){var t=Qo.current;return Qo.current=Jo,t===null?Jo:t}function Kd(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Vt===null||!(Pa&268435455)&&!(mi&268435455)||zr(Vt,Yt)}function Bo(t,a){var l=at;at|=2;var c=Qg();(Vt!==t||Yt!==a)&&(gr=null,Na(t,a));do try{Df();break}catch(y){Jg(t,y)}while(!0);if(Dd(),at=l,Qo.current=c,St!==null)throw Error(pe(261));return Vt=null,Yt=0,Rt}function Df(){for(;St!==null;)Zg(St)}function Tf(){for(;St!==null&&!ty();)Zg(St)}function Zg(t){var a=eb(t.alternate,t,bs);t.memoizedProps=t.pendingProps,a===null?Xg(t):St=a,Yd.current=null}function Xg(t){var a=t;do{var l=a.alternate;if(t=a.return,a.flags&32768){if(l=Cf(l,a),l!==null){l.flags&=32767,St=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rt=6,St=null;return}}else if(l=wf(l,a,bs),l!==null){St=l;return}if(a=a.sibling,a!==null){St=a;return}St=a=t}while(a!==null);Rt===0&&(Rt=5)}function ba(t,a,l){var c=xt,y=Ts.transition;try{Ts.transition=null,xt=1,Sf(t,a,l,c)}finally{Ts.transition=y,xt=c}return null}function Sf(t,a,l,c){do on();while(Ur!==null);if(at&6)throw Error(pe(327));l=t.finishedWork;var y=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var w=l.lanes|l.childLanes;if(xy(t,w),t===Vt&&(St=Vt=null,Yt=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||io||(io=!0,tb($o,function(){return on(),null})),w=(l.flags&15990)!==0,l.subtreeFlags&15990||w){w=Ts.transition,Ts.transition=null;var $=xt;xt=1;var M=at;at|=4,Yd.current=null,Pf(t,l),qg(l,t),Zy(Rc),Ro=!!Ic,Rc=Ic=null,t.current=l,kf(l),sy(),at=M,xt=$,Ts.transition=w}else t.current=l;if(io&&(io=!1,Ur=t,Xo=y),w=t.pendingLanes,w===0&&(Kr=null),ny(l.stateNode),xs(t,Lt()),a!==null)for(c=t.onRecoverableError,l=0;l<a.length;l++)y=a[l],c(y.value,{componentStack:y.stack,digest:y.digest});if(Zo)throw Zo=!1,t=sd,sd=null,t;return Xo&1&&t.tag!==0&&on(),w=t.pendingLanes,w&1?t===rd?rl++:(rl=0,rd=t):rl=0,ta(),null}function on(){if(Ur!==null){var t=Sp(Xo),a=Ts.transition,l=xt;try{if(Ts.transition=null,xt=16>t?16:t,Ur===null)var c=!1;else{if(t=Ur,Ur=null,Xo=0,at&6)throw Error(pe(331));var y=at;for(at|=4,Ee=t.current;Ee!==null;){var w=Ee,$=w.child;if(Ee.flags&16){var M=w.deletions;if(M!==null){for(var O=0;O<M.length;O++){var W=M[O];for(Ee=W;Ee!==null;){var ne=Ee;switch(ne.tag){case 0:case 11:case 15:tl(8,ne,w)}var ae=ne.child;if(ae!==null)ae.return=ne,Ee=ae;else for(;Ee!==null;){ne=Ee;var B=ne.sibling,xe=ne.return;if(Yg(ne),ne===W){Ee=null;break}if(B!==null){B.return=xe,Ee=B;break}Ee=xe}}}var ce=w.alternate;if(ce!==null){var me=ce.child;if(me!==null){ce.child=null;do{var ze=me.sibling;me.sibling=null,me=ze}while(me!==null)}}Ee=w}}if(w.subtreeFlags&2064&&$!==null)$.return=w,Ee=$;else e:for(;Ee!==null;){if(w=Ee,w.flags&2048)switch(w.tag){case 0:case 11:case 15:tl(9,w,w.return)}var Q=w.sibling;if(Q!==null){Q.return=w.return,Ee=Q;break e}Ee=w.return}}var G=t.current;for(Ee=G;Ee!==null;){$=Ee;var Z=$.child;if($.subtreeFlags&2064&&Z!==null)Z.return=$,Ee=Z;else e:for($=G;Ee!==null;){if(M=Ee,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:xi(9,M)}}catch(Fe){Pt(M,M.return,Fe)}if(M===$){Ee=null;break e}var de=M.sibling;if(de!==null){de.return=M.return,Ee=de;break e}Ee=M.return}}if(at=y,ta(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(ri,t)}catch{}c=!0}return c}finally{xt=l,Ts.transition=a}}return!1}function Rh(t,a,l){a=hn(l,a),a=Sg(t,a,1),t=Gr(t,a,1),a=ss(),t!==null&&(wl(t,1,a),xs(t,a))}function Pt(t,a,l){if(t.tag===3)Rh(t,t,l);else for(;a!==null;){if(a.tag===3){Rh(a,t,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Kr===null||!Kr.has(c))){t=hn(l,t),t=Eg(a,t,1),a=Gr(a,t,1),t=ss(),a!==null&&(wl(a,1,t),xs(a,t));break}}a=a.return}}function Ef(t,a,l){var c=t.pingCache;c!==null&&c.delete(a),a=ss(),t.pingedLanes|=t.suspendedLanes&l,Vt===t&&(Yt&l)===l&&(Rt===4||Rt===3&&(Yt&130023424)===Yt&&500>Lt()-_d?Na(t,0):Wd|=l),xs(t,a)}function Bg(t,a){a===0&&(t.mode&1?(a=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):a=1);var l=ss();t=wr(t,a),t!==null&&(wl(t,a,l),xs(t,l))}function $f(t){var a=t.memoizedState,l=0;a!==null&&(l=a.retryLane),Bg(t,l)}function If(t,a){var l=0;switch(t.tag){case 13:var c=t.stateNode,y=t.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(pe(314))}c!==null&&c.delete(a),Bg(t,l)}var eb;eb=function(t,a,l){if(t!==null)if(t.memoizedProps!==a.pendingProps||cs.current)is=!0;else{if(!(t.lanes&l)&&!(a.flags&128))return is=!1,vf(t,a,l);is=!!(t.flags&131072)}else is=!1,jt&&a.flags&1048576&&ag(a,Yo,a.index);switch(a.lanes=0,a.tag){case 2:var c=a.type;ko(t,a),t=a.pendingProps;var y=dn(a,Zt.current);ln(a,l),y=Hd(null,a,c,t,y,l);var w=Od();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,ds(c)?(w=!0,Vo(a)):w=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Ed(a),y.updater=di,a.stateNode=y,y._reactInternals=a,_c(a,c,t,l),a=Kc(null,a,c,!0,w,l)):(a.tag=0,jt&&w&&Pd(a),ts(null,a,y,l),a=a.child),a;case 16:c=a.elementType;e:{switch(ko(t,a),t=a.pendingProps,y=c._init,c=y(c._payload),a.type=c,y=a.tag=Mf(c),t=Hs(c,t),y){case 0:a=Gc(null,a,c,t,l);break e;case 1:a=Ph(null,a,c,t,l);break e;case 11:a=Ch(null,a,c,t,l);break e;case 14:a=Fh(null,a,c,Hs(c.type,t),l);break e}throw Error(pe(306,c,""))}return a;case 0:return c=a.type,y=a.pendingProps,y=a.elementType===c?y:Hs(c,y),Gc(t,a,c,y,l);case 1:return c=a.type,y=a.pendingProps,y=a.elementType===c?y:Hs(c,y),Ph(t,a,c,y,l);case 3:e:{if(Mg(a),t===null)throw Error(pe(387));c=a.pendingProps,w=a.memoizedState,y=w.element,dg(t,a),qo(a,c,null,l);var $=a.memoizedState;if(c=$.element,w.isDehydrated)if(w={element:c,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){y=hn(Error(pe(423)),a),a=kh(t,a,c,l,y);break e}else if(c!==y){y=hn(Error(pe(424)),a),a=kh(t,a,c,l,y);break e}else for(ys=qr(a.stateNode.containerInfo.firstChild),fs=a,jt=!0,zs=null,l=ig(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(xn(),c===y){a=Cr(t,a,l);break e}ts(t,a,c,l)}a=a.child}return a;case 5:return xg(a),t===null&&Uc(a),c=a.type,y=a.pendingProps,w=t!==null?t.memoizedProps:null,$=y.children,Mc(c,y)?$=null:w!==null&&Mc(c,w)&&(a.flags|=32),Rg(t,a),ts(t,a,$,l),a.child;case 6:return t===null&&Uc(a),null;case 13:return Hg(t,a,l);case 4:return $d(a,a.stateNode.containerInfo),c=a.pendingProps,t===null?a.child=mn(a,null,c,l):ts(t,a,c,l),a.child;case 11:return c=a.type,y=a.pendingProps,y=a.elementType===c?y:Hs(c,y),Ch(t,a,c,y,l);case 7:return ts(t,a,a.pendingProps,l),a.child;case 8:return ts(t,a,a.pendingProps.children,l),a.child;case 12:return ts(t,a,a.pendingProps.children,l),a.child;case 10:e:{if(c=a.type._context,y=a.pendingProps,w=a.memoizedProps,$=y.value,ut(Wo,c._currentValue),c._currentValue=$,w!==null)if(Ys(w.value,$)){if(w.children===y.children&&!cs.current){a=Cr(t,a,l);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var M=w.dependencies;if(M!==null){$=w.child;for(var O=M.firstContext;O!==null;){if(O.context===c){if(w.tag===1){O=jr(-1,l&-l),O.tag=2;var W=w.updateQueue;if(W!==null){W=W.shared;var ne=W.pending;ne===null?O.next=O:(O.next=ne.next,ne.next=O),W.pending=O}}w.lanes|=l,O=w.alternate,O!==null&&(O.lanes|=l),Yc(w.return,l,a),M.lanes|=l;break}O=O.next}}else if(w.tag===10)$=w.type===a.type?null:w.child;else if(w.tag===18){if($=w.return,$===null)throw Error(pe(341));$.lanes|=l,M=$.alternate,M!==null&&(M.lanes|=l),Yc($,l,a),$=w.sibling}else $=w.child;if($!==null)$.return=w;else for($=w;$!==null;){if($===a){$=null;break}if(w=$.sibling,w!==null){w.return=$.return,$=w;break}$=$.return}w=$}ts(t,a,y.children,l),a=a.child}return a;case 9:return y=a.type,c=a.pendingProps.children,ln(a,l),y=Ss(y),c=c(y),a.flags|=1,ts(t,a,c,l),a.child;case 14:return c=a.type,y=Hs(c,a.pendingProps),y=Hs(c.type,y),Fh(t,a,c,y,l);case 15:return $g(t,a,a.type,a.pendingProps,l);case 17:return c=a.type,y=a.pendingProps,y=a.elementType===c?y:Hs(c,y),ko(t,a),a.tag=1,ds(c)?(t=!0,Vo(a)):t=!1,ln(a,l),Tg(a,c,y),_c(a,c,y,l),Kc(null,a,c,!0,t,l);case 19:return Og(t,a,l);case 22:return Ig(t,a,l)}throw Error(pe(156,a.tag))};function tb(t,a){return Ap(t,a)}function Rf(t,a,l,c){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(t,a,l,c){return new Rf(t,a,l,c)}function Jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mf(t){if(typeof t=="function")return Jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hd)return 11;if(t===pd)return 14}return 2}function Qr(t,a){var l=t.alternate;return l===null?(l=Ds(t.tag,a,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=a,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,a=t.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function Do(t,a,l,c,y,w){var $=2;if(c=t,typeof t=="function")Jd(t)&&($=1);else if(typeof t=="string")$=5;else e:switch(t){case _a:return va(l.children,y,w,a);case ud:$=8,y|=8;break;case pc:return t=Ds(12,l,a,y|2),t.elementType=pc,t.lanes=w,t;case gc:return t=Ds(13,l,a,y),t.elementType=gc,t.lanes=w,t;case bc:return t=Ds(19,l,a,y),t.elementType=bc,t.lanes=w,t;case xp:return ui(l,y,w,a);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cp:$=10;break e;case dp:$=9;break e;case hd:$=11;break e;case pd:$=14;break e;case Mr:$=16,c=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return a=Ds($,l,a,y),a.elementType=t,a.type=c,a.lanes=w,a}function va(t,a,l,c){return t=Ds(7,t,c,a),t.lanes=l,t}function ui(t,a,l,c){return t=Ds(22,t,c,a),t.elementType=xp,t.lanes=l,t.stateNode={isHidden:!1},t}function ac(t,a,l){return t=Ds(6,t,null,a),t.lanes=l,t}function nc(t,a,l){return a=Ds(4,t.children!==null?t.children:[],t.key,a),a.lanes=l,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}function Hf(t,a,l,c,y){this.tag=a,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oi(0),this.expirationTimes=Oi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oi(0),this.identifierPrefix=c,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Qd(t,a,l,c,y,w,$,M,O){return t=new Hf(t,a,l,M,O),a===1?(a=1,w===!0&&(a|=8)):a=0,w=Ds(3,null,null,a),t.current=w,w.stateNode=t,w.memoizedState={element:c,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ed(w),t}function Of(t,a,l){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wa,key:c==null?null:""+c,children:t,containerInfo:a,implementation:l}}function sb(t){if(!t)return Xr;t=t._reactInternals;e:{if(La(t)!==t||t.tag!==1)throw Error(pe(170));var a=t;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(ds(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(pe(171))}if(t.tag===1){var l=t.type;if(ds(l))return sg(t,l,a)}return a}function rb(t,a,l,c,y,w,$,M,O){return t=Qd(l,c,!0,t,y,w,$,M,O),t.context=sb(null),l=t.current,c=ss(),y=Jr(l),w=jr(c,y),w.callback=a??null,Gr(l,w,y),t.current.lanes=y,wl(t,y,c),xs(t,c),t}function hi(t,a,l,c){var y=a.current,w=ss(),$=Jr(y);return l=sb(l),a.context===null?a.context=l:a.pendingContext=l,a=jr(w,$),a.payload={element:t},c=c===void 0?null:c,c!==null&&(a.callback=c),t=Gr(y,a,$),t!==null&&(Us(t,y,$,w),Co(t,y,$)),$}function ei(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mh(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<a?l:a}}function Zd(t,a){Mh(t,a),(t=t.alternate)&&Mh(t,a)}function zf(){return null}var ab=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xd(t){this._internalRoot=t}pi.prototype.render=Xd.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(pe(409));hi(t,a,null,null)};pi.prototype.unmount=Xd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;ka(function(){hi(null,t,null,null)}),a[vr]=null}};function pi(t){this._internalRoot=t}pi.prototype.unstable_scheduleHydration=function(t){if(t){var a=Ip();t={blockedOn:null,target:t,priority:a};for(var l=0;l<Or.length&&a!==0&&a<Or[l].priority;l++);Or.splice(l,0,t),l===0&&Mp(t)}};function Bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hh(){}function Vf(t,a,l,c,y){if(y){if(typeof c=="function"){var w=c;c=function(){var W=ei($);w.call(W)}}var $=rb(a,c,t,0,null,!1,!1,"",Hh);return t._reactRootContainer=$,t[vr]=$.current,ul(t.nodeType===8?t.parentNode:t),ka(),$}for(;y=t.lastChild;)t.removeChild(y);if(typeof c=="function"){var M=c;c=function(){var W=ei(O);M.call(W)}}var O=Qd(t,0,!1,null,null,!1,!1,"",Hh);return t._reactRootContainer=O,t[vr]=O.current,ul(t.nodeType===8?t.parentNode:t),ka(function(){hi(a,O,l,c)}),O}function bi(t,a,l,c,y){var w=l._reactRootContainer;if(w){var $=w;if(typeof y=="function"){var M=y;y=function(){var O=ei($);M.call(O)}}hi(a,$,t,y)}else $=Vf(l,a,t,y,c);return ei($)}Ep=function(t){switch(t.tag){case 3:var a=t.stateNode;if(a.current.memoizedState.isDehydrated){var l=Gn(a.pendingLanes);l!==0&&(yd(a,l|1),xs(a,Lt()),!(at&6)&&(pn=Lt()+500,ta()))}break;case 13:ka(function(){var c=wr(t,1);if(c!==null){var y=ss();Us(c,t,1,y)}}),Zd(t,1)}};fd=function(t){if(t.tag===13){var a=wr(t,134217728);if(a!==null){var l=ss();Us(a,t,134217728,l)}Zd(t,134217728)}};$p=function(t){if(t.tag===13){var a=Jr(t),l=wr(t,a);if(l!==null){var c=ss();Us(l,t,a,c)}Zd(t,a)}};Ip=function(){return xt};Rp=function(t,a){var l=xt;try{return xt=t,a()}finally{xt=l}};kc=function(t,a,l){switch(a){case"input":if(jc(t,l),a=l.name,l.type==="radio"&&a!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==t&&c.form===t.form){var y=oi(c);if(!y)throw Error(pe(90));up(c),jc(c,y)}}}break;case"textarea":pp(t,l);break;case"select":a=l.value,a!=null&&sn(t,!!l.multiple,a,!1)}};vp=qd;wp=ka;var Uf={usingClientEntryPoint:!1,Events:[Fl,Ja,oi,jp,Np,qd]},Un={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yf={bundleType:Un.bundleType,version:Un.version,rendererPackageName:Un.rendererPackageName,rendererConfig:Un.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pp(t),t===null?null:t.stateNode},findFiberByHostInstance:Un.findFiberByHostInstance||zf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!co.isDisabled&&co.supportsFiber)try{ri=co.inject(Yf),rr=co}catch{}}Ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uf;Ns.createPortal=function(t,a){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bd(a))throw Error(pe(200));return Of(t,a,null,l)};Ns.createRoot=function(t,a){if(!Bd(t))throw Error(pe(299));var l=!1,c="",y=ab;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Qd(t,1,!1,null,null,l,!1,c,y),t[vr]=a.current,ul(t.nodeType===8?t.parentNode:t),new Xd(a)};Ns.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=Pp(a),t=t===null?null:t.stateNode,t};Ns.flushSync=function(t){return ka(t)};Ns.hydrate=function(t,a,l){if(!gi(a))throw Error(pe(200));return bi(null,t,a,!0,l)};Ns.hydrateRoot=function(t,a,l){if(!Bd(t))throw Error(pe(405));var c=l!=null&&l.hydratedSources||null,y=!1,w="",$=ab;if(l!=null&&(l.unstable_strictMode===!0&&(y=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&($=l.onRecoverableError)),a=rb(a,null,t,1,l??null,y,!1,w,$),t[vr]=a.current,ul(t),c)for(t=0;t<c.length;t++)l=c[t],y=l._getVersion,y=y(l._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[l,y]:a.mutableSourceEagerHydrationData.push(l,y);return new pi(a)};Ns.render=function(t,a,l){if(!gi(a))throw Error(pe(200));return bi(null,t,a,!1,l)};Ns.unmountComponentAtNode=function(t){if(!gi(t))throw Error(pe(40));return t._reactRootContainer?(ka(function(){bi(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};Ns.unstable_batchedUpdates=qd;Ns.unstable_renderSubtreeIntoContainer=function(t,a,l,c){if(!gi(l))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return bi(t,a,l,!1,c)};Ns.version="18.3.1-next-f1338f8080-20240426";function nb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nb)}catch(t){console.error(t)}}nb(),np.exports=Ns;var Wf=np.exports,Oh=Wf;uc.createRoot=Oh.createRoot,uc.hydrateRoot=Oh.hydrateRoot;var _f={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qf=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gf=(t,a)=>{const l=je.forwardRef(({color:c="currentColor",size:y=24,strokeWidth:w=2,absoluteStrokeWidth:$,children:M,...O},W)=>je.createElement("svg",{ref:W,..._f,width:y,height:y,stroke:c,strokeWidth:$?Number(w)*24/Number(y):w,className:`lucide lucide-${qf(t)}`,...O},[...a.map(([ne,ae])=>je.createElement(ne,ae)),...(Array.isArray(M)?M:[M])||[]]));return l.displayName=`${t}`,l};var He=Gf;const lc=He("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),zh=He("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Er=He("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),bt=He("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Kf=He("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Jf=He("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ur=He("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Ms=He("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Bs=He("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ti=He("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),al=He("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Qf=He("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),er=He("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Yn=He("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),oc=He("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),xo=He("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),mo=He("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),vt=He("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),gs=He("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ic=He("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),Zf=He("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Vh=He("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ge=He("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Uh=He("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"8ur5zv"}]]),Yh=He("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),uo=He("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Ua=He("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),Ht=He("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),Wh=He("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),cc=He("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Xf=He("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),ho=He("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),po=He("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Bf=He("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),ej=He("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),$r=He("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),dc=He("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Ke=He("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ot=He("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),Ir=He("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),tj=He("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Rr=He("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$t=He("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),_h=He("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),go=He("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Ps=He("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),sj=He("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),ot=He("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),rj=He("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),lt=He("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),bo=He("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),yo=He("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]),Ya=He("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),xc=He("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),hr=He("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),qh=He("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),pr=He("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Gh=He("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ie=({value:t,onChange:a,className:l="",placeholder:c="0.00",disabled:y=!1})=>{const[w,$]=je.useState(""),M=je.useRef(null),O=ce=>ce===0||ce===null||ce===void 0?"":ce.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),W=ce=>{if(!ce)return 0;const me=ce.replace(/[^0-9.-]/g,"");return parseFloat(me)||0};je.useEffect(()=>{document.activeElement!==M.current&&$(O(t))},[t]);const ne=()=>{t&&$(t.toString())},ae=ce=>{const me=ce.target.value;(/^-?[\d,]*\.?\d*$/.test(me)||me==="")&&$(me)},B=()=>{const ce=W(w);a(ce),$(O(ce))},xe=ce=>{ce.key==="Enter"&&ce.target.blur()};return e.jsx("input",{ref:M,type:"text",inputMode:"decimal",value:w,onChange:ae,onFocus:ne,onBlur:B,onKeyDown:xe,placeholder:c,disabled:y,className:l})},Qe=({value:t,onChange:a,className:l="",placeholder:c="0",decimals:y=0,disabled:w=!1})=>{const[$,M]=je.useState(""),O=je.useRef(null),W=me=>me===0||me===null||me===void 0?"":me.toLocaleString("en-US",{minimumFractionDigits:y,maximumFractionDigits:y}),ne=me=>{if(!me)return 0;const ze=me.replace(/[^0-9.-]/g,"");return y>0?parseFloat(ze)||0:parseInt(ze)||0};je.useEffect(()=>{document.activeElement!==O.current&&M(W(t))},[t]);const ae=()=>{t&&M(t.toString())},B=me=>{const ze=me.target.value;(/^-?[\d,]*\.?\d*$/.test(ze)||ze==="")&&M(ze)},xe=()=>{const me=ne($);a(me),M(W(me))},ce=me=>{me.key==="Enter"&&me.target.blur()};return e.jsx("input",{ref:O,type:"text",inputMode:"decimal",value:$,onChange:B,onFocus:ae,onBlur:xe,onKeyDown:ce,placeholder:c,disabled:w,className:l})},aj=[{id:"client-1",name:"Joe Farmer",units:1135.66,tillableUnits:1065.66,livestockUnits:70,entities:[{id:"ent-1a",name:"Joe Farmer (Personal)"},{id:"ent-1b",name:"JF Farms LLC"},{id:"ent-1c",name:"Farmer Land Holdings"}],fields:[{fieldName:"North Quarter",crop:"Corn",practice:"Irrigated",county:"Cedar",entity:"ent-1b",plannedAcres:156,sharePercent:100,aph:220},{fieldName:"South 80",crop:"Corn",practice:"Dryland",county:"Cedar",entity:"ent-1b",plannedAcres:78,sharePercent:100,aph:165},{fieldName:"River Bottom",crop:"Soybeans",practice:"Dryland",county:"Dixon",entity:"ent-1b",plannedAcres:124,sharePercent:100,aph:52},{fieldName:"West Field",crop:"Corn",practice:"Irrigated",county:"Cedar",entity:"ent-1c",plannedAcres:210,sharePercent:66.67,aph:235},{fieldName:"Home Place",crop:"Wheat",practice:"Dryland",county:"Cedar",entity:"ent-1a",plannedAcres:95,sharePercent:100,aph:48},{fieldName:"East 120",crop:"Soybeans",practice:"Dryland",county:"Dixon",entity:"ent-1b",plannedAcres:118,sharePercent:100,aph:48}]},{id:"client-2",name:"Smith Family Farms",units:2400,tillableUnits:2400,livestockUnits:0,entities:[{id:"ent-2a",name:"Smith Family Farms"}],fields:[]},{id:"client-3",name:"Koch Ag LLC",units:890,tillableUnits:850,livestockUnits:40,entities:[{id:"ent-3a",name:"Chad Koch"},{id:"ent-3b",name:"CKCA LLC"},{id:"ent-3c",name:"Koch Land LLC"}],fields:[]}],nj={"client-1":[{id:"bs-2024",clientId:"client-1",entityId:"ent-1a",date:"2024-01-03",createdAt:"2024-01-03T10:00:00Z",adjustment:0,currentAssets:{cash:[{id:"c1",description:"Farm Checking ***102",amount:1608.36},{id:"c2",description:"Personal Checking ***382",amount:1e3},{id:"c3",description:"CKCA LLC Checking ***681",amount:43177.13}],accountsReceivable:[{id:"ar1",description:"Coaching Wages",amount:9e3},{id:"ar2",description:"Half Tractor Payments (Karl Koch)",amount:12173.07},{id:"ar3",description:"Bridge Assistance Payment",amount:39153.91},{id:"ar4",description:"White Corn Sold CVA",amount:81292.47}],commodityAccounts:[{id:"ca1",description:"Futures Account",amount:0}],cropInventory:[{id:"ci1",description:"Corn",quantity:118848,unit:"bu",pricePerUnit:4.5,totalValue:534816.79},{id:"ci2",description:"Soybeans",quantity:5e3,unit:"bu",pricePerUnit:10.25,totalValue:51250}],feedInventory:[{id:"fi1",description:"Hay",quantity:150,unit:"ton",pricePerUnit:85,totalValue:12750},{id:"fi2",description:"Corn Silage",quantity:200,unit:"ton",pricePerUnit:9.1,totalValue:1820}],marketLivestock:[{id:"ml1",description:"Feeder Steers",headCount:85,weightPerHead:750,pricePerCwt:245,totalValue:156187.5},{id:"ml2",description:"Feeder Heifers",headCount:25,weightPerHead:650,pricePerCwt:230,totalValue:37375}],growingCrop:[{id:"gc1",description:"Winter Wheat",acres:320,pricePerAcre:75,totalValue:24e3},{id:"gc2",description:"Cover Crop",acres:200,pricePerAcre:35,totalValue:7e3}],prepaidExpenses:[{id:"pe1",description:"Prepaid Insurance",amount:2500},{id:"pe2",description:"Prepaid Rent",amount:2437}],otherCurrentAssets:[{id:"oc1",description:"Dividends Receivable",amount:1e3}]},intermediateAssets:{machinery:[{id:"m1",description:"Great Plains 26 Ft Grain Drill",year:1994,serial:"GP5626Z",priorValue:70200,currentValue:63180,depRate:.1},{id:"m2",description:"Apache Sprayer",year:2018,serial:"",priorValue:151200,currentValue:136080,depRate:.1},{id:"m3",description:"MF8S.285 Tractor (50%)",year:2023,serial:"",priorValue:284e3,currentValue:255600,depRate:.1},{id:"m4",description:"Gleaner S97 Combine",year:2020,serial:"",priorValue:3e5,currentValue:27e4,depRate:.1},{id:"m5",description:"2012 Kinze Planter",year:2012,serial:"",priorValue:105300,currentValue:94770,depRate:.1},{id:"m6",description:"Parker Grain Cart 737",year:2012,serial:"",priorValue:9e3,currentValue:8100,depRate:.1},{id:"m7",description:"DT 180 w/ Loader Tractor",year:2015,serial:"",priorValue:8e4,currentValue:72e3,depRate:.1}],vehicles:[{id:"v1",description:"Silverado Pickup",year:2020,serial:"",priorValue:4131.11,currentValue:3718,depRate:.1},{id:"v2",description:"2019 Ford F-250",year:2019,serial:"",priorValue:42e3,currentValue:37800,depRate:.1},{id:"v3",description:"Hyundai Palisade",year:2022,serial:"",priorValue:28e3,currentValue:24109.74,depRate:.1}],breedingLivestock:[{id:"bl1",type:"Cows",description:"Spring Cows",quantity:40,valuePerHead:3e3,totalValue:12e4},{id:"bl2",type:"Cows",description:"Spring Bred Heifers",quantity:3,valuePerHead:4e3,totalValue:12e3},{id:"bl3",type:"Bulls",description:"Breeding Bulls",quantity:2,valuePerHead:6e3,totalValue:12e3},{id:"bl4",type:"Cows",description:"Fall Cows",quantity:29,valuePerHead:3e3,totalValue:87e3}]},longTermAssets:{realEstate:[{id:"re1",description:"35-31-2E S1/2SW",county:"Cedar County",totalAcres:74.77,irrAcres:61.77,dryAcres:13,otherAcres:0,value:427105,taxValue:427105,annualTaxes:2211.48},{id:"re2",description:"12-28-2E N1/2SE",county:"Cedar County",totalAcres:80,irrAcres:0,dryAcres:80,otherAcres:0,value:479395,taxValue:479395,annualTaxes:3616.88},{id:"re3",description:"W1/2 SE1/4 SEC. 13-30-4",county:"Dixon County",totalAcres:21,irrAcres:0,dryAcres:21,otherAcres:0,value:229105,taxValue:229105,annualTaxes:1346.64},{id:"re4",description:"Home Place",county:"Cedar County",totalAcres:5,irrAcres:0,dryAcres:0,otherAcres:5,value:35e4,taxValue:35e4,annualTaxes:2800}],buildings:[{id:"b1",description:"Machine Shed",year:2015,priorValue:28500,currentValue:25650,depRate:.1},{id:"b2",description:"Grain Bins",year:2010,priorValue:18500,currentValue:16650,depRate:.1},{id:"b3",description:"Cattle Well",year:2023,priorValue:17150,currentValue:15435.3,depRate:.1}],otherLongTerm:[{id:"ol1",description:"Cooperative Stock - CVA",priorValue:42e3,currentValue:45e3},{id:"ol2",description:"Cooperative Stock - Other",priorValue:11500,currentValue:12500},{id:"ol3",description:"Cash Value Life Insurance",priorValue:23e3,currentValue:25e3},{id:"ol4",description:"Retirement Accounts",priorValue:365e3,currentValue:386e3}]},capitalActivity:{machineryPurchases:[{id:"mp1",description:"JD 9620 Tractor",cashPaid:45e3,financedAmount:18e4,totalCost:225e3}],machinerySales:[{id:"ms1",description:"Old Case Tractor",previousValue:35e3,salePrice:42e3,gainLoss:7e3}],vehiclePurchases:[],vehicleSales:[],buildingPurchases:[],buildingSales:[]},currentLiabilities:{accountsPayable:[{id:"ap1",description:"Seed Supplier",amount:5200},{id:"ap2",description:"Fertilizer Co-op",amount:8500}],outstandingChecks:[{id:"oc1",description:"Equipment Repair",draftNumber:"1547",amount:1250},{id:"oc2",description:"Fuel Purchase",draftNumber:"1548",amount:875}],creditCardDebt:[{id:"cc1",description:"Farm Supply Card",amount:3200},{id:"cc2",description:"Business Visa",amount:1800}],operatingLine:790345.3,currentPortionTermDebt:143154.66,accruedInterest:95862.09,otherCurrentLiabilities:[]},debtService:[{id:"ds-op1",description:"Opr LOC 11670",lender:"Security Bank",entity:"Chad Koch",interestRate:8.5,rateType:"V",amYears:1,security:"Chattels",rateMaturity:"2026-12-31",maturity:"2027-06-16",accruedInterest:68234.71,locCommitment:6e5,currentBalance:499e3,principalPayment:0,interestPayment:0,totalPayment:0,currentPortion:0,category:"operating"},{id:"ds-op2",description:"Sealed Grain",lender:"FSA",entity:"CKCA LLC",interestRate:4.63,rateType:"F",amYears:1,security:"Chattels",rateMaturity:"2026-09-30",maturity:"2026-09-30",accruedInterest:1070.33,locCommitment:291345.3,currentBalance:291345.3,principalPayment:0,interestPayment:0,totalPayment:0,currentPortion:0,category:"operating"},{id:"ds-eq1",description:"2018 Apache Sprayer",lender:"Security Bank",entity:"Chad Koch",interestRate:6.5,rateType:"Fixed",amYears:4,security:"Apache Sprayer",rateMaturity:"2023-01-15",maturity:"2023-01-15",accruedInterest:6339.76,principalAmount:102071.4,principalPayment:23104.19,interestPayment:6634.64,monthlyPayment:0,totalPayment:29738.83,currentPortion:79967.21,category:"equipment"},{id:"ds-eq2",description:"2012 Kinze Planter",lender:"Security Bank",entity:"Chad Koch",interestRate:7.5,rateType:"Fixed",amYears:4,security:"Kinze Planter",rateMaturity:"2023-02-08",maturity:"2023-12-11",accruedInterest:548.61,principalAmount:73148.38,principalPayment:16395.64,interestPayment:5486.13,monthlyPayment:0,totalPayment:21881.77,currentPortion:56752.74,category:"equipment"},{id:"ds-eq3",description:"Massey 85.285 Dyna-VT Deluxe",lender:"Agco Finance",entity:"Chad/Karl Koch",interestRate:3.82,rateType:"Fixed",amYears:5,security:"MF MF85.285",rateMaturity:"2030-07-01",maturity:"2030-07-01",accruedInterest:175.42,principalAmount:134748.22,principalPayment:19771.76,interestPayment:4574.38,monthlyPayment:0,totalPayment:24946.14,currentPortion:99976.46,category:"equipment"},{id:"ds-eq4",description:"Gleaner S97 Combine",lender:"Ag Direct",entity:"Chad Koch",interestRate:2.99,rateType:"Fixed",amYears:1,security:"Gleaner S97 Combine",rateMaturity:"2026-03-01",maturity:"2026-04-12",accruedInterest:742.56,principalAmount:133223.46,principalPayment:24679.2,interestPayment:4786.53,monthlyPayment:0,totalPayment:29465.73,currentPortion:108544.26,category:"equipment"},{id:"ds-eq5",description:"Past Operating Debt 4099",lender:"Security Bank",entity:"Chad Koch",interestRate:7.7,rateType:"Fixed",amYears:5,security:"Chattels",rateMaturity:"2030-04-01",maturity:"2030-04-12",accruedInterest:5287.33,principalAmount:8e4,principalPayment:13887.62,interestPayment:6160,monthlyPayment:0,totalPayment:20047.62,currentPortion:66112.38,category:"equipment"},{id:"ds-vh1",description:"2013 Chevy Silverado",lender:"Security Bank",entity:"Chad Koch",interestRate:5.43,rateType:"Fixed",amYears:1,security:"Pickup",rateMaturity:"2026-05-16",maturity:"2026-05-16",accruedInterest:5.25,principalAmount:1607,principalPayment:1607,interestPayment:87.26,monthlyPayment:325.59,totalPayment:1694.26,currentPortion:0,category:"vehicle"},{id:"ds-ot1",description:"Bred Cow Note 4098",lender:"Security Bank",entity:"Cow/Calf",interestRate:7.7,rateType:"F",amYears:4,security:"Cattle",rateMaturity:"2029-07-15",maturity:"2029-07-15",accruedInterest:2502.69,principalAmount:72227.71,principalPayment:16071.95,interestPayment:5561.53,monthlyPayment:0,totalPayment:21633.48,currentPortion:56155.76,category:"other"},{id:"ds-re1",description:"Guar. RE Loan 8295",lender:"Security Bank",entity:"Chad Koch",interestRate:4.5,rateType:"Fixed",amYears:23,security:"N1/2 SE 1/4 Sec 12",rateMaturity:"2043-04-01",maturity:"2043-04-12",accruedInterest:8204.69,principalAmount:238687.97,principalPayment:5464.15,interestPayment:10740.96,monthlyPayment:0,totalPayment:16205.11,currentPortion:233223.82,category:"realEstate"},{id:"ds-re2",description:"73.5 Acres Joint w/FSA",lender:"Cedar Security",entity:"Chad Koch",interestRate:5,rateType:"Fixed",amYears:21,security:"79.5 Acres",rateMaturity:"2046-02-01",maturity:"2046-02-01",accruedInterest:223.32,principalAmount:204255.85,principalPayment:4423.78,interestPayment:10212.79,monthlyPayment:0,totalPayment:14636.57,currentPortion:199832.07,category:"realEstate"},{id:"ds-re3",description:"FSA 73.5 Acres Joint 41-12",lender:"FSA",entity:"Chad Koch",interestRate:2.5,rateType:"Fixed",amYears:30,security:"79.5 Acres 2nd",rateMaturity:"2056-02-01",maturity:"2056-02-12",accruedInterest:4713.93,principalAmount:218487.06,principalPayment:4831.82,interestPayment:5462.18,monthlyPayment:0,totalPayment:10294,currentPortion:213655.24,category:"realEstate"},{id:"ds-re4",description:"Sherman Ground 41-20",lender:"FSA",entity:"Chad Koch",interestRate:2.8,rateType:"Fixed",amYears:25,security:"Sherman Ground",rateMaturity:"2061-12-02",maturity:"2061-12-02",accruedInterest:200.55,principalAmount:282903.27,principalPayment:7640.71,interestPayment:7921.29,monthlyPayment:0,totalPayment:15562,currentPortion:275262.56,category:"realEstate"},{id:"ds-ps1",description:"Home Loan",lender:"Security Bank",entity:"Personal",interestRate:3.38,rateType:"Fixed",amYears:25,security:"Home",rateMaturity:"2051-05-01",maturity:"2051-05-11",accruedInterest:114.77,principalAmount:210845.59,principalPayment:5276.84,interestPayment:7116.04,monthlyPayment:1032.74,totalPayment:12392.88,currentPortion:205568.75,category:"personal"}],termDebt:[{id:"td1",description:"Apache Sprayer",lender:"SB",principal:76994.48,annualPayment:29738.83,category:"equipment"},{id:"td2",description:"Kinze Planter",lender:"SB",principal:56604.36,annualPayment:21881.77,category:"equipment"},{id:"td3",description:"Gleaner Combine",lender:"Ag Direct",principal:155320.8,annualPayment:24187.73,category:"equipment"},{id:"td4",description:"Massey Tractor",lender:"AGCO",principal:121433.39,annualPayment:12173.07,category:"equipment"},{id:"td5",description:"Bred Cows",lender:"SB",principal:56155.76,annualPayment:21633.48,category:"other"},{id:"td6",description:"Cedar Security RE",lender:"CSB",principal:280787.48,annualPayment:14636.57,category:"realEstate"},{id:"td7",description:"41-12 RE Loan",lender:"FSA",principal:148424.7,annualPayment:10294,category:"realEstate"},{id:"td8",description:"41-20 FSA RE",lender:"FSA",principal:186327.36,annualPayment:15562,category:"realEstate"},{id:"td9",description:"Guar RE Loan",lender:"SB",principal:306434.15,annualPayment:16205.11,category:"realEstate"},{id:"td10",description:"Home Loan",lender:"SB",principal:205568.75,annualPayment:18e3,category:"personal"}],cashFlow:{fertilizerTypes:["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],seedUnitsPerCrop:{Corn:8e4,Soybeans:14e4,Wheat:8e5},seedCalc:{"Corn-Irrigated":{pricePerUnit:320,population:34e3},"Corn-Dryland":{pricePerUnit:300,population:28e3},"Soybeans-Dryland":{pricePerUnit:70,population:14e4},"Wheat-Dryland":{pricePerUnit:18,population:12e5}},chemicalTypes:["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],freightRates:{Corn:.35,Soybeans:.4,Wheat:.3},springPrices:{Corn:4.66,Soybeans:10.1,Wheat:5.51},springPriceYear:2026,springPricesFetched:!0,areaPrices:{Corn:{projected:4.66,harvest:4.42},Soybeans:{projected:10.1,harvest:9.85},Wheat:{projected:5.51,harvest:5.28}},countyYields:{"Cedar-Corn-Irrigated":{expected:215,actual:208},"Cedar-Corn-Dryland":{expected:165,actual:158},"Cedar-Wheat-Dryland":{expected:52,actual:48},"Dixon-Soybeans-Dryland":{expected:48,actual:45}},areaPlans:{"ent-1b":{sco:{enabled:!0,protectionFactor:100,premiumPerAcre:8.5},eco:{enabled:!0,coverageLevel:"90",protectionFactor:100,premiumPerAcre:12.25},mp:{enabled:!1},mco:{enabled:!1}},"ent-1c":{sco:{enabled:!0,protectionFactor:100,premiumPerAcre:9},eco:{enabled:!1},mp:{enabled:!0,coverageLevel:80,protectionFactor:100,premiumPerAcre:6.75,expectedInputCosts:425,harvestInputCosts:445},mco:{enabled:!0,triggerLevel:90,premiumPerAcre:3.25}}},crops:[{id:"crop-1",fieldName:"North Quarter",crop:"Corn",practice:"Irrigated",county:"Cedar",entity:"ent-1b",plannedAcres:156,sharePercent:100,aph:220,ownership:"Owned",landOwner:"Joe Farmer",legalId:"NE 1/4 Sec 12",assessorNumber:"12-34-567",reTaxPerAcre:45,totalReTax:7020,seedPerAcre:127.06,seedTreatmentPerAcre:12,fertilizerCosts:{"Starter Fertilizer":28,"Liquid Fertilizer":85,"Dry Fertilizer":45,"Pivot Solution":22,"Foliar Fertilizer":15},fertAppCostPerAcre:18,chemicalCosts:{"Pre Emerge Herbicide":32,"Post Emerge Herbicide":28,Fungicide:22,Insecticide:15},chemAppCostPerAcre:14,irrigationCostPerAcre:85,irrigationEnergyType:"Electric",mpciElection:{planType:"RP",coverageLevel:80,projectedPrice:4.66,premiumPerAcre:28.5},areaPlan:{scoEnabled:!0,scoPerAcre:4.25,ecoEnabled:!0,ecoLevel:"95",ecoPerAcre:8.5},privateInsurance:{hailEnabled:!0,hailCoverage:"100",hailPerAcre:9.25,windEnabled:!0,windPerAcre:2.5},insurance:{Multiperil:{enabled:!0,perAcre:32,totalCost:0,useTotal:!1},Hail:{enabled:!0,perAcre:8,totalCost:0,useTotal:!1},ECO:{enabled:!0,perAcre:12,totalCost:0,useTotal:!1}}},{id:"crop-2",fieldName:"South 80",crop:"Corn",practice:"Dryland",county:"Cedar",entity:"ent-1b",plannedAcres:78,sharePercent:100,aph:165,ownership:"Rented",landOwner:"Smith Trust",legalId:"S 1/2 SE 1/4 Sec 13",assessorNumber:"13-22-891",rentPerAcre:225,totalRent:17550,seedPerAcre:107.14,seedTreatmentPerAcre:10,fertilizerCosts:{"Starter Fertilizer":25,"Dry Fertilizer":65,"Foliar Fertilizer":12},fertAppCostPerAcre:15,chemicalCosts:{"Pre Emerge Herbicide":28,"Post Emerge Herbicide":24,Insecticide:12},chemAppCostPerAcre:12,mpciElection:{planType:"RP",coverageLevel:75,projectedPrice:4.66,premiumPerAcre:22},areaPlan:{scoEnabled:!1,scoPerAcre:0,ecoEnabled:!1,ecoLevel:"90",ecoPerAcre:0},privateInsurance:{hailEnabled:!0,hailCoverage:"75",hailPerAcre:6.5,windEnabled:!1,windPerAcre:0},insurance:{Multiperil:{enabled:!0,perAcre:28,totalCost:0,useTotal:!1},Hail:{enabled:!0,perAcre:6,totalCost:0,useTotal:!1}}},{id:"crop-3",fieldName:"River Bottom",crop:"Soybeans",practice:"Dryland",county:"Dixon",entity:"ent-1b",plannedAcres:124,sharePercent:100,aph:52,ownership:"Owned",landOwner:"Joe Farmer",legalId:"W 1/2 NW 1/4 Sec 24",assessorNumber:"24-11-332",reTaxPerAcre:38,totalReTax:4712,seedPerAcre:50,seedTreatmentPerAcre:8,fertilizerCosts:{"Starter Fertilizer":18,"Dry Fertilizer":35},fertAppCostPerAcre:12,chemicalCosts:{"Pre Emerge Herbicide":22,"Post Emerge Herbicide":18,Fungicide:15},chemAppCostPerAcre:10,mpciElection:{planType:"RP",coverageLevel:80,projectedPrice:10.1,premiumPerAcre:18.75},areaPlan:{scoEnabled:!0,scoPerAcre:3.5,ecoEnabled:!1,ecoLevel:"90",ecoPerAcre:0},privateInsurance:{hailEnabled:!0,hailCoverage:"100",hailPerAcre:7.5,windEnabled:!1,windPerAcre:0}},{id:"crop-4",fieldName:"West Field",crop:"Corn",practice:"Irrigated",county:"Cedar",entity:"ent-1c",plannedAcres:210,sharePercent:66.67,aph:235,ownership:"Shared",landOwner:"Johnson Family",legalId:"NW 1/4 Sec 8",assessorNumber:"08-55-123",seedPerAcre:127.06,seedTreatmentPerAcre:12,fertilizerCosts:{"Starter Fertilizer":28,"Liquid Fertilizer":90,"Dry Fertilizer":48,"Pivot Solution":25,"Foliar Fertilizer":18},fertAppCostPerAcre:18,chemicalCosts:{"Pre Emerge Herbicide":35,"Post Emerge Herbicide":30,Fungicide:25,Insecticide:18},chemAppCostPerAcre:14,irrigationCostPerAcre:92,irrigationEnergyType:"Diesel",mpciElection:{planType:"RP",coverageLevel:85,projectedPrice:4.66,premiumPerAcre:35},areaPlan:{scoEnabled:!1,scoPerAcre:0,ecoEnabled:!0,ecoLevel:"95",ecoPerAcre:10.25,marginPlan:"mp",marginCoverage:"80",marginPerAcre:6.75},privateInsurance:{hailEnabled:!0,hailCoverage:"100",hailPerAcre:11,windEnabled:!0,windPerAcre:3.25}},{id:"crop-5",fieldName:"Home Place",crop:"Wheat",practice:"Dryland",county:"Cedar",entity:"ent-1a",plannedAcres:95,sharePercent:100,aph:48,ownership:"Owned",landOwner:"Joe Farmer",legalId:"SE 1/4 Sec 5",assessorNumber:"05-88-221",reTaxPerAcre:32,totalReTax:3040,seedPerAcre:22.5,seedTreatmentPerAcre:4,fertilizerCosts:{"Starter Fertilizer":15,"Dry Fertilizer":55},fertAppCostPerAcre:10,chemicalCosts:{"Post Emerge Herbicide":18,Fungicide:20},chemAppCostPerAcre:8,mpciElection:{planType:"RP",coverageLevel:75,projectedPrice:5.51,premiumPerAcre:12.5},areaPlan:{scoEnabled:!1,scoPerAcre:0,ecoEnabled:!1,ecoLevel:"90",ecoPerAcre:0},privateInsurance:{hailEnabled:!0,hailCoverage:"50",hailPerAcre:4,windEnabled:!1,windPerAcre:0}},{id:"crop-6",fieldName:"East 120",crop:"Soybeans",practice:"Dryland",county:"Dixon",entity:"ent-1b",plannedAcres:118,sharePercent:100,aph:48,ownership:"Rented",landOwner:"Miller Estate",legalId:"E 1/2 NE 1/4 Sec 19",assessorNumber:"19-44-667",rentPerAcre:195,totalRent:23010,seedPerAcre:50,seedTreatmentPerAcre:8,fertilizerCosts:{"Starter Fertilizer":18,"Dry Fertilizer":32},fertAppCostPerAcre:12,chemicalCosts:{"Pre Emerge Herbicide":20,"Post Emerge Herbicide":16,Insecticide:10},chemAppCostPerAcre:10,mpciElection:{planType:"RP",coverageLevel:80,projectedPrice:10.1,premiumPerAcre:17.25},areaPlan:{scoEnabled:!0,scoPerAcre:3.25,ecoEnabled:!1,ecoLevel:"90",ecoPerAcre:0},privateInsurance:{hailEnabled:!0,hailCoverage:"75",hailPerAcre:5.75,windEnabled:!1,windPerAcre:0}}],customFeeding:{sizeScope:{yardCapacity:2500,January:{projected:71250,actual:68500},February:{projected:65e3,actual:62300},March:{projected:72500,actual:70100},April:{projected:69e3,actual:67800},May:{projected:73500,actual:71200},June:{projected:7e4,actual:68900},July:{projected:74500,actual:72e3},August:{projected:75e3,actual:73500},September:{projected:72e3,actual:70800},October:{projected:76e3,actual:74200},November:{projected:73e3,actual:71500},December:{projected:75500,actual:73800}},feedingSummary:{currentHead:2350,headDays:72850,avgDaysOnFeed:145,estimatedADG:3.25,totalLbFed:185e4,totalDryMatterFed:148e4,currentEstAvgWeight:1150,estimatedBreakEvenCWT:168.5},feedInventory:[{id:"feed-1",feedType:"Corn",asFedAmount:85e4,dryMatterPercent:88,pricePerTon:185,totalCost:78625},{id:"feed-2",feedType:"DDGS",asFedAmount:425e3,dryMatterPercent:90,pricePerTon:165,totalCost:35063},{id:"feed-3",feedType:"Hay",asFedAmount:32e4,dryMatterPercent:85,pricePerTon:145,totalCost:23200},{id:"feed-4",feedType:"Silage",asFedAmount:255e3,dryMatterPercent:35,pricePerTon:45,totalCost:5738}],expenses:{feed:142626,yardage:54638,delivery:8500,managementFee:3650,insurance:2850,processing:4700,vetMed:6200,bedding:3400,profitShare:0},revenue:{yardageRatePerDay:.75,feedMarkupIncome:28500,processingIncome:18500,vetMedIncome:12200,interestIncome:8750,beddingIncome:6400,otherIncome:4850}},customFarming:{jobs:[{id:"job-1",jobType:"Planting",crop:"Corn",acresPlanned:2500,ratePerAcre:22.5,notes:""},{id:"job-2",jobType:"Spraying",crop:"",acresPlanned:4200,ratePerAcre:12,notes:""},{id:"job-3",jobType:"Harvesting (Combining)",crop:"Corn",acresPlanned:3100,ratePerAcre:38,notes:""}],expenses:{fuel:18500,labor:32e3,depreciation:45e3,debtPrincipal:28e3,debtInterest:8500,repairs:12500,insurance:6800,utilities:2400,supplies:3200,licenseFees:1500,professional:2e3,other:1800}},marketing:{byCrop:{}}}},{id:"bs-2023",clientId:"client-1",entityId:"ent-1a",date:"2023-01-08",createdAt:"2023-01-08T10:00:00Z",adjustment:0,currentAssets:{cash:[{id:"c1",description:"All Accounts",amount:5e3}],accountsReceivable:[{id:"ar1",description:"Various",amount:45e3}],commodityAccounts:[],cropInventory:[{id:"ci1",description:"Corn",quantity:1e5,unit:"bu",pricePerUnit:4.5,totalValue:45e4}],feedInventory:[{id:"fi1",description:"Hay & Feed",quantity:100,unit:"ton",pricePerUnit:80,totalValue:8e3}],marketLivestock:[{id:"ml1",description:"Feeder Cattle",headCount:60,weightPerHead:800,pricePerCwt:250,totalValue:12e4}],growingCrop:[{id:"gc1",description:"Corn",acres:450,pricePerAcre:85,totalValue:38250},{id:"gc2",description:"Soybeans",acres:380,pricePerAcre:65,totalValue:24700}],prepaidExpenses:[{id:"pe1",description:"Prepaids",amount:4639.14}],otherCurrentAssets:[]},intermediateAssets:{machinery:[{id:"m1",description:"Various Equipment",year:2020,serial:"",priorValue:85e4,currentValue:765e3,depRate:.1}],vehicles:[{id:"v1",description:"Various Vehicles",year:2020,serial:"",priorValue:85e3,currentValue:76500,depRate:.1}],breedingLivestock:[{id:"bl1",type:"Cows",description:"Cow Herd",quantity:65,valuePerHead:2800,totalValue:182e3}]},longTermAssets:{realEstate:[{id:"re1",description:"All Parcels",county:"Cedar/Dixon",totalAcres:175.77,irrAcres:61.77,dryAcres:114,otherAcres:0,value:1135605,taxValue:1135605,annualTaxes:7975}],buildings:[{id:"b1",description:"All Buildings",year:2015,priorValue:5e4,currentValue:45e3,depRate:.1}],otherLongTerm:[{id:"ol1",description:"Co-op Stock & Other",priorValue:4e5,currentValue:42e4}]},currentLiabilities:{accountsPayable:[],outstandingChecks:[],creditCardDebt:[],operatingLine:45e4,currentPortionTermDebt:85e3,accruedInterest:43515.15,otherCurrentLiabilities:[]},debtService:[{id:"ds1",description:"Equipment Loans",lender:"Various",paymentFrequency:"Annual",paymentDate:"",principalPaid:75e3,interestPaid:2e4,totalPaid:95e3,included:!0,notes:"",begCurrentPortion:8e4,endCurrentPortion:85e3,category:"equipment"},{id:"ds2",description:"Real Estate Loans",lender:"Various",paymentFrequency:"Annual",paymentDate:"",principalPaid:35e3,interestPaid:17e3,totalPaid:52e3,included:!0,notes:"",begCurrentPortion:32e3,endCurrentPortion:35e3,category:"realEstate"},{id:"ds3",description:"Other Loans",lender:"Various",paymentFrequency:"Annual",paymentDate:"",principalPaid:18e3,interestPaid:7e3,totalPaid:25e3,included:!0,notes:"",begCurrentPortion:15e3,endCurrentPortion:18e3,category:"other"}],termDebt:[{id:"td1",description:"Equipment Loans",lender:"Various",principal:45e4,annualPayment:95e3,category:"equipment"},{id:"td2",description:"Real Estate Loans",lender:"Various",principal:85e4,annualPayment:52e3,category:"realEstate"},{id:"td3",description:"Other Loans",lender:"Various",principal:18e4,annualPayment:25e3,category:"other"}]},{id:"bs-2024-llc",clientId:"client-1",entityId:"ent-1b",date:"2024-01-03",createdAt:"2024-01-03T10:00:00Z",adjustment:0,currentAssets:{cash:[{id:"c1",description:"LLC Operating Account",amount:125e3}],accountsReceivable:[{id:"ar1",description:"Contract Payments",amount:45e3}],commodityAccounts:[],cropInventory:[{id:"ci1",description:"Corn",quantity:5e4,unit:"bu",pricePerUnit:4.5,totalValue:225e3}],feedInventory:[],marketLivestock:[],growingCrop:[],prepaidExpenses:[{id:"pe1",description:"Seed & Chemicals",amount:35e3}],otherCurrentAssets:[]},intermediateAssets:{machinery:[{id:"m1",description:"JD 8R Tractor",year:2022,serial:"JD8R-2022",priorValue:285e3,currentValue:256500,depRate:.1},{id:"m2",description:"Case IH Combine",year:2021,serial:"CIH-2021",priorValue:35e4,currentValue:315e3,depRate:.1}],vehicles:[],breedingLivestock:[]},longTermAssets:{realEstate:[{id:"re1",description:"LLC Farm Ground",county:"Cedar County",totalAcres:320,irrAcres:280,dryAcres:40,otherAcres:0,value:256e4,taxValue:256e4,annualTaxes:12800,marketValue:256e4}],buildings:[{id:"b1",description:"Equipment Shed",year:2020,priorValue:85e3,currentValue:76500,depRate:.1}],otherLongTerm:[{id:"ol1",description:"Co-op Investment",priorValue:25e3,currentValue:27500}]},currentLiabilities:{accountsPayable:[{id:"ap1",description:"Input Suppliers",amount:18e3}],outstandingChecks:[],creditCardDebt:[],operatingLine:15e4,currentPortionTermDebt:45e3,accruedInterest:8500,otherCurrentLiabilities:[]},debtService:[{id:"ds1",description:"Equipment Loan",lender:"AgriBank",entity:"JF Farms LLC",interestRate:5.25,rateType:"Fixed",amYears:7,security:"Equipment",rateMaturity:"2029-01-15",maturity:"2029-01-15",accruedInterest:4500,principalAmount:185e3,principalPayment:26500,interestPayment:9700,monthlyPayment:0,totalPayment:36200,currentPortion:158500,category:"equipment"},{id:"ds2",description:"Land Purchase",lender:"FSA",entity:"JF Farms LLC",interestRate:3.5,rateType:"Fixed",amYears:30,security:"Real Estate",rateMaturity:"2052-03-01",maturity:"2052-03-01",accruedInterest:4e3,principalAmount:12e5,principalPayment:28e3,interestPayment:42e3,monthlyPayment:0,totalPayment:7e4,currentPortion:1172e3,category:"realEstate"}],termDebt:[{id:"td1",description:"Equipment Loan",lender:"AgriBank",principal:185e3,annualPayment:36200,category:"equipment"},{id:"td2",description:"Land Loan",lender:"FSA",principal:12e5,annualPayment:7e4,category:"realEstate"}]}]},T=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t||0),pa=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),dt=t=>{var ns,kl,Ws,Al,Da,fn,Ta,jn,Nn,vn,Ll,sa,ra,Dl,yi,fi,Sa,Tl,Sl,aa,ls,Cs,ee,pt,te,At,nr,wn,we,We,Ea,_t,Re,mt,Ce,Tt,na,El,la,oa,rt,Cn,Et,$l,lr,Fn,or,Pn,ir,kn;if(!t)return{};const a=((kl=(ns=t.currentAssets)==null?void 0:ns.cash)==null?void 0:kl.reduce((ge,ve)=>ge+(ve.amount||0),0))||0,l=((Al=(Ws=t.currentAssets)==null?void 0:Ws.accountsReceivable)==null?void 0:Al.reduce((ge,ve)=>ge+(ve.amount||0),0))||0,c=((fn=(Da=t.currentAssets)==null?void 0:Da.commodityAccounts)==null?void 0:fn.reduce((ge,ve)=>ge+(ve.amount||0),0))||0,y=((jn=(Ta=t.currentAssets)==null?void 0:Ta.cropInventory)==null?void 0:jn.reduce((ge,ve)=>ge+(ve.totalValue||ve.amount||0),0))||0,w=((vn=(Nn=t.currentAssets)==null?void 0:Nn.feedInventory)==null?void 0:vn.reduce((ge,ve)=>ge+(ve.totalValue||ve.amount||0),0))||0,$=((sa=(Ll=t.currentAssets)==null?void 0:Ll.marketLivestock)==null?void 0:sa.reduce((ge,ve)=>ge+(ve.totalValue||ve.amount||0),0))||0,M=((Dl=(ra=t.currentAssets)==null?void 0:ra.growingCrop)==null?void 0:Dl.reduce((ge,ve)=>ge+(ve.totalValue||ve.amount||0),0))||0,O=((fi=(yi=t.currentAssets)==null?void 0:yi.prepaidExpenses)==null?void 0:fi.reduce((ge,ve)=>ge+(ve.amount||0),0))||0,W=((Tl=(Sa=t.currentAssets)==null?void 0:Sa.otherCurrentAssets)==null?void 0:Tl.reduce((ge,ve)=>ge+(ve.amount||0),0))||0,ne=a+l+c+y+w+$+M+O+W,ae=((aa=(Sl=t.intermediateAssets)==null?void 0:Sl.machinery)==null?void 0:aa.reduce((ge,ve)=>ge+(ve.currentValue||0),0))||0,B=((Cs=(ls=t.intermediateAssets)==null?void 0:ls.vehicles)==null?void 0:Cs.reduce((ge,ve)=>ge+(ve.currentValue||0),0))||0,xe=((pt=(ee=t.intermediateAssets)==null?void 0:ee.breedingLivestock)==null?void 0:pt.reduce((ge,ve)=>ge+(ve.totalValue||0),0))||0,ce=ae+B+xe,me=((At=(te=t.longTermAssets)==null?void 0:te.realEstate)==null?void 0:At.reduce((ge,ve)=>ge+(ve.marketValue||ve.value||0),0))||0,ze=((wn=(nr=t.longTermAssets)==null?void 0:nr.buildings)==null?void 0:wn.reduce((ge,ve)=>ge+(ve.currentValue||0),0))||0,Q=((We=(we=t.longTermAssets)==null?void 0:we.otherLongTerm)==null?void 0:We.reduce((ge,ve)=>ge+(ve.currentValue||ve.amount||0),0))||0,G=me+ze+Q,Z=ne+ce+G,de=Array.isArray((Ea=t.currentLiabilities)==null?void 0:Ea.accountsPayable)?t.currentLiabilities.accountsPayable.reduce((ge,ve)=>ge+(ve.amount||0),0):((_t=t.currentLiabilities)==null?void 0:_t.accountsPayable)||0,Fe=Array.isArray((Re=t.currentLiabilities)==null?void 0:Re.outstandingChecks)?t.currentLiabilities.outstandingChecks.reduce((ge,ve)=>ge+(ve.amount||0),0):((mt=t.currentLiabilities)==null?void 0:mt.outstandingChecks)||0,Ne=Array.isArray((Ce=t.currentLiabilities)==null?void 0:Ce.creditCardDebt)?t.currentLiabilities.creditCardDebt.reduce((ge,ve)=>ge+(ve.amount||0),0):((Tt=t.currentLiabilities)==null?void 0:Tt.creditCardDebt)||0,Ae=t.debtService||[],De=Ae.filter(ge=>ge.category!=="operating").reduce((ge,ve)=>ge+(ve.principalPayment||0),0),it=Ae.reduce((ge,ve)=>ge+(ve.accruedInterest||0),0),Pe=de+Fe+Ne+(((na=t.currentLiabilities)==null?void 0:na.operatingLine)||0)+De+it+(((la=(El=t.currentLiabilities)==null?void 0:El.otherCurrentLiabilities)==null?void 0:la.reduce((ge,ve)=>ge+(ve.amount||0),0))||0),Dt=((oa=t.termDebt)==null?void 0:oa.filter(ge=>ge.category==="equipment").reduce((ge,ve)=>ge+(ve.principal||0),0))||0,ct=((rt=t.termDebt)==null?void 0:rt.filter(ge=>ge.category==="realEstate").reduce((ge,ve)=>ge+(ve.principal||0),0))||0,J=((Cn=t.termDebt)==null?void 0:Cn.filter(ge=>ge.category==="vehicle").reduce((ge,ve)=>ge+(ve.principal||0),0))||0,ue=((Et=t.termDebt)==null?void 0:Et.filter(ge=>ge.category==="other"||ge.category==="personal").reduce((ge,ve)=>ge+(ve.principal||0),0))||0,Ve={equipment:Ae.filter(ge=>ge.category==="equipment"),vehicle:Ae.filter(ge=>ge.category==="vehicle"),realEstate:Ae.filter(ge=>ge.category==="realEstate"),other:Ae.filter(ge=>ge.category==="other"||ge.category==="personal")},kt=Ve.equipment.reduce((ge,ve)=>ge+((ve.principalAmount||0)-(ve.principalPayment||0)),0)+Ve.vehicle.reduce((ge,ve)=>ge+((ve.principalAmount||0)-(ve.principalPayment||0)),0),ht=Ve.realEstate.reduce((ge,ve)=>ge+((ve.principalAmount||0)-(ve.principalPayment||0)),0),fe=Ve.other.reduce((ge,ve)=>ge+((ve.principalAmount||0)-(ve.principalPayment||0)),0),Oe=(($l=t.termDebt)==null?void 0:$l.reduce((ge,ve)=>ge+(ve.principal||0),0))||0,Ie=Pe+Oe,Be=Z-Ie,st=ne-Pe,ws=((Fn=(lr=t.intermediateAssets)==null?void 0:lr.machinery)==null?void 0:Fn.reduce((ge,ve)=>ge+(ve.priorValue||0)*(ve.depRate||.1),0))||0,ms=((Pn=(or=t.intermediateAssets)==null?void 0:or.vehicles)==null?void 0:Pn.reduce((ge,ve)=>ge+(ve.priorValue||0)*(ve.depRate||.1),0))||0,Mt=((kn=(ir=t.longTermAssets)==null?void 0:ir.buildings)==null?void 0:kn.reduce((ge,ve)=>ge+(ve.priorValue||0)*(ve.depRate||.1),0))||0,us=ws+ms+Mt;return{cashTotal:a,arTotal:l,commodityTotal:c,cropInvTotal:y,feedInvTotal:w,marketLivestockTotal:$,growingCropTotal:M,prepaidTotal:O,otherCurrentTotal:W,currentAssetsTotal:ne,machineryTotal:ae,vehiclesTotal:B,breedingLivestockTotal:xe,intermediateAssetsTotal:ce,realEstateTotal:me,buildingsTotal:ze,otherLongTermTotal:Q,longTermAssetsTotal:G,totalAssets:Z,apTotal:de,checksTotal:Fe,ccTotal:Ne,currentPortionTermDebt:De,accruedInterest:it,currentLiabilitiesTotal:Pe,equipmentDebtTotal:Dt,realEstateDebtTotal:ct,vehicleDebtTotal:J,otherDebtTotal:ue,termDebtTotal:Oe,intermediateDebtNonCurrent:kt,longTermDebtNonCurrent:ht,otherTermDebtNonCurrent:fe,totalLiabilities:Ie,totalEquity:Be,workingCapital:st,currentRatio:Pe>0?ne/Pe:0,debtToEquity:Be>0?Ie/Be:0,equityPercent:Z>0?Be/Z:0,debtToAssets:Z>0?Ie/Z:0,machineryDepreciation:ws,vehicleDepreciation:ms,buildingDepreciation:Mt,totalDepreciation:us}},ks=({title:t,icon:a,children:l,defaultOpen:c=!1,total:y,color:w="blue"})=>{const[$,M]=je.useState(c),O={blue:"text-blue-600",green:"text-green-600",amber:"text-amber-600",purple:"text-purple-600",red:"text-red-600"};return e.jsxs("div",{className:"border border-gray-200 rounded-lg mb-3 bg-white",children:[e.jsxs("button",{onClick:()=>M(!$),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[$?e.jsx(ti,{className:"w-4 h-4 text-gray-500"}):e.jsx(al,{className:"w-4 h-4 text-gray-500"}),a&&e.jsx(a,{className:`w-5 h-5 ${O[w]}`}),e.jsx("span",{className:"font-semibold text-gray-800",children:t})]}),y!==void 0&&e.jsx("span",{className:"font-mono text-sm font-semibold text-gray-700",children:T(y)})]}),$&&e.jsx("div",{className:"p-3 pt-0 border-t border-gray-100",children:l})]})},lj=({item:t,onUpdate:a,onDelete:l,fields:c})=>e.jsxs("div",{className:"flex items-center gap-2 py-2 border-b border-gray-100 last:border-0",children:[c.map(y=>e.jsx("div",{className:`${y.width||"flex-1"} ${y.type==="currency"?"flex items-center":""}`,children:y.type==="currency"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-500 mr-1 flex-shrink-0",children:"$"}),e.jsx(ie,{value:t[y.key]||0,onChange:w=>a({...t,[y.key]:w}),placeholder:y.placeholder,className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-right font-mono"})]}):e.jsx("input",{type:y.type||"text",value:t[y.key]||"",onChange:w=>{y.type==="number"?a({...t,[y.key]:parseFloat(w.target.value)||0}):a({...t,[y.key]:w.target.value})},placeholder:y.placeholder,className:`w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 ${y.type==="number"?"text-right font-mono":""}`})},y.key)),e.jsx("button",{onClick:l,className:"p-1 text-red-500 hover:bg-red-50 rounded flex-shrink-0",children:e.jsx(ot,{className:"w-4 h-4"})})]}),Wn=({items:t,onUpdate:a,onAdd:l,onDelete:c,title:y,icon:w,color:$="blue"})=>e.jsxs(ks,{title:y,icon:w,color:$,total:(t==null?void 0:t.reduce((M,O)=>M+(O.amount||0),0))||0,children:[t==null?void 0:t.map(M=>e.jsx(lj,{item:M,onUpdate:a,onDelete:()=>c(M.id),fields:[{key:"description",placeholder:"Description",width:"flex-1"},{key:"amount",placeholder:"0.00",type:"currency",width:"w-36"}]},M.id)),e.jsxs("button",{onClick:l,className:"mt-2 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Item"]})]}),oj=({items:t,onUpdate:a,onAdd:l,onDelete:c,title:y,icon:w,color:$="blue"})=>e.jsxs(ks,{title:y,icon:w,color:$,total:(t==null?void 0:t.reduce((M,O)=>M+(O.totalValue||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Quantity"}),e.jsx("th",{className:"pb-2 font-medium w-20 text-center",children:"Unit"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Price/Unit"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Total Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:t==null?void 0:t.map(M=>e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:M.description||"",onChange:O=>a({...M,description:O.target.value}),placeholder:"e.g., Corn, Soybeans",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx(Qe,{value:M.quantity||0,onChange:O=>{const W=M.pricePerUnit||0;a({...M,quantity:O,totalValue:O*W})},decimals:2,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:M.unit||"bu",onChange:O=>a({...M,unit:O.target.value}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-center",children:[e.jsx("option",{value:"bu",children:"bu"}),e.jsx("option",{value:"ton",children:"ton"}),e.jsx("option",{value:"cwt",children:"cwt"}),e.jsx("option",{value:"lb",children:"lb"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:M.pricePerUnit||0,onChange:O=>{const W=M.quantity||0;a({...M,pricePerUnit:O,totalValue:W*O})},placeholder:"0.00",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:M.totalValue||0,onChange:O=>a({...M,totalValue:O}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono bg-gray-50"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>c(M.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},M.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"4",className:"py-2 px-2",children:"Total Crop Inventory"}),e.jsx("td",{className:"py-2 text-right font-mono",children:T((t==null?void 0:t.reduce((M,O)=>M+(O.totalValue||0),0))||0)}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:l,className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Crop"]})]}),ij=({items:t,onUpdate:a,onAdd:l,onDelete:c,title:y,icon:w,color:$="blue"})=>e.jsxs(ks,{title:y,icon:w,color:$,total:(t==null?void 0:t.reduce((M,O)=>M+(O.totalValue||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Quantity"}),e.jsx("th",{className:"pb-2 font-medium w-20 text-center",children:"Unit"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Price/Unit"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Total Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:t==null?void 0:t.map(M=>e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:M.description||"",onChange:O=>a({...M,description:O.target.value}),placeholder:"e.g., Hay, Silage",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx(Qe,{value:M.quantity||0,onChange:O=>{const W=M.pricePerUnit||0;a({...M,quantity:O,totalValue:O*W})},decimals:2,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:M.unit||"ton",onChange:O=>a({...M,unit:O.target.value}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-center",children:[e.jsx("option",{value:"ton",children:"ton"}),e.jsx("option",{value:"bale",children:"bale"}),e.jsx("option",{value:"lb",children:"lb"}),e.jsx("option",{value:"bu",children:"bu"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:M.pricePerUnit||0,onChange:O=>{const W=M.quantity||0;a({...M,pricePerUnit:O,totalValue:W*O})},placeholder:"0.00",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:M.totalValue||0,onChange:O=>a({...M,totalValue:O}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono bg-gray-50"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>c(M.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},M.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"4",className:"py-2 px-2",children:"Total Feed Inventory"}),e.jsx("td",{className:"py-2 text-right font-mono",children:T((t==null?void 0:t.reduce((M,O)=>M+(O.totalValue||0),0))||0)}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:l,className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Feed"]})]}),cj=({items:t,onUpdate:a,onAdd:l,onDelete:c,title:y,icon:w,color:$="blue"})=>e.jsxs(ks,{title:y,icon:w,color:$,total:(t==null?void 0:t.reduce((M,O)=>M+(O.totalValue||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-16 text-right",children:"Head"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Wt/Head"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"$/Cwt"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"$/Head"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Total Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:t==null?void 0:t.map(M=>{const O=(M.weightPerHead||0)*(M.pricePerCwt||0)/100;return e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:M.description||"",onChange:W=>a({...M,description:W.target.value}),placeholder:"e.g., Feeder Steers",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx(Qe,{value:M.headCount||0,onChange:W=>{const ne=M.weightPerHead||0,ae=M.pricePerCwt||0,B=ne*ae/100,xe=W*B;a({...M,headCount:W,valuePerHead:B,totalValue:xe})},decimals:0,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsx(Qe,{value:M.weightPerHead||0,onChange:W=>{const ne=M.headCount||0,ae=M.pricePerCwt||0,B=W*ae/100,xe=ne*B;a({...M,weightPerHead:W,valuePerHead:B,totalValue:xe})},decimals:0,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:M.pricePerCwt||0,onChange:W=>{const ne=M.headCount||0,B=(M.weightPerHead||0)*W/100,xe=ne*B;a({...M,pricePerCwt:W,valuePerHead:B,totalValue:xe})},placeholder:"0.00",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:O?O.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",readOnly:!0,className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right bg-gray-50 font-mono",title:"Auto-calculated: Wt/Head  $/Cwt  100"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:M.totalValue||0,onChange:W=>a({...M,totalValue:W}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono bg-gray-50"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>c(M.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},M.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",children:"Total"}),e.jsx("td",{className:"py-2 text-right font-mono",children:((t==null?void 0:t.reduce((M,O)=>M+(O.headCount||0),0))||0).toLocaleString("en-US")}),e.jsx("td",{colSpan:"3"}),e.jsx("td",{className:"py-2 text-right font-mono",children:T((t==null?void 0:t.reduce((M,O)=>M+(O.totalValue||0),0))||0)}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:l,className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Livestock"]})]}),mc=({items:t,onUpdate:a,onAdd:l,onDelete:c,title:y,icon:w,color:$="amber",purchases:M,sales:O,onAddPurchase:W,onUpdatePurchase:ne,onDeletePurchase:ae,onAddSale:B,onUpdateSale:xe,onDeleteSale:ce,onAddAssetFromPurchase:me})=>{const[ze,Q]=je.useState(!1),G=(M==null?void 0:M.reduce((J,ue)=>J+(ue.totalCost||0),0))||0,Z=(O==null?void 0:O.reduce((J,ue)=>J+(ue.salePrice||0),0))||0,de=(O==null?void 0:O.reduce((J,ue)=>J+(ue.gainLoss||0),0))||0,Fe=W&&B,Ne=(t==null?void 0:t.filter(J=>!J.sold))||[],Ae=(t==null?void 0:t.filter(J=>J.sold))||[],De=Ae.reduce((J,ue)=>J+((ue.salePrice||0)-(ue.priorValue||0)),0),it=J=>t==null?void 0:t.some(ue=>ue.linkedPurchaseId===J),Pe=(J,ue)=>{if(!B||!xe||!ce)return;const Ve=`sale-from-${J.id}`,kt=O==null?void 0:O.find(ht=>ht.id===Ve);if(ue){const ht={id:Ve,description:J.description||"",previousValue:J.priorValue||0,salePrice:J.salePrice||J.currentValue||0,gainLoss:(J.salePrice||J.currentValue||0)-(J.priorValue||0),saleDate:J.saleDate||new Date().toISOString().slice(0,10),linkedAssetId:J.id};xe(ht)}else kt&&ce(Ve)},Dt=(J,ue)=>{const Ve={...J,sold:ue,salePrice:ue&&(J.salePrice||J.currentValue)||0,saleDate:ue?J.saleDate||new Date().toISOString().slice(0,10):""};a(Ve),ue?Pe(Ve,!0):Pe(J,!1)},ct=(J,ue,Ve)=>{const kt={...J,[ue]:Ve};if(a(kt),J.sold&&xe){const ht=`sale-from-${J.id}`,fe=(ue==="salePrice"?Ve:J.salePrice||0)-(J.priorValue||0);xe({id:ht,description:J.description||"",previousValue:J.priorValue||0,salePrice:ue==="salePrice"?Ve:J.salePrice||0,gainLoss:fe,saleDate:ue==="saleDate"?Ve:J.saleDate||"",linkedAssetId:J.id})}};return e.jsxs(ks,{title:y,icon:w,color:$,total:Ne.reduce((J,ue)=>J+(ue.currentValue||0),0),children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium w-10 text-center",children:"Sold"}),e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-24",children:"Enterprise"}),e.jsx("th",{className:"pb-2 font-medium w-12 text-center",children:"Qty"}),e.jsx("th",{className:"pb-2 font-medium w-20 text-center",children:"Condition"}),e.jsx("th",{className:"pb-2 font-medium w-16 text-center",children:"Year"}),e.jsx("th",{className:"pb-2 font-medium w-24",children:"Serial #"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-center",children:"Date Acq"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Value"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Dep%"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Depreciation"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Bal Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:t==null?void 0:t.map(J=>e.jsxs(Jt.Fragment,{children:[e.jsxs("tr",{className:`border-b border-gray-50 ${J.sold?"bg-amber-50":""}`,children:[e.jsx("td",{className:"py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:J.sold||!1,onChange:ue=>Dt(J,ue.target.checked),className:"w-4 h-4 text-amber-600 rounded border-gray-300 focus:ring-amber-500 cursor-pointer"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:J.description||"",onChange:ue=>a({...J,description:ue.target.value}),className:`w-full px-2 py-1 border border-gray-200 rounded text-sm ${J.sold?"bg-amber-50 line-through text-gray-500":""}`})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:J.enterprise||"",onChange:ue=>a({...J,enterprise:ue.target.value}),placeholder:"Enterprise",disabled:J.sold,className:`w-full px-2 py-1 border border-gray-200 rounded text-sm ${J.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:J.quantity||1,onChange:ue=>a({...J,quantity:parseInt(ue.target.value)||1}),disabled:J.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm text-center ${J.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:J.condition||"Good",onChange:ue=>a({...J,condition:ue.target.value}),disabled:J.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm text-center ${J.sold?"bg-gray-100 text-gray-400":""}`,children:[e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Excellent",children:"Excellent"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Poor",children:"Poor"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:J.year||"",onChange:ue=>a({...J,year:parseInt(ue.target.value)||""}),placeholder:"YYYY",disabled:J.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm text-center ${J.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:J.serial||"",onChange:ue=>a({...J,serial:ue.target.value}),placeholder:"Serial #",disabled:J.sold,className:`w-full px-2 py-1 border border-gray-200 rounded text-sm ${J.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"date",value:J.dateAcquired||"",onChange:ue=>a({...J,dateAcquired:ue.target.value}),disabled:J.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm ${J.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:J.priorValue||0,onChange:ue=>{const Ve=J.depRate||.1;a({...J,priorValue:ue,currentValue:ue*(1-Ve)})},disabled:J.sold,className:`w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono ${J.sold?"bg-gray-100 text-gray-400":""}`})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:(J.depRate||.1)*100,onChange:ue=>{const Ve=parseFloat(ue.target.value)/100||.1;a({...J,depRate:Ve,currentValue:(J.priorValue||0)*(1-Ve)})},disabled:J.sold,className:`w-full px-1 py-1 border border-gray-200 rounded text-sm text-right ${J.sold?"bg-gray-100 text-gray-400":""}`})}),e.jsx("td",{className:`py-2 text-right font-mono ${J.sold?"text-gray-400":"text-red-600"}`,children:J.sold?"":`($${((J.priorValue||0)*(J.depRate||.1)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})`}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:J.sold?0:J.currentValue||0,onChange:ue=>a({...J,currentValue:ue}),disabled:J.sold,className:`w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono ${J.sold?"bg-gray-100 text-gray-400":"bg-gray-50"}`})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>c(J.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]}),J.sold&&e.jsx("tr",{className:"bg-amber-100 border-b border-amber-200",children:e.jsx("td",{colSpan:"13",className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Sale Date:"}),e.jsx("input",{type:"date",value:J.saleDate||"",onChange:ue=>ct(J,"saleDate",ue.target.value),className:"px-2 py-1 border border-amber-300 rounded text-sm bg-white"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Sale Price:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-amber-600 mr-1",children:"$"}),e.jsx(ie,{value:J.salePrice||0,onChange:ue=>ct(J,"salePrice",ue),className:"w-32 px-2 py-1 border border-amber-300 rounded text-sm text-right font-mono bg-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Book Value:"}),e.jsxs("span",{className:"font-mono text-sm",children:["$",(J.priorValue||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto bg-white rounded-lg px-4 py-2 border border-amber-300",children:[e.jsx("span",{className:"text-sm font-semibold text-amber-900",children:(J.salePrice||0)>=(J.priorValue||0)?"Gain:":"Loss:"}),e.jsxs("span",{className:`font-mono font-bold text-lg ${(J.salePrice||0)>=(J.priorValue||0)?"text-green-600":"text-red-600"}`,children:[(J.salePrice||0)>=(J.priorValue||0)?"+":"","$",((J.salePrice||0)-(J.priorValue||0)).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx("div",{className:"text-xs text-amber-700 bg-amber-200 px-2 py-1 rounded",children:" Synced to Capital Activity"})]})})})]},J.id))}),e.jsxs("tfoot",{children:[(()=>{const J=[...new Set(Ne.map(ue=>ue.enterprise||"Unassigned"))].sort();return J.length>1||J.length===1&&J[0]!=="Unassigned"?J.map(ue=>{const Ve=Ne.filter(Oe=>(Oe.enterprise||"Unassigned")===ue),kt=Ve.reduce((Oe,Ie)=>Oe+(Ie.priorValue||0),0),ht=Ve.reduce((Oe,Ie)=>Oe+(Ie.priorValue||0)*(Ie.depRate||.1),0),fe=Ve.reduce((Oe,Ie)=>Oe+(Ie.currentValue||0),0);return e.jsxs("tr",{className:"bg-blue-50 text-blue-800 border-b border-blue-100",children:[e.jsx("td",{className:"py-1 px-2"}),e.jsx("td",{colSpan:"6",className:"py-1 px-2 font-medium",children:ue}),e.jsxs("td",{className:"py-1 text-right font-mono text-sm",children:["$",kt.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{}),e.jsxs("td",{className:"py-1 text-right font-mono text-sm text-red-600",children:["($",ht.toLocaleString("en-US",{minimumFractionDigits:2}),")"]}),e.jsxs("td",{className:"py-1 text-right font-mono text-sm",children:["$",fe.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{})]},ue)}):null})(),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2"}),e.jsx("td",{colSpan:"6",className:"py-2 px-2",children:"Active Items Total"}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",Ne.reduce((J,ue)=>J+(ue.priorValue||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{}),e.jsxs("td",{className:"py-2 text-right font-mono text-red-600",children:["($",Ne.reduce((J,ue)=>J+(ue.priorValue||0)*(ue.depRate||.1),0).toLocaleString("en-US",{minimumFractionDigits:2}),")"]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",Ne.reduce((J,ue)=>J+(ue.currentValue||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{})]}),Ae.length>0&&e.jsxs("tr",{className:"font-semibold bg-amber-50 text-amber-800",children:[e.jsx("td",{className:"py-2 px-2"}),e.jsxs("td",{colSpan:"6",className:"py-2 px-2",children:["Sold Items (",Ae.length,")  Total Sales: $",Ae.reduce((J,ue)=>J+(ue.salePrice||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{colSpan:"3",className:"py-2 text-right",children:["Book Value: $",Ae.reduce((J,ue)=>J+(ue.priorValue||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:`py-2 text-right font-mono ${De>=0?"text-green-600":"text-red-600"}`,children:[De>=0?"Gain: +":"Loss: ","$",Math.abs(De).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{})]})]})]})}),e.jsxs("button",{onClick:l,className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Item"]}),Fe&&e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[e.jsxs("button",{onClick:()=>Q(!ze),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:[ze?e.jsx(ti,{className:"w-4 h-4"}):e.jsx(al,{className:"w-4 h-4"}),e.jsx(lt,{className:"w-4 h-4 text-purple-600"}),"Capital Activity",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Purchases: $",G.toLocaleString()," | Sales: $",Z.toLocaleString(),")"]})]}),ze&&e.jsxs("div",{className:"mt-3 space-y-4 pl-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-green-800 mb-2 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"})," Purchases"]}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-green-700 border-b border-green-200",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Cash Paid"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Financed"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Total Cost"}),me&&e.jsx("th",{className:"pb-2 font-medium w-28 text-center",children:"Add to Inventory"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:M==null?void 0:M.map(J=>{const ue=it(J.id);return e.jsxs("tr",{className:`border-b border-green-100 ${ue?"bg-blue-50":""}`,children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ue&&e.jsx("span",{className:"text-xs bg-blue-200 text-blue-800 px-1.5 py-0.5 rounded",title:"Added to inventory above",children:""}),e.jsx("input",{type:"text",value:J.description||"",onChange:Ve=>ne({...J,description:Ve.target.value}),className:`w-full px-2 py-1 border border-green-200 rounded text-sm ${ue?"bg-blue-50":""}`,placeholder:"Item description"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:J.cashPaid||0,onChange:Ve=>{ne({...J,cashPaid:Ve,totalCost:Ve+(J.financedAmount||0)})},className:"w-full px-2 py-1 border border-green-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:J.financedAmount||0,onChange:Ve=>{ne({...J,financedAmount:Ve,totalCost:(J.cashPaid||0)+Ve})},className:"w-full px-2 py-1 border border-green-200 rounded text-sm text-right font-mono"})]})}),e.jsxs("td",{className:"py-2 text-right font-mono font-semibold text-green-700",children:["$",(J.totalCost||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),me&&e.jsx("td",{className:"py-2 text-center",children:ue?e.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:" In Inventory"}):e.jsxs("button",{onClick:()=>me(J),disabled:!J.description||!J.totalCost,className:`text-xs px-2 py-1 rounded flex items-center gap-1 mx-auto ${J.description&&J.totalCost?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,title:!J.description||!J.totalCost?"Enter description and cost first":"Add to asset inventory above",children:[e.jsx(Ke,{className:"w-3 h-3"})," Add "]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>ae(J.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},J.id)})}),(M==null?void 0:M.length)>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-green-100",children:[e.jsx("td",{className:"py-2 px-2",children:"Total Purchases"}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",M.reduce((J,ue)=>J+(ue.cashPaid||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",M.reduce((J,ue)=>J+(ue.financedAmount||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 text-right font-mono text-green-700",children:["$",G.toLocaleString("en-US",{minimumFractionDigits:2})]}),me&&e.jsx("td",{}),e.jsx("td",{})]})})]}),e.jsxs("button",{onClick:W,className:"mt-2 text-sm text-green-600 hover:text-green-800 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Purchase"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-orange-800 mb-2 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"})," Sales / Trades"]}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-orange-700 border-b border-orange-200",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Previous Value"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Sale/Trade Price"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Gain/(Loss)"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:O==null?void 0:O.map(J=>{var kt;const ue=(J.salePrice||0)-(J.previousValue||0),Ve=J.linkedAssetId||((kt=J.id)==null?void 0:kt.startsWith("sale-from-"));return e.jsxs("tr",{className:`border-b border-orange-100 ${Ve?"bg-amber-50":""}`,children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Ve&&e.jsx("span",{className:"text-xs bg-amber-200 text-amber-800 px-1.5 py-0.5 rounded",title:"Linked from asset list",children:""}),e.jsx("input",{type:"text",value:J.description||"",onChange:ht=>xe({...J,description:ht.target.value}),className:`w-full px-2 py-1 border border-orange-200 rounded text-sm ${Ve?"bg-amber-50":""}`,placeholder:"Item description",readOnly:Ve})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:J.previousValue||0,onChange:ht=>{const fe=(J.salePrice||0)-ht;xe({...J,previousValue:ht,gainLoss:fe})},disabled:Ve,className:`w-full px-2 py-1 border border-orange-200 rounded text-sm text-right font-mono ${Ve?"bg-amber-50":""}`})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:J.salePrice||0,onChange:ht=>{const fe=ht-(J.previousValue||0);xe({...J,salePrice:ht,gainLoss:fe})},disabled:Ve,className:`w-full px-2 py-1 border border-orange-200 rounded text-sm text-right font-mono ${Ve?"bg-amber-50":""}`})]})}),e.jsxs("td",{className:`py-2 text-right font-mono font-semibold ${ue>=0?"text-green-600":"text-red-600"}`,children:[ue>=0?"":"(","$",Math.abs(ue).toLocaleString("en-US",{minimumFractionDigits:2}),ue>=0?"":")"]}),e.jsx("td",{className:"py-2",children:Ve?e.jsx("span",{className:"text-xs text-amber-600",title:"Uncheck 'Sold' on asset to remove",children:""}):e.jsx("button",{onClick:()=>ce(J.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},J.id)})}),(O==null?void 0:O.length)>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-orange-100",children:[e.jsx("td",{className:"py-2 px-2",children:"Total Sales"}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",O.reduce((J,ue)=>J+(ue.previousValue||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",Z.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:`py-2 text-right font-mono font-semibold ${de>=0?"text-green-600":"text-red-600"}`,children:[de>=0?"":"(","$",Math.abs(de).toLocaleString("en-US",{minimumFractionDigits:2}),de>=0?"":")"]}),e.jsx("td",{})]})})]}),e.jsxs("button",{onClick:B,className:"mt-2 text-sm text-orange-600 hover:text-orange-800 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Sale/Trade"]})]})]})]})]})};function dj(){var tx,sx,rx,ax,nx,lx,ox,ix,cx,dx,xx,mx,ux,hx,px,gx,bx,yx,fx,jx,Nx,vx,wx,Cx,Fx,Px,kx,Ax,Lx,Dx,Tx,Sx,Ex,$x,Ix,Rx,Mx,Hx,Ox,zx,Vx,Ux,Yx,Wx,_x,qx,Gx,Kx,Jx,Qx,Zx,Xx,Bx,em,tm,sm,rm,am,nm,lm,om,im,cm,dm,xm,mm,um,hm,pm,gm,bm,ym,fm,jm,Nm,vm,wm,Cm,Fm,Pm,km,Am,Lm,Dm,Tm,Sm,Em,$m,Im,Rm,Mm,Hm,Om,zm,Vm,Um,Ym,Wm,_m,qm,Gm,Km,Jm,Qm,Zm,Xm,Bm,e0,t0,s0,r0,a0,n0,l0,o0,i0,c0,d0,x0,m0,u0,h0,p0,g0,b0,y0,f0,j0,N0,v0,w0,C0,F0,P0,k0,A0,L0,D0,T0,S0,E0,$0,I0,R0,M0,H0,O0,z0,V0,U0,Y0,W0,_0,q0,G0,K0,J0,Q0,Z0,X0,B0,eu,tu,su,ru,au,nu,lu,ou,iu,cu,du,xu,mu,uu,hu,pu,gu,bu,yu,fu,ju,Nu,vu,wu,Cu,Fu,Pu;const[t,a]=je.useState(()=>sessionStorage.getItem("farm-app-logged-in")==="true"),[l,c]=je.useState(""),[y,w]=je.useState(""),$="farm2024",M=()=>{l===$?(a(!0),sessionStorage.setItem("farm-app-logged-in","true"),w(""),c("")):w("Incorrect password. Please try again.")},[O,W]=je.useState("landing"),[ne,ae]=je.useState(!1),[B,xe]=je.useState({open:!1,debtId:null,attachments:[]}),[ce,me]=je.useState(()=>{const s=localStorage.getItem("farm-app-clients");return s?JSON.parse(s):aj}),[ze,Q]=je.useState("client-1"),[G,Z]=je.useState(()=>{const s=localStorage.getItem("farm-app-balancesheets");return s?JSON.parse(s):nj}),[de,Fe]=je.useState("bs-2024"),[Ne,Ae]=je.useState("ent-1a"),[De,it]=je.useState("summary"),[Pe,Dt]=je.useState("summary"),[ct,J]=je.useState(null),[ue,Ve]=je.useState("seed"),[kt,ht]=je.useState("projection"),[fe,Oe]=je.useState(()=>{const s=localStorage.getItem("farm-app-cattle-feeding-lots");if(s)try{return JSON.parse(s)}catch(n){console.error("Error loading cattle feeding lots:",n)}return[{id:"lot-1",lotName:"Lot 1 - Spring Steers",cattleType:"Steers",headCount:100,purchaseDate:"2025-03-15",purchaseWeight:550,purchasePrice:2.45,projectedSaleDate:"2025-09-15",projectedSaleWeight:1350,projectedSalePrice:1.95,daysOnFeed:180,avgDailyGain:3.5,deathLossPercent:1.5,feedCostPerDay:3.25,yardageCostPerDay:.5,vetHealthPerHead:35,interestRate:8,freightInPerHead:15,freightOutPerHead:25,commissionPerHead:12,otherCostsPerHead:10}]}),[Ie,Be]=je.useState(()=>{const s=localStorage.getItem("farm-app-cattle-closeouts");if(s)try{return JSON.parse(s)}catch(n){console.error("Error loading cattle closeouts:",n)}return[]}),[st,ws]=je.useState(()=>{const s=localStorage.getItem("farm-app-cattle-feeding-lrp");if(s)try{return JSON.parse(s)}catch(n){console.error("Error loading cattle feeding LRP:",n)}return[]});je.useEffect(()=>{localStorage.setItem("farm-app-clients",JSON.stringify(ce))},[ce]),je.useEffect(()=>{localStorage.setItem("farm-app-balancesheets",JSON.stringify(G))},[G]),je.useEffect(()=>{localStorage.setItem("farm-app-cattle-feeding-lots",JSON.stringify(fe))},[fe]),je.useEffect(()=>{localStorage.setItem("farm-app-cattle-closeouts",JSON.stringify(Ie))},[Ie]),je.useEffect(()=>{localStorage.setItem("farm-app-cattle-feeding-lrp",JSON.stringify(st))},[st]);const ms=()=>{window.confirm("Are you sure you want to logout?")&&(a(!1),sessionStorage.removeItem("farm-app-logged-in"),W("landing"),it("summary"))},[Mt,us]=je.useState("insuranceSummary"),[ns,kl]=je.useState("beginning"),[Ws,Al]=je.useState("sizeScope"),[Da,fn]=je.useState("positions"),[Ta,jn]=je.useState(!1),[Nn,vn]=je.useState(null),[Ll,sa]=je.useState(!1),[ra,Dl]=je.useState(!1),[yi,fi]=je.useState("summary"),[Sa,Tl]=je.useState("yardage"),[Sl,aa]=je.useState(!1),[ls,Cs]=je.useState({name:"",units:1,entities:[{name:"",type:"Operating"}]}),[ee,pt]=je.useState({loanType:"real-estate",name:"",lender:"",acres:160,pricePerAcre:7500,headCount:100,pricePerHead:2500,purchasePrice:15e4,downPaymentPercent:35,downPaymentAmount:0,usePercentDown:!0,interestRate:7.25,loanTerm:25,paymentFrequency:"annual",startDate:new Date().toISOString().slice(0,7),extraPayment:0,showPerUnit:!1}),te=ce.find(s=>s.id===ze),At=G[ze]||[],nr=Ne==="consolidated"?At:At.filter(s=>s.entityId===Ne),wn=[...new Set(At.map(s=>new Date(s.date).getFullYear()))].sort((s,n)=>n-s),[we,We]=je.useState(wn[0]||new Date().getFullYear()),[Ea,_t]=je.useState({selectedDebts:[],newLoanTerms:{interestRate:7,termYears:20,amortYears:25,closingCosts:0,cashOut:0},showResults:!1}),[Re,mt]=je.useState(()=>{try{const s=localStorage.getItem("transactionTrackerData");return s?JSON.parse(s):[]}catch{return[]}}),[Ce,Tt]=je.useState({search:"",date:"",draftId:"",vendor:"",itemization:"",bankName:"",fixedVariable:"",enterprise:"",incomeExpenseType:"",scheduleFCategory:"",operationYear:"",taxYear:"",showUnmapped:!1,reconciledStatus:"all"}),[na,El]=je.useState({column:"date",direction:"desc"}),[la,oa]=je.useState(null),[rt,Cn]=je.useState([]),[Et,$l]=je.useState("pl"),[lr,Fn]=je.useState(String(new Date().getFullYear())),[or,Pn]=je.useState(String(new Date().getFullYear())),[ir,kn]=je.useState(String(new Date().getFullYear())),[ge,ve]=je.useState(String(new Date().getFullYear()-1)),[lb,ob]=je.useState({}),[ib,cb]=je.useState({}),[db,Il]=je.useState(!1),[_e,Xt]=je.useState({date:"",draftId:"",vendor:"",debit:"",credit:"",amount:"",bankName:"",operationYear:new Date().getFullYear().toString(),taxYear:new Date().getFullYear().toString()}),[Rl,xb]=je.useState(()=>{try{const s=localStorage.getItem("importPresets");return s?JSON.parse(s):{}}catch{return{}}});je.useEffect(()=>{try{localStorage.setItem("importPresets",JSON.stringify(Rl))}catch(s){console.warn("Failed to save import presets:",s)}},[Rl]);const[$a,An]=je.useState([]),[Pr,Ln]=je.useState([]),[ji,ia]=je.useState(!1),[mb,Ml]=je.useState(!1),[cr,Hl]=je.useState(""),[hs,Ol]=je.useState(""),[ca,Ni]=je.useState(()=>{try{const s=localStorage.getItem("itemizationMappings");return s?JSON.parse(s):[]}catch{return[]}}),[ub,vi]=je.useState(!1),[da,_s]=je.useState({keyword:"",fixedVariable:"",enterprise:"",incomeExpenseType:""}),[Dn,Tn]=je.useState(null),[qs,wi]=je.useState("all"),[zl,Ia]=je.useState(()=>{try{const s=localStorage.getItem("bankReconciliationData");return s?JSON.parse(s):{}}catch{return{}}}),[Ci,hb]=je.useState(!0);je.useEffect(()=>{try{localStorage.setItem("bankReconciliationData",JSON.stringify(zl))}catch(s){console.warn("Failed to save bank reconciliation to localStorage:",s)}},[zl]),je.useEffect(()=>{try{localStorage.setItem("transactionTrackerData",JSON.stringify(Re))}catch(s){console.warn("Failed to save transactions to localStorage:",s)}},[Re]),je.useEffect(()=>{try{localStorage.setItem("itemizationMappings",JSON.stringify(ca))}catch(s){console.warn("Failed to save mappings to localStorage:",s)}},[ca]);const Sn=s=>{if(!s)return{fixedVariable:"",enterprise:"",incomeExpenseType:"",mapped:!1};const n=s.toLowerCase().trim();let o=null,i=0;for(const h of ca){const b=h.keyword.toLowerCase().trim();n.includes(b)&&b.length>i&&(o=h,i=b.length)}return o?{fixedVariable:o.fixedVariable||"",enterprise:o.enterprise||"",incomeExpenseType:o.incomeExpenseType||"",mapped:!0}:{fixedVariable:"",enterprise:"",incomeExpenseType:"",mapped:!1}},kr=()=>Re.filter(s=>s.itemization?!Sn(s.itemization).mapped:!1),xa=s=>{if(!s)return"";const n=s.toLowerCase();return n.includes("crop sale")||n.includes("grain sale")||n.includes("corn sale")||n.includes("soybean sale")||n.includes("wheat sale")?"Line 1a - Crop Sales":n.includes("ccc loan")||n.includes("commodity credit")?"Line 5a - CCC Loans":n.includes("cattle sale")||n.includes("livestock sale")||n.includes("calf sale")||n.includes("cow sale")||n.includes("bull sale")||n.includes("hog sale")||n.includes("pig sale")?"Line 4a - Livestock Sales":n.includes("coop")||n.includes("cooperative")||n.includes("patronage")||n.includes("dividend")?"Line 3a - Cooperative Distributions":n.includes("arc")||n.includes("plc")||n.includes("cfap")||n.includes("mfp")||n.includes("government payment")||n.includes("usda payment")||n.includes("fsa payment")||n.includes("ag program")||n.includes("program payment")?"Line 4a - Agricultural Program Payments":n.includes("crop insurance")||n.includes("rma")||n.includes("indemnity")?"Line 7 - Crop Insurance":n.includes("custom work income")||n.includes("custom hire income")||n.includes("custom farming income")?"Line 8 - Custom Hire":n.includes("asset purchase")||n.includes("equipment purchase")||n.includes("machinery purchase")||n.includes("vehicle purchase")||n.includes("truck purchase")||n.includes("tractor purchase")||n.includes("implement purchase")||n.includes("capital purchase")||n.includes("depreciation")?"Line 16 - Depreciation":n.includes("truck")||n.includes("pickup")||n.includes("vehicle")||n.includes("car expense")||n.includes("mileage")?"Line 12 - Car & Truck":n.includes("chemical")||n.includes("herbicide")||n.includes("pesticide")||n.includes("fungicide")||n.includes("roundup")||n.includes("liberty")||n.includes("atrazine")?"Line 13 - Chemicals":n.includes("conservation")||n.includes("crp")||n.includes("eqip")||n.includes("csp")?"Line 14 - Conservation":n.includes("labor")||n.includes("wage")||n.includes("salary")||n.includes("payroll")||n.includes("employee")?"Line 24 - Labor Hired":n.includes("custom")||n.includes("hire")||n.includes("combining")||n.includes("spraying")||n.includes("hauling")?"Line 15 - Custom Hire":n.includes("feed")||n.includes("mineral")||n.includes("supplement")||n.includes("hay")||n.includes("silage")||n.includes("corn feed")||n.includes("ddgs")||n.includes("distiller")?"Line 18 - Feed":n.includes("fertilizer")||n.includes("anhydrous")||n.includes("urea")||n.includes("potash")||n.includes("lime")||n.includes("nitrogen")||n.includes("phosphate")||n.includes("28%")||n.includes("dap")||n.includes("map")?"Line 19 - Fertilizer":n.includes("freight")||n.includes("shipping")||n.includes("trucking")?"Line 20 - Freight":n.includes("fuel")||n.includes("diesel")||n.includes("gas")||n.includes("propane")||n.includes("lp")?"Line 21 - Fuel":n.includes("insurance")||n.includes("premium")||n.includes("liability")||n.includes("crop ins")?"Line 22 - Insurance":n.includes("interest")||n.includes("loan payment")||n.includes("note payment")||n.includes("finance charge")?"Line 23 - Interest":n.includes("rent")||n.includes("lease")||n.includes("cash rent")||n.includes("land rent")?"Line 25 - Rent/Lease":n.includes("repair")||n.includes("maintenance")||n.includes("parts")||n.includes("service")||n.includes("fix")?"Line 26 - Repairs":n.includes("seed")||n.includes("plant")||n.includes("trait")?"Line 27 - Seeds/Plants":n.includes("storage")||n.includes("drying")||n.includes("bin")||n.includes("elevator")?"Line 28 - Storage":n.includes("supplies")||n.includes("office")||n.includes("misc")||n.includes("shop")?"Line 29 - Supplies":n.includes("tax")||n.includes("property tax")||n.includes("real estate tax")?"Line 30 - Taxes":n.includes("utilit")||n.includes("electric")||n.includes("water")||n.includes("phone")||n.includes("internet")?"Line 31 - Utilities":n.includes("vet")||n.includes("veterinar")||n.includes("breeding")||n.includes("semen")||n.includes("ai ")||n.includes("bull stud")||n.includes("preg check")||n.includes("vaccine")||n.includes("medicine")||n.includes("animal health")?"Line 32 - Vet/Breeding":"Line 34 - Other"},Vl=(s,n)=>{const o=s.filter(b=>new Date(b.date).getFullYear()===n);if(o.length===0)return null;if(o.length===1)return o[0];const i=(b,x="amount")=>{const f=[];return o.forEach(d=>{(b.split(".").reduce((j,g)=>j==null?void 0:j[g],d)||[]).forEach(j=>{f.push({...j,id:`${j.id}-${d.entityId}`})})}),f},h=b=>o.reduce((x,f)=>{const d=b.split(".").reduce((u,j)=>u==null?void 0:u[j],f);return x+(typeof d=="number"?d:0)},0);return{id:"consolidated",clientId:ze,entityId:"consolidated",date:o[0].date,isConsolidated:!0,entitiesIncluded:o.map(b=>b.entityId),currentAssets:{cash:i("currentAssets.cash"),accountsReceivable:i("currentAssets.accountsReceivable"),commodityAccounts:i("currentAssets.commodityAccounts"),cropInventory:i("currentAssets.cropInventory","totalValue"),feedInventory:i("currentAssets.feedInventory","totalValue"),marketLivestock:i("currentAssets.marketLivestock","totalValue"),growingCrop:i("currentAssets.growingCrop","totalValue"),prepaidExpenses:i("currentAssets.prepaidExpenses"),otherCurrentAssets:i("currentAssets.otherCurrentAssets")},intermediateAssets:{machinery:i("intermediateAssets.machinery","currentValue"),vehicles:i("intermediateAssets.vehicles","currentValue"),breedingLivestock:i("intermediateAssets.breedingLivestock","totalValue")},longTermAssets:{realEstate:i("longTermAssets.realEstate","marketValue"),buildings:i("longTermAssets.buildings","currentValue"),otherLongTerm:i("longTermAssets.otherLongTerm","currentValue")},currentLiabilities:{accountsPayable:i("currentLiabilities.accountsPayable"),outstandingChecks:i("currentLiabilities.outstandingChecks"),creditCardDebt:i("currentLiabilities.creditCardDebt"),operatingLine:h("currentLiabilities.operatingLine"),currentPortionTermDebt:h("currentLiabilities.currentPortionTermDebt"),accruedInterest:h("currentLiabilities.accruedInterest"),otherCurrentLiabilities:i("currentLiabilities.otherCurrentLiabilities")},debtService:o.flatMap(b=>(b.debtService||[]).map(x=>({...x,id:`${x.id}-${b.entityId}`}))),termDebt:o.flatMap(b=>(b.termDebt||[]).map(x=>({...x,id:`${x.id}-${b.entityId}`}))),capitalActivity:{machineryPurchases:o.flatMap(b=>{var x;return((x=b.capitalActivity)==null?void 0:x.machineryPurchases)||[]}),machinerySales:o.flatMap(b=>{var x;return((x=b.capitalActivity)==null?void 0:x.machinerySales)||[]}),vehiclePurchases:o.flatMap(b=>{var x;return((x=b.capitalActivity)==null?void 0:x.vehiclePurchases)||[]}),vehicleSales:o.flatMap(b=>{var x;return((x=b.capitalActivity)==null?void 0:x.vehicleSales)||[]}),buildingPurchases:o.flatMap(b=>{var x;return((x=b.capitalActivity)==null?void 0:x.buildingPurchases)||[]}),buildingSales:o.flatMap(b=>{var x;return((x=b.capitalActivity)==null?void 0:x.buildingSales)||[]})}}},r=Ne==="consolidated"?Vl(At,we):nr.find(s=>s.id===de),Nt=Ne==="consolidated",Me=dt(r),ex=()=>{var h,b,x,f,d,u;if(Ne==="consolidated"){alert("Please select a specific entity to create a new balance sheet");return}const s=new Date().toISOString().split("T")[0],n=nr.length>0?nr.sort((j,g)=>new Date(g.date)-new Date(j.date))[0]:null,o=j=>j?j.map(g=>({...g,id:`${g.id.split("-")[0]}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,priorValue:g.currentValue,currentValue:g.currentValue*(1-(g.depRate||.1))})):[],i={id:`bs-${Date.now()}`,clientId:ze,entityId:Ne,date:s,createdAt:new Date().toISOString(),adjustment:0,currentAssets:n?JSON.parse(JSON.stringify(n.currentAssets)):{cash:[],accountsReceivable:[],commodityAccounts:[],cropInventory:[],feedInventory:[],marketLivestock:[],growingCrop:[],prepaidExpenses:[],otherCurrentAssets:[]},intermediateAssets:{machinery:n?o((h=n.intermediateAssets)==null?void 0:h.machinery):[],vehicles:n?o((b=n.intermediateAssets)==null?void 0:b.vehicles):[],breedingLivestock:n?JSON.parse(JSON.stringify(((x=n.intermediateAssets)==null?void 0:x.breedingLivestock)||[])):[]},longTermAssets:{realEstate:n?JSON.parse(JSON.stringify(((f=n.longTermAssets)==null?void 0:f.realEstate)||[])):[],buildings:n?o((d=n.longTermAssets)==null?void 0:d.buildings):[],otherLongTerm:n?JSON.parse(JSON.stringify(((u=n.longTermAssets)==null?void 0:u.otherLongTerm)||[])):[]},currentLiabilities:n?JSON.parse(JSON.stringify(n.currentLiabilities)):{accountsPayable:[],outstandingChecks:[],creditCardDebt:[],operatingLine:0,currentPortionTermDebt:0,accruedInterest:0,otherCurrentLiabilities:[]},debtService:n?JSON.parse(JSON.stringify(n.debtService||[])):[],termDebt:n?JSON.parse(JSON.stringify(n.termDebt)):[]};Z(j=>({...j,[ze]:[...j[ze]||[],i]})),Fe(i.id)},z=s=>{if(Nt){console.warn("Cannot update consolidated view");return}Z(n=>({...n,[ze]:n[ze].map(o=>o.id===de?{...o,...s}:o)}))},$s=(s,n)=>{const o=r.currentAssets[s].map(i=>i.id===n.id?n:i);z({currentAssets:{...r.currentAssets,[s]:o}})},Ar=s=>{let n;s==="cropInventory"?n={id:`${s}-${Date.now()}`,description:"",quantity:0,unit:"bu",pricePerUnit:0,totalValue:0}:s==="feedInventory"?n={id:`${s}-${Date.now()}`,description:"",quantity:0,unit:"ton",pricePerUnit:0,totalValue:0}:s==="marketLivestock"?n={id:`${s}-${Date.now()}`,description:"",headCount:0,weightPerHead:0,pricePerCwt:0,totalValue:0}:n={id:`${s}-${Date.now()}`,description:"",amount:0},z({currentAssets:{...r.currentAssets,[s]:[...r.currentAssets[s]||[],n]}})},dr=(s,n)=>{z({currentAssets:{...r.currentAssets,[s]:r.currentAssets[s].filter(o=>o.id!==n)}})},Gs=(s,n)=>{const o=r.intermediateAssets[s].map(i=>i.id===n.id?n:i);z({intermediateAssets:{...r.intermediateAssets,[s]:o}})},Fi=s=>{let n;s==="breedingLivestock"?n={id:`bl-${Date.now()}`,type:"Cows",description:"",age:"",quantity:0,valuePerHead:0,lastValue:0,totalValue:0,boughtSold:"",yearBoughtSold:""}:n={id:`${s}-${Date.now()}`,description:"",quantity:1,condition:"Good",year:new Date().getFullYear(),serial:"",dateAcquired:"",priorValue:0,currentValue:0,depRate:.1},z({intermediateAssets:{...r.intermediateAssets,[s]:[...r.intermediateAssets[s]||[],n]}})},Pi=(s,n)=>{z({intermediateAssets:{...r.intermediateAssets,[s]:r.intermediateAssets[s].filter(o=>o.id!==n)}})},qt=(s,n)=>{const o=r.longTermAssets[s].map(i=>i.id===n.id?n:i);z({longTermAssets:{...r.longTermAssets,[s]:o}})},ki=s=>{let n;s==="realEstate"?n={id:`re-${Date.now()}`,pid:"",description:"",county:"",totalAcres:0,irrAcres:0,dryAcres:0,otherAcres:0,taxValue:0,annualTaxes:0,appraisedDate:"",appraisedPerAcre:0,marketValue:0,value:0}:s==="buildings"?n={id:`b-${Date.now()}`,description:"",quantity:1,condition:"Good",year:new Date().getFullYear(),dateAcquired:"",priorValue:0,currentValue:0,depRate:.04}:n={id:`ol-${Date.now()}`,description:"",priorValue:0,currentValue:0},z({longTermAssets:{...r.longTermAssets,[s]:[...r.longTermAssets[s]||[],n]}})},Ai=(s,n)=>{z({longTermAssets:{...r.longTermAssets,[s]:r.longTermAssets[s].filter(o=>o.id!==n)}})},Ra=(s,n)=>{const o=r.capitalActivity||{},i=o[s]||[],h=i.findIndex(x=>x.id===n.id);let b;h>=0?b=i.map(x=>x.id===n.id?n:x):b=[...i,n],z({capitalActivity:{...o,[s]:b}})},Li=s=>{const n=`${s}Purchases`,o=r.capitalActivity||{},i={id:`${s.charAt(0)}p-${Date.now()}`,description:"",cashPaid:0,financedAmount:0,totalCost:0};z({capitalActivity:{...o,[n]:[...o[n]||[],i]}})},Di=(s,n)=>{const o=`${s}Purchases`,i=r.capitalActivity||{};z({capitalActivity:{...i,[o]:(i[o]||[]).filter(h=>h.id!==n)}})},Ti=s=>{const n=`${s}Sales`,o=r.capitalActivity||{},i={id:`${s.charAt(0)}s-${Date.now()}`,description:"",previousValue:0,salePrice:0,gainLoss:0};z({capitalActivity:{...o,[n]:[...o[n]||[],i]}})},Si=(s,n)=>{const o=`${s}Sales`,i=r.capitalActivity||{};z({capitalActivity:{...i,[o]:(i[o]||[]).filter(h=>h.id!==n)}})},Ei=(s,n)=>{var d;const o=new Date().getFullYear(),i=s==="machinery"?.1:s==="vehicle"?.15:s==="building"?.05:.1,h={id:`asset-from-${n.id}`,description:n.description||"",quantity:1,condition:"New",year:o,serial:"",dateAcquired:new Date().toISOString().slice(0,10),priorValue:n.totalCost||0,depRate:i,currentValue:(n.totalCost||0)*(1-i),linkedPurchaseId:n.id},b=s==="machinery"?"machinery":s==="vehicle"?"vehicles":s==="building"?"buildings":"machinery",x=s==="building"?"longTermAssets":"intermediateAssets",f=((d=r[x])==null?void 0:d[b])||[];z({[x]:{...r[x],[b]:[...f,h]}})},pb=()=>{ae(!0)},gb=()=>{var h,b,x,f,d,u,j,g,m,p,C,N,k,P,A,R,L,D,F;if(!r)return null;const s=dt(r),n=Nt?`${we} Consolidated`:pa(r.date),o=Nt?`${te==null?void 0:te.name} (Consolidated)`:((b=(h=te==null?void 0:te.entities)==null?void 0:h.find(v=>v.id===Ne))==null?void 0:b.name)||(te==null?void 0:te.name),i=(te==null?void 0:te.units)||1;return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 overflow-auto print:relative print:bg-white print:overflow-visible",children:e.jsxs("div",{className:"min-h-screen bg-white max-w-[1100px] mx-auto my-4 shadow-2xl print:shadow-none print:my-0 print:max-w-none",children:[e.jsxs("div",{className:"print:hidden sticky top-0 bg-gray-800 text-white p-4 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("span",{className:"font-semibold",children:"Print Preview"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{var Y;const v=document.querySelector("[data-print-content]");if(!v)return;const S=`<!DOCTYPE html>
<html>
<head>
  <title>Balance Sheet Report - ${te==null?void 0:te.name}</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; font-size: 11px; line-height: 1.4; padding: 20px; }
    .font-mono { font-family: monospace; }
    .font-bold, .font-semibold { font-weight: bold; }
    .text-right { text-align: right; }
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-xs { font-size: 10px; }
    .text-sm { font-size: 12px; }
    .text-lg { font-size: 16px; }
    .text-xl { font-size: 18px; }
    .text-green-600, .text-green-700 { color: #16a34a; }
    .text-red-600, .text-red-700, .text-red-800 { color: #dc2626; }
    .text-blue-700, .text-blue-800 { color: #1d4ed8; }
    .text-amber-700, .text-amber-800 { color: #d97706; }
    .text-purple-700, .text-purple-800 { color: #7c3aed; }
    .text-gray-500, .text-gray-600, .text-gray-700, .text-gray-800 { color: #4b5563; }
    .bg-green-700 { background-color: #15803d; }
    .bg-green-50 { background-color: #f0fdf4; }
    .bg-red-50 { background-color: #fef2f2; }
    .bg-blue-50 { background-color: #eff6ff; }
    .bg-amber-50 { background-color: #fffbeb; }
    .bg-purple-50 { background-color: #faf5ff; }
    .bg-gray-50, .bg-gray-100 { background-color: #f3f4f6; }
    .border-b { border-bottom: 1px solid #e5e7eb; }
    .border-b-2 { border-bottom: 2px solid; }
    .border-t { border-top: 1px solid #e5e7eb; }
    .border-t-2 { border-top: 2px solid; }
    .border-green-600 { border-color: #16a34a; }
    .border-red-600 { border-color: #dc2626; }
    .border-blue-600 { border-color: #1d4ed8; }
    .border-amber-600 { border-color: #d97706; }
    .border-purple-600 { border-color: #7c3aed; }
    .rounded { border-radius: 4px; }
    .rounded-lg { border-radius: 8px; }
    .p-2 { padding: 8px; }
    .p-3 { padding: 12px; }
    .p-4 { padding: 16px; }
    .p-6 { padding: 24px; }
    .px-2 { padding-left: 8px; padding-right: 8px; }
    .py-1 { padding-top: 4px; padding-bottom: 4px; }
    .pt-1, .pt-2, .pt-4 { padding-top: 8px; }
    .pb-1, .pb-2 { padding-bottom: 4px; }
    .mb-1 { margin-bottom: 4px; }
    .mb-2 { margin-bottom: 8px; }
    .mb-3 { margin-bottom: 12px; }
    .mb-4 { margin-bottom: 16px; }
    .mt-1, .mt-2 { margin-top: 8px; }
    .mt-4 { margin-top: 16px; }
    .mt-8 { margin-top: 32px; }
    .pl-2 { padding-left: 8px; }
    .space-y-0\\.5 > * + * { margin-top: 2px; }
    .space-y-1 > * + * { margin-top: 4px; }
    .grid { display: grid; }
    .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
    .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
    .gap-2 { gap: 8px; }
    .gap-4 { gap: 16px; }
    .flex { display: flex; }
    .justify-between { justify-content: space-between; }
    .items-center { align-items: center; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 4px 8px; }
    .break-before-page { page-break-before: always; }
    @media print {
      .break-before-page { page-break-before: always; }
      body { padding: 10px; }
    }
  </style>
</head>
<body>
${v.innerHTML}
</body>
</html>`,E=new Blob([S],{type:"text/html"}),I=URL.createObjectURL(E),H=document.createElement("a");H.href=I,H.download=`Balance_Sheet_${(Y=te==null?void 0:te.name)==null?void 0:Y.replace(/[^a-z0-9]/gi,"_")}_${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(I)},className:"px-4 py-2 bg-green-600 rounded hover:bg-green-700 flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4"}),"Download Report"]}),e.jsx("button",{onClick:()=>ae(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-700",children:"Close"})]})]}),e.jsxs("div",{className:"mt-2 text-yellow-300 text-sm",children:[' Click "Download Report" to save as HTML file, then open it in your browser and use ',e.jsx("kbd",{className:"px-1 py-0.5 bg-gray-700 rounded text-xs",children:"Ctrl+P"})," (or ",e.jsx("kbd",{className:"px-1 py-0.5 bg-gray-700 rounded text-xs",children:"+P"}),") to print or save as PDF"]})]}),e.jsxs("div",{className:"p-6 print:p-4","data-print-content":"true",children:[e.jsx("div",{className:"bg-green-700 text-white p-4 -mx-6 -mt-6 mb-4 print:-mx-4 print:-mt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"1P1 Farm Financial"}),e.jsx("p",{className:"text-green-200 text-sm",children:"Balance Sheet Report"})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("div",{className:"font-semibold",children:te==null?void 0:te.name}),e.jsx("div",{className:"text-green-200",children:o}),e.jsxs("div",{className:"text-green-200",children:["As of: ",n]})]})]})}),e.jsxs("div",{className:"space-y-3 text-xs",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 rounded p-3 border border-blue-200",children:[e.jsx("div",{className:"font-bold text-blue-800 mb-2 text-[11px]",children:"CURRENT ASSETS"}),e.jsxs("div",{className:"space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cash"}),e.jsx("span",{className:"font-mono",children:T(s.cashTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accounts Receivable"}),e.jsx("span",{className:"font-mono",children:T(s.arTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Commodity Accounts"}),e.jsx("span",{className:"font-mono",children:T(s.commodityTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Crop Inventory"}),e.jsx("span",{className:"font-mono",children:T(s.cropInvTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Feed Inventory"}),e.jsx("span",{className:"font-mono",children:T(s.feedInvTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Market Livestock"}),e.jsx("span",{className:"font-mono",children:T(s.marketLivestockTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Growing Crop"}),e.jsx("span",{className:"font-mono",children:T(s.growingCropTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Prepaid Expenses"}),e.jsx("span",{className:"font-mono",children:T(s.prepaidTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Current"}),e.jsx("span",{className:"font-mono",children:T(s.otherCurrentTotal)})]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-blue-800 border-t-2 border-blue-300 mt-2 pt-1",children:[e.jsx("span",{children:"Total Current Assets"}),e.jsx("span",{className:"font-mono",children:T(s.currentAssetsTotal)})]})]}),e.jsxs("div",{className:"bg-red-50 rounded p-3 border border-red-200",children:[e.jsx("div",{className:"font-bold text-red-800 mb-2 text-[11px]",children:"CURRENT LIABILITIES"}),e.jsxs("div",{className:"space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accounts Payable"}),e.jsx("span",{className:"font-mono",children:T(s.apTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Outstanding Checks"}),e.jsx("span",{className:"font-mono",children:T(s.checksTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Credit Card Debt"}),e.jsx("span",{className:"font-mono",children:T(s.ccTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Operating Line"}),e.jsx("span",{className:"font-mono",children:T(((x=r.currentLiabilities)==null?void 0:x.operatingLine)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Current Portion Term Debt"}),e.jsx("span",{className:"font-mono",children:T(s.currentPortionTermDebt||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accrued Interest"}),e.jsx("span",{className:"font-mono",children:T(s.accruedInterest||0)})]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-red-800 border-t-2 border-red-300 mt-2 pt-1",children:[e.jsx("span",{children:"Total Current Liabilities"}),e.jsx("span",{className:"font-mono",children:T(s.currentLiabilitiesTotal)})]})]})]}),e.jsx("div",{className:"bg-gray-100 rounded px-3 py-2 border border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[e.jsx("span",{className:"text-gray-700",children:"Working Capital (Current Assets  Current Liabilities)"}),e.jsx("span",{className:`font-mono text-sm ${s.workingCapital>=0?"text-green-600":"text-red-600"}`,children:T(s.workingCapital)})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-b from-amber-50 to-purple-50 rounded p-3 border border-amber-200",children:[e.jsx("div",{className:"font-bold text-gray-800 mb-2 text-[11px]",children:"NON-CURRENT ASSETS"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-[10px] font-medium text-amber-700 mb-1",children:"Intermediate (1-10 yrs)"}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Machinery & Equipment"}),e.jsx("span",{className:"font-mono",children:T(s.machineryTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vehicles"}),e.jsx("span",{className:"font-mono",children:T(s.vehiclesTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Breeding Livestock"}),e.jsx("span",{className:"font-mono",children:T(s.breedingLivestockTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-amber-800 pl-2 mt-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:T(s.intermediateAssetsTotal)})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-medium text-purple-700 mb-1",children:"Long-Term (10+ yrs)"}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Estate"}),e.jsx("span",{className:"font-mono",children:T(s.realEstateTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Buildings & Improvements"}),e.jsx("span",{className:"font-mono",children:T(s.buildingsTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Long-Term"}),e.jsx("span",{className:"font-mono",children:T(s.otherLongTermTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-purple-800 pl-2 mt-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:T(s.longTermAssetsTotal)})]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-gray-800 border-t-2 border-gray-400 mt-2 pt-1",children:[e.jsx("span",{children:"Total Non-Current Assets"}),e.jsx("span",{className:"font-mono",children:T(s.intermediateAssetsTotal+s.longTermAssetsTotal)})]})]}),e.jsxs("div",{className:"bg-orange-50 rounded p-3 border border-orange-200",children:[e.jsx("div",{className:"font-bold text-orange-800 mb-2 text-[11px]",children:"NON-CURRENT LIABILITIES"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-[10px] font-medium text-amber-700 mb-1",children:"Intermediate (1-10 yrs)"}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Equipment Debt"}),e.jsx("span",{className:"font-mono",children:T(s.intermediateDebtNonCurrent>0?s.intermediateDebtNonCurrent*(s.equipmentDebtTotal/(s.equipmentDebtTotal+s.vehicleDebtTotal||1)):s.equipmentDebtTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vehicle Debt"}),e.jsx("span",{className:"font-mono",children:T(s.intermediateDebtNonCurrent>0?s.intermediateDebtNonCurrent*(s.vehicleDebtTotal/(s.equipmentDebtTotal+s.vehicleDebtTotal||1)):s.vehicleDebtTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-amber-800 pl-2 mt-1",children:[e.jsx("span",{children:"Subtotal Intermediate"}),e.jsx("span",{className:"font-mono",children:T(s.intermediateDebtNonCurrent||s.equipmentDebtTotal+s.vehicleDebtTotal)})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-medium text-purple-700 mb-1",children:"Long-Term (10+ yrs)"}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Estate Debt"}),e.jsx("span",{className:"font-mono",children:T(s.longTermDebtNonCurrent||s.realEstateDebtTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Term Debt"}),e.jsx("span",{className:"font-mono",children:T(s.otherTermDebtNonCurrent||s.otherDebtTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-purple-800 pl-2 mt-1",children:[e.jsx("span",{children:"Subtotal Long-Term"}),e.jsx("span",{className:"font-mono",children:T((s.longTermDebtNonCurrent||s.realEstateDebtTotal)+(s.otherTermDebtNonCurrent||s.otherDebtTotal))})]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-orange-800 border-t-2 border-orange-300 mt-2 pt-1",children:[e.jsx("span",{children:"Total Non-Current Liabilities"}),e.jsx("span",{className:"font-mono",children:T(s.termDebtTotal)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"bg-green-100 rounded p-3 border-2 border-green-500",children:e.jsxs("div",{className:"flex justify-between items-center font-bold text-sm text-green-800",children:[e.jsx("span",{children:"TOTAL ASSETS"}),e.jsx("span",{className:"font-mono",children:T(s.totalAssets)})]})}),e.jsx("div",{className:"bg-red-100 rounded p-3 border-2 border-red-400",children:e.jsxs("div",{className:"flex justify-between items-center font-bold text-sm text-red-800",children:[e.jsx("span",{children:"TOTAL LIABILITIES"}),e.jsx("span",{className:"font-mono",children:T(s.totalLiabilities)})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded p-4 border-2 border-blue-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg text-blue-800",children:"TOTAL EQUITY"}),e.jsx("div",{className:"text-[10px] text-blue-600",children:"(Total Assets  Total Liabilities)"})]}),e.jsx("span",{className:`font-mono text-xl font-bold ${s.totalEquity>=0?"text-blue-800":"text-red-600"}`,children:T(s.totalEquity)})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-2",children:[e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded border border-blue-200",children:[e.jsx("div",{className:"text-lg font-bold text-blue-800",children:s.currentRatio.toFixed(2)}),e.jsx("div",{className:"text-[9px] text-blue-600",children:"Current Ratio"})]}),e.jsxs("div",{className:"text-center p-2 bg-amber-50 rounded border border-amber-200",children:[e.jsx("div",{className:"text-lg font-bold text-amber-800",children:s.debtToEquity.toFixed(2)}),e.jsx("div",{className:"text-[9px] text-amber-600",children:"Debt to Equity"})]}),e.jsxs("div",{className:"text-center p-2 bg-green-50 rounded border border-green-200",children:[e.jsxs("div",{className:"text-lg font-bold text-green-700",children:[(s.equityPercent*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-[9px] text-green-600",children:"Owner's Equity %"})]}),e.jsxs("div",{className:"text-center p-2 bg-red-50 rounded border border-red-200",children:[e.jsxs("div",{className:"text-lg font-bold text-red-700",children:[(s.debtToAssets*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-[9px] text-red-600",children:"Debt to Assets"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 bg-gray-50 rounded p-2 border",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-[9px] text-gray-500 mb-0.5",children:["Per Unit (",i.toLocaleString()," units)"]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`font-mono text-sm font-semibold ${s.workingCapital>=0?"text-green-600":"text-red-600"}`,children:T(s.workingCapital/i)}),e.jsx("div",{className:"text-[9px] text-gray-500",children:"Working Capital"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-mono text-sm font-semibold text-gray-700",children:T(s.totalAssets/i)}),e.jsx("div",{className:"text-[9px] text-gray-500",children:"Assets/Unit"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-mono text-sm font-semibold text-blue-700",children:T(s.totalEquity/i)}),e.jsx("div",{className:"text-[9px] text-gray-500",children:"Equity/Unit"})]})]})]}),e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsx("h2",{className:"text-lg font-bold text-blue-700 border-b-2 border-blue-600 pb-1 mb-3",children:"CURRENT ASSETS SCHEDULE"}),((d=(f=r.currentAssets)==null?void 0:f.cash)==null?void 0:d.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-gray-100 px-2 py-1 text-xs",children:"Cash"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-right py-1",children:"Amount"})]})}),e.jsxs("tbody",{children:[r.currentAssets.cash.map(v=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:v.description}),e.jsx("td",{className:"text-right font-mono",children:T(v.amount)})]},v.id)),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-1",children:"Total Cash"}),e.jsx("td",{className:"text-right font-mono",children:T(s.cashTotal)})]})]})]})]}),((j=(u=r.currentAssets)==null?void 0:u.cropInventory)==null?void 0:j.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-gray-100 px-2 py-1 text-xs",children:"Crop Inventory"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-right py-1",children:"Quantity"}),e.jsx("th",{className:"text-center py-1",children:"Unit"}),e.jsx("th",{className:"text-right py-1",children:"Price/Unit"}),e.jsx("th",{className:"text-right py-1",children:"Total Value"})]})}),e.jsxs("tbody",{children:[r.currentAssets.cropInventory.map(v=>{var S,E;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:v.description}),e.jsx("td",{className:"text-right font-mono",children:(S=v.quantity)==null?void 0:S.toLocaleString()}),e.jsx("td",{className:"text-center",children:v.unit}),e.jsxs("td",{className:"text-right font-mono",children:["$",(E=v.pricePerUnit)==null?void 0:E.toFixed(2)]}),e.jsx("td",{className:"text-right font-mono",children:T(v.totalValue||0)})]},v.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"4",className:"py-1",children:"Total Crop Inventory"}),e.jsx("td",{className:"text-right font-mono",children:T(s.cropInvTotal)})]})]})]})]}),((m=(g=r.currentAssets)==null?void 0:g.investmentGrowingCrop)==null?void 0:m.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-gray-100 px-2 py-1 text-xs",children:"Investment in Growing Crop"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-right py-1",children:"Acres"}),e.jsx("th",{className:"text-right py-1",children:"$/Acre"}),e.jsx("th",{className:"text-right py-1",children:"Total Value"})]})}),e.jsxs("tbody",{children:[r.currentAssets.investmentGrowingCrop.map(v=>{var S,E;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:v.description}),e.jsx("td",{className:"text-right font-mono",children:(S=v.acres)==null?void 0:S.toLocaleString()}),e.jsxs("td",{className:"text-right font-mono",children:["$",(E=v.costPerAcre)==null?void 0:E.toFixed(2)]}),e.jsx("td",{className:"text-right font-mono",children:T(v.totalValue||0)})]},v.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-1",children:"Total Growing Crop"}),e.jsx("td",{className:"text-right font-mono",children:T(s.growingCropTotal)})]})]})]})]})]}),e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsx("h2",{className:"text-lg font-bold text-amber-700 border-b-2 border-amber-600 pb-1 mb-3",children:"INTERMEDIATE ASSETS SCHEDULE"}),((C=(p=r.intermediateAssets)==null?void 0:p.machinery)==null?void 0:C.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-amber-50 px-2 py-1 text-xs",children:"Machinery & Equipment"}),e.jsxs("table",{className:"w-full text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-center py-1 w-8",children:"Qty"}),e.jsx("th",{className:"text-center py-1 w-14",children:"Cond"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Year"}),e.jsx("th",{className:"text-left py-1 w-20",children:"Serial #"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Prior Value"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Dep%"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Depreciation"}),e.jsx("th",{className:"text-right py-1 w-24",children:"Market Value"})]})}),e.jsxs("tbody",{children:[r.intermediateAssets.machinery.map(v=>{const S=(v.priorValue||0)*(v.depRate||.1);return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:v.description}),e.jsx("td",{className:"text-center",children:v.quantity||1}),e.jsx("td",{className:"text-center",children:v.condition||"Good"}),e.jsx("td",{className:"text-center",children:v.year}),e.jsx("td",{className:"text-left",children:v.serial||""}),e.jsx("td",{className:"text-right font-mono",children:T(v.priorValue||0)}),e.jsxs("td",{className:"text-center",children:[((v.depRate||.1)*100).toFixed(0),"%"]}),e.jsx("td",{className:"text-right font-mono",children:T(S)}),e.jsx("td",{className:"text-right font-mono",children:T(v.marketValue||v.currentValue||0)})]},v.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"8",className:"py-1",children:"Total Machinery"}),e.jsx("td",{className:"text-right font-mono",children:T(s.machineryTotal)})]})]})]})]}),((k=(N=r.intermediateAssets)==null?void 0:N.vehicles)==null?void 0:k.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-amber-50 px-2 py-1 text-xs",children:"Vehicles"}),e.jsxs("table",{className:"w-full text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-center py-1 w-8",children:"Qty"}),e.jsx("th",{className:"text-center py-1 w-14",children:"Cond"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Year"}),e.jsx("th",{className:"text-left py-1 w-20",children:"Serial #"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Prior Value"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Dep%"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Depreciation"}),e.jsx("th",{className:"text-right py-1 w-24",children:"Market Value"})]})}),e.jsxs("tbody",{children:[r.intermediateAssets.vehicles.map(v=>{const S=(v.priorValue||0)*(v.depRate||.1);return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:v.description}),e.jsx("td",{className:"text-center",children:v.quantity||1}),e.jsx("td",{className:"text-center",children:v.condition||"Good"}),e.jsx("td",{className:"text-center",children:v.year}),e.jsx("td",{className:"text-left",children:v.serial||""}),e.jsx("td",{className:"text-right font-mono",children:T(v.priorValue||0)}),e.jsxs("td",{className:"text-center",children:[((v.depRate||.1)*100).toFixed(0),"%"]}),e.jsx("td",{className:"text-right font-mono",children:T(S)}),e.jsx("td",{className:"text-right font-mono",children:T(v.marketValue||v.currentValue||0)})]},v.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"8",className:"py-1",children:"Total Vehicles"}),e.jsx("td",{className:"text-right font-mono",children:T(s.vehiclesTotal)})]})]})]})]})]}),e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsx("h2",{className:"text-lg font-bold text-purple-700 border-b-2 border-purple-600 pb-1 mb-3",children:"LONG-TERM ASSETS SCHEDULE"}),((A=(P=r.longTermAssets)==null?void 0:P.realEstate)==null?void 0:A.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-purple-50 px-2 py-1 text-xs",children:"Real Estate"}),e.jsxs("table",{className:"w-full text-[9px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Legal Description"}),e.jsx("th",{className:"text-left py-1 w-14",children:"County"}),e.jsx("th",{className:"text-right py-1 w-12",children:"Total"}),e.jsx("th",{className:"text-right py-1 w-10",children:"Irr"}),e.jsx("th",{className:"text-right py-1 w-10",children:"Dry"}),e.jsx("th",{className:"text-right py-1 w-10",children:"Other"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Tax Value"}),e.jsx("th",{className:"text-right py-1 w-14",children:"Ann Tax"}),e.jsx("th",{className:"text-right py-1 w-14",children:"$/Acre"}),e.jsx("th",{className:"text-right py-1 w-20",children:"Market Value"})]})}),e.jsxs("tbody",{children:[r.longTermAssets.realEstate.map(v=>{var S,E,I,H,Y;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:v.description}),e.jsx("td",{className:"py-1",children:v.county}),e.jsx("td",{className:"text-right font-mono",children:(S=v.totalAcres)==null?void 0:S.toLocaleString()}),e.jsx("td",{className:"text-right font-mono",children:((E=v.irrAcres)==null?void 0:E.toLocaleString())||"-"}),e.jsx("td",{className:"text-right font-mono",children:((I=v.dryAcres)==null?void 0:I.toLocaleString())||"-"}),e.jsx("td",{className:"text-right font-mono",children:((H=v.otherAcres)==null?void 0:H.toLocaleString())||"-"}),e.jsx("td",{className:"text-right font-mono",children:T(v.taxValue||0)}),e.jsx("td",{className:"text-right font-mono",children:T(v.annualTaxes||0)}),e.jsxs("td",{className:"text-right font-mono",children:["$",((Y=v.appraisedPerAcre)==null?void 0:Y.toLocaleString())||"-"]}),e.jsx("td",{className:"text-right font-mono",children:T(v.marketValue||0)})]},v.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"9",className:"py-1",children:"Total Real Estate"}),e.jsx("td",{className:"text-right font-mono",children:T(s.realEstateTotal)})]})]})]})]}),((L=(R=r.longTermAssets)==null?void 0:R.buildings)==null?void 0:L.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-purple-50 px-2 py-1 text-xs",children:"Buildings & Improvements"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-center py-1",children:"Year Built"}),e.jsx("th",{className:"text-right py-1",children:"Original Cost"}),e.jsx("th",{className:"text-right py-1",children:"Market Value"})]})}),e.jsxs("tbody",{children:[r.longTermAssets.buildings.map(v=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:v.description}),e.jsx("td",{className:"text-center",children:v.yearBuilt||""}),e.jsx("td",{className:"text-right font-mono",children:T(v.originalCost||0)}),e.jsx("td",{className:"text-right font-mono",children:T(v.marketValue||0)})]},v.id)),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-1",children:"Total Buildings"}),e.jsx("td",{className:"text-right font-mono",children:T(s.buildingsTotal)})]})]})]})]}),((F=(D=r.longTermAssets)==null?void 0:D.otherLongTerm)==null?void 0:F.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-purple-50 px-2 py-1 text-xs",children:"Other Long-Term Assets"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Description"}),e.jsx("th",{className:"text-right py-1",children:"Prior Year Value"}),e.jsx("th",{className:"text-right py-1",children:"Current Value"}),e.jsx("th",{className:"text-right py-1",children:"Change"})]})}),e.jsxs("tbody",{children:[r.longTermAssets.otherLongTerm.map(v=>{const S=(v.currentValue||0)-(v.priorValue||0);return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:v.description}),e.jsx("td",{className:"text-right font-mono",children:T(v.priorValue||0)}),e.jsx("td",{className:"text-right font-mono",children:T(v.currentValue||v.amount||0)}),e.jsxs("td",{className:`text-right font-mono ${S>=0?"text-green-600":"text-red-600"}`,children:[S>=0?"+":"",T(S)]})]},v.id)}),e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-1",children:"Total Other Long-Term"}),e.jsx("td",{className:"text-right font-mono",children:T(s.otherLongTermTotal)})]})]})]})]})]}),e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsx("h2",{className:"text-lg font-bold text-red-700 border-b-2 border-red-600 pb-1 mb-3",children:"DEBT SERVICE SCHEDULE"}),["operating","equipment","vehicle","realEstate","other"].map(v=>{var H;const S=((H=r.debtService)==null?void 0:H.filter(Y=>Y.category===v))||[];if(S.length===0)return null;const E={operating:"Operating Lines of Credit",equipment:"Equipment Loans",vehicle:"Vehicle Loans",realEstate:"Real Estate Loans",other:"Other Loans"},I=v==="operating";return e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 bg-red-50 px-2 py-1 text-xs",children:E[v]}),e.jsxs("table",{className:"w-full text-[9px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("th",{className:"text-left py-1",children:"Purpose"}),e.jsx("th",{className:"text-left py-1",children:"Lender"}),e.jsx("th",{className:"text-left py-1 w-16",children:"Entity"}),e.jsx("th",{className:"text-center py-1 w-10",children:"Rate"}),e.jsx("th",{className:"text-center py-1 w-8",children:"Type"}),e.jsx("th",{className:"text-center py-1 w-8",children:"Yrs"}),e.jsx("th",{className:"text-left py-1 w-14",children:"Security"}),e.jsx("th",{className:"text-center py-1 w-16",children:"Maturity"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Accrued Int"}),I?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"text-right py-1 w-18",children:"LOC Commit"}),e.jsx("th",{className:"text-right py-1 w-18",children:"Current Bal"}),e.jsx("th",{className:"text-center py-1 w-12",children:"Usage"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"text-right py-1 w-18",children:"Principal"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Prin Pmt"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Int Pmt"}),e.jsx("th",{className:"text-right py-1 w-16",children:"Total Pmt"})]})]})}),e.jsx("tbody",{children:S.map(Y=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:Y.description}),e.jsx("td",{className:"py-1",children:Y.lender}),e.jsx("td",{className:"py-1",children:Y.entity}),e.jsxs("td",{className:"text-center",children:[Y.interestRate,"%"]}),e.jsx("td",{className:"text-center",children:Y.rateType==="Variable"||Y.rateType==="V"?"Var":Y.rateType==="IFR"||Y.rateType==="F"?Y.ifrPeriod?`IFR-${Y.ifrPeriod}`:"IFR":"Fixed"}),e.jsx("td",{className:"text-center",children:Y.amYears}),e.jsx("td",{className:"py-1",children:Y.security}),e.jsx("td",{className:"text-center",children:Y.maturity?new Date(Y.maturity).toLocaleDateString("en-US",{month:"2-digit",year:"2-digit"}):""}),e.jsx("td",{className:"text-right font-mono",children:T(Y.accruedInterest||0)}),I?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"text-right font-mono",children:T(Y.locCommitment||0)}),e.jsx("td",{className:"text-right font-mono",children:T(Y.currentBalance||0)}),e.jsx("td",{className:"text-center",children:Y.locCommitment>0?((Y.currentBalance||0)/Y.locCommitment*100).toFixed(1)+"%":"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"text-right font-mono",children:T(Y.principalAmount||0)}),e.jsx("td",{className:"text-right font-mono",children:T(Y.principalPayment||0)}),e.jsx("td",{className:"text-right font-mono",children:T(Y.interestPayment||0)}),e.jsx("td",{className:"text-right font-mono",children:T(Y.totalPayment||0)})]})]},Y.id))})]})]},v)}),e.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-xs",children:"Total Term Debt"}),e.jsx("div",{className:"font-bold text-red-800 font-mono",children:T(s.termDebtTotal)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-xs",children:"Annual Debt Service"}),e.jsx("div",{className:"font-bold text-red-800 font-mono",children:T((r.debtService||[]).filter(v=>v.category!=="operating"&&v.category!=="personal").reduce((v,S)=>v+(S.totalPayment||0),0))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-xs",children:"Debt Service / Unit"}),e.jsx("div",{className:"font-bold text-red-800 font-mono",children:T((r.debtService||[]).filter(v=>v.category!=="operating"&&v.category!=="personal").reduce((v,S)=>v+(S.totalPayment||0),0)/i)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-xs",children:"Total Accrued Interest"}),e.jsx("div",{className:"font-bold text-red-800 font-mono",children:T((r.debtService||[]).reduce((v,S)=>v+(S.accruedInterest||0),0))})]})]})})]}),(()=>{let v=[];if(Nt?v=[...new Set(At.map(I=>new Date(I.date).getFullYear()))].sort((I,H)=>H-I).slice(0,5).map(I=>{const H=Vl(At,I);return H?{...H,year:I}:null}).filter(Boolean):v=nr.sort((E,I)=>new Date(I.date)-new Date(E.date)).slice(0,5),v.length<2)return null;const S=v.map(E=>dt(E).totalEquity);return e.jsxs("div",{className:"break-before-page pt-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-green-700 border-b-2 border-green-600 pb-1 mb-3",children:["HISTORICAL TRENDS ",Nt&&"(Consolidated)"]}),e.jsxs("table",{className:"w-full text-[10px] mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"Metric"}),v.map((E,I)=>{var H;return e.jsxs("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:[Nt?E.year:new Date(E.date).getFullYear(),e.jsx("div",{className:"text-[9px] font-normal text-gray-400",children:Nt?`${((H=E.entitiesIncluded)==null?void 0:H.length)||0} entities`:pa(E.date)})]},I)}),e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:"Change"})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"bg-green-100",children:e.jsx("td",{colSpan:v.length+2,className:"py-1 px-2 font-semibold text-green-800",children:"ASSETS"})}),[{label:"Current Assets",key:"currentAssetsTotal"},{label:"Intermediate Assets",key:"intermediateAssetsTotal"},{label:"Long-Term Assets",key:"longTermAssetsTotal"},{label:"Total Assets",key:"totalAssets",bold:!0}].map(E=>{const I=v.map(_=>dt(_)[E.key]),H=I.length>=2?I[0]-I[1]:0,Y=I.length>=2&&I[1]!==0?(I[0]-I[1])/I[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${E.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-1 ${E.bold?"":"pl-3"}`,children:E.label}),v.map((_,K)=>e.jsx("td",{className:"text-right py-1 px-2 font-mono",children:T(dt(_)[E.key])},K)),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${H>=0?"text-green-600":"text-red-600"}`,children:[H>=0?"+":"",T(H),e.jsxs("span",{className:"text-[9px] ml-1",children:["(",Y>=0?"+":"",Y.toFixed(1),"%)"]})]})]},E.key)}),e.jsx("tr",{className:"bg-red-100",children:e.jsx("td",{colSpan:v.length+2,className:"py-1 px-2 font-semibold text-red-800",children:"LIABILITIES"})}),[{label:"Current Liabilities",key:"currentLiabilitiesTotal"},{label:"Term Debt",key:"termDebtTotal"},{label:"Total Liabilities",key:"totalLiabilities",bold:!0}].map(E=>{const I=v.map(_=>dt(_)[E.key]),H=I.length>=2?I[0]-I[1]:0,Y=I.length>=2&&I[1]!==0?(I[0]-I[1])/I[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${E.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-1 ${E.bold?"":"pl-3"}`,children:E.label}),v.map((_,K)=>e.jsx("td",{className:"text-right py-1 px-2 font-mono",children:T(dt(_)[E.key])},K)),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${H<=0?"text-green-600":"text-red-600"}`,children:[H>=0?"+":"",T(H),e.jsxs("span",{className:"text-[9px] ml-1",children:["(",Y>=0?"+":"",Y.toFixed(1),"%)"]})]})]},E.key)}),e.jsx("tr",{className:"bg-blue-100",children:e.jsx("td",{colSpan:v.length+2,className:"py-1 px-2 font-semibold text-blue-800",children:"EQUITY & WORKING CAPITAL"})}),[{label:"Total Equity",key:"totalEquity",bold:!0},{label:"Working Capital",key:"workingCapital",bold:!0}].map(E=>{const I=v.map(_=>dt(_)[E.key]),H=I.length>=2?I[0]-I[1]:0,Y=I.length>=2&&I[1]!==0?(I[0]-I[1])/I[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${E.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:"py-1",children:E.label}),v.map((_,K)=>{const re=dt(_)[E.key];return e.jsx("td",{className:`text-right py-1 px-2 font-mono ${re<0?"text-red-600":""}`,children:T(re)},K)}),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${H>=0?"text-green-600":"text-red-600"}`,children:[H>=0?"+":"",T(H),e.jsxs("span",{className:"text-[9px] ml-1",children:["(",Y>=0?"+":"",Y.toFixed(1),"%)"]})]})]},E.key)}),e.jsxs("tr",{className:"bg-blue-50 border-b",children:[e.jsx("td",{className:"py-1 font-semibold text-blue-800",children:"Equity Change (YoY)"}),v.map((E,I)=>{const H=S[I],Y=S[I+1]||0,_=I<v.length-1?H-Y:null;return e.jsx("td",{className:`text-right py-1 px-2 font-mono font-semibold ${_!==null?_>=0?"text-green-600":"text-red-600":"text-gray-400"}`,children:_!==null?`${_>=0?"+":""}${T(_)}`:""},I)}),e.jsx("td",{className:"text-right py-1 px-2 text-gray-400",children:""})]}),e.jsxs("tr",{className:"bg-amber-50 border-b",children:[e.jsxs("td",{className:"py-1 font-medium text-amber-800",children:["Adjustment ",e.jsx("span",{className:"text-[9px] font-normal",children:"(contributions, gifts)"})]}),v.map((E,I)=>e.jsx("td",{className:"text-right py-1 px-2 font-mono text-gray-500",children:T(E.adjustment||0)},I)),e.jsx("td",{className:"text-right py-1 px-2 text-gray-400",children:""})]}),e.jsxs("tr",{className:"bg-green-100 border-b-2 border-green-300",children:[e.jsxs("td",{className:"py-1 font-bold text-green-800",children:["Earned Equity ",e.jsx("span",{className:"text-[9px] font-normal",children:"(Change  Adj)"})]}),v.map((E,I)=>{const H=S[I],Y=S[I+1]||0,_=I<v.length-1?H-Y:null,K=E.adjustment||0,re=_!==null?_-K:null;return e.jsx("td",{className:`text-right py-1 px-2 font-mono font-bold ${re!==null?re>=0?"text-green-700":"text-red-600":"text-gray-400"}`,children:re!==null?`${re>=0?"+":""}${T(re)}`:""},I)}),e.jsx("td",{className:"text-right py-1 px-2 text-gray-400",children:""})]})]})]}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2 mt-4",children:"Key Ratios Trend"}),e.jsxs("table",{className:"w-full text-[10px] mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"Ratio"}),v.map((E,I)=>e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:Nt?E.year:new Date(E.date).getFullYear()},I)),e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:"Change"})]})}),e.jsx("tbody",{children:[{label:"Current Ratio",key:"currentRatio",format:"ratio",goodUp:!0},{label:"Debt to Equity",key:"debtToEquity",format:"ratio",goodUp:!1},{label:"Owner's Equity %",key:"equityPercent",format:"percent",goodUp:!0},{label:"Debt to Assets %",key:"debtToAssets",format:"percent",goodUp:!1}].map(E=>{const I=v.map(_=>dt(_)[E.key]),H=I.length>=2?I[0]-I[1]:0,Y=E.goodUp?H>=0:H<=0;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:E.label}),v.map((_,K)=>{const re=dt(_)[E.key];return e.jsx("td",{className:"text-right py-1 px-2 font-mono",children:E.format==="percent"?`${(re*100).toFixed(1)}%`:re.toFixed(2)},K)}),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${Y?"text-green-600":"text-red-600"}`,children:[H>=0?"+":"",E.format==="percent"?`${(H*100).toFixed(1)}%`:H.toFixed(2)]})]},E.key)})})]}),e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2",children:["Per Unit Metrics (",i.toLocaleString()," units)"]}),e.jsxs("table",{className:"w-full text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"Metric"}),v.map((E,I)=>e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:Nt?E.year:new Date(E.date).getFullYear()},I)),e.jsx("th",{className:"text-right py-2 px-2 font-semibold text-gray-700",children:"Change"})]})}),e.jsx("tbody",{children:[{label:"Working Capital / Unit",key:"workingCapital",goodUp:!0},{label:"Total Assets / Unit",key:"totalAssets",goodUp:!0},{label:"Total Debt / Unit",key:"totalLiabilities",goodUp:!1},{label:"Equity / Unit",key:"totalEquity",goodUp:!0}].map(E=>{const I=v.map(_=>dt(_)[E.key]/i),H=I.length>=2?I[0]-I[1]:0,Y=E.goodUp?H>=0:H<=0;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-1",children:E.label}),v.map((_,K)=>{const re=dt(_)[E.key]/i;return e.jsx("td",{className:`text-right py-1 px-2 font-mono ${re<0?"text-red-600":""}`,children:T(re)},K)}),e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${Y?"text-green-600":"text-red-600"}`,children:[H>=0?"+":"",T(H)]})]},E.key)})})]})]})})(),e.jsxs("div",{className:"mt-8 pt-4 border-t text-xs text-gray-500 flex justify-between",children:[e.jsxs("span",{children:["Generated: ",new Date().toLocaleDateString()," at ",new Date().toLocaleTimeString()]}),e.jsx("span",{children:"1P1 Farm Financial - Balance Sheet Report"})]})]})]})})};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[!t&&e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-800 via-green-700 to-green-600 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(Ua,{className:"w-8 h-8 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"1P1 Farm Financial"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Agricultural Financial Management Platform"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:l,onChange:s=>{c(s.target.value),w("")},onKeyPress:s=>s.key==="Enter"&&M(),placeholder:"Enter password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none transition-all",autoFocus:!0})]}),y&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(lc,{className:"w-4 h-4"}),y]}),e.jsxs("button",{onClick:M,className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx($t,{className:"w-5 h-5"}),"Login"]})]}),e.jsx("p",{className:"text-center text-gray-400 text-xs mt-6",children:"Secure access to farm financial management tools"})]})}),t&&e.jsxs(e.Fragment,{children:[ne&&e.jsx(gb,{}),B.open&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-gray-50",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(po,{className:"w-5 h-5 text-blue-600"}),"Loan Verification Documents"]}),e.jsx("button",{onClick:()=>xe({open:!1,debtId:null,attachments:[]}),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(pr,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 140px)"},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Document"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",id:"attachment-upload",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",className:"hidden",onChange:s=>{var o;const n=(o=s.target.files)==null?void 0:o[0];if(n){const i=new FileReader;i.onload=h=>{const b={id:`att-${Date.now()}`,name:n.name,type:n.type,size:n.size,data:h.target.result,uploadedAt:new Date().toISOString()},x=r.debtService.map(f=>f.id===B.debtId?{...f,attachments:[...f.attachments||[],b]}:f);z({debtService:x}),xe(f=>({...f,attachments:[...f.attachments,b]}))},i.readAsDataURL(n)}s.target.value=""}}),e.jsxs("button",{onClick:()=>document.getElementById("attachment-upload").click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Browse Files"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"PDF, Word, Excel, Images"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Attached Documents (",((tx=B.attachments)==null?void 0:tx.length)||0,")"]}),!B.attachments||B.attachments.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 border-2 border-dashed rounded-lg",children:[e.jsx(po,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No documents attached"}),e.jsx("p",{className:"text-xs",children:"Upload loan statements, contracts, or other verification"})]}):e.jsx("div",{className:"space-y-2",children:B.attachments.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded ${s.type.includes("pdf")?"bg-red-100 text-red-600":s.type.includes("word")||s.type.includes("document")?"bg-blue-100 text-blue-600":s.type.includes("sheet")||s.type.includes("excel")?"bg-green-100 text-green-600":s.type.includes("image")?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",style:{maxWidth:"200px"},children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(s.size/1024).toFixed(1)," KB  ",new Date(s.uploadedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{const n=document.createElement("a");n.href=s.data,n.download=s.name,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Download",children:e.jsx(Vh,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{const n=r.debtService.map(o=>o.id===B.debtId?{...o,attachments:(o.attachments||[]).filter(i=>i.id!==s.id)}:o);z({debtService:n}),xe(o=>({...o,attachments:o.attachments.filter(i=>i.id!==s.id)}))},className:"p-1.5 text-red-500 hover:bg-red-50 rounded",title:"Remove",children:e.jsx(ot,{className:"w-4 h-4"})})]})]},s.id))})]})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:e.jsx("button",{onClick:()=>xe({open:!1,debtId:null,attachments:[]}),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 text-sm",children:"Close"})})]})}),Sl&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-green-50",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Ya,{className:"w-5 h-5 text-green-600"}),"Add New Client"]}),e.jsx("button",{onClick:()=>{aa(!1),Cs({name:"",units:1,entities:[{name:"",type:"Operating"}]})},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(pr,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(90vh - 140px)"},children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Client Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:ls.name,onChange:s=>Cs(n=>({...n,name:s.target.value})),placeholder:"e.g., Johnson Family Farms",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units (Acres, Head, etc.)"}),e.jsx("input",{type:"number",value:ls.units,onChange:s=>Cs(n=>({...n,units:parseInt(s.target.value)||1})),placeholder:"e.g., 2500",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for per-unit calculations in reports"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entities"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Add the business entities for this client (farms, LLCs, personal, etc.)"}),e.jsx("div",{className:"space-y-2",children:ls.entities.map((s,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s.name,onChange:o=>{const i=[...ls.entities];i[n].name=o.target.value,Cs(h=>({...h,entities:i}))},placeholder:"Entity name",className:"flex-1 px-3 py-2 border border-gray-300 rounded text-sm"}),e.jsxs("select",{value:s.type,onChange:o=>{const i=[...ls.entities];i[n].type=o.target.value,Cs(h=>({...h,entities:i}))},className:"w-32 px-2 py-2 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"Operating",children:"Operating"}),e.jsx("option",{value:"LLC",children:"LLC"}),e.jsx("option",{value:"Land",children:"Land"}),e.jsx("option",{value:"Personal",children:"Personal"}),e.jsx("option",{value:"Trust",children:"Trust"}),e.jsx("option",{value:"Other",children:"Other"})]}),ls.entities.length>1&&e.jsx("button",{onClick:()=>{const o=ls.entities.filter((i,h)=>h!==n);Cs(i=>({...i,entities:o}))},className:"p-2 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})]},n))}),e.jsxs("button",{onClick:()=>{Cs(s=>({...s,entities:[...s.entities,{name:"",type:"Operating"}]}))},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Entity"]})]})]}),e.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{aa(!1),Cs({name:"",units:1,entities:[{name:"",type:"Operating"}]})},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 text-sm",children:"Cancel"}),e.jsxs("button",{onClick:()=>{if(!ls.name.trim()){alert("Please enter a client name");return}const s=ls.entities.filter(h=>h.name.trim());if(s.length===0){alert("Please add at least one entity");return}const n=`client-${Date.now()}`,o={id:n,name:ls.name.trim(),units:ls.units||1,entities:s.map((h,b)=>({id:`ent-${Date.now()}-${b}`,name:h.name.trim(),type:h.type})),fields:[]};me(h=>[...h,o]);const i={};i[n]=o.entities.map(h=>({id:`bs-${h.id}-${new Date().getFullYear()}`,entityId:h.id,date:new Date().toISOString().slice(0,10),currentAssets:{cash:[],accountsReceivable:[],cropInventory:[],feedInventory:[],marketLivestock:[],prepaidExpenses:[],growingCrop:[],hedgingAccounts:[],otherCurrentAssets:[]},intermediateAssets:{machinery:[],vehicles:[],breedingLivestock:[]},longTermAssets:{realEstate:[],buildings:[],otherLongTerm:[]},currentLiabilities:{accountsPayable:[],outstandingChecks:[],creditCardDebt:[],operatingLine:0,currentPortionTermDebt:0,accruedInterest:0},termDebt:[],debtService:[],capitalActivity:{machinery:{purchases:[],sales:[]},vehicles:{purchases:[],sales:[]},buildings:{purchases:[],sales:[]},realEstate:{purchases:[],sales:[]}}})),Z(h=>({...h,...i})),Q(n),Ae(o.entities[0].id),Fe(i[n][0].id),aa(!1),Cs({name:"",units:1,entities:[{name:"",type:"Operating"}]})},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Create Client"]})]})]})}),O==="landing"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-green-700 to-green-600 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ua,{className:"w-10 h-10"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"1P1 Farm Financial"}),e.jsx("p",{className:"text-green-200",children:"Agricultural Financial Management Platform"})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-green-200 text-xs block mb-1",children:"Select Client"}),e.jsx("select",{value:ze,onChange:s=>{var h,b;Q(s.target.value);const n=ce.find(x=>x.id===s.target.value),o=(h=n==null?void 0:n.entities)==null?void 0:h[0];Ae((o==null?void 0:o.id)||"consolidated");const i=(b=G[s.target.value])==null?void 0:b.find(x=>x.entityId===(o==null?void 0:o.id));Fe((i==null?void 0:i.id)||"")},className:"bg-white/10 border border-white/20 rounded px-4 py-2 text-white min-w-[220px]",children:ce.map(s=>e.jsx("option",{value:s.id,className:"text-gray-800",children:s.name},s.id))})]}),e.jsxs("button",{onClick:()=>aa(!0),className:"bg-white/20 hover:bg-white/30 border border-white/30 text-white px-3 py-2 rounded flex items-center gap-1 text-sm",title:"Add New Client",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Client"]}),e.jsxs("button",{onClick:ms,className:"bg-red-500/80 hover:bg-red-600 border border-red-400/50 text-white px-3 py-2 rounded flex items-center gap-1 text-sm",title:"Logout",children:[e.jsx(Wh,{className:"w-4 h-4"}),"Logout"]})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:te==null?void 0:te.name}),e.jsxs("p",{className:"text-gray-500 mt-1",children:[((sx=te==null?void 0:te.entities)==null?void 0:sx.length)||0," entities  ",((rx=te==null?void 0:te.units)==null?void 0:rx.toLocaleString())||0," total units"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Latest Balance Sheet"}),e.jsx("div",{className:"text-lg font-semibold text-green-700",children:At.length>0?pa(At.sort((s,n)=>new Date(n.date)-new Date(s.date))[0].date):"No balance sheets"})]})]}),At.length>0&&(()=>{const s=At.sort((h,b)=>new Date(b.date)-new Date(h.date))[0],n=new Date(s.date).getFullYear(),o=Vl(At,n),i=dt(o);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6 pt-6 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Assets"}),e.jsx("div",{className:"text-xl font-bold text-green-700",children:T(i.totalAssets)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Liabilities"}),e.jsx("div",{className:"text-xl font-bold text-red-700",children:T(i.totalLiabilities)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Net Equity"}),e.jsx("div",{className:`text-xl font-bold ${i.totalEquity>=0?"text-green-700":"text-red-700"}`,children:T(i.totalEquity)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Equity %"}),e.jsxs("div",{className:"text-xl font-bold text-blue-700",children:[(i.equityPercent*100).toFixed(1),"%"]})]})]})})()]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Financial Tools"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("button",{onClick:()=>W("balancesheet"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-green-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg group-hover:bg-green-200 transition-colors",children:e.jsx(Yn,{className:"w-8 h-8 text-green-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-green-700",children:"Balance Sheet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Track assets, liabilities, and equity across all entities"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded",children:[At.length," records"]}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded",children:[((ax=te==null?void 0:te.entities)==null?void 0:ax.length)||0," entities"]})]})]})]})}),e.jsx("button",{onClick:()=>W("marketing"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-amber-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 rounded-lg group-hover:bg-amber-200 transition-colors",children:e.jsx(lt,{className:"w-8 h-8 text-amber-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-amber-700",children:"Marketing"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Futures, basis, positions, and pricing"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-amber-50 rounded text-amber-600",children:"Futures"}),e.jsx("span",{className:"px-2 py-1 bg-amber-50 rounded text-amber-600",children:"Options"}),e.jsx("span",{className:"px-2 py-1 bg-amber-50 rounded text-amber-600",children:"Cash Sales"}),e.jsx("span",{className:"px-2 py-1 bg-amber-50 rounded text-amber-600",children:"Basis"})]})]})]})}),e.jsx("button",{onClick:()=>W("refinanceCalc"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-teal-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-teal-100 rounded-lg group-hover:bg-teal-200 transition-colors",children:e.jsx(Ir,{className:"w-8 h-8 text-teal-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-teal-700",children:"Refinance Calculator"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Analyze debt restructuring and cash flow impact"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-teal-50 rounded text-teal-600",children:"Payment Analysis"}),e.jsx("span",{className:"px-2 py-1 bg-teal-50 rounded text-teal-600",children:"Rate Comparison"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl shadow p-6 text-left border-2 border-dashed border-gray-300 opacity-60",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 rounded-lg",children:e.jsx(Ot,{className:"w-8 h-8 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-500",children:"Income Statement"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Track revenue, expenses, and profitability"}),e.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"Coming Soon"})]})]})}),e.jsx("button",{onClick:()=>W("cashflow"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-blue-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors",children:e.jsx(vt,{className:"w-8 h-8 text-blue-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-blue-700",children:"Cash Flow Projection"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Project and track cash flow over time"}),e.jsx("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 rounded text-blue-600",children:"Annual View"})})]})]})}),e.jsx("button",{onClick:()=>{W("cropInsurance"),us("insuranceSummary")},className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-purple-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors",children:e.jsx($t,{className:"w-8 h-8 text-purple-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-purple-700",children:"Crop Insurance"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"MPCI, area plans, and private coverage"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-purple-50 rounded text-purple-600",children:"MPCI"}),e.jsx("span",{className:"px-2 py-1 bg-purple-50 rounded text-purple-600",children:"SCO/ECO"}),e.jsx("span",{className:"px-2 py-1 bg-purple-50 rounded text-purple-600",children:"Area Plans"}),e.jsx("span",{className:"px-2 py-1 bg-purple-50 rounded text-purple-600",children:"Hail/Wind"})]})]})]})}),e.jsx("button",{onClick:()=>W("transactionTracker"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-cyan-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-cyan-100 rounded-lg group-hover:bg-cyan-200 transition-colors",children:e.jsx(Ir,{className:"w-8 h-8 text-cyan-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-cyan-700",children:"Transaction Tracker"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Track income and expense transactions"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-cyan-50 rounded text-cyan-600",children:"Income"}),e.jsx("span",{className:"px-2 py-1 bg-cyan-50 rounded text-cyan-600",children:"Expenses"}),e.jsx("span",{className:"px-2 py-1 bg-cyan-50 rounded text-cyan-600",children:"Categories"})]})]})]})}),e.jsx("button",{onClick:()=>W("trackerDashboard"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-violet-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-violet-100 rounded-lg group-hover:bg-violet-200 transition-colors",children:e.jsx(bt,{className:"w-8 h-8 text-violet-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-violet-700",children:"Tracker Dashboard"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Visualize transactions by enterprise, category & time"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-violet-50 rounded text-violet-600",children:"Charts"}),e.jsx("span",{className:"px-2 py-1 bg-violet-50 rounded text-violet-600",children:"Analytics"}),e.jsx("span",{className:"px-2 py-1 bg-violet-50 rounded text-violet-600",children:"Itemization"})]})]})]})}),e.jsx("button",{onClick:()=>W("transactionReports"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all hover:scale-[1.02] border-2 border-transparent hover:border-emerald-500 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg group-hover:bg-emerald-200 transition-colors",children:e.jsx(Ge,{className:"w-8 h-8 text-emerald-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-emerald-700",children:"Transaction Reports"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Profit & Loss statements with year-over-year comparison"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-emerald-50 rounded text-emerald-600",children:"P&L"}),e.jsx("span",{className:"px-2 py-1 bg-emerald-50 rounded text-emerald-600",children:"Compare Years"}),e.jsx("span",{className:"px-2 py-1 bg-emerald-50 rounded text-emerald-600",children:"Reports"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl shadow p-6 text-left border-2 border-dashed border-gray-300 opacity-60",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 rounded-lg",children:e.jsx($r,{className:"w-8 h-8 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-500",children:"Financial Ratios"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Detailed ratio analysis and benchmarking"}),e.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"Coming Soon"})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl shadow p-6 text-left border-2 border-dashed border-gray-300 opacity-60",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 rounded-lg",children:e.jsx(bt,{className:"w-8 h-8 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-500",children:"Reports"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Generate PDF reports for lenders and analysis"}),e.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"Coming Soon"})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl shadow p-6 text-left border-2 border-dashed border-gray-300 opacity-60",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 rounded-lg",children:e.jsx(Rr,{className:"w-8 h-8 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-500",children:"Settings"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Manage clients, entities, and preferences"}),e.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"Coming Soon"})]})]})})]}),(te==null?void 0:te.entities)&&te.entities.length>1&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Entities"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:te.entities.map(s=>{const o=At.filter(h=>h.entityId===s.id).sort((h,b)=>new Date(b.date)-new Date(h.date))[0],i=o?dt(o):null;return e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ya,{className:"w-4 h-4 text-gray-400"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:s.name})]}),i?e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Assets:"}),e.jsx("span",{className:"ml-1 font-mono text-green-700",children:T(i.totalAssets)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Equity:"}),e.jsx("span",{className:`ml-1 font-mono ${i.totalEquity>=0?"text-green-700":"text-red-700"}`,children:T(i.totalEquity)})]})]}):e.jsx("p",{className:"text-sm text-gray-400",children:"No balance sheet data"})]},s.id)})})]})]})]}),O==="balancesheet"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-green-700 to-green-600 text-white shadow-lg",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>W("landing"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Back to Dashboard",children:e.jsx(Er,{className:"w-6 h-6"})}),e.jsx(Ua,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"1P1 Farm Financial"}),e.jsx("p",{className:"text-green-200 text-sm",children:"Balance Sheet Management"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-green-200 text-xs block mb-1",children:"Client"}),e.jsx("select",{value:ze,onChange:s=>{var h,b;Q(s.target.value);const n=ce.find(x=>x.id===s.target.value),o=(h=n==null?void 0:n.entities)==null?void 0:h[0];Ae((o==null?void 0:o.id)||"consolidated");const i=(b=G[s.target.value])==null?void 0:b.find(x=>x.entityId===(o==null?void 0:o.id));Fe((i==null?void 0:i.id)||"")},className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[180px]",children:ce.map(s=>e.jsx("option",{value:s.id,className:"text-gray-800",children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-green-200 text-xs block mb-1",children:[e.jsx(Ya,{className:"w-3 h-3 inline mr-1"}),"Entity"]}),e.jsxs("select",{value:Ne,onChange:s=>{if(Ae(s.target.value),s.target.value==="consolidated")Fe("");else{const n=At.find(o=>o.entityId===s.target.value);Fe((n==null?void 0:n.id)||"")}},className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[160px]",children:[e.jsx("option",{value:"consolidated",className:"text-gray-800 font-semibold",children:" Consolidated View"}),(nx=te==null?void 0:te.entities)==null?void 0:nx.map(s=>e.jsx("option",{value:s.id,className:"text-gray-800",children:s.name},s.id))]})]}),Ne==="consolidated"?e.jsxs("div",{children:[e.jsxs("label",{className:"text-green-200 text-xs block mb-1",children:[e.jsx(Ht,{className:"w-3 h-3 inline mr-1"}),"Year"]}),e.jsx("select",{value:we,onChange:s=>We(parseInt(s.target.value)),className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[100px]",children:wn.map(s=>e.jsx("option",{value:s,className:"text-gray-800",children:s},s))})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-green-200 text-xs block mb-1",children:"Balance Sheet Date"}),e.jsx("select",{value:de,onChange:s=>Fe(s.target.value),className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[140px]",children:nr.sort((s,n)=>new Date(n.date)-new Date(s.date)).map(s=>e.jsx("option",{value:s.id,className:"text-gray-800",children:pa(s.date)},s.id))})]}),r&&e.jsxs("div",{children:[e.jsx("label",{className:"text-green-200 text-xs block mb-1",children:"Change Date"}),e.jsx("input",{type:"date",value:r.date||"",onChange:s=>{const n=s.target.value;n&&z({date:n})},className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white",style:{colorScheme:"dark"}})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[!Nt&&e.jsxs("button",{onClick:ex,className:"flex items-center gap-2 bg-white text-green-700 px-4 py-2 rounded-lg font-semibold hover:bg-green-50 transition-colors",children:[e.jsx(Ke,{className:"w-4 h-4"}),"New Balance Sheet"]}),r&&e.jsxs("button",{onClick:pb,className:"flex items-center gap-2 bg-green-800 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-900 transition-colors border border-green-600",children:[e.jsx(gs,{className:"w-4 h-4"}),"Print Report"]}),e.jsxs("button",{onClick:ms,className:"flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-600 transition-colors ml-auto",title:"Logout",children:[e.jsx(Wh,{className:"w-4 h-4"}),"Logout"]})]})]})]}),Nt&&e.jsxs("div",{className:"mt-3 bg-white/10 rounded-lg px-4 py-2 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-5 h-5 text-yellow-300"}),e.jsx("span",{className:"font-medium",children:"Consolidated View"}),e.jsxs("span",{className:"text-green-200 text-sm",children:[" Showing combined totals for ",((lx=r==null?void 0:r.entitiesIncluded)==null?void 0:lx.length)||0," entities in ",we]}),e.jsx("span",{className:"ml-auto text-xs text-green-200",children:"Read-only"})]})]})}),e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"summary",label:"Summary",icon:lt},{id:"trends",label:"Trends",icon:bt},{id:"current",label:"Current Assets",icon:oc},{id:"intermediate",label:"Intermediate Assets",icon:Ms},{id:"longterm",label:"Long-Term Assets",icon:Ms},{id:"liabilities",label:"Liabilities",icon:mo},{id:"debtservice",label:"Debt Service",icon:Ge},{id:"loancalc",label:"Loan Calculator",icon:ur}].map(s=>e.jsxs("button",{onClick:()=>it(s.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${De===s.id?"border-green-600 text-green-700 bg-green-50":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:r?e.jsxs(e.Fragment,{children:[De==="summary"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[Nt&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg shadow p-4 border border-yellow-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-5 h-5 text-yellow-600"}),"Entity Breakdown  ",we]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:(ox=r==null?void 0:r.entitiesIncluded)==null?void 0:ox.map(s=>{var h;const n=(h=te==null?void 0:te.entities)==null?void 0:h.find(b=>b.id===s),o=At.find(b=>b.entityId===s&&new Date(b.date).getFullYear()===we),i=dt(o);return e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"font-medium text-gray-800 text-sm mb-2",children:(n==null?void 0:n.name)||s}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Assets:"}),e.jsx("span",{className:"font-mono text-green-700",children:T(i.totalAssets)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Liabilities:"}),e.jsx("span",{className:"font-mono text-red-700",children:T(i.totalLiabilities)})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[e.jsx("span",{className:"text-gray-700",children:"Equity:"}),e.jsx("span",{className:`font-mono ${i.totalEquity>=0?"text-green-700":"text-red-700"}`,children:T(i.totalEquity)})]})]})]},s)})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5 text-green-600"}),Nt?"Consolidated ":"","Balance Sheet Summary  ",Nt?we:pa(r.date),Nt&&e.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:[(ix=r==null?void 0:r.entitiesIncluded)==null?void 0:ix.length," entities"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 flex flex-col",children:[e.jsxs("div",{className:"text-sm font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[e.jsx(oc,{className:"w-4 h-4"})," CURRENT ASSETS"]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cash"}),e.jsx("span",{className:"font-mono",children:T(Me.cashTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accounts Receivable"}),e.jsx("span",{className:"font-mono",children:T(Me.arTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Commodity Accounts"}),e.jsx("span",{className:"font-mono",children:T(Me.commodityTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Crop Inventory"}),e.jsx("span",{className:"font-mono",children:T(Me.cropInvTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Feed Inventory"}),e.jsx("span",{className:"font-mono",children:T(Me.feedInvTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Market Livestock"}),e.jsx("span",{className:"font-mono",children:T(Me.marketLivestockTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Growing Crop"}),e.jsx("span",{className:"font-mono",children:T(Me.growingCropTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Prepaid Expenses"}),e.jsx("span",{className:"font-mono",children:T(Me.prepaidTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Current"}),e.jsx("span",{className:"font-mono",children:T(Me.otherCurrentTotal)})]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-blue-800 border-t-2 border-blue-300 mt-3 pt-2",children:[e.jsx("span",{children:"Total Current Assets"}),e.jsx("span",{className:"font-mono",children:T(Me.currentAssetsTotal)})]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200 flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-red-800 mb-2",children:"CURRENT LIABILITIES"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accounts Payable"}),e.jsx("span",{className:"font-mono",children:T(Me.apTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Outstanding Checks"}),e.jsx("span",{className:"font-mono",children:T(Me.checksTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Credit Card Debt"}),e.jsx("span",{className:"font-mono",children:T(Me.ccTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Operating Line"}),e.jsx("span",{className:"font-mono",children:T(r.currentLiabilities.operatingLine)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Current Portion Term Debt"}),e.jsx("span",{className:"font-mono",children:T(r.currentLiabilities.currentPortionTermDebt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accrued Interest"}),e.jsx("span",{className:"font-mono",children:T(r.currentLiabilities.accruedInterest)})]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-red-800 border-t-2 border-red-300 mt-3 pt-2",children:[e.jsx("span",{children:"Total Current Liabilities"}),e.jsx("span",{className:"font-mono",children:T(Me.currentLiabilitiesTotal)})]})]})]}),e.jsx("div",{className:"bg-gray-100 rounded-lg px-4 py-2 border border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[e.jsx("span",{className:"text-gray-700",children:"Working Capital (Current Assets  Current Liabilities)"}),e.jsx("span",{className:`font-mono text-lg ${Me.workingCapital>=0?"text-green-600":"text-red-600"}`,children:T(Me.workingCapital)})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-b from-amber-50 to-purple-50 rounded-lg p-4 border border-amber-200 flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-2",children:"NON-CURRENT ASSETS"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-xs font-medium text-amber-700 mb-1 flex items-center gap-1",children:[e.jsx(Ms,{className:"w-3 h-3"})," Intermediate (1-10 yrs)"]}),e.jsxs("div",{className:"pl-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Machinery & Equipment"}),e.jsx("span",{className:"font-mono",children:T(Me.machineryTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vehicles"}),e.jsx("span",{className:"font-mono",children:T(Me.vehiclesTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Breeding Livestock"}),e.jsx("span",{className:"font-mono",children:T(Me.breedingLivestockTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-amber-800 pl-3 mt-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:T(Me.intermediateAssetsTotal)})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-xs font-medium text-purple-700 mb-1 flex items-center gap-1",children:[e.jsx(Ms,{className:"w-3 h-3"})," Long-Term (10+ yrs)"]}),e.jsxs("div",{className:"pl-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Estate"}),e.jsx("span",{className:"font-mono",children:T(Me.realEstateTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Buildings & Improvements"}),e.jsx("span",{className:"font-mono",children:T(Me.buildingsTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Long-Term"}),e.jsx("span",{className:"font-mono",children:T(Me.otherLongTermTotal)})]})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-purple-800 pl-3 mt-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:T(Me.longTermAssetsTotal)})]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-gray-800 border-t-2 border-gray-400 mt-3 pt-2",children:[e.jsx("span",{children:"Total Non-Current Assets"}),e.jsx("span",{className:"font-mono",children:T(Me.intermediateAssetsTotal+Me.longTermAssetsTotal)})]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200 flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"NON-CURRENT LIABILITIES"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Equipment Debt"}),e.jsx("span",{className:"font-mono",children:T(Me.equipmentDebtTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vehicle Debt"}),e.jsx("span",{className:"font-mono",children:T(Me.vehicleDebtTotal||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Estate Debt"}),e.jsx("span",{className:"font-mono",children:T(Me.realEstateDebtTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Term Debt"}),e.jsx("span",{className:"font-mono",children:T(Me.otherDebtTotal)})]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-orange-800 border-t-2 border-orange-300 mt-3 pt-2",children:[e.jsx("span",{children:"Total Non-Current Liabilities"}),e.jsx("span",{className:"font-mono",children:T(Me.termDebtTotal)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-green-100 rounded-lg p-4 border-2 border-green-500",children:e.jsxs("div",{className:"flex justify-between items-center font-bold text-lg text-green-800",children:[e.jsx("span",{children:"TOTAL ASSETS"}),e.jsx("span",{className:"font-mono",children:T(Me.totalAssets)})]})}),e.jsx("div",{className:"bg-red-100 rounded-lg p-4 border-2 border-red-400",children:e.jsxs("div",{className:"flex justify-between items-center font-bold text-lg text-red-800",children:[e.jsx("span",{children:"TOTAL LIABILITIES"}),e.jsx("span",{className:"font-mono",children:T(Me.totalLiabilities)})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded-lg p-5 border-2 border-blue-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-xl text-blue-800",children:"TOTAL EQUITY"}),e.jsx("div",{className:"text-sm text-blue-600",children:"(Total Assets  Total Liabilities)"})]}),e.jsx("span",{className:`font-mono text-2xl font-bold ${Me.totalEquity>=0?"text-blue-800":"text-red-600"}`,children:T(Me.totalEquity)})]})})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Key Ratios & Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Working Capital"}),e.jsx("span",{className:`font-mono font-semibold ${Me.workingCapital>=0?"text-green-600":"text-red-600"}`,children:T(Me.workingCapital)})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${Me.workingCapital>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Math.abs(Me.workingCapital)/(Me.currentAssetsTotal||1)*100,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:Me.currentRatio.toFixed(2)}),e.jsx("div",{className:"text-xs text-blue-600",children:"Current Ratio"})]}),e.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:Me.debtToEquity.toFixed(2)}),e.jsx("div",{className:"text-xs text-amber-600",children:"Debt to Equity"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[(Me.equityPercent*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-green-600",children:"Owner's Equity %"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-700",children:[(Me.debtToAssets*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-red-600",children:"Debt to Assets"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:["Per Unit Metrics (",(cx=te==null?void 0:te.units)==null?void 0:cx.toLocaleString()," total units)"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Working Capital/Unit"}),e.jsx("span",{className:`font-mono font-semibold ${Me.workingCapital>=0?"text-green-600":"text-red-600"}`,children:T(Me.workingCapital/((te==null?void 0:te.units)||1))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Assets/Unit"}),e.jsx("span",{className:"font-mono",children:T(Me.totalAssets/((te==null?void 0:te.units)||1))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Debt/Unit"}),e.jsx("span",{className:"font-mono text-red-600",children:T(Me.totalLiabilities/((te==null?void 0:te.units)||1))})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Annual Depreciation"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Machinery"}),e.jsxs("span",{className:"font-mono text-red-600",children:["(",T(Me.machineryDepreciation),")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vehicles"}),e.jsxs("span",{className:"font-mono text-red-600",children:["(",T(Me.vehicleDepreciation),")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Buildings"}),e.jsxs("span",{className:"font-mono text-red-600",children:["(",T(Me.buildingDepreciation),")"]})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"font-mono text-red-600",children:["(",T(Me.totalDepreciation),")"]})]})]})]}),(()=>{const s=At.sort((f,d)=>new Date(d.date)-new Date(f.date)),n=s.findIndex(f=>f.id===r.id),o=s[n+1],i=o?dt(o).totalEquity:0,h=o?Me.totalEquity-i:0,b=r.adjustment||0,x=h-b;return e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Earned Equity Analysis"}),e.jsx("div",{className:"space-y-2 text-sm",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Prior Year Equity (",new Date(o.date).getFullYear(),")"]}),e.jsx("span",{className:"font-mono",children:T(i)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Equity"}),e.jsx("span",{className:"font-mono",children:T(Me.totalEquity)})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[e.jsx("span",{children:"Equity Change"}),e.jsxs("span",{className:`font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:[h>=0?"+":"",T(h)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("span",{className:"text-gray-600",children:["Adjustment",e.jsx("div",{className:"text-xs text-gray-400",children:"(contributions, gifts, etc.)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:r.adjustment?r.adjustment.toLocaleString("en-US"):"",onChange:f=>{const d=parseFloat(f.target.value.replace(/,/g,""))||0;z({adjustment:d})},placeholder:"0",className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm text-right font-mono"})]})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t-2 border-green-500 pt-2 mt-2",children:[e.jsx("span",{className:"text-green-700",children:"Earned Equity"}),e.jsxs("span",{className:`font-mono ${x>=0?"text-green-700":"text-red-600"}`,children:[x>=0?"+":"",T(x)]})]})]}):e.jsx("div",{className:"text-gray-400 text-center py-2",children:"No prior year balance sheet for comparison"})})]})})()]})]})})]}),De==="trends"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5 text-green-600"}),"Historical Trends  ",te==null?void 0:te.name,Nt&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Consolidated"})]}),(()=>{var n;let s=[];return Nt?s=[...new Set(At.map(i=>new Date(i.date).getFullYear()))].sort((i,h)=>h-i).slice(0,5).map(i=>{const h=Vl(At,i);return h?{...h,year:i}:null}).filter(Boolean):s=nr.sort((o,i)=>new Date(i.date)-new Date(o.date)).slice(0,5),s.length<2?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(bt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Need at least 2 balance sheets to show trends."}),e.jsx("p",{className:"text-sm mt-1",children:Nt?"Create balance sheets for at least 2 different years to see consolidated trends.":"Create another balance sheet to see historical comparisons."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-3 font-semibold text-gray-700 sticky left-0 bg-white",children:"Metric"}),s.map((o,i)=>{var h;return e.jsxs("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 min-w-[120px]",children:[Nt?o.year:new Date(o.date).getFullYear(),e.jsx("div",{className:"text-xs font-normal text-gray-400",children:Nt?`${((h=o.entitiesIncluded)==null?void 0:h.length)||0} entities`:pa(o.date)})]},o.id||i)}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 min-w-[100px]",children:"Change"})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"bg-green-50",children:e.jsx("td",{colSpan:s.length+2,className:"py-2 px-2 font-semibold text-green-800",children:"ASSETS"})}),[{label:"Current Assets",key:"currentAssetsTotal",color:"blue"},{label:"Intermediate Assets",key:"intermediateAssetsTotal",color:"amber"},{label:"Long-Term Assets",key:"longTermAssetsTotal",color:"purple"},{label:"Total Assets",key:"totalAssets",color:"green",bold:!0}].map(o=>{const i=s.map(x=>dt(x)[o.key]),h=i.length>=2?i[0]-i[1]:0,b=i.length>=2&&i[1]!==0?(i[0]-i[1])/i[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${o.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-2 sticky left-0 bg-white ${o.bold?"bg-gray-50":""}`,children:e.jsx("span",{className:o.bold?"":"pl-4",children:o.label})}),s.map((x,f)=>e.jsx("td",{className:"text-right py-2 px-4 font-mono",children:T(dt(x)[o.key])},x.id||f)),e.jsxs("td",{className:`text-right py-2 px-4 font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:[h>=0?"+":"",T(h),e.jsxs("div",{className:"text-xs",children:["(",b>=0?"+":"",b.toFixed(1),"%)"]})]})]},o.key)}),e.jsx("tr",{className:"bg-red-50",children:e.jsx("td",{colSpan:s.length+2,className:"py-2 px-2 font-semibold text-red-800 mt-2",children:"LIABILITIES"})}),[{label:"Current Liabilities",key:"currentLiabilitiesTotal"},{label:"Term Debt",key:"termDebtTotal"},{label:"Total Liabilities",key:"totalLiabilities",bold:!0}].map(o=>{const i=s.map(x=>dt(x)[o.key]),h=i.length>=2?i[0]-i[1]:0,b=i.length>=2&&i[1]!==0?(i[0]-i[1])/i[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${o.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-2 sticky left-0 bg-white ${o.bold?"bg-gray-50":""}`,children:e.jsx("span",{className:o.bold?"":"pl-4",children:o.label})}),s.map((x,f)=>e.jsx("td",{className:"text-right py-2 px-4 font-mono",children:T(dt(x)[o.key])},x.id||f)),e.jsxs("td",{className:`text-right py-2 px-4 font-mono ${h<=0?"text-green-600":"text-red-600"}`,children:[h>=0?"+":"",T(h),e.jsxs("div",{className:"text-xs",children:["(",b>=0?"+":"",b.toFixed(1),"%)"]})]})]},o.key)}),e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:s.length+2,className:"py-2 px-2 font-semibold text-blue-800 mt-2",children:"EQUITY & WORKING CAPITAL"})}),[{label:"Total Equity",key:"totalEquity",bold:!0},{label:"Working Capital",key:"workingCapital",bold:!0}].map(o=>{const i=s.map(x=>dt(x)[o.key]),h=i.length>=2?i[0]-i[1]:0,b=i.length>=2&&i[1]!==0?(i[0]-i[1])/i[1]*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${o.bold?"bg-gray-50 font-semibold":""}`,children:[e.jsx("td",{className:`py-2 sticky left-0 bg-white ${o.bold?"bg-gray-50":""}`,children:o.label}),s.map((x,f)=>e.jsx("td",{className:`text-right py-2 px-4 font-mono ${dt(x)[o.key]<0?"text-red-600":""}`,children:T(dt(x)[o.key])},x.id||f)),e.jsxs("td",{className:`text-right py-2 px-4 font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:[h>=0?"+":"",T(h),e.jsxs("div",{className:"text-xs",children:["(",b>=0?"+":"",b.toFixed(1),"%)"]})]})]},o.key)}),(()=>{const o=s.map(i=>dt(i).totalEquity);return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-100 bg-blue-50",children:[e.jsx("td",{className:"py-2 sticky left-0 bg-blue-50 font-semibold text-blue-800",children:"Equity Change (YoY)"}),s.map((i,h)=>{const b=o[h],x=o[h+1]||0,f=h<s.length-1?b-x:0;return e.jsx("td",{className:`text-right py-2 px-4 font-mono font-semibold ${f>=0?"text-green-600":"text-red-600"}`,children:h<s.length-1?e.jsxs(e.Fragment,{children:[f>=0?"+":"",T(f)]}):""},i.id||h)}),e.jsx("td",{className:"text-right py-2 px-4 font-mono",children:""})]}),e.jsxs("tr",{className:"border-b border-gray-100 bg-amber-50",children:[e.jsxs("td",{className:"py-2 sticky left-0 bg-amber-50 font-medium text-amber-800",children:["Adjustment",e.jsx("div",{className:"text-xs font-normal text-amber-600",children:"(Capital contributions, gifts, etc.)"})]}),s.map((i,h)=>e.jsx("td",{className:"text-right py-2 px-2",children:Nt?e.jsxs("span",{className:"font-mono text-gray-500",children:["$",(i.adjustment||0).toLocaleString("en-US",{minimumFractionDigits:0})]}):e.jsxs("div",{className:"flex items-center justify-end",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",defaultValue:i.adjustment?i.adjustment.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):"",onBlur:b=>{const x=parseFloat(b.target.value.replace(/,/g,""))||0;Z(f=>({...f,[ze]:f[ze].map(d=>d.id===i.id?{...d,adjustment:x}:d)}))},placeholder:"0",className:"w-24 px-2 py-1 border border-amber-300 rounded text-sm text-right font-mono bg-white"})]})},i.id||h)),e.jsx("td",{className:"text-right py-2 px-4 font-mono text-gray-400",children:""})]}),e.jsxs("tr",{className:"border-b-2 border-green-300 bg-green-50",children:[e.jsxs("td",{className:"py-2 sticky left-0 bg-green-50 font-bold text-green-800",children:["Earned Equity",e.jsx("div",{className:"text-xs font-normal text-green-600",children:"(Equity Change  Adjustment)"})]}),s.map((i,h)=>{const b=o[h],x=o[h+1]||0,f=h<s.length-1?b-x:0,d=i.adjustment||0,u=f-d;return e.jsx("td",{className:`text-right py-2 px-4 font-mono font-bold ${u>=0?"text-green-700":"text-red-600"}`,children:h<s.length-1?e.jsxs(e.Fragment,{children:[u>=0?"+":"",T(u)]}):""},i.id||h)}),e.jsx("td",{className:"text-right py-2 px-4 font-mono",children:""})]})]})})()]})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Key Ratios Trend"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-3 font-semibold text-gray-700",children:"Ratio"}),s.map((o,i)=>e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 min-w-[100px]",children:Nt?o.year:new Date(o.date).getFullYear()},o.id||i)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Change"})]})}),e.jsx("tbody",{children:[{label:"Current Ratio",key:"currentRatio",format:"ratio",goodUp:!0},{label:"Debt to Equity",key:"debtToEquity",format:"ratio",goodUp:!1},{label:"Owner's Equity %",key:"equityPercent",format:"percent",goodUp:!0},{label:"Debt to Assets %",key:"debtToAssets",format:"percent",goodUp:!1}].map(o=>{const i=s.map(x=>dt(x)[o.key]),h=i.length>=2?i[0]-i[1]:0,b=o.goodUp?h>=0:h<=0;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3",children:o.label}),s.map((x,f)=>{const d=dt(x)[o.key];return e.jsx("td",{className:"text-right py-3 px-4 font-mono",children:o.format==="percent"?`${(d*100).toFixed(1)}%`:d.toFixed(2)},x.id||f)}),e.jsxs("td",{className:`text-right py-3 px-4 font-mono ${b?"text-green-600":"text-red-600"}`,children:[h>=0?"+":"",o.format==="percent"?`${(h*100).toFixed(1)}%`:h.toFixed(2)]})]},o.key)})})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4",children:["Per Unit Metrics (",(n=te==null?void 0:te.units)==null?void 0:n.toLocaleString()," units)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-3 font-semibold text-gray-700",children:"Metric"}),s.map((o,i)=>e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 min-w-[100px]",children:Nt?o.year:new Date(o.date).getFullYear()},o.id||i)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Change"})]})}),e.jsx("tbody",{children:[{label:"Working Capital / Unit",key:"workingCapital",goodUp:!0},{label:"Total Assets / Unit",key:"totalAssets",goodUp:!0},{label:"Total Debt / Unit",key:"totalLiabilities",goodUp:!1},{label:"Equity / Unit",key:"totalEquity",goodUp:!0}].map(o=>{const i=(te==null?void 0:te.units)||1,h=s.map(f=>dt(f)[o.key]/i),b=h.length>=2?h[0]-h[1]:0,x=o.goodUp?b>=0:b<=0;return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3",children:o.label}),s.map((f,d)=>{const u=dt(f)[o.key]/i;return e.jsx("td",{className:`text-right py-3 px-4 font-mono ${u<0?"text-red-600":""}`,children:T(u)},f.id||d)}),e.jsxs("td",{className:`text-right py-3 px-4 font-mono ${x?"text-green-600":"text-red-600"}`,children:[b>=0?"+":"",T(b)]})]},o.key)})})]})})]})]})})()]})}),De==="current"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(oc,{className:"w-5 h-5 text-blue-600"}),"Current Assets",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(Convert to cash within 1 year)"})]}),e.jsx(Wn,{title:"Cash",icon:vt,color:"blue",items:r.currentAssets.cash,onUpdate:s=>$s("cash",s),onAdd:()=>Ar("cash"),onDelete:s=>dr("cash",s)}),e.jsx(Wn,{title:"Accounts Receivable",icon:Ge,color:"blue",items:r.currentAssets.accountsReceivable,onUpdate:s=>$s("accountsReceivable",s),onAdd:()=>Ar("accountsReceivable"),onDelete:s=>dr("accountsReceivable",s)}),e.jsx(Wn,{title:"Commodity Trading Accounts",icon:lt,color:"blue",items:r.currentAssets.commodityAccounts,onUpdate:s=>$s("commodityAccounts",s),onAdd:()=>Ar("commodityAccounts"),onDelete:s=>dr("commodityAccounts",s)}),e.jsx(oj,{title:"Crop Inventory",icon:hr,color:"blue",items:r.currentAssets.cropInventory,onUpdate:s=>$s("cropInventory",s),onAdd:()=>Ar("cropInventory"),onDelete:s=>dr("cropInventory",s)}),e.jsx(ij,{title:"Feed Inventory",icon:hr,color:"blue",items:r.currentAssets.feedInventory,onUpdate:s=>$s("feedInventory",s),onAdd:()=>Ar("feedInventory"),onDelete:s=>dr("feedInventory",s)}),e.jsx(cj,{title:"Market Livestock",icon:dc,color:"blue",items:r.currentAssets.marketLivestock,onUpdate:s=>$s("marketLivestock",s),onAdd:()=>Ar("marketLivestock"),onDelete:s=>dr("marketLivestock",s)}),e.jsxs(ks,{title:"Investment in Growing Crop",icon:hr,color:"blue",total:((dx=r.currentAssets.growingCrop)==null?void 0:dx.reduce((s,n)=>s+(n.totalValue||0),0))||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium text-right w-28",children:"Acres"}),e.jsx("th",{className:"pb-2 font-medium text-right w-28",children:"$/Acre"}),e.jsx("th",{className:"pb-2 font-medium text-right w-32",children:"Total Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(xx=r.currentAssets.growingCrop)==null?void 0:xx.map(s=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.description||"",onChange:n=>{const o={...s,description:n.target.value};$s("growingCrop",o)},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Crop description"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.acres?s.acres.toLocaleString("en-US"):"",onChange:n=>{const o=parseFloat(n.target.value.replace(/,/g,""))||0,i=o*(s.pricePerAcre||0),h={...s,acres:o,totalValue:i};$s("growingCrop",h)},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.pricePerAcre?s.pricePerAcre.toLocaleString("en-US",{minimumFractionDigits:2}):"",onChange:n=>{const o=parseFloat(n.target.value.replace(/,/g,""))||0,i=(s.acres||0)*o,h={...s,pricePerAcre:o,totalValue:i};$s("growingCrop",h)},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsxs("td",{className:"py-2 text-right font-mono font-semibold text-green-700",children:["$",(s.totalValue||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>dr("growingCrop",s.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-2",children:"Total"}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((mx=r.currentAssets.growingCrop)==null?void 0:mx.reduce((s,n)=>s+(n.acres||0),0))||0).toLocaleString("en-US")}),e.jsx("td",{className:"py-2"}),e.jsxs("td",{className:"py-2 text-right font-mono text-green-700",children:["$",(((ux=r.currentAssets.growingCrop)==null?void 0:ux.reduce((s,n)=>s+(n.totalValue||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{})]})})]}),e.jsxs("button",{onClick:()=>{const s={id:`gc-${Date.now()}`,description:"",acres:0,pricePerAcre:0,totalValue:0},n=[...r.currentAssets.growingCrop||[],s];z({currentAssets:{...r.currentAssets,growingCrop:n}})},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Crop"]})]}),e.jsx(Wn,{title:"Prepaid Expenses",icon:Ge,color:"blue",items:r.currentAssets.prepaidExpenses,onUpdate:s=>$s("prepaidExpenses",s),onAdd:()=>Ar("prepaidExpenses"),onDelete:s=>dr("prepaidExpenses",s)}),e.jsx(Wn,{title:"Other Current Assets",icon:Ge,color:"blue",items:r.currentAssets.otherCurrentAssets,onUpdate:s=>$s("otherCurrentAssets",s),onAdd:()=>Ar("otherCurrentAssets"),onDelete:s=>dr("otherCurrentAssets",s)}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-blue-800",children:"Total Current Assets"}),e.jsx("span",{className:"text-xl font-bold font-mono text-blue-700",children:T(Me.currentAssetsTotal)})]})]}),De==="intermediate"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-amber-600"}),"Intermediate Assets",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(1-10 year useful life)"})]}),e.jsx(mc,{title:"Machinery & Equipment",icon:Ps,color:"amber",items:((hx=r.intermediateAssets)==null?void 0:hx.machinery)||[],onUpdate:s=>Gs("machinery",s),onAdd:()=>Fi("machinery"),onDelete:s=>Pi("machinery",s),purchases:((px=r.capitalActivity)==null?void 0:px.machineryPurchases)||[],sales:((gx=r.capitalActivity)==null?void 0:gx.machinerySales)||[],onAddPurchase:()=>Li("machinery"),onUpdatePurchase:s=>Ra("machineryPurchases",s),onDeletePurchase:s=>Di("machinery",s),onAddSale:()=>Ti("machinery"),onUpdateSale:s=>Ra("machinerySales",s),onDeleteSale:s=>Si("machinery",s),onAddAssetFromPurchase:s=>Ei("machinery",s)}),e.jsx(mc,{title:"Vehicles",icon:bo,color:"amber",items:((bx=r.intermediateAssets)==null?void 0:bx.vehicles)||[],onUpdate:s=>Gs("vehicles",s),onAdd:()=>Fi("vehicles"),onDelete:s=>Pi("vehicles",s),purchases:((yx=r.capitalActivity)==null?void 0:yx.vehiclePurchases)||[],sales:((fx=r.capitalActivity)==null?void 0:fx.vehicleSales)||[],onAddPurchase:()=>Li("vehicle"),onUpdatePurchase:s=>Ra("vehiclePurchases",s),onDeletePurchase:s=>Di("vehicle",s),onAddSale:()=>Ti("vehicle"),onUpdateSale:s=>Ra("vehicleSales",s),onDeleteSale:s=>Si("vehicle",s),onAddAssetFromPurchase:s=>Ei("vehicle",s)}),e.jsxs(ks,{title:"Breeding Livestock",icon:dc,color:"amber",total:((Nx=(jx=r.intermediateAssets)==null?void 0:jx.breedingLivestock)==null?void 0:Nx.reduce((s,n)=>s+(n.totalValue||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Type"}),e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-center",children:"Age"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Qty"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"$/Head"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Last Value"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Cur Value"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Change"}),e.jsx("th",{className:"pb-2 font-medium w-20 text-center",children:"Bought/Sold"}),e.jsx("th",{className:"pb-2 font-medium w-16 text-center",children:"Year"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(wx=(vx=r.intermediateAssets)==null?void 0:vx.breedingLivestock)==null?void 0:wx.map(s=>((s.quantity||0)*(s.valuePerHead||0)-(s.lastValue||0),e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:s.type||"Cows",onChange:o=>Gs("breedingLivestock",{...s,type:o.target.value}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"Cows",children:"Cows"}),e.jsx("option",{value:"Bulls",children:"Bulls"}),e.jsx("option",{value:"Heifers",children:"Heifers"}),e.jsx("option",{value:"Calves",children:"Calves"}),e.jsx("option",{value:"Sows",children:"Sows"}),e.jsx("option",{value:"Boars",children:"Boars"}),e.jsx("option",{value:"Ewes",children:"Ewes"}),e.jsx("option",{value:"Rams",children:"Rams"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.description||"",onChange:o=>Gs("breedingLivestock",{...s,description:o.target.value}),placeholder:"e.g., Spring Cows",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.age||"",onChange:o=>Gs("breedingLivestock",{...s,age:o.target.value}),placeholder:"",className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-center"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.quantity?s.quantity.toLocaleString("en-US"):"",onChange:o=>{const i=parseInt(o.target.value.replace(/,/g,""))||0,h=s.valuePerHead||0;Gs("breedingLivestock",{...s,quantity:i,totalValue:i*h})},className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.valuePerHead?s.valuePerHead.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:o=>{const i=parseFloat(o.target.value.replace(/,/g,""))||0,h=s.quantity||0;Gs("breedingLivestock",{...s,valuePerHead:i,totalValue:h*i})},className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.lastValue?s.lastValue.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:o=>Gs("breedingLivestock",{...s,lastValue:parseFloat(o.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right bg-gray-50"})]})}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(s.totalValue||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})]}),e.jsxs("td",{className:`py-2 text-right font-mono ${(s.totalValue||0)-(s.lastValue||0)>=0?"text-green-600":"text-red-600"}`,children:[(s.totalValue||0)-(s.lastValue||0)>=0?"+":"","$",((s.totalValue||0)-(s.lastValue||0)).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})]}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:s.boughtSold||"",onChange:o=>Gs("breedingLivestock",{...s,boughtSold:o.target.value}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-center",children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Bought",children:"Bought"}),e.jsx("option",{value:"Sold",children:"Sold"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:s.yearBoughtSold||"",onChange:o=>Gs("breedingLivestock",{...s,yearBoughtSold:parseInt(o.target.value)||""}),placeholder:"YYYY",className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-center"})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>Pi("breedingLivestock",s.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id)))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-2 px-2",children:"Total"}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((Fx=(Cx=r.intermediateAssets)==null?void 0:Cx.breedingLivestock)==null?void 0:Fx.reduce((s,n)=>s+(n.quantity||0),0))||0).toLocaleString("en-US")}),e.jsx("td",{}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((kx=(Px=r.intermediateAssets)==null?void 0:Px.breedingLivestock)==null?void 0:kx.reduce((s,n)=>s+(n.lastValue||0),0))||0).toLocaleString("en-US")]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((Lx=(Ax=r.intermediateAssets)==null?void 0:Ax.breedingLivestock)==null?void 0:Lx.reduce((s,n)=>s+(n.totalValue||0),0))||0).toLocaleString("en-US")]}),e.jsxs("td",{className:`py-2 text-right font-mono ${(((Tx=(Dx=r.intermediateAssets)==null?void 0:Dx.breedingLivestock)==null?void 0:Tx.reduce((s,n)=>s+((n.totalValue||0)-(n.lastValue||0)),0))||0)>=0?"text-green-600":"text-red-600"}`,children:[(((Ex=(Sx=r.intermediateAssets)==null?void 0:Sx.breedingLivestock)==null?void 0:Ex.reduce((s,n)=>s+((n.totalValue||0)-(n.lastValue||0)),0))||0)>=0?"+":"","$",(((Ix=($x=r.intermediateAssets)==null?void 0:$x.breedingLivestock)==null?void 0:Ix.reduce((s,n)=>s+((n.totalValue||0)-(n.lastValue||0)),0))||0).toLocaleString("en-US")]}),e.jsx("td",{colSpan:"2"}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:()=>Fi("breedingLivestock"),className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Livestock"]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-amber-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-amber-800",children:"Total Intermediate Assets"}),e.jsx("span",{className:"text-xl font-bold font-mono text-amber-700",children:T(Me.intermediateAssetsTotal)})]})]})}),De==="longterm"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-purple-600"}),"Long-Term Assets",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(10+ year useful life)"})]}),e.jsxs(ks,{title:"Real Estate",icon:uo,color:"purple",total:((Mx=(Rx=r.longTermAssets)==null?void 0:Rx.realEstate)==null?void 0:Mx.reduce((s,n)=>s+(n.marketValue||n.value||0),0))||0,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium w-20",children:"PID"}),e.jsx("th",{className:"pb-2 font-medium",children:"Legal Description"}),e.jsx("th",{className:"pb-2 font-medium w-24",children:"County"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Total"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Irr"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Dry"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Other"}),e.jsx("th",{className:"pb-2 font-medium w-14 text-right",children:"Tillable"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Tax Value"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Ann Taxes"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-center",children:"Appr Date"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-right",children:"Appr $/Ac"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Market Value"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Ox=(Hx=r.longTermAssets)==null?void 0:Hx.realEstate)==null?void 0:Ox.map(s=>e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.pid||"",onChange:n=>qt("realEstate",{...s,pid:n.target.value}),placeholder:"PID",className:"w-full px-1 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.description||"",onChange:n=>qt("realEstate",{...s,description:n.target.value}),placeholder:"Legal description",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.county||"",onChange:n=>qt("realEstate",{...s,county:n.target.value}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.totalAcres?s.totalAcres.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:n=>qt("realEstate",{...s,totalAcres:parseFloat(n.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.irrAcres?s.irrAcres.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:n=>qt("realEstate",{...s,irrAcres:parseFloat(n.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.dryAcres?s.dryAcres.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:n=>qt("realEstate",{...s,dryAcres:parseFloat(n.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.otherAcres?s.otherAcres.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:n=>qt("realEstate",{...s,otherAcres:parseFloat(n.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})}),e.jsx("td",{className:"py-2 text-right font-mono text-gray-600 text-xs",children:((s.irrAcres||0)+(s.dryAcres||0)).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.taxValue?s.taxValue.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):"",onChange:n=>qt("realEstate",{...s,taxValue:parseFloat(n.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.annualTaxes?s.annualTaxes.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"",onChange:n=>qt("realEstate",{...s,annualTaxes:parseFloat(n.target.value.replace(/,/g,""))||0}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"date",value:s.appraisedDate||"",onChange:n=>qt("realEstate",{...s,appraisedDate:n.target.value}),className:"w-full px-1 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.appraisedPerAcre?s.appraisedPerAcre.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):"",onChange:n=>{const o=parseFloat(n.target.value.replace(/,/g,""))||0,i=s.totalAcres||0;qt("realEstate",{...s,appraisedPerAcre:o,marketValue:o*i})},className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.marketValue?s.marketValue.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):s.value?s.value.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):"",onChange:n=>{const o=parseFloat(n.target.value.replace(/,/g,""))||0;qt("realEstate",{...s,marketValue:o,value:o})},className:"w-full px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono bg-gray-50"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>Ai("realEstate",s.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-semibold bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"py-2 px-2",children:"Total"}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((Vx=(zx=r.longTermAssets)==null?void 0:zx.realEstate)==null?void 0:Vx.reduce((s,n)=>s+(n.totalAcres||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((Yx=(Ux=r.longTermAssets)==null?void 0:Ux.realEstate)==null?void 0:Yx.reduce((s,n)=>s+(n.irrAcres||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((_x=(Wx=r.longTermAssets)==null?void 0:Wx.realEstate)==null?void 0:_x.reduce((s,n)=>s+(n.dryAcres||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((Gx=(qx=r.longTermAssets)==null?void 0:qx.realEstate)==null?void 0:Gx.reduce((s,n)=>s+(n.otherAcres||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-2 text-right font-mono",children:(((Jx=(Kx=r.longTermAssets)==null?void 0:Kx.realEstate)==null?void 0:Jx.reduce((s,n)=>s+((n.irrAcres||0)+(n.dryAcres||0)),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((Zx=(Qx=r.longTermAssets)==null?void 0:Qx.realEstate)==null?void 0:Zx.reduce((s,n)=>s+(n.taxValue||0),0))||0).toLocaleString("en-US")]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((Bx=(Xx=r.longTermAssets)==null?void 0:Xx.realEstate)==null?void 0:Bx.reduce((s,n)=>s+(n.annualTaxes||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{}),e.jsx("td",{}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((tm=(em=r.longTermAssets)==null?void 0:em.realEstate)==null?void 0:tm.reduce((s,n)=>s+(n.marketValue||n.value||0),0))||0).toLocaleString("en-US")]}),e.jsx("td",{})]})})]})}),e.jsxs("button",{onClick:()=>ki("realEstate"),className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Real Estate"]}),(()=>{var u,j;const s=((u=r.longTermAssets)==null?void 0:u.realEstate)||[],o=(((j=r.debtService)==null?void 0:j.filter(g=>g.category==="realEstate"))||[]).reduce((g,m)=>g+(m.totalPayment||0),0),i=s.reduce((g,m)=>g+(m.annualTaxes||0),0),h=o+i,b=s.reduce((g,m)=>g+(m.totalAcres||0),0),x=s.reduce((g,m)=>g+((m.irrAcres||0)+(m.dryAcres||0)),0),f=b>0?h/b:0,d=x>0?h/x:0;return e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:"Cash Rent Equivalent Analysis"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Annual RE Debt Payments:"}),e.jsxs("span",{className:"font-mono",children:["$",o.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Annual Property Taxes:"}),e.jsxs("span",{className:"font-mono",children:["$",i.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm font-semibold border-t border-purple-200 pt-2",children:[e.jsx("span",{className:"text-purple-800",children:"Total Carrying Cost:"}),e.jsxs("span",{className:"font-mono text-purple-800",children:["$",h.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Owned Acres:"}),e.jsx("span",{className:"font-mono",children:b.toLocaleString("en-US",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tillable Acres:"}),e.jsx("span",{className:"font-mono",children:x.toLocaleString("en-US",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"border-t border-purple-200 pt-2 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[e.jsx("span",{className:"text-purple-800",children:"Cash Rent Equiv / Total Acre:"}),e.jsxs("span",{className:"font-mono text-purple-800",children:["$",f.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[e.jsx("span",{className:"text-purple-800",children:"Cash Rent Equiv / Tillable Acre:"}),e.jsxs("span",{className:"font-mono text-purple-800",children:["$",d.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]})]})]})})()]}),e.jsx(mc,{title:"Buildings & Improvements",icon:Jf,color:"purple",items:((sm=r.longTermAssets)==null?void 0:sm.buildings)||[],onUpdate:s=>qt("buildings",s),onAdd:()=>ki("buildings"),onDelete:s=>Ai("buildings",s),purchases:((rm=r.capitalActivity)==null?void 0:rm.buildingPurchases)||[],sales:((am=r.capitalActivity)==null?void 0:am.buildingSales)||[],onAddPurchase:()=>Li("building"),onUpdatePurchase:s=>Ra("buildingPurchases",s),onDeletePurchase:s=>Di("building",s),onAddSale:()=>Ti("building"),onUpdateSale:s=>Ra("buildingSales",s),onDeleteSale:s=>Si("building",s),onAddAssetFromPurchase:s=>Ei("building",s)}),e.jsxs(ks,{title:"Other Long-Term Assets",icon:Ua,color:"purple",total:((lm=(nm=r.longTermAssets)==null?void 0:nm.otherLongTerm)==null?void 0:lm.reduce((s,n)=>s+(n.currentValue||n.amount||0),0))||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Prior Year Value"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Current Value"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Change"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(im=(om=r.longTermAssets)==null?void 0:om.otherLongTerm)==null?void 0:im.map(s=>{const n=(s.currentValue||0)-(s.priorValue||0);return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.description||"",onChange:o=>qt("otherLongTerm",{...s,description:o.target.value}),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Description"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.priorValue?s.priorValue.toLocaleString("en-US",{minimumFractionDigits:2}):"",onChange:o=>{const i=parseFloat(o.target.value.replace(/,/g,""))||0;qt("otherLongTerm",{...s,priorValue:i})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:s.currentValue?s.currentValue.toLocaleString("en-US",{minimumFractionDigits:2}):s.amount?s.amount.toLocaleString("en-US",{minimumFractionDigits:2}):"",onChange:o=>{const i=parseFloat(o.target.value.replace(/,/g,""))||0;qt("otherLongTerm",{...s,currentValue:i,amount:i})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right"})]})}),e.jsxs("td",{className:`py-2 text-right font-mono font-semibold ${n>=0?"text-green-600":"text-red-600"}`,children:[n>=0?"":"(","$",Math.abs(n).toLocaleString("en-US",{minimumFractionDigits:2}),n>=0?"":")"]}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>Ai("otherLongTerm",s.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-50",children:[e.jsx("td",{className:"py-2",children:"Total"}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((dm=(cm=r.longTermAssets)==null?void 0:cm.otherLongTerm)==null?void 0:dm.reduce((s,n)=>s+(n.priorValue||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 text-right font-mono",children:["$",(((mm=(xm=r.longTermAssets)==null?void 0:xm.otherLongTerm)==null?void 0:mm.reduce((s,n)=>s+(n.currentValue||n.amount||0),0))||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{className:`py-2 text-right font-mono font-semibold ${(((hm=(um=r.longTermAssets)==null?void 0:um.otherLongTerm)==null?void 0:hm.reduce((s,n)=>s+(n.currentValue||n.amount||0),0))||0)-(((gm=(pm=r.longTermAssets)==null?void 0:pm.otherLongTerm)==null?void 0:gm.reduce((s,n)=>s+(n.priorValue||0),0))||0)>=0?"text-green-600":"text-red-600"}`,children:(()=>{var n,o,i,h;const s=(((o=(n=r.longTermAssets)==null?void 0:n.otherLongTerm)==null?void 0:o.reduce((b,x)=>b+(x.currentValue||x.amount||0),0))||0)-(((h=(i=r.longTermAssets)==null?void 0:i.otherLongTerm)==null?void 0:h.reduce((b,x)=>b+(x.priorValue||0),0))||0);return`${s>=0?"":"("}$${Math.abs(s).toLocaleString("en-US",{minimumFractionDigits:2})}${s>=0?"":")"}`})()}),e.jsx("td",{})]})})]}),e.jsxs("button",{onClick:()=>ki("otherLongTerm"),className:"mt-3 flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Item"]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-purple-800",children:"Total Long-Term Assets"}),e.jsx("span",{className:"text-xl font-bold font-mono text-purple-700",children:T(Me.longTermAssetsTotal)})]})]})}),De==="liabilities"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Current Liabilities"}),e.jsxs(ks,{title:"Accounts Payable",icon:mo,color:"red",total:Array.isArray((bm=r.currentLiabilities)==null?void 0:bm.accountsPayable)?r.currentLiabilities.accountsPayable.reduce((s,n)=>s+(n.amount||0),0):((ym=r.currentLiabilities)==null?void 0:ym.accountsPayable)||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Vendor"}),e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Amount"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Array.isArray((fm=r.currentLiabilities)==null?void 0:fm.accountsPayable)?r.currentLiabilities.accountsPayable:[]).map(s=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.vendor||"",onChange:n=>{const o=r.currentLiabilities.accountsPayable.map(i=>i.id===s.id?{...i,vendor:n.target.value}:i);z({currentLiabilities:{...r.currentLiabilities,accountsPayable:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Vendor name"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.description||"",onChange:n=>{const o=r.currentLiabilities.accountsPayable.map(i=>i.id===s.id?{...i,description:n.target.value}:i);z({currentLiabilities:{...r.currentLiabilities,accountsPayable:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Description"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:s.amount||0,onChange:n=>{const o=r.currentLiabilities.accountsPayable.map(i=>i.id===s.id?{...i,amount:n}:i);z({currentLiabilities:{...r.currentLiabilities,accountsPayable:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>{const n=r.currentLiabilities.accountsPayable.filter(o=>o.id!==s.id);z({currentLiabilities:{...r.currentLiabilities,accountsPayable:n}})},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id))})]}),e.jsxs("button",{onClick:()=>{var o;const s=Array.isArray((o=r.currentLiabilities)==null?void 0:o.accountsPayable)?r.currentLiabilities.accountsPayable:[],n={id:`ap-${Date.now()}`,vendor:"",description:"",amount:0};z({currentLiabilities:{...r.currentLiabilities,accountsPayable:[...s,n]}})},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Payable"]})]}),e.jsxs(ks,{title:"Outstanding Checks",icon:Ge,color:"red",total:Array.isArray((jm=r.currentLiabilities)==null?void 0:jm.outstandingChecks)?r.currentLiabilities.outstandingChecks.reduce((s,n)=>s+(n.amount||0),0):((Nm=r.currentLiabilities)==null?void 0:Nm.outstandingChecks)||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Vendor"}),e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-24 text-center",children:"Check #"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Amount"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Array.isArray((vm=r.currentLiabilities)==null?void 0:vm.outstandingChecks)?r.currentLiabilities.outstandingChecks:[]).map(s=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.vendor||"",onChange:n=>{const o=r.currentLiabilities.outstandingChecks.map(i=>i.id===s.id?{...i,vendor:n.target.value}:i);z({currentLiabilities:{...r.currentLiabilities,outstandingChecks:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Vendor name"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.description||"",onChange:n=>{const o=r.currentLiabilities.outstandingChecks.map(i=>i.id===s.id?{...i,description:n.target.value}:i);z({currentLiabilities:{...r.currentLiabilities,outstandingChecks:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Description"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.draftNumber||"",onChange:n=>{const o=r.currentLiabilities.outstandingChecks.map(i=>i.id===s.id?{...i,draftNumber:n.target.value}:i);z({currentLiabilities:{...r.currentLiabilities,outstandingChecks:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-center",placeholder:"Check #"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:s.amount||0,onChange:n=>{const o=r.currentLiabilities.outstandingChecks.map(i=>i.id===s.id?{...i,amount:n}:i);z({currentLiabilities:{...r.currentLiabilities,outstandingChecks:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>{const n=r.currentLiabilities.outstandingChecks.filter(o=>o.id!==s.id);z({currentLiabilities:{...r.currentLiabilities,outstandingChecks:n}})},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id))})]}),e.jsxs("button",{onClick:()=>{var o;const s=Array.isArray((o=r.currentLiabilities)==null?void 0:o.outstandingChecks)?r.currentLiabilities.outstandingChecks:[],n={id:`oc-${Date.now()}`,vendor:"",description:"",draftNumber:"",amount:0};z({currentLiabilities:{...r.currentLiabilities,outstandingChecks:[...s,n]}})},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Check"]})]}),e.jsxs(ks,{title:"Credit Card Debt",icon:mo,color:"red",total:Array.isArray((wm=r.currentLiabilities)==null?void 0:wm.creditCardDebt)?r.currentLiabilities.creditCardDebt.reduce((s,n)=>s+(n.amount||0),0):((Cm=r.currentLiabilities)==null?void 0:Cm.creditCardDebt)||0,children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Amount"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Array.isArray((Fm=r.currentLiabilities)==null?void 0:Fm.creditCardDebt)?r.currentLiabilities.creditCardDebt:[]).map(s=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.description||"",onChange:n=>{const o=r.currentLiabilities.creditCardDebt.map(i=>i.id===s.id?{...i,description:n.target.value}:i);z({currentLiabilities:{...r.currentLiabilities,creditCardDebt:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",placeholder:"Card Name/Description"})}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx(ie,{value:s.amount||0,onChange:n=>{const o=r.currentLiabilities.creditCardDebt.map(i=>i.id===s.id?{...i,amount:n}:i);z({currentLiabilities:{...r.currentLiabilities,creditCardDebt:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>{const n=r.currentLiabilities.creditCardDebt.filter(o=>o.id!==s.id);z({currentLiabilities:{...r.currentLiabilities,creditCardDebt:n}})},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id))})]}),e.jsxs("button",{onClick:()=>{var o;const s=Array.isArray((o=r.currentLiabilities)==null?void 0:o.creditCardDebt)?r.currentLiabilities.creditCardDebt:[],n={id:`cc-${Date.now()}`,description:"",amount:0};z({currentLiabilities:{...r.currentLiabilities,creditCardDebt:[...s,n]}})},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Card"]})]}),(()=>{const s=r.debtService||[],n=s.filter(i=>i.category!=="operating").reduce((i,h)=>i+(h.principalPayment||0),0),o=s.reduce((i,h)=>i+(h.accruedInterest||0),0);return e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Operating Line"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:r.currentLiabilities.operatingLine?r.currentLiabilities.operatingLine.toLocaleString("en-US",{minimumFractionDigits:2}):"",onChange:i=>{z({currentLiabilities:{...r.currentLiabilities,operatingLine:parseFloat(i.target.value.replace(/,/g,""))||0}})},className:"w-full px-3 py-2 border border-gray-200 rounded font-mono text-right"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600 block mb-1",children:["Current Portion Term Debt",e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(from Debt Service)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:n.toLocaleString("en-US",{minimumFractionDigits:2}),readOnly:!0,className:"w-full px-3 py-2 border border-blue-200 rounded font-mono text-right bg-blue-50 cursor-not-allowed",title:"Auto-calculated from Debt Service principal payments"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total principal payments from Debt Service tab"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600 block mb-1",children:["Accrued Interest",e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"(from Debt Service)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:o.toLocaleString("en-US",{minimumFractionDigits:2}),readOnly:!0,className:"w-full px-3 py-2 border border-blue-200 rounded font-mono text-right bg-blue-50 cursor-not-allowed",title:"Auto-calculated from Debt Service accrued interest"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total accrued interest from Debt Service tab"})]})]})})(),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-red-800",children:"Total Current Liabilities"}),e.jsx("span",{className:"text-xl font-bold font-mono text-red-700",children:T(Me.currentLiabilitiesTotal)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Term Debt (Non-Current Liabilities)"}),e.jsxs("table",{className:"w-full text-sm mb-4",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Description"}),e.jsx("th",{className:"pb-2 font-medium w-24",children:"Lender"}),e.jsx("th",{className:"pb-2 font-medium w-28",children:"Category"}),e.jsx("th",{className:"pb-2 font-medium w-32 text-right",children:"Principal"}),e.jsx("th",{className:"pb-2 font-medium w-28 text-right",children:"Annual Pmt"}),e.jsx("th",{className:"pb-2 w-10"})]})}),e.jsx("tbody",{children:(Pm=r.termDebt)==null?void 0:Pm.map(s=>e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.description||"",onChange:n=>{const o=r.termDebt.map(i=>i.id===s.id?{...i,description:n.target.value}:i);z({termDebt:o})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"text",value:s.lender||"",onChange:n=>{const o=r.termDebt.map(i=>i.id===s.id?{...i,lender:n.target.value}:i);z({termDebt:o})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2",children:e.jsxs("select",{value:s.category||"other",onChange:n=>{const o=r.termDebt.map(i=>i.id===s.id?{...i,category:n.target.value}:i);z({termDebt:o})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"equipment",children:"Equipment"}),e.jsx("option",{value:"vehicle",children:"Vehicle"}),e.jsx("option",{value:"realEstate",children:"Real Estate"}),e.jsx("option",{value:"livestock",children:"Livestock"}),e.jsx("option",{value:"personal",children:"Personal"}),e.jsx("option",{value:"other",children:"Other"})]})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:s.principal||0,onChange:n=>{const o=r.termDebt.map(i=>i.id===s.id?{...i,principal:parseFloat(n.target.value)||0}:i);z({termDebt:o})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsx("input",{type:"number",value:s.annualPayment||0,onChange:n=>{const o=r.termDebt.map(i=>i.id===s.id?{...i,annualPayment:parseFloat(n.target.value)||0}:i);z({termDebt:o})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>z({termDebt:r.termDebt.filter(n=>n.id!==s.id)}),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id))})]}),e.jsxs("button",{onClick:()=>{const s={id:`td-${Date.now()}`,description:"",lender:"",category:"other",principal:0,annualPayment:0};z({termDebt:[...r.termDebt||[],s]})},className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 mb-4",children:[e.jsx(Ke,{className:"w-4 h-4"})," Add Term Debt"]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-red-800",children:"Total Term Debt"}),e.jsx("span",{className:"text-xl font-bold font-mono text-red-700",children:T(Me.termDebtTotal)})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Total Liabilities"}),e.jsx("span",{className:"font-bold font-mono text-red-600",children:T(Me.totalLiabilities)})]}),e.jsxs("div",{className:"flex justify-between text-xl border-t pt-3",children:[e.jsx("span",{className:"font-bold text-gray-800",children:"Total Equity"}),e.jsx("span",{className:"font-bold font-mono text-blue-600",children:T(Me.totalEquity)})]})]})})]}),De==="debtservice"&&e.jsxs("div",{className:"space-y-6",children:[[{key:"operating",label:"Operating",color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-800",borderColor:"border-blue-300"},{key:"equipment",label:"Equipment",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-300"},{key:"vehicle",label:"Vehicle",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-300"},{key:"other",label:"Other",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-300"},{key:"realEstate",label:"Ag Real Estate",color:"green",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-300"},{key:"personal",label:"Personal",color:"gray",bgColor:"bg-gray-200",textColor:"text-gray-700",borderColor:"border-gray-400"}].map(s=>{var b;const n=((b=r.debtService)==null?void 0:b.filter(x=>x.category===s.key))||[],o={accruedInterest:n.reduce((x,f)=>x+(f.accruedInterest||0),0),principalAmount:n.reduce((x,f)=>x+(f.principalAmount||0),0),principalPayment:n.reduce((x,f)=>x+(f.principalPayment||0),0),interestPayment:n.reduce((x,f)=>x+(f.interestPayment||0),0),totalPayment:n.reduce((x,f)=>x+(f.totalPayment||0),0)},i=s.key==="operating"?n.reduce((x,f)=>x+(f.currentBalance||0),0):o.principalAmount,h=i>0?n.reduce((x,f)=>x+(f.interestRate||0)*(s.key==="operating"?f.currentBalance||0:f.principalAmount||0),0)/i:0;return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:`${s.bgColor} ${s.textColor} px-4 py-2 font-bold border-b ${s.borderColor}`,children:s.label}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${s.bgColor} ${s.textColor} border-b ${s.borderColor}`,children:[e.jsx("th",{className:"py-2 px-2 text-left font-semibold underline",style:{minWidth:"180px"},children:"Purpose"}),e.jsx("th",{className:"py-2 px-2 text-left font-semibold underline",style:{minWidth:"120px"},children:"Lender"}),e.jsx("th",{className:"py-2 px-2 text-left font-semibold underline",style:{minWidth:"120px"},children:"Entity"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-20",children:"Interest Rate"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-16",children:"Rate Type"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-16",children:"Am/Years"}),e.jsx("th",{className:"py-2 px-2 text-left font-semibold underline",style:{minWidth:"140px"},children:"Security"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-28",children:"Rate Maturity"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-28",children:"Maturity"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Accrued Interest"}),s.key==="operating"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-28",children:"LOC Commitment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-28",children:"Current Balance"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-16",children:"Usage"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-28",children:"Principal Amount"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Principal Payment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Interest Payment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Monthly Payment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-24",children:"Total Payment"}),e.jsx("th",{className:"py-2 px-2 text-right font-semibold underline w-28",children:"Non-Current Portion"})]}),e.jsx("th",{className:"py-2 px-1 w-8"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold underline w-20",children:"Docs"})]})}),e.jsxs("tbody",{children:[n.map(x=>{var f,d,u;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:x.description||"",onChange:j=>{const g=r.debtService.map(m=>m.id===x.id?{...m,description:j.target.value}:m);z({debtService:g})},className:"w-full px-2 py-1.5 border border-gray-200 rounded text-xs",style:{minWidth:"170px"}})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:x.lender||"",onChange:j=>{const g=r.debtService.map(m=>m.id===x.id?{...m,lender:j.target.value}:m);z({debtService:g})},className:"w-full px-2 py-1.5 border border-gray-200 rounded text-xs",style:{minWidth:"110px"}})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:x.entity||"",onChange:j=>{const g=r.debtService.map(m=>m.id===x.id?{...m,entity:j.target.value}:m);z({debtService:g})},className:"w-full px-2 py-1.5 border border-gray-200 rounded text-xs",style:{minWidth:"110px"}})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:x.interestRate!==void 0&&x.interestRate!==null?x.interestRate:"",onChange:j=>{const g=j.target.value;if(g===""||/^[0-9]*\.?[0-9]*$/.test(g)){const m=r.debtService.map(p=>p.id===x.id?{...p,interestRate:g===""?0:g.endsWith(".")?g:parseFloat(g)||0}:p);z({debtService:m})}},onBlur:j=>{const g=parseFloat(j.target.value)||0,m=r.debtService.map(p=>p.id===x.id?{...p,interestRate:g}:p);z({debtService:m})},className:"w-16 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("select",{value:x.rateType==="V"||x.rateType==="Variable"?"Variable":x.rateType==="F"||x.rateType==="IFR"?"IFR":"Fixed",onChange:j=>{const g=j.target.value,m=r.debtService.map(p=>p.id===x.id?{...p,rateType:g}:p);z({debtService:m})},className:"w-full px-1 py-1.5 border border-gray-200 rounded text-xs",children:[e.jsx("option",{value:"Fixed",children:"Fixed"}),e.jsx("option",{value:"Variable",children:"Variable"}),e.jsx("option",{value:"IFR",children:"IFR"})]}),(x.rateType==="IFR"||x.rateType==="F")&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"text",value:x.ifrPeriod||"",onChange:j=>{const g=j.target.value.replace(/[^0-9]/g,""),m=r.debtService.map(p=>p.id===x.id?{...p,ifrPeriod:g}:p);z({debtService:m})},placeholder:"Yrs",className:"w-12 px-1 py-1 border border-blue-300 rounded text-xs text-center bg-blue-50",title:"Number of years rate is fixed"}),e.jsx("span",{className:"text-[10px] text-gray-500",children:"yr fixed"})]})]})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:x.amYears||"",onChange:j=>{const g=j.target.value.replace(/[^0-9]/g,""),m=r.debtService.map(p=>p.id===x.id?{...p,amYears:parseInt(g)||0}:p);z({debtService:m})},className:"w-14 px-2 py-1.5 border border-gray-200 rounded text-xs text-center"})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"text",value:x.security||"",onChange:j=>{const g=r.debtService.map(m=>m.id===x.id?{...m,security:j.target.value}:m);z({debtService:g})},className:"w-full px-2 py-1.5 border border-gray-200 rounded text-xs",style:{minWidth:"130px"}})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"date",value:x.rateMaturity||"",onChange:j=>{const g=r.debtService.map(m=>m.id===x.id?{...m,rateMaturity:j.target.value}:m);z({debtService:g})},className:"w-28 px-1 py-1.5 border border-gray-200 rounded text-xs"})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("input",{type:"date",value:x.maturity||"",onChange:j=>{const g=r.debtService.map(m=>m.id===x.id?{...m,maturity:j.target.value}:m);z({debtService:g})},className:"w-28 px-1 py-1.5 border border-gray-200 rounded text-xs"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:x.accruedInterest?x.accruedInterest.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:j=>{const g=parseFloat(j.target.value.replace(/,/g,""))||0,m=r.debtService.map(p=>p.id===x.id?{...p,accruedInterest:g}:p);z({debtService:m}),j.target.value=g.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-24 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),s.key==="operating"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:x.locCommitment?x.locCommitment.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:j=>{const g=parseFloat(j.target.value.replace(/,/g,""))||0,m=r.debtService.map(p=>p.id===x.id?{...p,locCommitment:g}:p);z({debtService:m}),j.target.value=g.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-28 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:x.currentBalance?x.currentBalance.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:j=>{const g=parseFloat(j.target.value.replace(/,/g,""))||0,m=r.debtService.map(p=>p.id===x.id?{...p,currentBalance:g}:p);z({debtService:m}),j.target.value=g.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-28 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono bg-gray-50",children:x.locCommitment>0?((x.currentBalance||0)/x.locCommitment*100).toFixed(1)+"%":"0.0%"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:x.principalAmount?x.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:j=>{const g=parseFloat(j.target.value.replace(/,/g,""))||0,m=r.debtService.map(p=>p.id===x.id?{...p,principalAmount:g}:p);z({debtService:m}),j.target.value=g.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-28 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:x.principalPayment?x.principalPayment.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:j=>{const g=parseFloat(j.target.value.replace(/,/g,""))||0,m=r.debtService.map(p=>p.id===x.id?{...p,principalPayment:g,totalPayment:g+(p.interestPayment||0)}:p);z({debtService:m}),j.target.value=g.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-24 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:x.interestPayment?x.interestPayment.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:j=>{const g=parseFloat(j.target.value.replace(/,/g,""))||0,m=r.debtService.map(p=>p.id===x.id?{...p,interestPayment:g,totalPayment:(p.principalPayment||0)+g}:p);z({debtService:m}),j.target.value=g.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-24 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsx("td",{className:"py-1 px-2 text-right font-mono",children:e.jsx("input",{type:"text",defaultValue:x.monthlyPayment?x.monthlyPayment.toLocaleString("en-US",{minimumFractionDigits:2}):"",onBlur:j=>{const g=parseFloat(j.target.value.replace(/,/g,""))||0,m=r.debtService.map(p=>p.id===x.id?{...p,monthlyPayment:g}:p);z({debtService:m}),j.target.value=g.toLocaleString("en-US",{minimumFractionDigits:2})},className:"w-24 px-2 py-1.5 border border-gray-200 rounded text-xs text-right"})}),e.jsxs("td",{className:"py-1 px-2 text-right font-mono bg-gray-50",children:["$",(x.totalPayment||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-1 px-2 text-right font-mono bg-gray-50",children:["$",((x.principalAmount||0)-(x.principalPayment||0)).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx("td",{className:"py-1 px-1",children:e.jsx("button",{onClick:()=>{const j=r.debtService.filter(g=>g.id!==x.id);z({debtService:j})},className:"p-0.5 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-3 h-3"})})}),e.jsx("td",{className:"py-1 px-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[((f=x.attachments)==null?void 0:f.length)>0&&e.jsx("span",{className:"bg-blue-100 text-blue-700 text-[10px] px-1.5 py-0.5 rounded-full font-medium",children:x.attachments.length}),e.jsx("button",{onClick:()=>{xe({open:!0,debtId:x.id,attachments:x.attachments||[]})},className:`p-1 rounded hover:bg-gray-100 ${((d=x.attachments)==null?void 0:d.length)>0?"text-blue-600":"text-gray-400"}`,title:((u=x.attachments)==null?void 0:u.length)>0?`${x.attachments.length} attachment(s)`:"Add attachments",children:e.jsx(po,{className:"w-3.5 h-3.5"})})]})})]},x.id)}),e.jsx("tr",{children:e.jsx("td",{colSpan:"18",className:"py-1 px-2",children:e.jsxs("button",{onClick:()=>{const x={id:`ds-${Date.now()}`,description:"",lender:"",entity:(te==null?void 0:te.name)||"",interestRate:0,rateType:"Fixed",amYears:0,security:"",rateMaturity:"",maturity:"",accruedInterest:0,principalAmount:0,locCommitment:0,currentBalance:0,principalPayment:0,interestPayment:0,monthlyPayment:0,totalPayment:0,category:s.key,attachments:[]};z({debtService:[...r.debtService||[],x]})},className:"text-xs text-blue-600 hover:text-blue-800",children:["+ Add ",s.label," ",s.key==="operating"?"LOC":"Loan"]})})})]}),n.length>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:`${s.bgColor} font-semibold border-t-2 ${s.borderColor}`,children:[e.jsx("td",{colSpan:"3",className:"py-2 px-2"}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:[h.toFixed(2),"%"]}),e.jsx("td",{colSpan:"5"}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",o.accruedInterest.toLocaleString("en-US",{minimumFractionDigits:2})]}),s.key==="operating"?e.jsxs(e.Fragment,{children:[e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",n.reduce((x,f)=>x+(f.locCommitment||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",n.reduce((x,f)=>x+(f.currentBalance||0),0).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{className:"py-2 px-2 text-right font-mono",children:(()=>{const x=n.reduce((d,u)=>d+(u.locCommitment||0),0),f=n.reduce((d,u)=>d+(u.currentBalance||0),0);return x>0?(f/x*100).toFixed(1)+"%":"0.0%"})()})]}):e.jsxs(e.Fragment,{children:[e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",o.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",o.principalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",o.interestPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("td",{className:"py-2 px-2 text-right font-mono",children:"$0.00"}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",o.totalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono",children:["$",(o.principalAmount-o.principalPayment).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx("td",{}),e.jsx("td",{})]})})]})})]},s.key)}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Debt Summary by Category"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Analysis Units:"}),e.jsx("input",{type:"text",value:r.analysisUnits||(te==null?void 0:te.units)||0,onChange:s=>{const n=parseFloat(s.target.value.replace(/,/g,""))||0;z({analysisUnits:n})},className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Owned Acres:"}),e.jsx("input",{type:"text",value:r.analysisOwnedAcres??(((Am=(km=r.longTermAssets)==null?void 0:km.realEstate)==null?void 0:Am.reduce((s,n)=>s+(n.totalAcres||0),0))||0),onChange:s=>{const n=parseFloat(s.target.value.replace(/,/g,""))||0;z({analysisOwnedAcres:n})},className:"w-24 px-2 py-1 border border-green-300 rounded text-sm text-right font-mono bg-green-50"})]})]})]}),(()=>{var f,d;const s=r.debtService||[],n=r.analysisUnits||(te==null?void 0:te.units)||1,o=((d=(f=r.longTermAssets)==null?void 0:f.realEstate)==null?void 0:d.reduce((u,j)=>u+(j.totalAcres||0),0))||0,i=r.analysisOwnedAcres??(o||1),b=[{key:"operating",label:"Operating",bgColor:"bg-blue-50",textColor:"text-blue-800",useOwnedAcres:!1},{key:"equipment",label:"Equipment",bgColor:"bg-yellow-50",textColor:"text-yellow-800",useOwnedAcres:!1},{key:"vehicle",label:"Vehicle",bgColor:"bg-yellow-50",textColor:"text-yellow-800",useOwnedAcres:!1},{key:"other",label:"Other Term",bgColor:"bg-orange-50",textColor:"text-orange-800",useOwnedAcres:!1},{key:"realEstate",label:"Ag Real Estate",bgColor:"bg-green-50",textColor:"text-green-800",useOwnedAcres:!0}].map(u=>{const j=s.filter(m=>m.category===u.key),g=u.useOwnedAcres?i||1:n;return u.key==="operating"?{...u,principalAmount:j.reduce((m,p)=>m+(p.currentBalance||0),0),totalPayment:0,principalPayment:0,interestPayment:0,unitsUsed:g,unitsLabel:"units"}:{...u,principalAmount:j.reduce((m,p)=>m+(p.principalAmount||0),0),totalPayment:j.reduce((m,p)=>m+(p.totalPayment||0),0),principalPayment:j.reduce((m,p)=>m+(p.principalPayment||0),0),interestPayment:j.reduce((m,p)=>m+(p.interestPayment||0),0),unitsUsed:g,unitsLabel:u.useOwnedAcres?"owned acres":"units"}}),x={principalAmount:b.reduce((u,j)=>u+j.principalAmount,0),totalPayment:b.reduce((u,j)=>u+j.totalPayment,0),principalPayment:b.reduce((u,j)=>u+j.principalPayment,0),interestPayment:b.reduce((u,j)=>u+j.interestPayment,0)};return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"py-2 text-left font-semibold w-40",children:"Category"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Principal Amount"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Total Payment"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Principal Payment"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Interest Payment"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Payment/Unit"})]})}),e.jsxs("tbody",{children:[b.map(u=>e.jsxs("tr",{className:`${u.bgColor} border-b border-gray-200`,children:[e.jsxs("td",{className:`py-2 px-2 font-semibold ${u.textColor}`,children:[u.label,u.useOwnedAcres&&e.jsxs("span",{className:"text-xs font-normal ml-1",children:["(",i.toLocaleString("en-US",{minimumFractionDigits:1})," ac)"]})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",u.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",u.totalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",u.principalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",u.interestPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono font-semibold",children:["$",(u.totalPayment/u.unitsUsed).toLocaleString("en-US",{minimumFractionDigits:2})]})]},u.key)),e.jsxs("tr",{className:"bg-red-100 border-t-2 border-red-300 font-bold",children:[e.jsx("td",{className:"py-3 px-2 text-red-800",children:"TOTAL AG DEBT"}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800",children:["$",x.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800",children:["$",x.totalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800",children:["$",x.principalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800",children:["$",x.interestPayment.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-red-800 text-lg",children:["$",(x.totalPayment/n).toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Payment Per Unit Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[b.filter(u=>u.totalPayment>0||u.key==="operating").map(u=>e.jsxs("div",{className:`${u.bgColor} p-3 rounded-lg text-center`,children:[e.jsx("div",{className:`text-xs ${u.textColor} font-medium mb-1`,children:u.label}),e.jsxs("div",{className:`text-lg font-bold font-mono ${u.textColor}`,children:["$",(u.totalPayment/u.unitsUsed).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["per ",u.useOwnedAcres?"owned acre":"unit"]})]},u.key)),e.jsxs("div",{className:"bg-red-100 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-red-800 font-medium mb-1",children:"Total Debt Service"}),e.jsxs("div",{className:"text-lg font-bold font-mono text-red-800",children:["$",(x.totalPayment/n).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["per unit (",n.toLocaleString()," units)"]})]})]}),i>0&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500 text-center",children:["Real Estate calculated on ",i.toLocaleString("en-US",{minimumFractionDigits:1})," owned acres | Other categories on ",n.toLocaleString()," analysis units"]})]}),(()=>{const u=s.filter(g=>g.category==="personal");if(u.length===0)return null;const j={principalAmount:u.reduce((g,m)=>g+(m.principalAmount||0),0),totalPayment:u.reduce((g,m)=>g+(m.totalPayment||0),0)};return e.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[e.jsx("span",{className:"text-sm",children:"Personal Debt (Excluded from Ag Totals)"}),e.jsxs("div",{className:"text-sm font-mono",children:["Principal: $",j.principalAmount.toLocaleString("en-US",{minimumFractionDigits:2})," | Payment: $",j.totalPayment.toLocaleString("en-US",{minimumFractionDigits:2})]})]})})})()]})})()]})]}),De==="loancalc"&&e.jsx("div",{className:"space-y-6",children:(()=>{const s={"real-estate":{label:"Farm Real Estate",icon:uo,color:"green",defaultTerm:25,defaultRate:7.25,unitLabel:"Acre",unitLabelPlural:"Acres"},machinery:{label:"Machinery & Equipment",icon:Ps,color:"amber",defaultTerm:7,defaultRate:8.5,unitLabel:"Unit",unitLabelPlural:"Units"},vehicles:{label:"Vehicles",icon:bo,color:"blue",defaultTerm:5,defaultRate:7.5,unitLabel:"Vehicle",unitLabelPlural:"Vehicles"},buildings:{label:"Buildings & Improvements",icon:hr,color:"purple",defaultTerm:15,defaultRate:7.75,unitLabel:"Sq Ft",unitLabelPlural:"Sq Ft"},livestock:{label:"Livestock",icon:dc,color:"rose",defaultTerm:5,defaultRate:8,unitLabel:"Head",unitLabelPlural:"Head"},personal:{label:"Personal / Other",icon:mo,color:"gray",defaultTerm:10,defaultRate:9,unitLabel:null,unitLabelPlural:null}},n=s[ee.loanType],o=n.icon,i=()=>{switch(ee.loanType){case"real-estate":return ee.acres*ee.pricePerAcre;case"livestock":return ee.headCount*ee.pricePerHead;default:return ee.purchasePrice}},h=()=>{switch(ee.loanType){case"real-estate":return ee.acres;case"livestock":return ee.headCount;default:return 1}},b=i(),x=ee.usePercentDown?b*(ee.downPaymentPercent/100):ee.downPaymentAmount,f=Math.max(0,b-x),d=h(),u=ee.paymentFrequency==="monthly"?12:1,j=ee.loanTerm*u,g=ee.interestRate/100/u,m=f>0&&g>0?f*(g*Math.pow(1+g,j))/(Math.pow(1+g,j)-1):0,p=m*u,C=()=>{const F=[];let v=f,S=0,E=0;const I=ee.startDate.split("-");let H=parseInt(I[0]),Y=parseInt(I[1])-1;for(let _=1;_<=j&&v>0;_++){const K=v*g;let re=m-K+ee.extraPayment/u;re>v&&(re=v);const he=K+re;v-=re,S+=K,E+=re;const U=new Date(H,Y);if(F.push({number:_,date:U,balance:Math.max(0,v),payment:he,principal:re,interest:K}),ee.paymentFrequency==="monthly"?(Y++,Y>11&&(Y=0,H++)):H++,v<=0)break}return{schedule:F,totalInterest:S,totalPrincipal:E,totalPayments:S+E}},{schedule:N,totalInterest:k,totalPrincipal:P,totalPayments:A}=C(),R=N.length>0?N[N.length-1].date:null,L=A>0?k/A*100:0,D=F=>{const v=s[F];pt(S=>({...S,loanType:F,loanTerm:v.defaultTerm,interestRate:v.defaultRate,showPerUnit:!1}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Select Loan Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Object.entries(s).map(([F,v])=>{const S=v.icon,E=ee.loanType===F,I={green:E?"bg-green-100 border-green-500 text-green-700":"hover:bg-green-50",amber:E?"bg-amber-100 border-amber-500 text-amber-700":"hover:bg-amber-50",blue:E?"bg-blue-100 border-blue-500 text-blue-700":"hover:bg-blue-50",purple:E?"bg-purple-100 border-purple-500 text-purple-700":"hover:bg-purple-50",rose:E?"bg-rose-100 border-rose-500 text-rose-700":"hover:bg-rose-50",gray:E?"bg-gray-200 border-gray-500 text-gray-700":"hover:bg-gray-50"};return e.jsxs("button",{onClick:()=>D(F),className:`p-3 rounded-lg border-2 transition-all flex flex-col items-center gap-2 ${E?I[v.color]:`border-gray-200 text-gray-600 ${I[v.color]}`}`,children:[e.jsx(S,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:v.label})]},F)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:ee.loanType==="real-estate"?"Farm / Parcel Name":ee.loanType==="machinery"?"Equipment Description":ee.loanType==="vehicles"?"Vehicle Description":ee.loanType==="buildings"?"Building / Improvement":ee.loanType==="livestock"?"Livestock Description":"Loan Description"}),e.jsx("input",{type:"text",value:ee.name,onChange:F=>pt({...ee,name:F.target.value}),placeholder:ee.loanType==="real-estate"?"e.g., North 160":ee.loanType==="machinery"?"e.g., John Deere 8R 310":ee.loanType==="vehicles"?"e.g., 2024 F-350":ee.loanType==="buildings"?"e.g., Machine Shed":ee.loanType==="livestock"?"e.g., Bred Heifers":"e.g., Operating Line",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lender Name (optional)"}),e.jsx("input",{type:"text",value:ee.lender,onChange:F=>pt({...ee,lender:F.target.value}),placeholder:"e.g., Farm Credit",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(o,{className:`w-5 h-5 text-${n.color}-600`}),n.label," Details"]}),ee.loanType==="real-estate"&&e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acres"}),e.jsx("input",{type:"number",value:ee.acres,onChange:F=>pt({...ee,acres:parseFloat(F.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Total land area"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Acre"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:ee.pricePerAcre.toLocaleString(),onChange:F=>pt({...ee,pricePerAcre:parseFloat(F.target.value.replace(/,/g,""))||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current market rate"})]})]}),ee.loanType==="livestock"&&e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Head Count"}),e.jsx("input",{type:"number",value:ee.headCount,onChange:F=>pt({...ee,headCount:parseInt(F.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Number of animals"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Head"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:ee.pricePerHead.toLocaleString(),onChange:F=>pt({...ee,pricePerHead:parseFloat(F.target.value.replace(/,/g,""))||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Average price per head"})]})]}),["machinery","vehicles","buildings","personal"].includes(ee.loanType)&&e.jsxs("div",{className:"max-w-md",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:ee.loanType==="personal"?"Loan Amount Needed":"Purchase Price"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:ee.purchasePrice.toLocaleString(),onChange:F=>pt({...ee,purchasePrice:parseFloat(F.target.value.replace(/,/g,""))||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono text-lg"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ee.loanType==="machinery"?"Total equipment cost":ee.loanType==="vehicles"?"Total vehicle cost":ee.loanType==="buildings"?"Total construction/improvement cost":"Total amount to borrow"})]}),ee.loanType!=="personal"&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Down Payment"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>pt({...ee,usePercentDown:!0}),className:`px-2 py-1 text-xs rounded ${ee.usePercentDown?"bg-green-600 text-white":"bg-gray-100 text-gray-600"}`,children:"%"}),e.jsx("button",{onClick:()=>pt({...ee,usePercentDown:!1}),className:`px-2 py-1 text-xs rounded ${ee.usePercentDown?"bg-gray-100 text-gray-600":"bg-green-600 text-white"}`,children:"$"}),e.jsx("span",{className:"text-sm font-semibold text-green-700 ml-2",children:ee.usePercentDown?`${ee.downPaymentPercent.toFixed(0)}%`:T(ee.downPaymentAmount)})]})]}),ee.usePercentDown?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"range",min:"0",max:"100",value:ee.downPaymentPercent,onChange:F=>pt({...ee,downPaymentPercent:parseFloat(F.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-600"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{className:"font-mono font-semibold text-green-700",children:T(x)}),e.jsx("span",{children:"100%"})]})]}):e.jsxs("div",{className:"flex items-center max-w-xs",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:ee.downPaymentAmount>0?ee.downPaymentAmount.toLocaleString():"",onChange:F=>pt({...ee,downPaymentAmount:parseFloat(F.target.value.replace(/,/g,""))||0}),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2 text-sm",children:[ee.loanType!=="personal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:ee.loanType==="real-estate"?`${ee.acres.toLocaleString()} acres  $${ee.pricePerAcre.toLocaleString()}/ac`:ee.loanType==="livestock"?`${ee.headCount.toLocaleString()} head  $${ee.pricePerHead.toLocaleString()}/hd`:"Purchase Price"}),e.jsx("span",{className:"font-mono",children:T(b)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Down Payment"}),e.jsx("span",{className:"font-mono",children:T(x)})]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-green-700",children:[e.jsx("span",{children:"Loan Amount"}),e.jsx("span",{className:"font-mono",children:T(f)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-blue-600"}),"Loan Terms"]}),e.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Loan Amount"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:T(f)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Interest Rate"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",step:"0.01",value:ee.interestRate,onChange:F=>pt({...ee,interestRate:parseFloat(F.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("span",{className:"text-gray-500 ml-1",children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loan Term"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>pt({...ee,loanTerm:Math.max(1,ee.loanTerm-1)}),className:"px-2 py-2 bg-gray-100 rounded hover:bg-gray-200",children:""}),e.jsx("input",{type:"number",value:ee.loanTerm,onChange:F=>pt({...ee,loanTerm:parseInt(F.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-center font-mono"}),e.jsx("button",{onClick:()=>pt({...ee,loanTerm:ee.loanTerm+1}),className:"px-2 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"+"}),e.jsx("span",{className:"text-gray-500 ml-1",children:"yrs"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Frequency"}),e.jsxs("select",{value:ee.paymentFrequency,onChange:F=>pt({...ee,paymentFrequency:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"annual",children:"Annual"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"month",value:ee.startDate,onChange:F=>pt({...ee,startDate:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Extra Annual Payment (optional)"}),e.jsxs("div",{className:"flex items-center max-w-xs",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),e.jsx("input",{type:"text",value:ee.extraPayment>0?ee.extraPayment.toLocaleString():"",onChange:F=>pt({...ee,extraPayment:parseFloat(F.target.value.replace(/,/g,""))||0}),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Additional principal payment each year"})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-green-200 bg-gradient-to-r from-green-50 to-blue-50 -mx-4 -mb-4 px-4 pb-4 rounded-b-lg",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("strong",{children:["Add to ",r?pa(r.date):""]})," balance sheet as"," ",e.jsxs("span",{className:"font-semibold text-green-700",children:[ee.loanType==="real-estate"?"Real Estate":ee.loanType==="machinery"?"Equipment":ee.loanType==="vehicles"?"Vehicle":ee.loanType==="buildings"?"Real Estate":ee.loanType==="livestock"?"Other":"Personal"," Debt"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[ee.name||"(enter description above)","  ",T(f)," principal  ",T(p),"/yr"]})]}),e.jsxs("button",{onClick:()=>{var U,V;if(!r){alert("Please select a balance sheet first");return}if(!ee.name.trim()){alert("Please enter a loan description/name");return}const v={"real-estate":"realEstate",machinery:"equipment",vehicles:"vehicle",buildings:"realEstate",livestock:"other",personal:"personal"}[ee.loanType],S=ee.startDate.split("-"),E=parseInt(S[0]),I=parseInt(S[1]),Y=`${E+ee.loanTerm}-${String(I).padStart(2,"0")}-01`,_=f*(ee.interestRate/100),K=p-_,re={id:`ds-new-${Date.now()}`,description:ee.name,lender:ee.lender||"TBD",entity:((V=(U=te==null?void 0:te.entities)==null?void 0:U.find(q=>q.id===Ne))==null?void 0:V.name)||(te==null?void 0:te.name)||"",interestRate:ee.interestRate,rateType:"Fixed",amYears:ee.loanTerm,security:ee.loanType==="real-estate"?`${ee.acres} Acres`:ee.loanType==="livestock"?`${ee.headCount} Head`:ee.name,rateMaturity:Y,maturity:Y,accruedInterest:0,principalAmount:f,principalPayment:Math.round(K*100)/100,interestPayment:Math.round(_*100)/100,monthlyPayment:ee.paymentFrequency==="monthly"?Math.round(m*100)/100:0,totalPayment:Math.round(p*100)/100,currentPortion:Math.round((f-K)*100)/100,category:v,loanDetails:{type:ee.loanType,purchasePrice:b,downPayment:x,acres:ee.loanType==="real-estate"?ee.acres:null,pricePerAcre:ee.loanType==="real-estate"?ee.pricePerAcre:null,headCount:ee.loanType==="livestock"?ee.headCount:null,pricePerHead:ee.loanType==="livestock"?ee.pricePerHead:null}};Z(q=>({...q,[ze]:q[ze].map(X=>X.id===de?{...X,debtService:[...X.debtService||[],re]}:X)})),window.confirm(` Loan added successfully!

"${ee.name}" has been added to your ${n.label} debt.

Principal: ${T(f)}
Annual Payment: ${T(p)}
Category: ${v}

Would you like to view the Debt Service tab now?`)&&it("debtservice"),pt(q=>({...q,name:"",lender:""}))},className:"flex items-center gap-2 bg-green-600 text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-green-700 transition-colors shadow-md",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add to Debt Schedule"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`bg-gradient-to-br from-${n.color}-700 to-${n.color}-800 rounded-lg shadow-lg p-6 text-white`,style:{background:`linear-gradient(to bottom right, ${n.color==="green"?"#15803d, #166534":n.color==="amber"?"#b45309, #92400e":n.color==="blue"?"#1d4ed8, #1e40af":n.color==="purple"?"#7e22ce, #6b21a8":n.color==="rose"?"#be123c, #9f1239":"#374151, #1f2937"})`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 opacity-80",children:[e.jsx(o,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:n.label})]}),e.jsxs("div",{className:"text-sm opacity-80 mb-1",children:[ee.paymentFrequency==="monthly"?"Monthly":"Annual"," Payment"]}),e.jsx("div",{className:"text-4xl font-bold font-mono mb-4",children:T(m)}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center border-t border-white/20 pt-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70",children:"Total Interest"}),e.jsx("div",{className:"font-semibold font-mono text-sm",children:T(k)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70",children:"Total Cost"}),e.jsx("div",{className:"font-semibold font-mono text-sm",children:T(A)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70",children:"Payoff Date"}),e.jsx("div",{className:"font-semibold text-sm",children:R?R.toLocaleDateString("en-US",{month:"short",year:"numeric"}):""})]})]}),e.jsxs("div",{className:"mt-4 text-sm opacity-80",children:[T(p),"/year  ",T(k)," total interest"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Scenario Analysis"}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-500",children:[e.jsx("th",{className:"text-left py-1",children:"Rate/Term"}),(ee.loanType==="real-estate"?[15,20,25,30]:ee.loanType==="buildings"?[10,15,20,25]:[3,5,7,10]).map(F=>e.jsxs("th",{className:"text-right py-1 px-2",children:[F,"yr"]},F))]})}),e.jsx("tbody",{children:(ee.loanType==="real-estate"?[5,6,7,8,9]:ee.loanType==="personal"?[7,8,9,10,11]:[6,7,8,9,10]).map(F=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsxs("td",{className:"py-1 text-gray-600",children:[F,"%"]}),(ee.loanType==="real-estate"?[15,20,25,30]:ee.loanType==="buildings"?[10,15,20,25]:[3,5,7,10]).map(v=>{const S=F/100,E=v,I=f>0?f*(S*Math.pow(1+S,E))/(Math.pow(1+S,E)-1):0,H=F===Math.round(ee.interestRate)&&v===ee.loanTerm;return e.jsxs("td",{className:`text-right py-1 px-2 font-mono ${H?"bg-green-100 font-semibold text-green-700 rounded":""}`,children:["$",Math.round(I).toLocaleString()]},v)})]},F))})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-2 text-center",children:"Annual payments shown"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Payment Breakdown"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded"}),"Principal"]}),e.jsx("span",{className:"font-mono",children:T(P)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-amber-500 rounded"}),"Interest"]}),e.jsx("span",{className:"font-mono",children:T(k)})]}),e.jsxs("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"bg-blue-500 h-full",style:{width:`${100-L}%`}}),e.jsx("div",{className:"bg-amber-500 h-full",style:{width:`${L}%`}})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Over the life of the loan, ",L.toFixed(1),"% goes to interest"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-green-600"}),"Amortization Schedule"]}),n.unitLabel&&d>1&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>pt({...ee,showPerUnit:!1}),className:`px-3 py-1 text-sm rounded ${ee.showPerUnit?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-green-600 text-white"}`,children:"Standard View"}),e.jsxs("button",{onClick:()=>pt({...ee,showPerUnit:!0}),className:`px-3 py-1 text-sm rounded ${ee.showPerUnit?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Per-",n.unitLabel," View"]})]})]}),e.jsx("div",{className:"overflow-x-auto max-h-[500px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-white",children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"#"}),e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Date"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Balance"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Payment"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Principal"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Interest"})]})}),e.jsx("tbody",{children:N.map((F,v)=>{const S=ee.showPerUnit&&d>1?d:1,E=ee.showPerUnit&&d>1?ee.loanType==="real-estate"?"/ac":ee.loanType==="livestock"?"/hd":"":"";return e.jsxs("tr",{className:`border-b border-gray-100 ${v%2===0?"bg-gray-50":""}`,children:[e.jsx("td",{className:"py-2 px-3 text-gray-600",children:F.number}),e.jsx("td",{className:"py-2 px-3",children:F.date.toLocaleDateString("en-US",{month:"short",year:"numeric"})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-gray-800",children:["$",(F.balance/S).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),E]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",(F.payment/S).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),E]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-blue-600",children:["$",(F.principal/S).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),E]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-amber-600",children:["$",(F.interest/S).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),E]})]},v)})}),e.jsx("tfoot",{className:"sticky bottom-0 bg-white",children:e.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-100",children:[e.jsx("td",{className:"py-2 px-3",colSpan:"2",children:"TOTAL"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:""}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",(A/(ee.showPerUnit&&d>1?d:1)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ee.showPerUnit&&d>1?ee.loanType==="real-estate"?"/ac":"/hd":""]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-blue-600",children:["$",(P/(ee.showPerUnit&&d>1?d:1)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ee.showPerUnit&&d>1?ee.loanType==="real-estate"?"/ac":"/hd":""]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-amber-600",children:["$",(k/(ee.showPerUnit&&d>1?d:1)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ee.showPerUnit&&d>1?ee.loanType==="real-estate"?"/ac":"/hd":""]})]})})]})}),e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-2",children:["Showing ",N.length," of ",N.length," payments"]})]})]})})()})]}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e.jsx(Ge,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Balance Sheet Selected"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create a new balance sheet to get started"}),e.jsxs("button",{onClick:ex,className:"inline-flex items-center gap-2 bg-green-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Create Balance Sheet"]})]})})]}),O==="cashflow"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-blue-700 to-blue-600 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{ct?J(null):W("landing")},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:ct?"Back to Enterprises":"Back to Dashboard",children:e.jsx(Er,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(vt,{className:"w-7 h-7"}),"Cash Flow Projection",ct&&e.jsxs("span",{className:"text-blue-200 text-lg font-normal",children:[" ",ct==="rowCrop"?"Row Crop":ct==="cowCalf"?"Cow/Calf":ct==="custom"?"Custom Revenue":ct==="customFeeding"?"Custom Feeding":ct==="cattleFeeding"?"Cattle Feeding":ct==="dairy"?"Dairy":ct==="swine"?"Swine":""]})]}),e.jsx("p",{className:"text-blue-200 text-sm",children:te==null?void 0:te.name})]})]}),ct&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-blue-200 text-xs block mb-1",children:"Projection Year"}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[100px]",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,className:"text-gray-800",children:o},o)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-blue-200 text-xs block mb-1",children:"Entity"}),e.jsx("select",{value:Ne||"",onChange:s=>Ae(s.target.value),className:"bg-white/10 border border-white/20 rounded px-3 py-1.5 text-white min-w-[160px]",children:(Lm=te==null?void 0:te.entities)==null?void 0:Lm.map(s=>e.jsx("option",{value:s.id,className:"text-gray-800",children:s.name},s.id))})]})]})]})})}),!ct&&e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Enterprise"}),e.jsx("p",{className:"text-gray-600",children:"Choose an enterprise to manage cash flow projections"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("button",{onClick:()=>J("rowCrop"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-green-500",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-green-200 transition-colors",children:e.jsx(Ps,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-green-700 mb-2",children:"Row Crop"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage corn, soybeans, wheat, and other grain crops. Track seed, fertilizer, chemicals, irrigation, and insurance costs."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Crops"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Seed"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Fertilizer"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Chemicals"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Insurance"})]})]}),e.jsxs("button",{onClick:()=>J("cowCalf"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-amber-500",children:[e.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-amber-200 transition-colors",children:e.jsx(er,{className:"w-8 h-8 text-amber-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-amber-700 mb-2",children:"Cow/Calf"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track breeding herd operations including cow costs, calf sales, pasture expenses, and veterinary costs."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"Herd"}),e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"Pasture"}),e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"Feed"}),e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"Vet"})]})]}),e.jsxs("button",{onClick:()=>J("custom"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-purple-500",children:[e.jsx("div",{className:"w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-purple-200 transition-colors",children:e.jsx(Ps,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-purple-700 mb-2",children:"Custom Revenue"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Custom farming operations including custom planting, spraying, harvesting, and other contract work."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Planting"}),e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Spraying"}),e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Harvest"})]})]}),e.jsxs("button",{onClick:()=>{J("customFeeding"),Dt("summary")},className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-orange-500",children:[e.jsx("div",{className:"w-14 h-14 bg-orange-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-orange-200 transition-colors",children:e.jsx(hr,{className:"w-8 h-8 text-orange-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-orange-700 mb-2",children:"Custom Feeding"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Custom cattle feeding operations. Track yardage fees, feed costs, and cattle inventory for customer-owned cattle."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"Yardage"}),e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"Feed"}),e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"Inventory"})]})]}),e.jsxs("button",{onClick:()=>J("cattleFeeding"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-red-500",children:[e.jsx("div",{className:"w-14 h-14 bg-red-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-red-200 transition-colors",children:e.jsx(go,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-red-700 mb-2",children:"Cattle Feeding"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Owned cattle feeding operations. Track feeder purchases, feed costs, death loss, and finished cattle sales."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Feeder"}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Feed"}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Sales"}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Closeout"})]})]}),e.jsxs("button",{onClick:()=>J("dairy"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-sky-500",children:[e.jsx("div",{className:"w-14 h-14 bg-sky-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-sky-200 transition-colors",children:e.jsx(ic,{className:"w-8 h-8 text-sky-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-sky-700 mb-2",children:"Dairy"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Dairy operations including milk production, herd management, feed costs, breeding, and milk revenue tracking."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded",children:"Milk"}),e.jsx("span",{className:"text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded",children:"Herd"}),e.jsx("span",{className:"text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded",children:"Feed"}),e.jsx("span",{className:"text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded",children:"Breeding"})]})]}),e.jsxs("button",{onClick:()=>J("swine"),className:"group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all p-6 text-left border-2 border-transparent hover:border-pink-500",children:[e.jsx("div",{className:"w-14 h-14 bg-pink-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-pink-200 transition-colors",children:e.jsx(ho,{className:"w-8 h-8 text-pink-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-pink-700 mb-2",children:"Swine"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Swine operations including farrow-to-finish, feeder pig production, feed costs, and market hog sales."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs bg-pink-100 text-pink-700 px-2 py-0.5 rounded",children:"Farrow"}),e.jsx("span",{className:"text-xs bg-pink-100 text-pink-700 px-2 py-0.5 rounded",children:"Finish"}),e.jsx("span",{className:"text-xs bg-pink-100 text-pink-700 px-2 py-0.5 rounded",children:"Feed"}),e.jsx("span",{className:"text-xs bg-pink-100 text-pink-700 px-2 py-0.5 rounded",children:"Sales"})]})]})]})]}),ct==="rowCrop"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"summary",label:"Summary",icon:lt},{id:"fields",label:"Fields",icon:cc},{id:"crops",label:"Crops",icon:Ps},{id:"cropRevenue",label:"Crop Revenue",icon:vt},{id:"land",label:"Land Details",icon:uo},{id:"variableExpenses",label:"Variable Crop Expenses",icon:Ht}].map(s=>e.jsxs("button",{onClick:()=>Dt(s.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${Pe===s.id?"border-blue-600 text-blue-700 bg-blue-50":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),Pe==="variableExpenses"&&e.jsx("div",{className:"bg-gray-50 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"seed",label:"Seed",icon:Ge},{id:"nutrition",label:"Crop Nutrition",icon:Ht},{id:"protection",label:"Crop Protection",icon:$t},{id:"irrigation",label:"Irrigation",icon:hr},{id:"freight",label:"Freight",icon:bo}].map(s=>e.jsxs("button",{onClick:()=>Ve(s.id),className:`flex items-center gap-2 px-4 py-2 text-sm border-b-2 transition-colors whitespace-nowrap ${ue===s.id?"border-green-600 text-green-700 bg-green-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(s.icon,{className:"w-3.5 h-3.5"}),s.label]},s.id))})})}),Pe==="cropInsurance"&&e.jsx("div",{className:"bg-gray-50 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"guarantees",label:"Guarantees",icon:$t},{id:"mpci",label:"MPCI Elections",icon:Ge},{id:"areaPlans",label:"Area Plans",icon:Ht},{id:"privateProducts",label:"Private Products",icon:yo}].map(s=>e.jsxs("button",{onClick:()=>us(s.id),className:`flex items-center gap-2 px-4 py-2 text-sm border-b-2 transition-colors whitespace-nowrap ${Mt===s.id?"border-purple-600 text-purple-700 bg-purple-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(s.icon,{className:"w-3.5 h-3.5"}),s.label]},s.id))})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[Pe==="summary"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(lt,{className:"w-6 h-6 text-blue-600"}),"Cash Flow Projection"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("div",{className:"text-sm text-gray-500",children:((Tm=(Dm=te==null?void 0:te.entities)==null?void 0:Dm.find(s=>s.id===Ne))==null?void 0:Tm.name)||"Select Entity"})]}),(()=>{var v,S,E,I,H,Y,_,K,re,he;const s=((v=r==null?void 0:r.cashFlow)==null?void 0:v.crops)||[],n=((S=r==null?void 0:r.cashFlow)==null?void 0:S.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],o=((E=r==null?void 0:r.cashFlow)==null?void 0:E.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],i=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100;return U+q*((V.seedPerAcre||0)+(V.seedTreatmentPerAcre||0))},0),h=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=o.reduce((se,le)=>se+((V.chemicalCosts||{})[le]||0),0);return U+q*(X+(V.chemAppCostPerAcre||0))},0),b=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=n.reduce((se,le)=>se+((V.fertilizerCosts||{})[le]||0),0);return U+q*(X+(V.fertAppCostPerAcre||0))},0),x=s.filter(U=>U.ownership==="Rented").reduce((U,V)=>U+(V.totalRent||0),0),f=s.filter(U=>U.practice==="Irrigated").reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100;return U+q*(V.irrigationCostPerAcre||0)},0),d=((I=r==null?void 0:r.cashFlow)==null?void 0:I.freightRates)||{},u=s.reduce((U,V)=>{const X=(V.plannedAcres||0)*(V.sharePercent||100)/100*(V.aph||0);return U+X*(d[V.crop]||0)},0),j=s.reduce((U,V)=>{var qe,et,oe,be,Te,ye,Ue,tt,Je,Ye,gt,nt;const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=q*(((qe=V.mpciElection)==null?void 0:qe.premiumPerAcre)||0),se=(et=V.areaPlan)!=null&&et.scoEnabled?q*(((oe=V.areaPlan)==null?void 0:oe.scoPerAcre)||0):0,le=(be=V.areaPlan)!=null&&be.ecoEnabled?q*(((Te=V.areaPlan)==null?void 0:Te.ecoPerAcre)||0):0,ke=(ye=V.areaPlan)!=null&&ye.marginPlan&&((Ue=V.areaPlan)==null?void 0:Ue.marginPlan)!=="none"?q*(((tt=V.areaPlan)==null?void 0:tt.marginPerAcre)||0):0,Le=(Je=V.privateInsurance)!=null&&Je.hailEnabled?q*(((Ye=V.privateInsurance)==null?void 0:Ye.hailPerAcre)||0):0,$e=(gt=V.privateInsurance)!=null&&gt.windEnabled?q*(((nt=V.privateInsurance)==null?void 0:nt.windPerAcre)||0):0;return U+X+se+le+ke+Le+$e},0),g=((r==null?void 0:r.debtService)||[]).reduce((U,V)=>U+(V.interestPayment||0),0),m=["feedLivestock","fuelOil","repairs","labor","insurance","utilities","realEstateTax","otherExpenses"].reduce((U,V)=>{var q,X;return U+(((X=(q=r==null?void 0:r.cashFlow)==null?void 0:q.outflows)==null?void 0:X[V])||0)},0),p=i+h+b+x+f+u+j+g+m,C=((H=r==null?void 0:r.cashFlow)==null?void 0:H.cropPrices)||{},N=((Y=r==null?void 0:r.cashFlow)==null?void 0:Y.marketing)||{};[...new Set(s.map(U=>U.crop).filter(Boolean))];const k=U=>{var be;const V=((be=N.byCrop)==null?void 0:be[U])||{},q=V.positions||[],X=V.futuresPrice||0,se=V.basis||0,le=X+se,Le=s.filter(Te=>Te.crop===U).reduce((Te,ye)=>{const Ue=(ye.plannedAcres||0)*(ye.sharePercent||100)/100;return Te+Ue*(ye.projectedYield||ye.aph||0)},0),$e=q.reduce((Te,ye)=>ye.type==="cash"||ye.type==="futures"||ye.type==="hta"?Te+(ye.bushels||0):Te,0),qe=Math.max(0,Le-$e),et=q.reduce((Te,ye)=>(ye.type==="cash"||ye.type==="futures"||ye.type==="hta")&&ye.bushels>0?Te+ye.bushels*ye.price:Te,0),oe=$e>0?et/$e:le;return q.length>0&&($e>0||le>0)?Le>0?($e*oe+qe*le)/Le:le:C[U]||0},P=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=V.projectedYield||V.aph||0,se=q*X,le=k(V.crop);return U+se*le},0),A=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((U,V)=>{var q,X;return U+(((X=(q=r==null?void 0:r.cashFlow)==null?void 0:q.inflows)==null?void 0:X[V])||0)},0),R=P+A,L=R-p,D=((r==null?void 0:r.debtService)||[]).reduce((U,V)=>U+(V.principalPayment||0),0),F=(((_=r==null?void 0:r.cashFlow)==null?void 0:_.beginningCash)||0)+L-(((K=r==null?void 0:r.cashFlow)==null?void 0:K.capitalPurchases)||0)+(((re=r==null?void 0:r.cashFlow)==null?void 0:re.capitalSales)||0)-D+(((he=r==null?void 0:r.cashFlow)==null?void 0:he.newBorrowing)||0);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Cash Inflows"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:T(R)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Cash Outflows"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:T(p)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Net Operating"}),e.jsx("div",{className:`text-2xl font-bold font-mono ${L>=0?"text-blue-700":"text-red-600"}`,children:T(L)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Ending Cash"}),e.jsx("div",{className:`text-2xl font-bold font-mono ${F>=0?"text-purple-700":"text-red-600"}`,children:T(F)})]})]})})(),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right bg-blue-50",children:"Projected"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-amber-700 text-right bg-amber-50",children:"Adjusted"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Actual"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Variance"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"bg-gray-50 border-b",children:[e.jsx("td",{className:"py-3 px-4 font-semibold text-gray-800",children:"Beginning Cash"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono bg-blue-50",children:e.jsx(ie,{value:((Sm=r==null?void 0:r.cashFlow)==null?void 0:Sm.beginningCash)||0,onChange:s=>{var n,o,i,h,b,x;return z({cashFlow:{...r==null?void 0:r.cashFlow,beginningCash:s,endingCash:s+(((n=r==null?void 0:r.cashFlow)==null?void 0:n.totalInflows)||0)-(((o=r==null?void 0:r.cashFlow)==null?void 0:o.totalOutflows)||0)-(((i=r==null?void 0:r.cashFlow)==null?void 0:i.capitalPurchases)||0)+(((h=r==null?void 0:r.cashFlow)==null?void 0:h.capitalSales)||0)-(((b=r==null?void 0:r.cashFlow)==null?void 0:b.debtPayments)||0)+(((x=r==null?void 0:r.cashFlow)==null?void 0:x.newBorrowing)||0)}})},className:"w-28 px-2 py-1 border border-gray-300 rounded text-right font-mono"})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-500 bg-amber-50",children:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-400",children:""})]}),e.jsx("tr",{className:"bg-green-50 border-b",children:e.jsx("td",{colSpan:"5",className:"py-2 px-4 font-bold text-green-800",children:"OPERATING CASH INFLOWS"})}),(()=>{var g,m,p,C,N;const s=((g=r==null?void 0:r.cashFlow)==null?void 0:g.crops)||[],n=((m=r==null?void 0:r.cashFlow)==null?void 0:m.cropPrices)||{},o=((p=r==null?void 0:r.cashFlow)==null?void 0:p.marketing)||{},i=[...new Set(s.map(k=>k.crop).filter(Boolean))],h=k=>{var Y;const P=((Y=o.byCrop)==null?void 0:Y[k])||{},A=P.positions||[],R=P.futuresPrice||0,L=P.basis||0,D=R+L,v=s.filter(_=>_.crop===k).reduce((_,K)=>{const re=(K.plannedAcres||0)*(K.sharePercent||100)/100;return _+re*(K.projectedYield||K.aph||0)},0),S=A.reduce((_,K)=>K.type==="cash"||K.type==="futures"||K.type==="hta"?_+(K.bushels||0):_,0),E=Math.max(0,v-S),I=A.reduce((_,K)=>(K.type==="cash"||K.type==="futures"||K.type==="hta")&&K.bushels>0?_+K.bushels*K.price:_,0),H=S>0?I/S:D;return A.length>0||D>0?v>0?(S*H+E*D)/v:D:n[k]||0},b=i.some(k=>{var A;const P=((A=o.byCrop)==null?void 0:A[k])||{};return(P.positions||[]).length>0||P.futuresPrice>0}),x=s.reduce((k,P)=>{const A=(P.plannedAcres||0)*(P.sharePercent||100)/100,R=P.projectedYield||P.aph||0,L=A*R,D=n[P.crop]||0;return k+L*D},0),f=s.reduce((k,P)=>{const A=(P.plannedAcres||0)*(P.sharePercent||100)/100,R=P.projectedYield||P.aph||0,L=A*R,D=h(P.crop);return k+L*D},0),d=i.map(k=>{var E;const A=s.filter(I=>I.crop===k).reduce((I,H)=>{const Y=(H.plannedAcres||0)*(H.sharePercent||100)/100;return I+Y*(H.projectedYield||H.aph||0)},0),R=n[k]||0,L=h(k),v=((((E=o.byCrop)==null?void 0:E[k])||{}).positions||[]).reduce((I,H)=>H.type==="cash"||H.type==="futures"||H.type==="hta"?I+(H.bushels||0):I,0),S=A>0?v/A*100:0;return{crop:k,bushels:A,baselinePrice:R,mktPrice:L,projectedRevenue:A*R,adjustedRevenue:A*L,pricedPercent:S}}),u=((N=(C=r==null?void 0:r.cashFlow)==null?void 0:C.inflowsActual)==null?void 0:N.cropSales)||0,j=u-f;return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 cursor-pointer",onClick:()=>Dl(!ra),children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d.length>0?ra?e.jsx(ti,{className:"w-4 h-4 text-gray-400"}):e.jsx(al,{className:"w-4 h-4 text-gray-400"}):null,e.jsx("span",{className:"font-medium",children:"Crop Sales"})]}),!ra&&d.length>0&&e.jsx("div",{className:"text-xs text-gray-400 mt-1 ml-6",children:d.filter(k=>k.adjustedRevenue>0).map(k=>k.crop).join(", ")})]}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:[T(x),e.jsx("div",{className:"text-xs text-blue-500",children:"baseline"})]}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono text-amber-700 bg-amber-50 font-semibold",children:[T(f),b&&e.jsx("div",{className:"text-xs text-amber-500",children:"from marketing"})]}),e.jsx("td",{className:"py-2 px-4 text-right",onClick:k=>k.stopPropagation(),children:e.jsx(ie,{value:u,onChange:k=>{var A;const P={...(A=r==null?void 0:r.cashFlow)==null?void 0:A.inflowsActual,cropSales:k};z({cashFlow:{...r==null?void 0:r.cashFlow,inflowsActual:P}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${j>=0?"text-green-600":"text-red-600"}`,children:T(j)})]}),ra&&d.map(k=>e.jsxs("tr",{className:"border-b border-gray-100 bg-gray-50/50",children:[e.jsxs("td",{className:"py-2 px-4 pl-14 text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ps,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"font-medium",children:k.crop}),k.pricedPercent>0&&e.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${k.pricedPercent>=75?"bg-green-100 text-green-700":k.pricedPercent>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[k.pricedPercent.toFixed(0),"% priced"]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-0.5 ml-7",children:[k.bushels.toLocaleString("en-US",{maximumFractionDigits:0})," bu"]})]}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono text-gray-600 bg-blue-50",children:[T(k.projectedRevenue),e.jsxs("div",{className:"text-xs text-gray-400",children:["@ $",k.baselinePrice.toFixed(2)]})]}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono text-amber-700 bg-amber-50",children:[T(k.adjustedRevenue),e.jsxs("div",{className:"text-xs text-amber-500",children:["@ $",k.mktPrice.toFixed(2)]})]}),e.jsx("td",{className:"py-2 px-4 text-right text-gray-400 text-xs",children:""}),e.jsx("td",{className:"py-2 px-4 text-right text-gray-400 text-xs",children:""})]},k.crop))]})})(),[{key:"livestockSales",label:"Livestock Sales"},{key:"governmentPayments",label:"Government Payments"},{key:"customWork",label:"Custom Work / Hire"},{key:"otherIncome",label:"Other Farm Income"}].map(s=>{var b,x,f,d,u,j;const n=((x=(b=r==null?void 0:r.cashFlow)==null?void 0:b.inflows)==null?void 0:x[s.key])||0,o=((d=(f=r==null?void 0:r.cashFlow)==null?void 0:f.inflowsAdjusted)==null?void 0:d[s.key])??n,i=((j=(u=r==null?void 0:r.cashFlow)==null?void 0:u.inflowsActual)==null?void 0:j[s.key])||0,h=i-o;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:s.label}),e.jsx("td",{className:"py-2 px-4 text-right bg-blue-50",children:e.jsx(ie,{value:n,onChange:g=>{var p;const m={...(p=r==null?void 0:r.cashFlow)==null?void 0:p.inflows,[s.key]:g};z({cashFlow:{...r==null?void 0:r.cashFlow,inflows:m}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:o,onChange:g=>{var p;const m={...(p=r==null?void 0:r.cashFlow)==null?void 0:p.inflowsAdjusted,[s.key]:g};z({cashFlow:{...r==null?void 0:r.cashFlow,inflowsAdjusted:m}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:i,onChange:g=>{var p;const m={...(p=r==null?void 0:r.cashFlow)==null?void 0:p.inflowsActual,[s.key]:g};z({cashFlow:{...r==null?void 0:r.cashFlow,inflowsActual:m}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:T(h)})]},s.key)}),(()=>{var m,p,C,N;const s=((m=r==null?void 0:r.cashFlow)==null?void 0:m.crops)||[],n=((p=r==null?void 0:r.cashFlow)==null?void 0:p.cropPrices)||{},o=((C=r==null?void 0:r.cashFlow)==null?void 0:C.marketing)||{},i=k=>{var Y;const P=((Y=o.byCrop)==null?void 0:Y[k])||{},A=P.positions||[],R=P.futuresPrice||0,L=P.basis||0,D=R+L,v=s.filter(_=>_.crop===k).reduce((_,K)=>{const re=(K.plannedAcres||0)*(K.sharePercent||100)/100;return _+re*(K.projectedYield||K.aph||0)},0),S=A.reduce((_,K)=>K.type==="cash"||K.type==="futures"||K.type==="hta"?_+(K.bushels||0):_,0),E=Math.max(0,v-S),I=A.reduce((_,K)=>(K.type==="cash"||K.type==="futures"||K.type==="hta")&&K.bushels>0?_+K.bushels*K.price:_,0),H=S>0?I/S:D;return A.length>0||D>0?v>0?(S*H+E*D)/v:D:n[k]||0},h=s.reduce((k,P)=>{const A=(P.plannedAcres||0)*(P.sharePercent||100)/100,R=P.projectedYield||P.aph||0,L=A*R,D=n[P.crop]||0;return k+L*D},0),b=s.reduce((k,P)=>{const A=(P.plannedAcres||0)*(P.sharePercent||100)/100,R=P.projectedYield||P.aph||0,L=A*R,D=i(P.crop);return k+L*D},0),x=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((k,P)=>{var A,R;return k+(((R=(A=r==null?void 0:r.cashFlow)==null?void 0:A.inflows)==null?void 0:R[P])||0)},0),f=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((k,P)=>{var A,R,L,D;return k+(((R=(A=r==null?void 0:r.cashFlow)==null?void 0:A.inflowsAdjusted)==null?void 0:R[P])??((D=(L=r==null?void 0:r.cashFlow)==null?void 0:L.inflows)==null?void 0:D[P])??0)},0),d=h+x,u=b+f,j=Object.values(((N=r==null?void 0:r.cashFlow)==null?void 0:N.inflowsActual)||{}).reduce((k,P)=>k+(P||0),0),g=j-u;return e.jsxs("tr",{className:"bg-green-100 border-b font-semibold",children:[e.jsx("td",{className:"py-2 px-4 text-green-800",children:"Total Inflows"}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-green-800 bg-blue-100",children:T(d)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-amber-800 bg-amber-100",children:T(u)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-green-800",children:T(j)}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${g>=0?"text-green-700":"text-red-600"}`,children:T(g)})]})})(),e.jsx("tr",{className:"bg-red-50 border-b",children:e.jsx("td",{colSpan:"5",className:"py-2 px-4 font-bold text-red-800",children:"OPERATING CASH OUTFLOWS"})}),(()=>{var b,x,f,d,u;const n=(((b=r==null?void 0:r.cashFlow)==null?void 0:b.crops)||[]).reduce((j,g)=>{const m=(g.plannedAcres||0)*(g.sharePercent||100)/100;return j+m*((g.seedPerAcre||0)+(g.seedTreatmentPerAcre||0))},0),o=((f=(x=r==null?void 0:r.cashFlow)==null?void 0:x.outflowsAdjusted)==null?void 0:f.seed)??n,i=((u=(d=r==null?void 0:r.cashFlow)==null?void 0:d.outflowsActual)==null?void 0:u.seed)||0,h=o-i;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Seed & Treatment",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Seed tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:T(n)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:o,onChange:j=>{var m;const g={...(m=r==null?void 0:r.cashFlow)==null?void 0:m.outflowsAdjusted,seed:j};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsAdjusted:g}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:i,onChange:j=>{var m;const g={...(m=r==null?void 0:r.cashFlow)==null?void 0:m.outflowsActual,seed:j};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsActual:g}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:T(h)})]})})(),(()=>{var x,f,d,u,j,g;const s=((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[],n=((f=r==null?void 0:r.cashFlow)==null?void 0:f.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],o=s.reduce((m,p)=>{const C=(p.plannedAcres||0)*(p.sharePercent||100)/100,N=n.reduce((k,P)=>k+((p.chemicalCosts||{})[P]||0),0);return m+C*(N+(p.chemAppCostPerAcre||0))},0),i=((u=(d=r==null?void 0:r.cashFlow)==null?void 0:d.outflowsAdjusted)==null?void 0:u.chemicals)??o,h=((g=(j=r==null?void 0:r.cashFlow)==null?void 0:j.outflowsActual)==null?void 0:g.chemicals)||0,b=i-h;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Chemicals",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Crop Protection tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:T(o)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:i,onChange:m=>{var C;const p={...(C=r==null?void 0:r.cashFlow)==null?void 0:C.outflowsAdjusted,chemicals:m};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsAdjusted:p}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:h,onChange:m=>{var C;const p={...(C=r==null?void 0:r.cashFlow)==null?void 0:C.outflowsActual,chemicals:m};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsActual:p}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${b>=0?"text-green-600":"text-red-600"}`,children:T(b)})]})})(),(()=>{var x,f,d,u,j,g;const s=((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[],n=((f=r==null?void 0:r.cashFlow)==null?void 0:f.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],o=s.reduce((m,p)=>{const C=(p.plannedAcres||0)*(p.sharePercent||100)/100,N=n.reduce((k,P)=>k+((p.fertilizerCosts||{})[P]||0),0);return m+C*(N+(p.fertAppCostPerAcre||0))},0),i=((u=(d=r==null?void 0:r.cashFlow)==null?void 0:d.outflowsAdjusted)==null?void 0:u.fertilizer)??o,h=((g=(j=r==null?void 0:r.cashFlow)==null?void 0:j.outflowsActual)==null?void 0:g.fertilizer)||0,b=i-h;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Fertilizer",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Crop Nutrition tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:T(o)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:i,onChange:m=>{var C;const p={...(C=r==null?void 0:r.cashFlow)==null?void 0:C.outflowsAdjusted,fertilizer:m};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsAdjusted:p}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:h,onChange:m=>{var C;const p={...(C=r==null?void 0:r.cashFlow)==null?void 0:C.outflowsActual,fertilizer:m};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsActual:p}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${b>=0?"text-green-600":"text-red-600"}`,children:T(b)})]})})(),(()=>{var i,h,b,x,f,d,u,j,g;const n=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).filter(m=>m.ownership==="Rented").reduce((m,p)=>m+(p.totalRent||0),0),o=((b=(h=r==null?void 0:r.cashFlow)==null?void 0:h.outflowsActual)==null?void 0:b.cashRent)||0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Cash Rent",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Land Details tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:T(n)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:((f=(x=r==null?void 0:r.cashFlow)==null?void 0:x.outflowsAdjusted)==null?void 0:f.cashRent)??n,onChange:m=>{var C;const p={...(C=r==null?void 0:r.cashFlow)==null?void 0:C.outflowsAdjusted,cashRent:m};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsAdjusted:p}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:o,onChange:m=>{var C;const p={...(C=r==null?void 0:r.cashFlow)==null?void 0:C.outflowsActual,cashRent:m};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsActual:p}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${(((u=(d=r==null?void 0:r.cashFlow)==null?void 0:d.outflowsAdjusted)==null?void 0:u.cashRent)??n)-o>=0?"text-green-600":"text-red-600"}`,children:T((((g=(j=r==null?void 0:r.cashFlow)==null?void 0:j.outflowsAdjusted)==null?void 0:g.cashRent)??n)-o)})]})})(),(()=>{var x,f,d,u,j;const o=(((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[]).filter(g=>g.practice==="Irrigated").reduce((g,m)=>{const p=(m.plannedAcres||0)*(m.sharePercent||100)/100;return g+p*(m.irrigationCostPerAcre||0)},0),i=((d=(f=r==null?void 0:r.cashFlow)==null?void 0:f.outflowsAdjusted)==null?void 0:d.irrigation)??o,h=((j=(u=r==null?void 0:r.cashFlow)==null?void 0:u.outflowsActual)==null?void 0:j.irrigation)||0,b=i-h;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Irrigation",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Irrigation tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:T(o)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:i,onChange:g=>{var p;const m={...(p=r==null?void 0:r.cashFlow)==null?void 0:p.outflowsAdjusted,irrigation:g};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsAdjusted:m}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:h,onChange:g=>{var p;const m={...(p=r==null?void 0:r.cashFlow)==null?void 0:p.outflowsActual,irrigation:g};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsActual:m}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${b>=0?"text-green-600":"text-red-600"}`,children:T(b)})]})})(),(()=>{var x,f,d,u,j,g;const s=((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[],n=((f=r==null?void 0:r.cashFlow)==null?void 0:f.freightRates)||{},o=s.reduce((m,p)=>{const N=(p.plannedAcres||0)*(p.sharePercent||100)/100*(p.aph||0),k=n[p.crop]||0;return m+N*k},0),i=((u=(d=r==null?void 0:r.cashFlow)==null?void 0:d.outflowsAdjusted)==null?void 0:u.freight)??o,h=((g=(j=r==null?void 0:r.cashFlow)==null?void 0:j.outflowsActual)==null?void 0:g.freight)||0,b=i-h;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Freight",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Freight tab)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:T(o)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:i,onChange:m=>{var C;const p={...(C=r==null?void 0:r.cashFlow)==null?void 0:C.outflowsAdjusted,freight:m};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsAdjusted:p}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:h,onChange:m=>{var C;const p={...(C=r==null?void 0:r.cashFlow)==null?void 0:C.outflowsActual,freight:m};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsActual:p}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${b>=0?"text-green-600":"text-red-600"}`,children:T(b)})]})})(),(()=>{var b,x,f,d,u;const n=(((b=r==null?void 0:r.cashFlow)==null?void 0:b.crops)||[]).reduce((j,g)=>{var R,L,D,F,v,S,E,I,H,Y,_,K;const m=(g.plannedAcres||0)*(g.sharePercent||100)/100,p=m*(((R=g.mpciElection)==null?void 0:R.premiumPerAcre)||0),C=(L=g.areaPlan)!=null&&L.scoEnabled?m*(((D=g.areaPlan)==null?void 0:D.scoPerAcre)||0):0,N=(F=g.areaPlan)!=null&&F.ecoEnabled?m*(((v=g.areaPlan)==null?void 0:v.ecoPerAcre)||0):0,k=(S=g.areaPlan)!=null&&S.marginPlan&&((E=g.areaPlan)==null?void 0:E.marginPlan)!=="none"?m*(((I=g.areaPlan)==null?void 0:I.marginPerAcre)||0):0,P=(H=g.privateInsurance)!=null&&H.hailEnabled?m*(((Y=g.privateInsurance)==null?void 0:Y.hailPerAcre)||0):0,A=(_=g.privateInsurance)!=null&&_.windEnabled?m*(((K=g.privateInsurance)==null?void 0:K.windPerAcre)||0):0;return j+p+C+N+k+P+A},0),o=((f=(x=r==null?void 0:r.cashFlow)==null?void 0:x.outflowsActual)==null?void 0:f.cropInsurance)||0,i=((u=(d=r==null?void 0:r.cashFlow)==null?void 0:d.outflowsAdjusted)==null?void 0:u.cropInsurance)??n,h=i-o;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Crop Insurance",e.jsx("span",{className:"ml-2 text-xs text-purple-500",children:"(from Crop Insurance)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:T(n)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:i,onChange:j=>{var m;const g={...(m=r==null?void 0:r.cashFlow)==null?void 0:m.outflowsAdjusted,cropInsurance:j};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsAdjusted:g}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:o,onChange:j=>{var m;const g={...(m=r==null?void 0:r.cashFlow)==null?void 0:m.outflowsActual,cropInsurance:j};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsActual:g}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:T(h)})]})})(),[{key:"feedLivestock",label:"Feed & Livestock Expense"},{key:"fuelOil",label:"Fuel & Oil"},{key:"repairs",label:"Repairs & Maintenance"},{key:"labor",label:"Hired Labor"},{key:"insurance",label:"Insurance"},{key:"utilities",label:"Utilities"},{key:"realEstateTax",label:"Real Estate Taxes"},{key:"otherExpenses",label:"Other Operating Expenses"}].map(s=>{var b,x,f,d,u,j;const n=((x=(b=r==null?void 0:r.cashFlow)==null?void 0:b.outflows)==null?void 0:x[s.key])||0,o=((d=(f=r==null?void 0:r.cashFlow)==null?void 0:f.outflowsAdjusted)==null?void 0:d[s.key])??n,i=((j=(u=r==null?void 0:r.cashFlow)==null?void 0:u.outflowsActual)==null?void 0:j[s.key])||0,h=o-i;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:s.label}),e.jsx("td",{className:"py-2 px-4 text-right bg-blue-50",children:e.jsx(ie,{value:n,onChange:g=>{var p;const m={...(p=r==null?void 0:r.cashFlow)==null?void 0:p.outflows,[s.key]:g};z({cashFlow:{...r==null?void 0:r.cashFlow,outflows:m}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:o,onChange:g=>{var p;const m={...(p=r==null?void 0:r.cashFlow)==null?void 0:p.outflowsAdjusted,[s.key]:g};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsAdjusted:m}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:i,onChange:g=>{var p;const m={...(p=r==null?void 0:r.cashFlow)==null?void 0:p.outflowsActual,[s.key]:g};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsActual:m}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:T(h)})]},s.key)}),(()=>{var b,x,f,d;const n=((r==null?void 0:r.debtService)||[]).reduce((u,j)=>u+(j.interestPayment||0),0),o=((x=(b=r==null?void 0:r.cashFlow)==null?void 0:b.outflowsAdjusted)==null?void 0:x.interestOnDebt)??n,i=((d=(f=r==null?void 0:r.cashFlow)==null?void 0:f.outflowsActual)==null?void 0:d.interestOnDebt)||0,h=o-i;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Interest on Debt",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Debt Service)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:T(n)}),e.jsx("td",{className:"py-2 px-4 text-right bg-amber-50",children:e.jsx(ie,{value:o,onChange:u=>{var g;const j={...(g=r==null?void 0:r.cashFlow)==null?void 0:g.outflowsAdjusted,interestOnDebt:u};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsAdjusted:j}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:i,onChange:u=>{var g;const j={...(g=r==null?void 0:r.cashFlow)==null?void 0:g.outflowsActual,interestOnDebt:u};z({cashFlow:{...r==null?void 0:r.cashFlow,outflowsActual:j}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:T(h)})]})})(),(()=>{var Y,_,K,re,he,U;const s=((Y=r==null?void 0:r.cashFlow)==null?void 0:Y.crops)||[],n=((_=r==null?void 0:r.cashFlow)==null?void 0:_.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],o=((K=r==null?void 0:r.cashFlow)==null?void 0:K.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],i=((re=r==null?void 0:r.cashFlow)==null?void 0:re.outflowsAdjusted)||{},h=s.reduce((V,q)=>{const X=(q.plannedAcres||0)*(q.sharePercent||100)/100;return V+X*((q.seedPerAcre||0)+(q.seedTreatmentPerAcre||0))},0),b=s.reduce((V,q)=>{const X=(q.plannedAcres||0)*(q.sharePercent||100)/100,se=o.reduce((le,ke)=>le+((q.chemicalCosts||{})[ke]||0),0);return V+X*(se+(q.chemAppCostPerAcre||0))},0),x=s.reduce((V,q)=>{const X=(q.plannedAcres||0)*(q.sharePercent||100)/100,se=n.reduce((le,ke)=>le+((q.fertilizerCosts||{})[ke]||0),0);return V+X*(se+(q.fertAppCostPerAcre||0))},0),f=s.filter(V=>V.ownership==="Rented").reduce((V,q)=>V+(q.totalRent||0),0),d=s.filter(V=>V.practice==="Irrigated").reduce((V,q)=>{const X=(q.plannedAcres||0)*(q.sharePercent||100)/100;return V+X*(q.irrigationCostPerAcre||0)},0),u=((he=r==null?void 0:r.cashFlow)==null?void 0:he.freightRates)||{},j=s.reduce((V,q)=>{const se=(q.plannedAcres||0)*(q.sharePercent||100)/100*(q.aph||0);return V+se*(u[q.crop]||0)},0),g=s.reduce((V,q)=>{var et,oe,be,Te,ye,Ue,tt,Je,Ye,gt,nt,Is;const X=(q.plannedAcres||0)*(q.sharePercent||100)/100,se=X*(((et=q.mpciElection)==null?void 0:et.premiumPerAcre)||0),le=(oe=q.areaPlan)!=null&&oe.scoEnabled?X*(((be=q.areaPlan)==null?void 0:be.scoPerAcre)||0):0,ke=(Te=q.areaPlan)!=null&&Te.ecoEnabled?X*(((ye=q.areaPlan)==null?void 0:ye.ecoPerAcre)||0):0,Le=(Ue=q.areaPlan)!=null&&Ue.marginPlan&&((tt=q.areaPlan)==null?void 0:tt.marginPlan)!=="none"?X*(((Je=q.areaPlan)==null?void 0:Je.marginPerAcre)||0):0,$e=(Ye=q.privateInsurance)!=null&&Ye.hailEnabled?X*(((gt=q.privateInsurance)==null?void 0:gt.hailPerAcre)||0):0,qe=(nt=q.privateInsurance)!=null&&nt.windEnabled?X*(((Is=q.privateInsurance)==null?void 0:Is.windPerAcre)||0):0;return V+se+le+ke+Le+$e+qe},0),m=((r==null?void 0:r.debtService)||[]).reduce((V,q)=>V+(q.interestPayment||0),0),p=["feedLivestock","fuelOil","repairs","labor","insurance","utilities","realEstateTax","otherExpenses"],C=p.reduce((V,q)=>{var X,se;return V+(((se=(X=r==null?void 0:r.cashFlow)==null?void 0:X.outflows)==null?void 0:se[q])||0)},0),N=h+b+x+f+d+j+g+m+C,k=i.seed??h,P=i.chemicals??b,A=i.fertilizer??x,R=i.cashRent??f,L=i.irrigation??d,D=i.freight??j,F=i.cropInsurance??g,v=i.interestOnDebt??m,S=p.reduce((V,q)=>{var X,se;return V+(i[q]??((se=(X=r==null?void 0:r.cashFlow)==null?void 0:X.outflows)==null?void 0:se[q])??0)},0),E=k+P+A+R+L+D+F+v+S,I=Object.values(((U=r==null?void 0:r.cashFlow)==null?void 0:U.outflowsActual)||{}).reduce((V,q)=>V+(q||0),0),H=E-I;return e.jsxs("tr",{className:"bg-red-100 border-b font-semibold",children:[e.jsx("td",{className:"py-2 px-4 text-red-800",children:"Total Outflows"}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-red-800 bg-blue-100",children:T(N)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-amber-800 bg-amber-100",children:T(E)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-red-800",children:T(I)}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${H>=0?"text-green-700":"text-red-700"}`,children:T(H)})]})})(),(()=>{var E,I,H,Y,_,K,re,he;const s=((E=r==null?void 0:r.cashFlow)==null?void 0:E.crops)||[],n=((I=r==null?void 0:r.cashFlow)==null?void 0:I.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],o=((H=r==null?void 0:r.cashFlow)==null?void 0:H.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],i=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100;return U+q*((V.seedPerAcre||0)+(V.seedTreatmentPerAcre||0))},0),h=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=o.reduce((se,le)=>se+((V.chemicalCosts||{})[le]||0),0);return U+q*(X+(V.chemAppCostPerAcre||0))},0),b=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=n.reduce((se,le)=>se+((V.fertilizerCosts||{})[le]||0),0);return U+q*(X+(V.fertAppCostPerAcre||0))},0),x=s.filter(U=>U.ownership==="Rented").reduce((U,V)=>U+(V.totalRent||0),0),f=s.filter(U=>U.practice==="Irrigated").reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100;return U+q*(V.irrigationCostPerAcre||0)},0),d=((Y=r==null?void 0:r.cashFlow)==null?void 0:Y.freightRates)||{},u=s.reduce((U,V)=>{const X=(V.plannedAcres||0)*(V.sharePercent||100)/100*(V.aph||0);return U+X*(d[V.crop]||0)},0),j=["Multiperil","Hail","Wind","ECO","SCO","Margin Protection"],g=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=V.insurance||{};return U+j.reduce((se,le)=>{var ke,Le,$e,qe;return(ke=X[le])!=null&&ke.enabled?se+((Le=X[le])!=null&&Le.useTotal?(($e=X[le])==null?void 0:$e.totalCost)||0:q*(((qe=X[le])==null?void 0:qe.perAcre)||0)):se},0)},0),m=((r==null?void 0:r.debtService)||[]).reduce((U,V)=>U+(V.interestPayment||0),0),p=["feedLivestock","fuelOil","repairs","labor","insurance","utilities","realEstateTax","otherExpenses"].reduce((U,V)=>{var q,X;return U+(((X=(q=r==null?void 0:r.cashFlow)==null?void 0:q.outflows)==null?void 0:X[V])||0)},0),C=i+h+b+x+f+u+g+m+p,N=((_=r==null?void 0:r.cashFlow)==null?void 0:_.cropPrices)||{},k=((K=r==null?void 0:r.cashFlow)==null?void 0:K.marketing)||{},P=U=>{var be;const V=((be=k.byCrop)==null?void 0:be[U])||{},q=V.positions||[],X=V.futuresPrice||0,se=V.basis||0,le=X+se,Le=s.filter(Te=>Te.crop===U).reduce((Te,ye)=>{const Ue=(ye.plannedAcres||0)*(ye.sharePercent||100)/100;return Te+Ue*(ye.projectedYield||ye.aph||0)},0),$e=q.reduce((Te,ye)=>ye.type==="cash"||ye.type==="futures"||ye.type==="hta"?Te+(ye.bushels||0):Te,0),qe=Math.max(0,Le-$e),et=q.reduce((Te,ye)=>(ye.type==="cash"||ye.type==="futures"||ye.type==="hta")&&ye.bushels>0?Te+ye.bushels*ye.price:Te,0),oe=$e>0?et/$e:le;return q.length>0&&($e>0||le>0)?Le>0?($e*oe+qe*le)/Le:le:N[U]||0},A=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=V.projectedYield||V.aph||0,se=q*X,le=P(V.crop);return U+se*le},0),R=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((U,V)=>{var q,X;return U+(((X=(q=r==null?void 0:r.cashFlow)==null?void 0:q.inflows)==null?void 0:X[V])||0)},0),D=A+R-C,F=Object.values(((re=r==null?void 0:r.cashFlow)==null?void 0:re.inflowsActual)||{}).reduce((U,V)=>U+(V||0),0),v=Object.values(((he=r==null?void 0:r.cashFlow)==null?void 0:he.outflowsActual)||{}).reduce((U,V)=>U+(V||0),0),S=F-v;return e.jsxs("tr",{className:"bg-blue-100 border-b font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-blue-800",children:"NET OPERATING CASH FLOW"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-800",children:T(D)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-800",children:T(S)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-800",children:""})]})})(),e.jsx("tr",{className:"bg-purple-50 border-b",children:e.jsx("td",{colSpan:"5",className:"py-2 px-4 font-bold text-purple-800",children:"CAPITAL & FINANCING"})}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:"Capital Purchases"}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:((Em=r==null?void 0:r.cashFlow)==null?void 0:Em.capitalPurchases)||0,onChange:s=>{var o,i,h,b,x,f;const n=(((o=r==null?void 0:r.cashFlow)==null?void 0:o.totalInflows)||0)-(((i=r==null?void 0:r.cashFlow)==null?void 0:i.totalOutflows)||0);z({cashFlow:{...r==null?void 0:r.cashFlow,capitalPurchases:s,endingCash:(((h=r==null?void 0:r.cashFlow)==null?void 0:h.beginningCash)||0)+n-s+(((b=r==null?void 0:r.cashFlow)==null?void 0:b.capitalSales)||0)-(((x=r==null?void 0:r.cashFlow)==null?void 0:x.debtPayments)||0)+(((f=r==null?void 0:r.cashFlow)==null?void 0:f.newBorrowing)||0)}})},className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:"Capital Sales"}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:(($m=r==null?void 0:r.cashFlow)==null?void 0:$m.capitalSales)||0,onChange:s=>{var o,i,h,b,x,f;const n=(((o=r==null?void 0:r.cashFlow)==null?void 0:o.totalInflows)||0)-(((i=r==null?void 0:r.cashFlow)==null?void 0:i.totalOutflows)||0);z({cashFlow:{...r==null?void 0:r.cashFlow,capitalSales:s,endingCash:(((h=r==null?void 0:r.cashFlow)==null?void 0:h.beginningCash)||0)+n-(((b=r==null?void 0:r.cashFlow)==null?void 0:b.capitalPurchases)||0)+s-(((x=r==null?void 0:r.cashFlow)==null?void 0:x.debtPayments)||0)+(((f=r==null?void 0:r.cashFlow)==null?void 0:f.newBorrowing)||0)}})},className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""})]}),(()=>{var i;const n=((r==null?void 0:r.debtService)||[]).reduce((h,b)=>h+(b.principalPayment||0),0),o=((i=r==null?void 0:r.cashFlow)==null?void 0:i.principalPaymentsActual)||0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4 pl-8 text-gray-700",children:["Principal Payments",e.jsx("span",{className:"ml-2 text-xs text-blue-500",children:"(from Debt Service)"})]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-700 bg-blue-50",children:T(n)}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:o,onChange:h=>{z({cashFlow:{...r==null?void 0:r.cashFlow,principalPaymentsActual:h}})},className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${n-o>=0?"text-green-600":"text-red-600"}`,children:T(n-o)})]})})(),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700",children:"New Borrowing"}),e.jsx("td",{className:"py-2 px-4 text-right",children:e.jsx(ie,{value:((Im=r==null?void 0:r.cashFlow)==null?void 0:Im.newBorrowing)||0,onChange:s=>{var n,o;(((n=r==null?void 0:r.cashFlow)==null?void 0:n.totalInflows)||0)-(((o=r==null?void 0:r.cashFlow)==null?void 0:o.totalOutflows)||0),z({cashFlow:{...r==null?void 0:r.cashFlow,newBorrowing:s}})},className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-400",children:""})]}),(()=>{var v,S,E,I,H,Y,_,K,re,he;const s=((v=r==null?void 0:r.cashFlow)==null?void 0:v.crops)||[],n=((S=r==null?void 0:r.cashFlow)==null?void 0:S.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],o=((E=r==null?void 0:r.cashFlow)==null?void 0:E.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],i=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100;return U+q*((V.seedPerAcre||0)+(V.seedTreatmentPerAcre||0))},0),h=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=o.reduce((se,le)=>se+((V.chemicalCosts||{})[le]||0),0);return U+q*(X+(V.chemAppCostPerAcre||0))},0),b=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=n.reduce((se,le)=>se+((V.fertilizerCosts||{})[le]||0),0);return U+q*(X+(V.fertAppCostPerAcre||0))},0),x=s.filter(U=>U.ownership==="Rented").reduce((U,V)=>U+(V.totalRent||0),0),f=s.filter(U=>U.practice==="Irrigated").reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100;return U+q*(V.irrigationCostPerAcre||0)},0),d=((I=r==null?void 0:r.cashFlow)==null?void 0:I.freightRates)||{},u=s.reduce((U,V)=>{const X=(V.plannedAcres||0)*(V.sharePercent||100)/100*(V.aph||0);return U+X*(d[V.crop]||0)},0),j=s.reduce((U,V)=>{var qe,et,oe,be,Te,ye,Ue,tt,Je,Ye,gt,nt;const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=q*(((qe=V.mpciElection)==null?void 0:qe.premiumPerAcre)||0),se=(et=V.areaPlan)!=null&&et.scoEnabled?q*(((oe=V.areaPlan)==null?void 0:oe.scoPerAcre)||0):0,le=(be=V.areaPlan)!=null&&be.ecoEnabled?q*(((Te=V.areaPlan)==null?void 0:Te.ecoPerAcre)||0):0,ke=(ye=V.areaPlan)!=null&&ye.marginPlan&&((Ue=V.areaPlan)==null?void 0:Ue.marginPlan)!=="none"?q*(((tt=V.areaPlan)==null?void 0:tt.marginPerAcre)||0):0,Le=(Je=V.privateInsurance)!=null&&Je.hailEnabled?q*(((Ye=V.privateInsurance)==null?void 0:Ye.hailPerAcre)||0):0,$e=(gt=V.privateInsurance)!=null&&gt.windEnabled?q*(((nt=V.privateInsurance)==null?void 0:nt.windPerAcre)||0):0;return U+X+se+le+ke+Le+$e},0),g=((r==null?void 0:r.debtService)||[]).reduce((U,V)=>U+(V.interestPayment||0),0),m=["feedLivestock","fuelOil","repairs","labor","insurance","utilities","realEstateTax","otherExpenses"].reduce((U,V)=>{var q,X;return U+(((X=(q=r==null?void 0:r.cashFlow)==null?void 0:q.outflows)==null?void 0:X[V])||0)},0),p=i+h+b+x+f+u+j+g+m,C=((H=r==null?void 0:r.cashFlow)==null?void 0:H.cropPrices)||{},N=((Y=r==null?void 0:r.cashFlow)==null?void 0:Y.marketing)||{},k=U=>{var be;const V=((be=N.byCrop)==null?void 0:be[U])||{},q=V.positions||[],X=V.futuresPrice||0,se=V.basis||0,le=X+se,Le=s.filter(Te=>Te.crop===U).reduce((Te,ye)=>{const Ue=(ye.plannedAcres||0)*(ye.sharePercent||100)/100;return Te+Ue*(ye.projectedYield||ye.aph||0)},0),$e=q.reduce((Te,ye)=>ye.type==="cash"||ye.type==="futures"||ye.type==="hta"?Te+(ye.bushels||0):Te,0),qe=Math.max(0,Le-$e),et=q.reduce((Te,ye)=>(ye.type==="cash"||ye.type==="futures"||ye.type==="hta")&&ye.bushels>0?Te+ye.bushels*ye.price:Te,0),oe=$e>0?et/$e:le;return q.length>0&&($e>0||le>0)?Le>0?($e*oe+qe*le)/Le:le:C[U]||0},P=s.reduce((U,V)=>{const q=(V.plannedAcres||0)*(V.sharePercent||100)/100,X=V.projectedYield||V.aph||0,se=q*X,le=k(V.crop);return U+se*le},0),A=["livestockSales","governmentPayments","customWork","otherIncome"].reduce((U,V)=>{var q,X;return U+(((X=(q=r==null?void 0:r.cashFlow)==null?void 0:q.inflows)==null?void 0:X[V])||0)},0),L=P+A-p,D=((r==null?void 0:r.debtService)||[]).reduce((U,V)=>U+(V.principalPayment||0),0),F=(((_=r==null?void 0:r.cashFlow)==null?void 0:_.beginningCash)||0)+L-(((K=r==null?void 0:r.cashFlow)==null?void 0:K.capitalPurchases)||0)+(((re=r==null?void 0:r.cashFlow)==null?void 0:re.capitalSales)||0)-D+(((he=r==null?void 0:r.cashFlow)==null?void 0:he.newBorrowing)||0);return e.jsxs("tr",{className:"bg-purple-100 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-purple-800",children:"ENDING CASH BALANCE"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-purple-800 text-lg",children:T(F)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-400",children:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-400",children:""})]})})()]})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:((Rm=r==null?void 0:r.cashFlow)==null?void 0:Rm.notes)||"",onChange:s=>z({cashFlow:{...r==null?void 0:r.cashFlow,notes:s.target.value}}),placeholder:"Add any notes about cash flow assumptions, timing, etc.",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",rows:3})]})]}),Pe==="fields"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(cc,{className:"w-6 h-6 text-blue-600"}),"Field Management"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsxs("button",{onClick:()=>{var h;const s={id:`field-${Date.now()}`,fieldName:"",practice:"Dryland",county:"",entity:"",legalId:"",fsnNumber:"",crop:"",plannedAcres:0,sharePercent:100},i=[...[...((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[],s]].sort((b,x)=>{const f=(b.crop||"zzz").toLowerCase(),d=(x.crop||"zzz").toLowerCase();return f<d?-1:f>d?1:(b.fieldName||"").localeCompare(x.fieldName||"")});z({cashFlow:{...r==null?void 0:r.cashFlow,crops:i}})},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Field"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Fields"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:(((Mm=r==null?void 0:r.cashFlow)==null?void 0:Mm.crops)||[]).length})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:(((Hm=r==null?void 0:r.cashFlow)==null?void 0:Hm.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0)*(n.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Irrigated"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:(((Om=r==null?void 0:r.cashFlow)==null?void 0:Om.crops)||[]).filter(s=>s.practice==="Irrigated").reduce((s,n)=>s+(n.plannedAcres||0)*(n.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Dryland"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:(((zm=r==null?void 0:r.cashFlow)==null?void 0:zm.crops)||[]).filter(s=>s.practice!=="Irrigated").reduce((s,n)=>s+(n.plannedAcres||0)*(n.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]})]}),(((Vm=r==null?void 0:r.cashFlow)==null?void 0:Vm.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(cc,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields defined yet."}),e.jsx("span",{className:"text-blue-600",children:'Click "Add Field" to start adding your fields.'})]})}),(((Um=r==null?void 0:r.cashFlow)==null?void 0:Um.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Entity"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Legal ID"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"FSN #"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 bg-green-50",children:"Projected Crop"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-gray-700 w-10"})]})}),e.jsx("tbody",{children:(((Ym=r==null?void 0:r.cashFlow)==null?void 0:Ym.crops)||[]).map(s=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:s.fieldName||"",onChange:n=>{var i;const o=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).map(h=>h.id===s.id?{...h,fieldName:n.target.value}:h);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})},placeholder:"Field name",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm font-medium"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Qe,{value:s.plannedAcres||0,onChange:n=>{var i;const o=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).map(h=>h.id===s.id?{...h,plannedAcres:n}:h);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})},decimals:1,className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:s.practice||"Dryland",onChange:n=>{var i;const o=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).map(h=>h.id===s.id?{...h,practice:n.target.value}:h);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"Dryland",children:"Dryland"}),e.jsx("option",{value:"Irrigated",children:"Irrigated"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:s.county||"",onChange:n=>{var i;const o=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).map(h=>h.id===s.id?{...h,county:n.target.value}:h);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})},placeholder:"County",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:s.entity||"",onChange:n=>{var i;const o=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).map(h=>h.id===s.id?{...h,entity:n.target.value}:h);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),((te==null?void 0:te.entities)||[]).map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:s.legalId||"",onChange:n=>{var i;const o=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).map(h=>h.id===s.id?{...h,legalId:n.target.value}:h);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})},placeholder:"Legal description",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:s.fsnNumber||"",onChange:n=>{var i;const o=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).map(h=>h.id===s.id?{...h,fsnNumber:n.target.value}:h);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})},placeholder:"FSN #",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsxs("select",{value:s.crop||"",onChange:n=>{var g,m;const o=n.target.value,i=s.crop,h=((g=r==null?void 0:r.cashFlow)==null?void 0:g.fieldAPHByCrop)||{};let x={...h[s.id]||{}};i&&s.aph&&(x[i]=s.aph);const f=x[o]||0,d={...h,[s.id]:x},j=[...(((m=r==null?void 0:r.cashFlow)==null?void 0:m.crops)||[]).map(p=>p.id===s.id?{...p,crop:o,aph:f}:p)].sort((p,C)=>{const N=(p.crop||"zzz").toLowerCase(),k=(C.crop||"zzz").toLowerCase();return N<k?-1:N>k?1:(p.fieldName||"").localeCompare(C.fieldName||"")});z({cashFlow:{...r==null?void 0:r.cashFlow,crops:j,fieldAPHByCrop:d}})},className:"w-full px-2 py-1 border border-green-300 rounded text-sm bg-white font-medium",children:[e.jsx("option",{value:"",children:"Select crop..."}),e.jsx("option",{value:"Corn",children:"Corn"}),e.jsx("option",{value:"Soybeans",children:"Soybeans"}),e.jsx("option",{value:"Wheat",children:"Wheat"}),e.jsx("option",{value:"Milo",children:"Milo"}),e.jsx("option",{value:"Oats",children:"Oats"}),e.jsx("option",{value:"Alfalfa",children:"Alfalfa"}),e.jsx("option",{value:"Sunflowers",children:"Sunflowers"}),e.jsx("option",{value:"Sorghum",children:"Sorghum"}),e.jsx("option",{value:"Cotton",children:"Cotton"}),e.jsx("option",{value:"Rice",children:"Rice"}),e.jsx("option",{value:"Barley",children:"Barley"}),e.jsx("option",{value:"Canola",children:"Canola"}),e.jsx("option",{value:"Dry Beans",children:"Dry Beans"}),e.jsx("option",{value:"Peanuts",children:"Peanuts"}),e.jsx("option",{value:"Sugar Beets",children:"Sugar Beets"}),e.jsx("option",{value:"Popcorn",children:"Popcorn"}),e.jsx("option",{value:"Fallow",children:"Fallow"}),e.jsx("option",{value:"CRP",children:"CRP"}),e.jsx("option",{value:"Pasture",children:"Pasture"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("button",{onClick:()=>{var n;if(confirm("Delete this field?")){const o=(((n=r==null?void 0:r.cashFlow)==null?void 0:n.crops)||[]).filter(i=>i.id!==s.id);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})}},className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((Wm=r==null?void 0:r.cashFlow)==null?void 0:Wm.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{colSpan:"7"})]})})]})}),(((_m=r==null?void 0:r.cashFlow)==null?void 0:_m.crops)||[]).filter(s=>s.crop).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((qm=r==null?void 0:r.cashFlow)==null?void 0:qm.crops)||[]).reduce((s,n)=>{const o=n.crop||"Unassigned";return s[o]=(s[o]||0)+(n.plannedAcres||0)*(n.sharePercent||100)/100,s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:`${s==="Unassigned"?"text-gray-400 italic":"text-gray-600"}`,children:s}),e.jsxs("span",{className:"font-mono",children:[n.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},s))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Practice"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((Gm=r==null?void 0:r.cashFlow)==null?void 0:Gm.crops)||[]).reduce((s,n)=>{const o=n.practice||"Dryland";return s[o]=(s[o]||0)+(n.plannedAcres||0)*(n.sharePercent||100)/100,s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("span",{className:"font-mono",children:[n.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},s))})]})]}),(((Km=r==null?void 0:r.cashFlow)==null?void 0:Km.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 bg-amber-50 rounded-lg border border-amber-200 p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5 text-amber-600"}),"APH by Field by Crop"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the APH (Actual Production History) for each field by crop. When you change a field's projected crop, the APH will automatically update."}),e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto bg-white",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-gray-700 sticky left-0 bg-gray-100",children:"Field Name"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-gray-700",children:"Acres"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Corn"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Soybeans"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Wheat"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Milo"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Oats"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Alfalfa"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Sunflowers"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold text-amber-700 bg-amber-50",children:"Sorghum"})]})}),e.jsx("tbody",{children:(((Jm=r==null?void 0:r.cashFlow)==null?void 0:Jm.crops)||[]).map(s=>{var h;const n=((h=r==null?void 0:r.cashFlow)==null?void 0:h.fieldAPHByCrop)||{},o=n[s.id]||{},i=["Corn","Soybeans","Wheat","Milo","Oats","Alfalfa","Sunflowers","Sorghum"];return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-3 font-medium text-gray-800 sticky left-0 bg-white",children:[s.fieldName||"(unnamed)",s.crop&&e.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-green-100 text-green-700",children:s.crop})]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:(s.plannedAcres||0).toLocaleString("en-US",{maximumFractionDigits:1})}),i.map(b=>{const x=s.crop===b,f=x?s.aph||o[b]||0:o[b]||0;return e.jsx("td",{className:`py-1 px-1 ${x?"bg-green-50":"bg-amber-50"}`,children:e.jsx(Qe,{value:f,onChange:d=>{var g;const u={...o,[b]:d},j={...n,[s.id]:u};if(x){const m=(((g=r==null?void 0:r.cashFlow)==null?void 0:g.crops)||[]).map(p=>p.id===s.id?{...p,aph:d}:p);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:m,fieldAPHByCrop:j}})}else z({cashFlow:{...r==null?void 0:r.cashFlow,fieldAPHByCrop:j}})},decimals:1,placeholder:"0",className:`w-16 px-1 py-1 border rounded text-xs text-center font-mono ${x?"border-green-400 bg-green-100 font-semibold":"border-amber-200 bg-white"}`})},b)})]},s.id)})})]})}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-green-100 border border-green-400"}),"Current projected crop"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-amber-50 border border-amber-200"}),"Other crops (stored for when you switch)"]})]})]})]})}),Pe==="crops"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ps,{className:"w-6 h-6 text-green-600"}),"Crop Planning"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[((Qm=te==null?void 0:te.fields)==null?void 0:Qm.length)>0&&e.jsxs("button",{onClick:()=>{const o=[...(te.fields||[]).map(i=>({id:`crop-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fieldName:i.fieldName,crop:i.crop||"",practice:i.practice||"Dryland",county:i.county,entity:i.entity,plannedAcres:i.plannedAcres||0,sharePercent:i.sharePercent||100,aph:i.aph||0}))].sort((i,h)=>{const b=(i.crop||"zzz").toLowerCase(),x=(h.crop||"zzz").toLowerCase();return b<x?-1:b>x?1:(i.fieldName||"").localeCompare(h.fieldName||"")});z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors",title:"Load saved field definitions",children:[e.jsx(gs,{className:"w-4 h-4"}),"Load Saved (",te.fields.length,")"]}),(((Zm=r==null?void 0:r.cashFlow)==null?void 0:Zm.crops)||[]).length>0&&e.jsxs("button",{onClick:()=>{var i;const n=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).map(h=>({id:h.id,fieldName:h.fieldName,crop:h.crop,practice:h.practice,county:h.county,entity:h.entity,plannedAcres:h.plannedAcres,sharePercent:h.sharePercent,aph:h.aph})),o=ce.map(h=>h.id===ze?{...h,fields:n}:h);me(o),alert(`Saved ${n.length} fields for ${te.name}`)},className:"flex items-center gap-2 bg-amber-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-amber-700 transition-colors",title:"Save current fields as defaults",children:[e.jsx(tj,{className:"w-4 h-4"}),"Save Fields"]}),e.jsxs("button",{onClick:()=>{var h;const s=((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[],n={id:`crop-${Date.now()}`,fieldName:"",crop:"",practice:"Dryland",county:"",entity:Ne,plannedAcres:0,sharePercent:100,aph:0},i=[...[...s,n]].sort((b,x)=>{const f=(b.crop||"zzz").toLowerCase(),d=(x.crop||"zzz").toLowerCase();return f<d?-1:f>d?1:(b.fieldName||"").localeCompare(x.fieldName||"")});z({cashFlow:{...r==null?void 0:r.cashFlow,crops:i}})},className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Field"]})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Planned Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:(((Xm=r==null?void 0:r.cashFlow)==null?void 0:Xm.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Share Acres"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:(((Bm=r==null?void 0:r.cashFlow)==null?void 0:Bm.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0)*(n.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Irrigated Acres"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:(((e0=r==null?void 0:r.cashFlow)==null?void 0:e0.crops)||[]).filter(s=>s.practice==="Irrigated").reduce((s,n)=>s+(n.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Dryland Acres"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700 font-mono",children:(((t0=r==null?void 0:r.cashFlow)==null?void 0:t0.crops)||[]).filter(s=>s.practice==="Dryland").reduce((s,n)=>s+(n.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:(((s0=r==null?void 0:r.cashFlow)==null?void 0:s0.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0)*(n.sharePercent||100)/100*(n.aph||0),0).toLocaleString("en-US",{maximumFractionDigits:0})})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Entity"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Planned Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share %"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Bushels"}),e.jsx("th",{className:"py-3 px-2 w-10"})]})}),e.jsx("tbody",{children:(((r0=r==null?void 0:r.cashFlow)==null?void 0:r0.crops)||[]).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"11",className:"py-8 text-center text-gray-500",children:'No crops added yet. Click "Add Field" to get started.'})}):(((a0=r==null?void 0:r.cashFlow)==null?void 0:a0.crops)||[]).map(s=>{var n;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:s.fieldName||"",onChange:o=>{var h;const i=(((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[]).map(b=>b.id===s.id?{...b,fieldName:o.target.value}:b);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:i}})},placeholder:"Field name",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:s.crop||"",onChange:o=>{var m,p;const i=o.target.value,h=s.crop,b=((m=r==null?void 0:r.cashFlow)==null?void 0:m.fieldAPHByCrop)||{};let f={...b[s.id]||{}};h&&s.aph&&(f[h]=s.aph);const d=f[i]||0,u={...b,[s.id]:f},g=[...(((p=r==null?void 0:r.cashFlow)==null?void 0:p.crops)||[]).map(C=>C.id===s.id?{...C,crop:i,aph:d}:C)].sort((C,N)=>{const k=(C.crop||"zzz").toLowerCase(),P=(N.crop||"zzz").toLowerCase();return k<P?-1:k>P?1:(C.fieldName||"").localeCompare(N.fieldName||"")});z({cashFlow:{...r==null?void 0:r.cashFlow,crops:g,fieldAPHByCrop:u}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Corn",children:"Corn"}),e.jsx("option",{value:"Soybeans",children:"Soybeans"}),e.jsx("option",{value:"Wheat",children:"Wheat"}),e.jsx("option",{value:"Grain Sorghum",children:"Grain Sorghum"}),e.jsx("option",{value:"Oats",children:"Oats"}),e.jsx("option",{value:"Barley",children:"Barley"}),e.jsx("option",{value:"Sunflowers",children:"Sunflowers"}),e.jsx("option",{value:"Dry Beans",children:"Dry Beans"}),e.jsx("option",{value:"Alfalfa",children:"Alfalfa"}),e.jsx("option",{value:"Hay",children:"Hay"}),e.jsx("option",{value:"Cotton",children:"Cotton"}),e.jsx("option",{value:"Rice",children:"Rice"}),e.jsx("option",{value:"Popcorn",children:"Popcorn"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:s.practice||"Dryland",onChange:o=>{var h;const i=(((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[]).map(b=>b.id===s.id?{...b,practice:o.target.value}:b);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"Dryland",children:"Dryland"}),e.jsx("option",{value:"Irrigated",children:"Irrigated"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:s.county||"",onChange:o=>{var h;const i=(((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[]).map(b=>b.id===s.id?{...b,county:o.target.value}:b);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:i}})},placeholder:"County",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:s.entity||"",onChange:o=>{var h;const i=(((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[]).map(b=>b.id===s.id?{...b,entity:o.target.value}:b);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:i}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),(n=te==null?void 0:te.entities)==null?void 0:n.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Qe,{value:s.plannedAcres||0,onChange:o=>{var h;const i=(((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[]).map(b=>b.id===s.id?{...b,plannedAcres:o}:b);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:i}})},decimals:1,placeholder:"0",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Qe,{value:s.sharePercent||100,onChange:o=>{var h;const i=(((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[]).map(b=>b.id===s.id?{...b,sharePercent:o}:b);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:i}})},decimals:0,placeholder:"100",className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-gray-600",children:((s.plannedAcres||0)*(s.sharePercent||100)/100).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Qe,{value:s.aph||0,onChange:o=>{var d,u;const i=((d=r==null?void 0:r.cashFlow)==null?void 0:d.fieldAPHByCrop)||{},b={...i[s.id]||{},[s.crop]:o},x={...i,[s.id]:b},f=(((u=r==null?void 0:r.cashFlow)==null?void 0:u.crops)||[]).map(j=>j.id===s.id?{...j,aph:o}:j);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:f,fieldAPHByCrop:x}})},decimals:1,placeholder:"0",className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-gray-600",children:((s.plannedAcres||0)*(s.sharePercent||100)/100*(s.aph||0)).toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("button",{onClick:()=>{var i;const o=(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).filter(h=>h.id!==s.id);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:o}})},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},s.id)})}),(((n0=r==null?void 0:r.cashFlow)==null?void 0:n0.crops)||[]).length>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"5",className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((l0=r==null?void 0:r.cashFlow)==null?void 0:l0.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0),0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((o0=r==null?void 0:r.cashFlow)==null?void 0:o0.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0)*(n.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((i0=r==null?void 0:r.cashFlow)==null?void 0:i0.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0)*(n.sharePercent||100)/100*(n.aph||0),0).toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{})]})})]})}),(((c0=r==null?void 0:r.cashFlow)==null?void 0:c0.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((d0=r==null?void 0:r.cashFlow)==null?void 0:d0.crops)||[]).reduce((s,n)=>{const o=n.crop||"Unassigned";return s[o]=(s[o]||0)+(n.plannedAcres||0)*(n.sharePercent||100)/100,s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("span",{className:"font-mono",children:[n.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},s))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Bushels by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((x0=r==null?void 0:r.cashFlow)==null?void 0:x0.crops)||[]).reduce((s,n)=>{const o=n.crop||"Unassigned";return s[o]=(s[o]||0)+(n.plannedAcres||0)*(n.sharePercent||100)/100*(n.aph||0),s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("span",{className:"font-mono",children:[n.toLocaleString("en-US",{maximumFractionDigits:0})," bu"]})]},s))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Entity"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((m0=r==null?void 0:r.cashFlow)==null?void 0:m0.crops)||[]).reduce((s,n)=>{var i,h;const o=((h=(i=te==null?void 0:te.entities)==null?void 0:i.find(b=>b.id===n.entity))==null?void 0:h.name)||"Unassigned";return s[o]=(s[o]||0)+(n.plannedAcres||0)*(n.sharePercent||100)/100,s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("span",{className:"font-mono",children:[n.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},s))})]})]})]})}),Pe==="cropRevenue"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(vt,{className:"w-6 h-6 text-green-600"}),"Crop Revenue Projections"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"View:"}),e.jsx("button",{onClick:()=>z({cashFlow:{...r==null?void 0:r.cashFlow,revenueViewMode:"byCrop"}}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${(((u0=r==null?void 0:r.cashFlow)==null?void 0:u0.revenueViewMode)||"byCrop")==="byCrop"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"By Crop"}),e.jsx("button",{onClick:()=>z({cashFlow:{...r==null?void 0:r.cashFlow,revenueViewMode:"byField"}}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${((h0=r==null?void 0:r.cashFlow)==null?void 0:h0.revenueViewMode)==="byField"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"By Field"})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Project crop revenue based on expected yields and prices. This data flows to the Summary tab under Crop Sales."}),(()=>{var d,u,j;const s=((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[],n=((u=r==null?void 0:r.cashFlow)==null?void 0:u.cropPrices)||{},o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.revenueViewMode)||"byCrop",i=[...new Set(s.map(g=>g.crop).filter(Boolean))],h=i.map(g=>{const m=s.filter(A=>A.crop===g),p=m.reduce((A,R)=>A+(R.plannedAcres||0)*(R.sharePercent||100)/100,0),C=m.reduce((A,R)=>{const L=(R.plannedAcres||0)*(R.sharePercent||100)/100;return A+L*(R.projectedYield||R.aph||0)},0),N=n[g]||0,k=C*N,P=p>0?C/p:0;return{crop:g,acres:p,bushels:C,avgYield:P,price:N,revenue:k,fields:m}}),b=h.reduce((g,m)=>g+m.revenue,0),x=h.reduce((g,m)=>g+m.acres,0),f=h.reduce((g,m)=>g+m.bushels,0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Projected Revenue"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:T(b)}),e.jsx("div",{className:"text-xs text-green-500",children:x>0?`$${(b/x).toFixed(2)}/acre`:""})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:x.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("div",{className:"text-xs text-blue-500",children:["Across ",s.length," fields"]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:f.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-amber-500",children:"Projected production"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Crops"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:i.length}),e.jsx("div",{className:"text-xs text-purple-500",children:i.join(", ")||"None"})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-green-800 flex items-center gap-2 mb-3",children:[e.jsx(lt,{className:"w-4 h-4"}),"Projected Sale Prices by Crop"]}),e.jsx("p",{className:"text-xs text-green-600 mb-4",children:"Set your expected sale price per bushel for each crop. These prices are used to calculate projected revenue."}),i.length>0?e.jsx("div",{className:"grid grid-cols-4 gap-4",children:i.map(g=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:g}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ie,{value:n[g]||0,onChange:m=>{const p={...n,[g]:m};z({cashFlow:{...r==null?void 0:r.cashFlow,cropPrices:p}})},className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono font-semibold"}),e.jsx("span",{className:"text-xs text-gray-500",children:"/bu"})]})]},g))}):e.jsx("div",{className:"text-sm text-green-600",children:"Add crops in the Crops tab to set prices."})]}),o==="byCrop"&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Revenue by Crop"}),h.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Avg Yield"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Total Bushels"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-green-700 text-right bg-green-50",children:"Price/Bu"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-green-700 text-right bg-green-50",children:"Total Revenue"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"$/Acre"})]})}),e.jsx("tbody",{children:h.map((g,m)=>e.jsxs("tr",{className:`border-b border-gray-100 ${m%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:g.crop}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:g.acres.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:g.avgYield.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:g.bushels.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700 bg-green-50",children:g.price>0?`$${g.price.toFixed(2)}`:e.jsx("span",{className:"text-red-500",children:"Set price"})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono font-semibold text-green-700 bg-green-50",children:T(g.revenue)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-600",children:g.acres>0?`$${(g.revenue/g.acres).toFixed(2)}`:""})]},g.crop))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-200 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"TOTALS"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:x.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:f.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 bg-green-100"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono font-bold text-green-700 bg-green-100",children:T(b)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-700",children:x>0?`$${(b/x).toFixed(2)}`:""})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No crops found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields and assign crops in the Fields/Crops tabs first."})]})})]}),o==="byField"&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Revenue by Field"}),s.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Proj. Yield"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Bu"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right bg-green-50",children:"Price/Bu"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right bg-green-50",children:"Revenue"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"$/Acre"})]})}),e.jsx("tbody",{children:s.map((g,m)=>{const p=(g.plannedAcres||0)*(g.sharePercent||100)/100,C=g.projectedYield||g.aph||0,N=p*C,k=n[g.crop]||0,P=N*k;return e.jsxs("tr",{className:`border-b border-gray-100 ${m%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:g.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:g.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${g.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:g.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:p.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-500",children:(g.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right bg-blue-50",children:e.jsx(Qe,{value:g.projectedYield||g.aph||0,onChange:A=>{const R=s.map(L=>L.id===g.id?{...L,projectedYield:A}:L);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:R}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-right font-mono text-sm"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:N.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-green-700 bg-green-50",children:k>0?`$${k.toFixed(2)}`:e.jsx("span",{className:"text-red-500 text-xs",children:"Set"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700 bg-green-50",children:T(P)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:p>0?`$${(P/p).toFixed(2)}`:""})]},g.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-200 font-semibold",children:[e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-gray-700",children:"TOTALS"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:x.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-3"}),e.jsx("td",{className:"py-3 px-3 bg-blue-100"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:f.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-3 bg-green-100"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-green-700 bg-green-100",children:T(b)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-gray-700",children:x>0?`$${(b/x).toFixed(2)}`:""})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})})]}),e.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(lt,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Cash Flow Integration"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Total projected crop revenue of ",e.jsx("span",{className:"font-bold",children:T(b)})," flows to your Summary tab under Crop Sales. Revenue is broken down by crop for detailed tracking."]})]})]})})]})})()]})}),Pe==="land"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(uo,{className:"w-6 h-6 text-purple-600"}),"Land Details"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var i,h,b,x,f,d;const s=((r==null?void 0:r.debtService)||[]).filter(u=>u.category==="realEstate"),n=s.reduce((u,j)=>u+(j.principalPayment||0),0),o=s.reduce((u,j)=>u+(j.interestPayment||0),0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Owned Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).filter(u=>u.ownership==="Owned").reduce((u,j)=>u+(j.plannedAcres||0)*(j.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Rented Acres"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:(((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[]).filter(u=>u.ownership==="Rented").reduce((u,j)=>u+(j.plannedAcres||0)*(j.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Shared Acres"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:(((b=r==null?void 0:r.cashFlow)==null?void 0:b.crops)||[]).filter(u=>u.ownership==="Shared").reduce((u,j)=>u+(j.plannedAcres||0)*(j.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:(((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[]).reduce((u,j)=>u+(j.plannedAcres||0)*(j.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Cash Rent"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:T((((f=r==null?void 0:r.cashFlow)==null?void 0:f.crops)||[]).filter(u=>u.ownership==="Rented").reduce((u,j)=>u+(j.totalRent||0),0))}),e.jsx("div",{className:"text-xs text-red-500",children:"Rented ground"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total RE Tax"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:T((((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[]).filter(u=>u.ownership==="Owned").reduce((u,j)=>u+(j.totalReTax||0),0))}),e.jsx("div",{className:"text-xs text-orange-500",children:"Owned ground"})]}),e.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 border border-teal-200",children:[e.jsx("div",{className:"text-sm text-teal-600 font-medium",children:"RE Debt Principal"}),e.jsx("div",{className:"text-2xl font-bold text-teal-700 font-mono",children:T(n)}),e.jsxs("div",{className:"text-xs text-teal-500",children:["From Balance Sheet (",s.length," loans)"]})]}),e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4 border border-cyan-200",children:[e.jsx("div",{className:"text-sm text-cyan-600 font-medium",children:"RE Debt Interest"}),e.jsx("div",{className:"text-2xl font-bold text-cyan-700 font-mono",children:T(o)}),e.jsxs("div",{className:"text-xs text-cyan-500",children:["From Balance Sheet (",s.length," loans)"]})]})]})]})})(),(((p0=r==null?void 0:r.cashFlow)==null?void 0:p0.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab first, then return here to enter land details."})]})}),(((g0=r==null?void 0:r.cashFlow)==null?void 0:g0.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Entity"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Ownership"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Rent/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Rent"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"RE Tax/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total RE Tax"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-teal-700 text-right bg-teal-50",children:"Principal/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-right bg-cyan-50",children:"Interest/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-right bg-green-50",children:"Total Pmt"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Land Owner"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Legal ID"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Assessor #"})]})}),e.jsx("tbody",{children:(()=>{var f;const s=((f=r==null?void 0:r.cashFlow)==null?void 0:f.crops)||[],n=s.filter(d=>d.ownership==="Owned").reduce((d,u)=>d+(u.plannedAcres||0)*(u.sharePercent||100)/100,0),o=((r==null?void 0:r.debtService)||[]).filter(d=>d.category==="realEstate"),i=o.reduce((d,u)=>d+(u.principalPayment||0),0),h=o.reduce((d,u)=>d+(u.interestPayment||0),0),b=n>0?i/n:0,x=n>0?h/n:0;return s.map(d=>{var p,C;const u=(d.plannedAcres||0)*(d.sharePercent||100)/100,j=d.ownership==="Owned"?u*b:0,g=d.ownership==="Owned"?u*x:0,m=j+g;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:d.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:u.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:d.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${d.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:d.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:d.county||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600 text-xs",children:((C=(p=te==null?void 0:te.entities)==null?void 0:p.find(N=>N.id===d.entity))==null?void 0:C.name)||""}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:d.ownership||"",onChange:N=>{var P;const k=(((P=r==null?void 0:r.cashFlow)==null?void 0:P.crops)||[]).map(A=>A.id===d.id?{...A,ownership:N.target.value}:A);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:k}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Owned",children:"Owned"}),e.jsx("option",{value:"Rented",children:"Rented"}),e.jsx("option",{value:"Shared",children:"Shared"})]})}),e.jsx("td",{className:"py-2 px-2",children:d.ownership==="Rented"?e.jsx(ie,{value:d.rentPerAcre||0,onChange:N=>{var A;const k=u>0?N*u:0,P=(((A=r==null?void 0:r.cashFlow)==null?void 0:A.crops)||[]).map(R=>R.id===d.id?{...R,rentPerAcre:N,totalRent:k}:R);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:P}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2",children:d.ownership==="Rented"?e.jsx(ie,{value:d.totalRent||0,onChange:N=>{var A;const k=u>0?N/u:0,P=(((A=r==null?void 0:r.cashFlow)==null?void 0:A.crops)||[]).map(R=>R.id===d.id?{...R,totalRent:N,rentPerAcre:k}:R);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:P}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2",children:d.ownership==="Owned"?e.jsx(ie,{value:d.reTaxPerAcre||0,onChange:N=>{var A;const k=u>0?N*u:0,P=(((A=r==null?void 0:r.cashFlow)==null?void 0:A.crops)||[]).map(R=>R.id===d.id?{...R,reTaxPerAcre:N,totalReTax:k}:R);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:P}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2",children:d.ownership==="Owned"?e.jsx(ie,{value:d.totalReTax||0,onChange:N=>{var A;const k=u>0?N/u:0,P=(((A=r==null?void 0:r.cashFlow)==null?void 0:A.crops)||[]).map(R=>R.id===d.id?{...R,totalReTax:N,reTaxPerAcre:k}:R);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:P}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2 bg-teal-50 text-right",children:d.ownership==="Owned"?e.jsx("span",{className:"font-mono text-sm text-teal-700 font-medium",children:T(b)}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2 bg-cyan-50 text-right",children:d.ownership==="Owned"?e.jsx("span",{className:"font-mono text-sm text-cyan-700 font-medium",children:T(x)}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2 bg-green-50 text-right",children:d.ownership==="Owned"?e.jsx("span",{className:"font-mono text-sm text-green-700 font-semibold",children:T(m)}):e.jsx("span",{className:"text-gray-400 text-xs",children:""})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:d.landOwner||"",onChange:N=>{var P;const k=(((P=r==null?void 0:r.cashFlow)==null?void 0:P.crops)||[]).map(A=>A.id===d.id?{...A,landOwner:N.target.value}:A);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:k}})},placeholder:"Owner name",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:d.legalId||"",onChange:N=>{var P;const k=(((P=r==null?void 0:r.cashFlow)==null?void 0:P.crops)||[]).map(A=>A.id===d.id?{...A,legalId:N.target.value}:A);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:k}})},placeholder:"Legal ID",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:d.assessorNumber||"",onChange:N=>{var P;const k=(((P=r==null?void 0:r.cashFlow)==null?void 0:P.crops)||[]).map(A=>A.id===d.id?{...A,assessorNumber:N.target.value}:A);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:k}})},placeholder:"Assessor #",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})})]},d.id)})})()}),e.jsx("tfoot",{children:(()=>{var d;const s=((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[],n=s.filter(u=>u.ownership==="Owned").reduce((u,j)=>u+(j.plannedAcres||0)*(j.sharePercent||100)/100,0),o=((r==null?void 0:r.debtService)||[]).filter(u=>u.category==="realEstate"),i=o.reduce((u,j)=>u+(j.principalPayment||0),0),h=o.reduce((u,j)=>u+(j.interestPayment||0),0),b=i+h,x=n>0?i/n:0,f=n>0?h/n:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:s.reduce((u,j)=>u+(j.plannedAcres||0)*(j.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{colSpan:"5"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700",children:T(s.filter(u=>u.ownership==="Rented").reduce((u,j)=>u+(j.totalRent||0),0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700",children:T(s.filter(u=>u.ownership==="Owned").reduce((u,j)=>u+(j.totalReTax||0),0))}),e.jsxs("td",{className:"py-3 px-2 text-right font-mono text-teal-700 bg-teal-50",children:[T(x),"/ac"]}),e.jsxs("td",{className:"py-3 px-2 text-right font-mono text-cyan-700 bg-cyan-50",children:[T(f),"/ac"]}),e.jsx("td",{className:"py-3 px-2 text-right font-mono text-green-700 bg-green-50",children:T(b)}),e.jsx("td",{colSpan:"3"})]})})()})]})}),(((b0=r==null?void 0:r.cashFlow)==null?void 0:b0.crops)||[]).filter(s=>s.landOwner).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Ownership"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((y0=r==null?void 0:r.cashFlow)==null?void 0:y0.crops)||[]).reduce((s,n)=>{const o=n.ownership||"Unassigned";return s[o]=(s[o]||0)+(n.plannedAcres||0)*(n.sharePercent||100)/100,s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("span",{className:"font-mono",children:[n.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},s))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by Land Owner"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((f0=r==null?void 0:r.cashFlow)==null?void 0:f0.crops)||[]).reduce((s,n)=>{const o=n.landOwner||"Unassigned";return s[o]=(s[o]||0)+(n.plannedAcres||0)*(n.sharePercent||100)/100,s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("span",{className:"font-mono",children:[n.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},s))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acres by County"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((j0=r==null?void 0:r.cashFlow)==null?void 0:j0.crops)||[]).reduce((s,n)=>{const o=n.county||"Unassigned";return s[o]=(s[o]||0)+(n.plannedAcres||0)*(n.sharePercent||100)/100,s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("span",{className:"font-mono",children:[n.toLocaleString("en-US",{maximumFractionDigits:1})," ac"]})]},s))})]})]}),(((N0=r==null?void 0:r.cashFlow)==null?void 0:N0.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5 text-gray-600"}),"Land Cost Analysis: Rented vs Owned"]}),(()=>{var S;const s=((S=r==null?void 0:r.cashFlow)==null?void 0:S.crops)||[],n=s.filter(E=>E.ownership==="Rented"),o=n.reduce((E,I)=>E+(I.plannedAcres||0)*(I.sharePercent||100)/100,0),i=n.reduce((E,I)=>E+(I.totalRent||0),0),h=o>0?i/o:0,b=n.length>0?Math.min(...n.map(E=>E.rentPerAcre||0).filter(E=>E>0)):0,x=n.length>0?Math.max(...n.map(E=>E.rentPerAcre||0)):0,f=s.filter(E=>E.ownership==="Owned"),d=f.reduce((E,I)=>E+(I.plannedAcres||0)*(I.sharePercent||100)/100,0),u=f.reduce((E,I)=>E+(I.totalReTax||0),0),j=d>0?u/d:0;f.length>0&&Math.min(...f.map(E=>E.reTaxPerAcre||0).filter(E=>E>0)),f.length>0&&Math.max(...f.map(E=>E.reTaxPerAcre||0));const m=((r==null?void 0:r.debtService)||[]).filter(E=>E.category==="realEstate"),p=m.reduce((E,I)=>E+(I.principalPayment||0),0),C=m.reduce((E,I)=>E+(I.interestPayment||0),0),N=p+C,k=m.reduce((E,I)=>E+(I.principalAmount||0),0),P=u+N,A=d>0?P/d:0,R=o+d,L=i+P,D=R>0?L/R:0,F=R>0?o/R*100:0,v=R>0?d/R*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border-2 border-blue-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-blue-800 text-lg",children:"Rented Ground"}),e.jsxs("span",{className:"text-sm bg-blue-100 text-blue-700 px-2 py-1 rounded",children:[F.toFixed(1),"% of operation"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-blue-700",children:o.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Rent"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-blue-700",children:T(i)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Avg Rent/Acre"}),e.jsx("div",{className:"text-xl font-bold font-mono text-blue-600",children:T(h)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Range"}),e.jsx("div",{className:"text-sm font-mono text-blue-600",children:b>0?`${T(b)} - ${T(x)}`:""})]})]}),n.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-100",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Fields: ",n.length]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.slice(0,5).map(E=>e.jsx("span",{className:"text-xs bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded",children:E.fieldName||"Unnamed"},E.id)),n.length>5&&e.jsxs("span",{className:"text-xs text-blue-500",children:["+",n.length-5," more"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border-2 border-green-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-green-800 text-lg",children:"Owned Ground"}),e.jsxs("span",{className:"text-sm bg-green-100 text-green-700 px-2 py-1 rounded",children:[v.toFixed(1),"% of operation"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-green-700",children:d.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"RE Tax"}),e.jsx("div",{className:"text-lg font-bold font-mono text-green-700",children:T(u)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["(",T(j),"/ac)"]})]})]}),m.length>0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 mb-3",children:[e.jsxs("div",{className:"text-xs text-green-700 font-semibold mb-2 flex items-center gap-1",children:[e.jsx(Ua,{className:"w-3 h-3"}),"Real Estate Debt (from Balance Sheet)"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Principal Pmt"}),e.jsx("div",{className:"font-mono font-semibold text-green-700",children:T(p)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Interest Pmt"}),e.jsx("div",{className:"font-mono font-semibold text-green-700",children:T(C)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Pmt"}),e.jsx("div",{className:"font-mono font-semibold text-green-700",children:T(N)})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200 text-xs text-gray-500",children:[e.jsxs("span",{className:"font-medium",children:["Loans: ",m.length]})," | Balance: ",T(k)]})]}),e.jsx("div",{className:"bg-green-100 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-700 font-semibold",children:"TOTAL OWNED COST"}),e.jsx("div",{className:"text-xs text-gray-500",children:"(Tax + Debt Payment)"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold font-mono text-green-800",children:T(P)}),e.jsxs("div",{className:"text-sm font-mono text-green-700",children:[T(A),"/ac"]})]})]})}),f.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-green-100",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Fields: ",f.length]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[f.slice(0,5).map(E=>e.jsx("span",{className:"text-xs bg-green-50 text-green-600 px-1.5 py-0.5 rounded",children:E.fieldName||"Unnamed"},E.id)),f.length>5&&e.jsxs("span",{className:"text-xs text-green-500",children:["+",f.length-5," more"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border-2 border-purple-200 p-4",children:[e.jsx("h4",{className:"font-bold text-purple-800 mb-3",children:"Combined Land Cost Summary"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-purple-700",children:R.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Total Land Cost"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-purple-700",children:T(L)}),e.jsx("div",{className:"text-xs text-gray-500",children:"(Rent + Tax + RE Debt)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Avg Cost/Acre"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-purple-700",children:T(D)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Blended rate"})]}),e.jsxs("div",{className:"text-center border-l border-purple-200 pl-4",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Rent/Ac"}),e.jsx("div",{className:"text-xl font-bold font-mono text-blue-600",children:T(h)}),e.jsx("div",{className:"text-xs text-blue-500",children:"Rented"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Own Cost/Ac"}),e.jsx("div",{className:"text-xl font-bold font-mono text-green-600",children:T(A)}),e.jsx("div",{className:"text-xs text-green-500",children:"Tax + Debt"})]})]}),h>0&&A>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-purple-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Cost Comparison:"})," ",h>A?"Rented ground costs":"Owned ground costs"," ",e.jsxs("span",{className:"font-bold font-mono text-purple-700",children:[T(Math.abs(h-A)),"/ac"]})," more"]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${h>A?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:h>A?"Owned is cheaper":"Rented is cheaper"})]})}),R>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-100",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Ownership Distribution"}),e.jsxs("div",{className:"h-6 rounded-full overflow-hidden flex bg-gray-200",children:[F>0&&e.jsx("div",{className:"bg-blue-500 flex items-center justify-center text-white text-xs font-medium",style:{width:`${F}%`},children:F>=15?`Rented ${F.toFixed(0)}%`:""}),v>0&&e.jsx("div",{className:"bg-green-500 flex items-center justify-center text-white text-xs font-medium",style:{width:`${v}%`},children:v>=15?`Owned ${v.toFixed(0)}%`:""})]})]}),m.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-100",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Real Estate Debt Detail (from Balance Sheet Debt Service)"}),e.jsx("div",{className:"grid grid-cols-1 gap-1",children:m.map(E=>e.jsxs("div",{className:"flex justify-between items-center text-xs bg-gray-50 rounded px-2 py-1",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:E.description}),e.jsx("span",{className:"text-gray-500",children:E.lender}),e.jsxs("span",{className:"font-mono text-gray-600",children:["Bal: ",T(E.principalAmount||0)]}),e.jsxs("span",{className:"font-mono text-green-700 font-medium",children:["Pmt: ",T((E.principalPayment||0)+(E.interestPayment||0))]})]},E.id))})]})]})]})})()]})]})}),Pe==="variableExpenses"&&ue==="seed"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-6 h-6 text-green-600"}),"Seed Costs"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:(((v0=r==null?void 0:r.cashFlow)==null?void 0:v0.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0)*(n.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Seed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:T((((w0=r==null?void 0:r.cashFlow)==null?void 0:w0.crops)||[]).reduce((s,n)=>{const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+o*(n.seedPerAcre||0)},0))})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total Treatment Cost"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T((((C0=r==null?void 0:r.cashFlow)==null?void 0:C0.crops)||[]).reduce((s,n)=>{const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+o*(n.seedTreatmentPerAcre||0)},0))})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Seed + Treatment"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:T((((F0=r==null?void 0:r.cashFlow)==null?void 0:F0.crops)||[]).reduce((s,n)=>{const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+o*((n.seedPerAcre||0)+(n.seedTreatmentPerAcre||0))},0))})]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-1",children:"Seed Cost Entry Method"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Choose how you want to enter seed costs for your crops"})]}),e.jsxs("select",{value:((P0=r==null?void 0:r.cashFlow)==null?void 0:P0.seedEntryMethod)||"direct",onChange:s=>{z({cashFlow:{...r==null?void 0:r.cashFlow,seedEntryMethod:s.target.value}})},className:"px-4 py-2 border border-blue-300 rounded-lg font-medium text-blue-800 bg-white min-w-[250px]",children:[e.jsx("option",{value:"direct",children:"Direct Seed Cost per Acre by Crop"}),e.jsx("option",{value:"calculator",children:"Use Population Calculator"})]})]})}),(((k0=r==null?void 0:r.cashFlow)==null?void 0:k0.seedEntryMethod)||"direct")==="direct"&&e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5 text-gray-600"}),"Seed Cost per Acre by Crop"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Enter the seed cost per acre for each crop. This will apply to all fields with that crop."}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:(()=>{var o,i;const s=[...new Set((((o=r==null?void 0:r.cashFlow)==null?void 0:o.crops)||[]).map(h=>h.crop).filter(Boolean))],n=((i=r==null?void 0:r.cashFlow)==null?void 0:i.seedCostsByCrop)||{};return s.length===0?e.jsx("div",{className:"col-span-4 text-sm text-gray-500",children:"No crops defined. Add crops in the Crops tab first."}):s.map(h=>e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:h}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{value:n[h]||0,onChange:b=>{var d;const x={...n,[h]:b},f=(((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[]).map(u=>u.crop===h?{...u,seedPerAcre:b}:u);z({cashFlow:{...r==null?void 0:r.cashFlow,seedCostsByCrop:x,crops:f}})},className:"w-full px-3 py-2 border border-gray-200 rounded text-right font-mono"}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:"/acre"})]})]},h))})()})]}),(((A0=r==null?void 0:r.cashFlow)==null?void 0:A0.seedEntryMethod)||"direct")==="calculator"&&e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(ur,{className:"w-5 h-5 text-gray-600"}),"Seed Cost Calculator"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Step 1: Set Seeds Per Unit by Crop"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:(()=>{var o,i;const s=[...new Set((((o=r==null?void 0:r.cashFlow)==null?void 0:o.crops)||[]).map(h=>h.crop).filter(Boolean))],n=((i=r==null?void 0:r.cashFlow)==null?void 0:i.seedUnitsPerCrop)||{};return s.length>0?s.map(h=>e.jsxs("div",{className:"bg-white border rounded-lg p-3 flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-gray-700 min-w-[80px]",children:h}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{value:n[h]||0,onChange:b=>{const x={...n,[h]:b};z({cashFlow:{...r==null?void 0:r.cashFlow,seedUnitsPerCrop:x}})},decimals:0,className:"w-28 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"}),e.jsx("span",{className:"text-xs text-gray-500",children:"seeds/unit"})]})]},h)):e.jsx("div",{className:"text-sm text-gray-500",children:"Add crops in the Crops tab first."})})()})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Step 2: Set Price & Population by Crop/Practice"}),e.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Seeds/Unit"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Price/Unit"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Population"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres/Unit"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Seed $/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-center",children:"Apply"})]})}),e.jsx("tbody",{children:(()=>{var i,h,b;const s={};(((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[]).forEach(x=>{if(x.crop){const f=`${x.crop}-${x.practice||"Dryland"}`;s[f]||(s[f]={crop:x.crop,practice:x.practice||"Dryland"})}});const n=((h=r==null?void 0:r.cashFlow)==null?void 0:h.seedCalc)||{},o=((b=r==null?void 0:r.cashFlow)==null?void 0:b.seedUnitsPerCrop)||{};return Object.values(s).map(({crop:x,practice:f})=>{const d=`${x}-${f}`,u=n[d]||{pricePerUnit:0,population:0},j=o[x]||0,g=u.population>0&&j>0?j/u.population:0,m=g>0?u.pricePerUnit/g:0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:x}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${f==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:f})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-500",children:j>0?j.toLocaleString():e.jsx("span",{className:"text-amber-600",children:"Set above"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ie,{value:u.pricePerUnit||0,onChange:p=>{const C={...n,[d]:{...u,pricePerUnit:p}};z({cashFlow:{...r==null?void 0:r.cashFlow,seedCalc:C}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Qe,{value:u.population||0,onChange:p=>{const C={...n,[d]:{...u,population:p}};z({cashFlow:{...r==null?void 0:r.cashFlow,seedCalc:C}})},decimals:0,className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:g>0?g.toFixed(2):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:m>0?T(m):""}),e.jsx("td",{className:"py-2 px-3 text-center",children:e.jsx("button",{onClick:()=>{var p;if(m>0){const C=(((p=r==null?void 0:r.cashFlow)==null?void 0:p.crops)||[]).map(N=>N.crop===x&&(N.practice||"Dryland")===f?{...N,seedPerAcre:m}:N);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:C}})}},disabled:m<=0,className:`px-3 py-1 rounded text-xs font-medium ${m>0?"bg-green-600 text-white hover:bg-green-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"Apply"})})]},d)})})()})]}),Object.keys((((L0=r==null?void 0:r.cashFlow)==null?void 0:L0.crops)||[]).reduce((s,n)=>(n.crop&&(s[`${n.crop}-${n.practice||"Dryland"}`]=!0),s),{})).length===0&&e.jsx("div",{className:"py-4 text-center text-gray-500 text-sm",children:"Add crops in the Crops tab to set up seed pricing."})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[e.jsx("strong",{children:"Formula:"})," Acres/Unit = Seeds/Unit  Population | Seed $/Acre = Price/Unit  Acres/Unit"]})]}),(((D0=r==null?void 0:r.cashFlow)==null?void 0:D0.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab first, then return here to enter seed costs."})]})}),(((T0=r==null?void 0:r.cashFlow)==null?void 0:T0.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Seed/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Seed"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Treatment/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Treatment"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Cost"})]})}),e.jsx("tbody",{children:(((S0=r==null?void 0:r.cashFlow)==null?void 0:S0.crops)||[]).map(s=>{const n=(s.plannedAcres||0)*(s.sharePercent||100)/100,o=n*(s.seedPerAcre||0),i=n*(s.seedTreatmentPerAcre||0);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:s.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:n.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:s.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:s.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-green-700 font-medium",children:T(s.seedPerAcre||0)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:T(o)}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ie,{value:s.seedTreatmentPerAcre||0,onChange:h=>{var x;const b=(((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[]).map(f=>f.id===s.id?{...f,seedTreatmentPerAcre:h}:f);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:b}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:T(i)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-800",children:T(o+i)})]},s.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:(((E0=r==null?void 0:r.cashFlow)==null?void 0:E0.crops)||[]).reduce((s,n)=>s+(n.plannedAcres||0)*(n.sharePercent||100)/100,0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{colSpan:"3"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:T(((($0=r==null?void 0:r.cashFlow)==null?void 0:$0.crops)||[]).reduce((s,n)=>{const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+o*(n.seedPerAcre||0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:""}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-amber-700",children:T((((I0=r==null?void 0:r.cashFlow)==null?void 0:I0.crops)||[]).reduce((s,n)=>{const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+o*(n.seedTreatmentPerAcre||0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-700",children:T((((R0=r==null?void 0:r.cashFlow)==null?void 0:R0.crops)||[]).reduce((s,n)=>{const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+o*((n.seedPerAcre||0)+(n.seedTreatmentPerAcre||0))},0))})]})})]})}),(((M0=r==null?void 0:r.cashFlow)==null?void 0:M0.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Seed Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((H0=r==null?void 0:r.cashFlow)==null?void 0:H0.crops)||[]).reduce((s,n)=>{const o=n.crop||"Unassigned",i=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s[o]=(s[o]||0)+i*(n.seedPerAcre||0),s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsx("span",{className:"font-mono",children:T(n)})]},s))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Total Seed + Treatment by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries((((O0=r==null?void 0:r.cashFlow)==null?void 0:O0.crops)||[]).reduce((s,n)=>{const o=n.crop||"Unassigned",i=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s[o]=(s[o]||0)+i*((n.seedPerAcre||0)+(n.seedTreatmentPerAcre||0)),s},{})).sort((s,n)=>n[1]-s[1]).map(([s,n])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsx("span",{className:"font-mono",children:T(n)})]},s))})]})]})]})}),Pe==="variableExpenses"&&ue==="nutrition"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-6 h-6 text-green-600"}),"Crop Nutrition"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var b,x;const s=((b=r==null?void 0:r.cashFlow)==null?void 0:b.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],n=((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[],o=n.reduce((f,d)=>f+(d.plannedAcres||0)*(d.sharePercent||100)/100,0),i=n.reduce((f,d)=>{const u=(d.plannedAcres||0)*(d.sharePercent||100)/100,j=d.fertilizerCosts||{},g=s.reduce((m,p)=>m+(j[p]||0),0)+(d.fertAppCostPerAcre||0);return f+u*g},0),h=o>0?i/o:0;return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Fertilizer Cost"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:T(i)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg Cost/Acre"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T(h)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Fertilizer Types"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:s.length})]})]})})(),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Fertilizer Types Used"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Select the fertilizer types this farm uses, or add custom types."}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:(((z0=r==null?void 0:r.cashFlow)==null?void 0:z0.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"]).map((s,n)=>e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-1.5",children:[e.jsx("span",{className:"text-sm text-gray-700",children:s}),e.jsx("button",{onClick:()=>{var h;const i=(((h=r==null?void 0:r.cashFlow)==null?void 0:h.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"]).filter((b,x)=>x!==n);z({cashFlow:{...r==null?void 0:r.cashFlow,fertilizerTypes:i}})},className:"text-red-500 hover:text-red-700 ml-1",children:e.jsx(pr,{className:"w-4 h-4"})})]},n))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",id:"newFertType",placeholder:"Add new fertilizer type...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm",onKeyDown:s=>{var n;if(s.key==="Enter"&&s.target.value.trim()){const o=((n=r==null?void 0:r.cashFlow)==null?void 0:n.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"];o.includes(s.target.value.trim())||z({cashFlow:{...r==null?void 0:r.cashFlow,fertilizerTypes:[...o,s.target.value.trim()]}}),s.target.value=""}}}),e.jsx("button",{onClick:()=>{var n;const s=document.getElementById("newFertType");if(s&&s.value.trim()){const o=((n=r==null?void 0:r.cashFlow)==null?void 0:n.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"];o.includes(s.value.trim())||z({cashFlow:{...r==null?void 0:r.cashFlow,fertilizerTypes:[...o,s.value.trim()]}}),s.value=""}},className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:e.jsx(Ke,{className:"w-4 h-4"})})]})]}),(((V0=r==null?void 0:r.cashFlow)==null?void 0:V0.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab first, then return here to enter fertilizer costs."})]})}),(((U0=r==null?void 0:r.cashFlow)==null?void 0:U0.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),(((Y0=r==null?void 0:r.cashFlow)==null?void 0:Y0.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"]).map(s=>e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right text-xs",children:[s.replace(" Fertilizer","").replace(" Solution",""),e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]},s)),e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right text-xs",children:["Application",e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total $/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Cost"})]})}),e.jsx("tbody",{children:(((W0=r==null?void 0:r.cashFlow)==null?void 0:W0.crops)||[]).map(s=>{var d;const n=(s.plannedAcres||0)*(s.sharePercent||100)/100,o=((d=r==null?void 0:r.cashFlow)==null?void 0:d.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],i=s.fertilizerCosts||{},h=o.reduce((u,j)=>u+(i[j]||0),0),b=s.fertAppCostPerAcre||0,x=h+b,f=n*x;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:s.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:s.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:s.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:n.toLocaleString("en-US",{maximumFractionDigits:1})}),o.map(u=>e.jsx("td",{className:"py-2 px-1",children:e.jsx(ie,{value:i[u]||0,onChange:j=>{var p;const g={...i,[u]:j},m=(((p=r==null?void 0:r.cashFlow)==null?void 0:p.crops)||[]).map(C=>C.id===s.id?{...C,fertilizerCosts:g}:C);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:m}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})},u)),e.jsx("td",{className:"py-2 px-1",children:e.jsx(ie,{value:s.fertAppCostPerAcre||0,onChange:u=>{var g;const j=(((g=r==null?void 0:r.cashFlow)==null?void 0:g.crops)||[]).map(m=>m.id===s.id?{...m,fertAppCostPerAcre:u}:m);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:j}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700",children:T(x)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:T(f)})]},s.id)})}),e.jsx("tfoot",{children:(()=>{var f,d;const s=((f=r==null?void 0:r.cashFlow)==null?void 0:f.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],n=((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[],o=n.reduce((u,j)=>u+(j.plannedAcres||0)*(j.sharePercent||100)/100,0),i={};s.forEach(u=>{i[u]=n.reduce((j,g)=>{const m=(g.plannedAcres||0)*(g.sharePercent||100)/100;return j+m*((g.fertilizerCosts||{})[u]||0)},0)});const h=n.reduce((u,j)=>{const g=(j.plannedAcres||0)*(j.sharePercent||100)/100;return u+g*(j.fertAppCostPerAcre||0)},0),b=Object.values(i).reduce((u,j)=>u+j,0)+h,x=o>0?b/o:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{colSpan:"2"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),s.map(u=>e.jsx("td",{className:"py-3 px-2 text-right font-mono text-xs",children:T(i[u])},u)),e.jsx("td",{className:"py-3 px-2 text-right font-mono text-xs",children:T(h)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:T(x)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:T(b)})]})})()})]})}),(((_0=r==null?void 0:r.cashFlow)==null?void 0:_0.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Fertilizer Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:(()=>{var n,o;const s=((n=r==null?void 0:r.cashFlow)==null?void 0:n.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"];return Object.entries((((o=r==null?void 0:r.cashFlow)==null?void 0:o.crops)||[]).reduce((i,h)=>{const b=h.crop||"Unassigned",x=(h.plannedAcres||0)*(h.sharePercent||100)/100,f=s.reduce((d,u)=>d+((h.fertilizerCosts||{})[u]||0),0)+(h.fertAppCostPerAcre||0);return i[b]=(i[b]||0)+x*f,i},{})).sort((i,h)=>h[1]-i[1]).map(([i,h])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:i}),e.jsx("span",{className:"font-mono",children:T(h)})]},i))})()})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Fertilizer Type"}),e.jsx("div",{className:"space-y-2",children:(()=>{var h,b;const s=((h=r==null?void 0:r.cashFlow)==null?void 0:h.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],n=((b=r==null?void 0:r.cashFlow)==null?void 0:b.crops)||[],o=s.map(x=>{const f=n.reduce((d,u)=>{const j=(u.plannedAcres||0)*(u.sharePercent||100)/100;return d+j*((u.fertilizerCosts||{})[x]||0)},0);return{name:x,total:f}}).filter(x=>x.total>0).sort((x,f)=>f.total-x.total),i=n.reduce((x,f)=>{const d=(f.plannedAcres||0)*(f.sharePercent||100)/100;return x+d*(f.fertAppCostPerAcre||0)},0);return i>0&&o.push({name:"Application",total:i}),o.map(({name:x,total:f})=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:x}),e.jsx("span",{className:"font-mono",children:T(f)})]},x))})()})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Practice"}),e.jsx("div",{className:"space-y-2",children:(()=>{var n,o;const s=((n=r==null?void 0:r.cashFlow)==null?void 0:n.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"];return Object.entries((((o=r==null?void 0:r.cashFlow)==null?void 0:o.crops)||[]).reduce((i,h)=>{const b=h.practice||"Dryland",x=(h.plannedAcres||0)*(h.sharePercent||100)/100,f=s.reduce((d,u)=>d+((h.fertilizerCosts||{})[u]||0),0)+(h.fertAppCostPerAcre||0);return i[b]=(i[b]||0)+x*f,i},{})).sort((i,h)=>h[1]-i[1]).map(([i,h])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:i}),e.jsx("span",{className:"font-mono",children:T(h)})]},i))})()})]})]})]})}),Pe==="variableExpenses"&&ue==="protection"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($t,{className:"w-6 h-6 text-red-600"}),"Crop Protection"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var b,x;const s=((b=r==null?void 0:r.cashFlow)==null?void 0:b.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],n=((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[],o=n.reduce((f,d)=>f+(d.plannedAcres||0)*(d.sharePercent||100)/100,0),i=n.reduce((f,d)=>{const u=(d.plannedAcres||0)*(d.sharePercent||100)/100,j=d.chemicalCosts||{},g=s.reduce((p,C)=>p+(j[C]||0),0),m=d.chemAppCostPerAcre||0;return f+u*(g+m)},0),h=o>0?i/o:0;return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Chemical Cost"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:T(i)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg Cost/Acre"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T(h)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Chemical Types"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:s.length})]})]})})(),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Chemical Types Used"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Select the chemical types this farm uses, or add custom types."}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:(((q0=r==null?void 0:r.cashFlow)==null?void 0:q0.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"]).map((s,n)=>e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-1.5",children:[e.jsx("span",{className:"text-sm text-gray-700",children:s}),e.jsx("button",{onClick:()=>{var h;const i=(((h=r==null?void 0:r.cashFlow)==null?void 0:h.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"]).filter((b,x)=>x!==n);z({cashFlow:{...r==null?void 0:r.cashFlow,chemicalTypes:i}})},className:"text-red-500 hover:text-red-700 ml-1",children:e.jsx(pr,{className:"w-4 h-4"})})]},n))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",id:"newChemType",placeholder:"Add new chemical type...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm",onKeyDown:s=>{var n;if(s.key==="Enter"&&s.target.value.trim()){const o=((n=r==null?void 0:r.cashFlow)==null?void 0:n.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"];o.includes(s.target.value.trim())||z({cashFlow:{...r==null?void 0:r.cashFlow,chemicalTypes:[...o,s.target.value.trim()]}}),s.target.value=""}}}),e.jsx("button",{onClick:()=>{var n;const s=document.getElementById("newChemType");if(s&&s.value.trim()){const o=((n=r==null?void 0:r.cashFlow)==null?void 0:n.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"];o.includes(s.value.trim())||z({cashFlow:{...r==null?void 0:r.cashFlow,chemicalTypes:[...o,s.value.trim()]}}),s.value=""}},className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700",children:e.jsx(Ke,{className:"w-4 h-4"})})]})]}),(((G0=r==null?void 0:r.cashFlow)==null?void 0:G0.crops)||[]).length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab first, then return here to enter chemical costs."})]})}),(((K0=r==null?void 0:r.cashFlow)==null?void 0:K0.crops)||[]).length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),(((J0=r==null?void 0:r.cashFlow)==null?void 0:J0.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"]).map(s=>e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right text-xs",children:[s.replace(" Herbicide","").replace("Emerge",""),e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]},s)),e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right text-xs",children:["Application",e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total $/Acre"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Cost"})]})}),e.jsx("tbody",{children:(((Q0=r==null?void 0:r.cashFlow)==null?void 0:Q0.crops)||[]).map(s=>{var d;const n=(s.plannedAcres||0)*(s.sharePercent||100)/100,o=((d=r==null?void 0:r.cashFlow)==null?void 0:d.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],i=s.chemicalCosts||{},h=o.reduce((u,j)=>u+(i[j]||0),0),b=s.chemAppCostPerAcre||0,x=h+b,f=n*x;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:s.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:s.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:s.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:n.toLocaleString("en-US",{maximumFractionDigits:1})}),o.map(u=>e.jsx("td",{className:"py-2 px-1",children:e.jsx(ie,{value:i[u]||0,onChange:j=>{var p;const g={...i,[u]:j},m=(((p=r==null?void 0:r.cashFlow)==null?void 0:p.crops)||[]).map(C=>C.id===s.id?{...C,chemicalCosts:g}:C);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:m}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})},u)),e.jsx("td",{className:"py-2 px-1",children:e.jsx(ie,{value:s.chemAppCostPerAcre||0,onChange:u=>{var g;const j=(((g=r==null?void 0:r.cashFlow)==null?void 0:g.crops)||[]).map(m=>m.id===s.id?{...m,chemAppCostPerAcre:u}:m);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:j}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700",children:T(x)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:T(f)})]},s.id)})}),e.jsx("tfoot",{children:(()=>{var f,d;const s=((f=r==null?void 0:r.cashFlow)==null?void 0:f.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],n=((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[],o=n.reduce((u,j)=>u+(j.plannedAcres||0)*(j.sharePercent||100)/100,0),i={};s.forEach(u=>{i[u]=n.reduce((j,g)=>{const m=(g.plannedAcres||0)*(g.sharePercent||100)/100;return j+m*((g.chemicalCosts||{})[u]||0)},0)});const h=n.reduce((u,j)=>{const g=(j.plannedAcres||0)*(j.sharePercent||100)/100;return u+g*(j.chemAppCostPerAcre||0)},0),b=Object.values(i).reduce((u,j)=>u+j,0)+h,x=o>0?b/o:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{colSpan:"2"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),s.map(u=>e.jsx("td",{className:"py-3 px-2 text-right font-mono text-xs",children:T(i[u])},u)),e.jsx("td",{className:"py-3 px-2 text-right font-mono text-xs",children:T(h)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:T(x)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:T(b)})]})})()})]})}),(((Z0=r==null?void 0:r.cashFlow)==null?void 0:Z0.crops)||[]).length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Chemical Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:(()=>{var n,o;const s=((n=r==null?void 0:r.cashFlow)==null?void 0:n.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"];return Object.entries((((o=r==null?void 0:r.cashFlow)==null?void 0:o.crops)||[]).reduce((i,h)=>{const b=h.crop||"Unassigned",x=(h.plannedAcres||0)*(h.sharePercent||100)/100,f=s.reduce((u,j)=>u+((h.chemicalCosts||{})[j]||0),0),d=h.chemAppCostPerAcre||0;return i[b]=(i[b]||0)+x*(f+d),i},{})).sort((i,h)=>h[1]-i[1]).map(([i,h])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:i}),e.jsx("span",{className:"font-mono",children:T(h)})]},i))})()})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Chemical Type"}),e.jsx("div",{className:"space-y-2",children:(()=>{var h,b;const s=((h=r==null?void 0:r.cashFlow)==null?void 0:h.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"],n=((b=r==null?void 0:r.cashFlow)==null?void 0:b.crops)||[],o=s.map(x=>{const f=n.reduce((d,u)=>{const j=(u.plannedAcres||0)*(u.sharePercent||100)/100;return d+j*((u.chemicalCosts||{})[x]||0)},0);return{name:x,total:f}}).filter(x=>x.total>0).sort((x,f)=>f.total-x.total),i=n.reduce((x,f)=>{const d=(f.plannedAcres||0)*(f.sharePercent||100)/100;return x+d*(f.chemAppCostPerAcre||0)},0);return i>0&&o.push({name:"Application",total:i}),o.map(({name:x,total:f})=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:x}),e.jsx("span",{className:"font-mono",children:T(f)})]},x))})()})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Practice"}),e.jsx("div",{className:"space-y-2",children:(()=>{var n,o;const s=((n=r==null?void 0:r.cashFlow)==null?void 0:n.chemicalTypes)||["Pre Emerge Herbicide","Post Emerge Herbicide","Fungicide","Insecticide"];return Object.entries((((o=r==null?void 0:r.cashFlow)==null?void 0:o.crops)||[]).reduce((i,h)=>{const b=h.practice||"Dryland",x=(h.plannedAcres||0)*(h.sharePercent||100)/100,f=s.reduce((u,j)=>u+((h.chemicalCosts||{})[j]||0),0),d=h.chemAppCostPerAcre||0;return i[b]=(i[b]||0)+x*(f+d),i},{})).sort((i,h)=>h[1]-i[1]).map(([i,h])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:i}),e.jsx("span",{className:"font-mono",children:T(h)})]},i))})()})]})]})]})}),Pe==="variableExpenses"&&ue==="irrigation"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(hr,{className:"w-6 h-6 text-cyan-600"}),"Irrigation Costs"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var h;const s=(((h=r==null?void 0:r.cashFlow)==null?void 0:h.crops)||[]).filter(b=>b.practice==="Irrigated"),n=s.reduce((b,x)=>b+(x.plannedAcres||0)*(x.sharePercent||100)/100,0),o=s.reduce((b,x)=>{const f=(x.plannedAcres||0)*(x.sharePercent||100)/100;return b+f*(x.irrigationCostPerAcre||0)},0),i=n>0?o/n:0;return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4 border border-cyan-200",children:[e.jsx("div",{className:"text-sm text-cyan-600 font-medium",children:"Irrigated Acres"}),e.jsx("div",{className:"text-2xl font-bold text-cyan-700 font-mono",children:n.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Irrigation Cost"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:T(o)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg Cost/Acre"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T(i)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Irrigated Fields"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:s.length})]})]})})(),(()=>{var n;return(((n=r==null?void 0:r.cashFlow)==null?void 0:n.crops)||[]).filter(o=>o.practice==="Irrigated").length===0?e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No irrigated fields found."}),e.jsx("span",{className:"text-blue-600",children:'Add irrigated fields in the Crops tab (set Practice to "Irrigated") to enter irrigation costs.'})]})}):null})(),(()=>{var n;const s=(((n=r==null?void 0:r.cashFlow)==null?void 0:n.crops)||[]).filter(o=>o.practice==="Irrigated");return s.length===0?null:e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Energy Source"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share %"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsxs("th",{className:"py-3 px-2 font-semibold text-gray-700 text-right",children:["Irrigation",e.jsx("br",{}),e.jsx("span",{className:"font-normal text-gray-500",children:"$/Acre"})]}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Cost"})]})}),e.jsx("tbody",{children:s.map(o=>{const i=(o.plannedAcres||0)*(o.sharePercent||100)/100,h=i*(o.irrigationCostPerAcre||0);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:o.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:o.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsxs("select",{value:o.irrigationEnergyType||"Electric",onChange:b=>{var f;const x=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.crops)||[]).map(d=>d.id===o.id?{...d,irrigationEnergyType:b.target.value}:d);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:x}})},className:"px-2 py-1 border border-gray-200 rounded text-xs bg-white",children:[e.jsx("option",{value:"Electric",children:"Electric"}),e.jsx("option",{value:"Diesel",children:"Diesel"}),e.jsx("option",{value:"Natural Gas",children:"Natural Gas"}),e.jsx("option",{value:"Propane",children:"Propane"}),e.jsx("option",{value:"Gravity",children:"Gravity"})]})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:(o.plannedAcres||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:[(o.sharePercent||100).toFixed(1),"%"]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:i.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-1",children:e.jsx(ie,{value:o.irrigationCostPerAcre||0,onChange:b=>{var f;const x=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.crops)||[]).map(d=>d.id===o.id?{...d,irrigationCostPerAcre:b}:d);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:x}})},className:"w-24 px-1 py-1 border border-gray-200 rounded text-xs text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:T(h)})]},o.id)})}),e.jsx("tfoot",{children:(()=>{const o=s.reduce((b,x)=>b+(x.plannedAcres||0)*(x.sharePercent||100)/100,0),i=s.reduce((b,x)=>{const f=(x.plannedAcres||0)*(x.sharePercent||100)/100;return b+f*(x.irrigationCostPerAcre||0)},0),h=o>0?i/o:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-2 text-right font-mono text-blue-700",children:T(h)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:T(i)})]})})()})]})})})(),(()=>{var n;const s=(((n=r==null?void 0:r.cashFlow)==null?void 0:n.crops)||[]).filter(o=>o.practice==="Irrigated");return s.length===0?null:e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Irrigation Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries(s.reduce((o,i)=>{const h=i.crop||"Unassigned",b=(i.plannedAcres||0)*(i.sharePercent||100)/100;return o[h]=(o[h]||0)+b*(i.irrigationCostPerAcre||0),o},{})).sort((o,i)=>i[1]-o[1]).map(([o,i])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:o}),e.jsx("span",{className:"font-mono",children:T(i)})]},o))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Cost by Energy Type"}),e.jsx("div",{className:"space-y-2",children:Object.entries(s.reduce((o,i)=>{const h=i.irrigationEnergyType||"Electric",b=(i.plannedAcres||0)*(i.sharePercent||100)/100;return o[h]=(o[h]||0)+b*(i.irrigationCostPerAcre||0),o},{})).sort((o,i)=>i[1]-o[1]).map(([o,i])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:o}),e.jsx("span",{className:"font-mono",children:T(i)})]},o))}),e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[e.jsx("span",{className:"text-gray-700",children:"Total Irrigation Cost:"}),e.jsx("span",{className:"font-mono text-green-700",children:T(s.reduce((o,i)=>{const h=(i.plannedAcres||0)*(i.sharePercent||100)/100;return o+h*(i.irrigationCostPerAcre||0)},0))})]})})]})]})})()]})}),Pe==="variableExpenses"&&ue==="freight"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(bo,{className:"w-6 h-6 text-orange-600"}),"Freight Costs"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var b,x;const s=((b=r==null?void 0:r.cashFlow)==null?void 0:b.crops)||[],n=((x=r==null?void 0:r.cashFlow)==null?void 0:x.freightRates)||{},o=s.reduce((f,d)=>{const u=(d.plannedAcres||0)*(d.sharePercent||100)/100;return f+u*(d.aph||0)},0),i=s.reduce((f,d)=>{const j=(d.plannedAcres||0)*(d.sharePercent||100)/100*(d.aph||0),g=n[d.crop]||0;return f+j*g},0),h=[...new Set(s.map(f=>f.crop).filter(Boolean))];return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Freight Cost"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:T(i)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg $/Bushel"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",o>0?(i/o).toFixed(3):"0.000"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Crop Types"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:h.length})]})]})})(),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Freight Rates by Crop ($/Bushel)"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Set the freight cost per bushel for each crop type. This rate will apply to all fields with that crop."}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:(()=>{var i,h;const s=((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[],n=[...new Set(s.map(b=>b.crop).filter(Boolean))],o=((h=r==null?void 0:r.cashFlow)==null?void 0:h.freightRates)||{};return n.length===0?e.jsx("div",{className:"col-span-4 text-sm text-gray-500",children:"No crops defined. Add crops in the Crops tab first."}):n.map(b=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 w-24",children:[b,":"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"$"}),e.jsx("input",{type:"number",step:"0.001",value:o[b]||"",onChange:x=>{const f=parseFloat(x.target.value)||0,d={...o,[b]:f};z({cashFlow:{...r==null?void 0:r.cashFlow,freightRates:d}})},placeholder:"0.000",className:"w-24 pl-6 pr-2 py-1.5 border border-gray-300 rounded text-sm font-mono text-right"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"/bu"})]},b))})()})]}),(()=>{var o,i;const s=((o=r==null?void 0:r.cashFlow)==null?void 0:o.crops)||[],n=((i=r==null?void 0:r.cashFlow)==null?void 0:i.freightRates)||{};return s.length===0?e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Crops tab to calculate freight costs."})]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Share Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Bushels"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Freight/Bu"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Freight"})]})}),e.jsx("tbody",{children:s.map(h=>{const b=(h.plannedAcres||0)*(h.sharePercent||100)/100,x=b*(h.aph||0),f=n[h.crop]||0,d=x*f;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:h.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:h.crop||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:h.practice||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:b.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:(h.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:x.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-blue-600",children:["$",f.toFixed(3)]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:T(d)})]},h.id)})}),e.jsx("tfoot",{children:(()=>{const h=s.reduce((d,u)=>d+(u.plannedAcres||0)*(u.sharePercent||100)/100,0),b=s.reduce((d,u)=>{const j=(u.plannedAcres||0)*(u.sharePercent||100)/100;return d+j*(u.aph||0)},0),x=s.reduce((d,u)=>{const g=(u.plannedAcres||0)*(u.sharePercent||100)/100*(u.aph||0),m=n[u.crop]||0;return d+g*m},0),f=b>0?x/b:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Totals"}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:h.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:b.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:["$",f.toFixed(3)]}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:T(x)})]})})()})]})})})(),(()=>{var o,i;const s=((o=r==null?void 0:r.cashFlow)==null?void 0:o.crops)||[],n=((i=r==null?void 0:r.cashFlow)==null?void 0:i.freightRates)||{};return s.length===0?null:e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Freight Cost by Crop"}),e.jsx("div",{className:"space-y-2",children:Object.entries(s.reduce((h,b)=>{const x=b.crop||"Unassigned",d=(b.plannedAcres||0)*(b.sharePercent||100)/100*(b.aph||0),u=n[x]||0;return h[x]=(h[x]||0)+d*u,h},{})).sort((h,b)=>b[1]-h[1]).map(([h,b])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:h}),e.jsx("span",{className:"font-mono",children:T(b)})]},h))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Freight Cost by Practice"}),e.jsx("div",{className:"space-y-2",children:Object.entries(s.reduce((h,b)=>{const x=b.practice||"Unassigned",d=(b.plannedAcres||0)*(b.sharePercent||100)/100*(b.aph||0),u=n[b.crop]||0;return h[x]=(h[x]||0)+d*u,h},{})).sort((h,b)=>b[1]-h[1]).map(([h,b])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:h}),e.jsx("span",{className:"font-mono",children:T(b)})]},h))}),e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[e.jsx("span",{className:"text-gray-700",children:"Total Freight:"}),e.jsx("span",{className:"font-mono text-green-700",children:T(s.reduce((h,b)=>{const f=(b.plannedAcres||0)*(b.sharePercent||100)/100*(b.aph||0),d=n[b.crop]||0;return h+f*d},0))})]})})]})]})})()]})}),Pe==="cropInsurance"&&Mt==="guarantees"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($t,{className:"w-6 h-6 text-purple-600"}),"Insurance Guarantees"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"View your guaranteed bushels and revenue protection based on your insurance elections. Guarantees are calculated using your APH, coverage level, and projected prices."}),(()=>{var x,f;const s=((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[],n=((f=r==null?void 0:r.cashFlow)==null?void 0:f.springPrices)||{},o=s.reduce((d,u)=>d+(u.plannedAcres||0)*(u.sharePercent||100)/100,0),i=s.reduce((d,u)=>{const j=(u.plannedAcres||0)*(u.sharePercent||100)/100;return d+j*(u.aph||0)},0),h=s.reduce((d,u)=>{const j=(u.plannedAcres||0)*(u.sharePercent||100)/100,m=((u.mpciElection||{}).coverageLevel||75)/100;return d+j*(u.aph||0)*m},0),b=s.reduce((d,u)=>{const j=(u.plannedAcres||0)*(u.sharePercent||100)/100,g=u.mpciElection||{},m=(g.coverageLevel||75)/100,p=n[u.crop]||g.projectedPrice||0;return d+j*(u.aph||0)*m*p},0);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"APH Bushels (100%)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Guaranteed Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:h.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Revenue Guarantee"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T(b)})]})]})})(),(((X0=r==null?void 0:r.cashFlow)==null?void 0:X0.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Coverage %"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Spring Price"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right bg-green-50",children:"Guar. Bushels"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-amber-700 text-right bg-amber-50",children:"Revenue Guar."})]})}),e.jsx("tbody",{children:(((B0=r==null?void 0:r.cashFlow)==null?void 0:B0.crops)||[]).map(s=>{var f,d;const n=(s.plannedAcres||0)*(s.sharePercent||100)/100,o=s.mpciElection||{},i=(o.coverageLevel||75)/100,h=((d=(f=r==null?void 0:r.cashFlow)==null?void 0:f.springPrices)==null?void 0:d[s.crop])||o.projectedPrice||0,b=n*(s.aph||0)*i,x=b*h;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:s.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:s.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:s.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:n.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:(s.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:[o.coverageLevel||75,"%"]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700 bg-blue-50",children:h>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(h):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700 bg-green-50",children:b.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-amber-700 bg-amber-50",children:h>0?T(x):""})]},s.id)})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})})]})}),Pe==="cropInsurance"&&Mt==="mpci"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-6 h-6 text-blue-600"}),"MPCI Elections"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Multi-Peril Crop Insurance (MPCI) elections including coverage levels, plan types, and projected prices."}),(()=>{var d,u,j,g;const s=((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[],n=((u=r==null?void 0:r.cashFlow)==null?void 0:u.springPrices)||{},o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.springPriceYear)||new Date().getFullYear(),i=((g=r==null?void 0:r.cashFlow)==null?void 0:g.springPricesFetched)||!1,h=[...new Set(s.map(m=>m.crop).filter(Boolean))];if(h.length===0)return null;const b=(m,p)=>{const C={...n,[m]:p},N=s.map(k=>k.crop===m?{...k,mpciElection:{...k.mpciElection||{},projectedPrice:p}}:k);z({cashFlow:{...r==null?void 0:r.cashFlow,springPrices:C,crops:N}})},x={2025:{Corn:4.7,Soybeans:11.55,Wheat:5.65,"Grain Sorghum":4.35},2026:{Corn:4.35,Soybeans:10.65,Wheat:5.35,"Grain Sorghum":4.1},2027:{Corn:4.5,Soybeans:10.75,Wheat:5.45,"Grain Sorghum":4.25}},f=async()=>{const m=we||new Date().getFullYear(),p=x[m]||x[2026],C={...n};let N=[...s];h.forEach(k=>{p[k]&&(C[k]=p[k],N=N.map(P=>P.crop===k?{...P,mpciElection:{...P.mpciElection||{},projectedPrice:p[k]}}:P))}),z({cashFlow:{...r==null?void 0:r.cashFlow,springPrices:C,springPriceYear:m,springPricesFetched:!0,crops:N}})};return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"Spring Discovery Prices by Crop"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(Bs,{className:"w-3 h-3"}),o," prices loaded"]}),e.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:"RMA prices typically released Feb/March"}),e.jsxs("button",{onClick:f,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ir,{className:"w-3.5 h-3.5"}),"Fetch ",we||new Date().getFullYear()," RMA Prices"]})]})]}),e.jsx("p",{className:"text-xs text-blue-600 mb-3",children:'Enter spring projected prices manually or click "Fetch RMA Prices" to auto-fill. These will apply to all fields with the same crop.'}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:h.map(m=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:m}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ie,{value:n[m]||0,onChange:p=>b(m,p),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono font-semibold"}),e.jsx("span",{className:"text-xs text-gray-500",children:"/bu"})]})]},m))})]})})(),(((eu=r==null?void 0:r.cashFlow)==null?void 0:eu.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Plan Type"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Coverage Level"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-blue-700 text-right bg-blue-50",children:"Spring Price"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Premium/Ac"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Premium"})]})}),e.jsx("tbody",{children:(((tu=r==null?void 0:r.cashFlow)==null?void 0:tu.crops)||[]).map(s=>{var b,x;const n=(s.plannedAcres||0)*(s.sharePercent||100)/100,o=s.mpciElection||{},i=((x=(b=r==null?void 0:r.cashFlow)==null?void 0:b.springPrices)==null?void 0:x[s.crop])||o.projectedPrice||0,h=n*(o.premiumPerAcre||0);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:s.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:s.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:s.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:n.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:(s.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:o.planType||"RP",onChange:f=>{var u;const d=(((u=r==null?void 0:r.cashFlow)==null?void 0:u.crops)||[]).map(j=>j.id===s.id?{...j,mpciElection:{...o,planType:f.target.value}}:j);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:d}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"RP",children:"RP (Revenue Protection)"}),e.jsx("option",{value:"RP-HPE",children:"RP-HPE (w/ Harvest Price Exclusion)"}),e.jsx("option",{value:"YP",children:"YP (Yield Protection)"}),e.jsx("option",{value:"ARP",children:"ARP (Area Revenue Protection)"}),e.jsx("option",{value:"AYP",children:"AYP (Area Yield Protection)"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:o.coverageLevel||75,onChange:f=>{var u;const d=(((u=r==null?void 0:r.cashFlow)==null?void 0:u.crops)||[]).map(j=>j.id===s.id?{...j,mpciElection:{...o,coverageLevel:parseInt(f.target.value)}}:j);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:d}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:50,children:"50%"}),e.jsx("option",{value:55,children:"55%"}),e.jsx("option",{value:60,children:"60%"}),e.jsx("option",{value:65,children:"65%"}),e.jsx("option",{value:70,children:"70%"}),e.jsx("option",{value:75,children:"75%"}),e.jsx("option",{value:80,children:"80%"}),e.jsx("option",{value:85,children:"85%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-blue-50",children:e.jsx("span",{className:"font-mono font-semibold text-blue-700",children:i>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(i):""})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ie,{value:o.premiumPerAcre||0,onChange:f=>{var u;const d=(((u=r==null?void 0:r.cashFlow)==null?void 0:u.crops)||[]).map(j=>j.id===s.id?{...j,mpciElection:{...o,premiumPerAcre:f}}:j);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:d}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700",children:T(h)})]},s.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"9",className:"py-3 px-3 text-right text-gray-700",children:"Total MPCI Premium:"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:T((((su=r==null?void 0:r.cashFlow)==null?void 0:su.crops)||[]).reduce((s,n)=>{var i;const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+o*(((i=n.mpciElection)==null?void 0:i.premiumPerAcre)||0)},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})})]})}),Pe==="cropInsurance"&&Mt==="areaPlans"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-6 h-6 text-cyan-600"}),"Area Plans"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var k,P,A,R,L,D,F;const s=((k=r==null?void 0:r.cashFlow)==null?void 0:k.crops)||[],n=ce.find(v=>v.id===te);n!=null&&n.entities;const o=((P=r==null?void 0:r.cashFlow)==null?void 0:P.areaPrices)||{},i=((A=r==null?void 0:r.cashFlow)==null?void 0:A.countyYields)||{},h=((R=r==null?void 0:r.cashFlow)==null?void 0:R.areaState)||"NE",b=(v,S)=>{const E=s.map(I=>I.id===v?{...I,...S}:I);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:E}})},x=v=>{z({cashFlow:{...r==null?void 0:r.cashFlow,areaPrices:{...o,...v}}})},f=v=>{z({cashFlow:{...r==null?void 0:r.cashFlow,countyYields:{...i,...v}}})},d=v=>{z({cashFlow:{...r==null?void 0:r.cashFlow,areaState:v}})},u=[...new Set(s.map(v=>v.county).filter(Boolean))],j=[...new Set(s.map(v=>v.crop).filter(Boolean))],g={2025:{Corn:{projected:4.7,harvest:4.35},Soybeans:{projected:11.55,harvest:10.5},Wheat:{projected:5.65,harvest:5.3},"Grain Sorghum":{projected:4.35,harvest:4.1}},2026:{Corn:{projected:4.35,harvest:4.3},Soybeans:{projected:10.65,harvest:10.55},Wheat:{projected:5.35,harvest:5.25},"Grain Sorghum":{projected:4.1,harvest:4.05}},2027:{Corn:{projected:4.5,harvest:4.45},Soybeans:{projected:10.75,harvest:10.65},Wheat:{projected:5.45,harvest:5.35},"Grain Sorghum":{projected:4.25,harvest:4.2}}},m={NE:{"Cedar-Corn-Irrigated":{expected:215,actual:208},"Cedar-Corn-Dryland":{expected:168,actual:158},"Cedar-Wheat-Dryland":{expected:52,actual:48},"Cedar-Soybeans-Dryland":{expected:50,actual:46},"Cedar-Soybeans-Irrigated":{expected:62,actual:58},"Dixon-Corn-Irrigated":{expected:210,actual:202},"Dixon-Corn-Dryland":{expected:165,actual:155},"Dixon-Soybeans-Dryland":{expected:48,actual:45},"Dixon-Soybeans-Irrigated":{expected:60,actual:56},"Dixon-Wheat-Dryland":{expected:50,actual:46}},IA:{"Story-Corn-Dryland":{expected:195,actual:188},"Story-Soybeans-Dryland":{expected:58,actual:55},"Polk-Corn-Dryland":{expected:190,actual:182},"Polk-Soybeans-Dryland":{expected:56,actual:53}},KS:{"Sedgwick-Wheat-Dryland":{expected:42,actual:38},"Sedgwick-Corn-Irrigated":{expected:200,actual:192},"Sedgwick-Grain Sorghum-Dryland":{expected:85,actual:78}}},p=()=>{const v=we||new Date().getFullYear(),S=g[v]||g[2026],E={...o};j.forEach(I=>{S[I]&&(E[I]=S[I])}),z({cashFlow:{...r==null?void 0:r.cashFlow,areaPrices:E,areaPriceYear:v,areaPricesFetched:!0}})},C=()=>{const v=m[h]||{},S={...i};u.forEach(E=>{j.forEach(I=>{[...new Set(s.filter(Y=>Y.county===E&&Y.crop===I).map(Y=>Y.practice))].forEach(Y=>{const _=`${E}-${I}-${Y}`;v[_]&&(S[_]=v[_])})})}),z({cashFlow:{...r==null?void 0:r.cashFlow,countyYields:S,countyYieldsFetched:!0}})},N=["NE","IA","KS","SD","MN","MO","CO","WY","TX","OK"];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"State:"}),e.jsx("select",{value:h,onChange:v=>d(v.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:N.map(v=>e.jsx("option",{value:v,children:v},v))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"Area Plan Prices by Crop"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[((L=r==null?void 0:r.cashFlow)==null?void 0:L.areaPricesFetched)&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(Bs,{className:"w-3 h-3"}),((D=r==null?void 0:r.cashFlow)==null?void 0:D.areaPriceYear)||we," prices loaded"]}),e.jsxs("button",{onClick:p,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:[e.jsx(gs,{className:"w-4 h-4"}),"Fetch ",we," RMA Prices"]})]})]}),e.jsx("p",{className:"text-xs text-blue-600 mb-4",children:"Projected prices (Feb/March) and harvest prices (Oct/Nov) for area-based coverage. Click fetch or enter manually."}),j.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(v=>{var S,E;return e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:v}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-blue-600 block mb-1",children:"Projected Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"$"}),e.jsx(ie,{value:((S=o[v])==null?void 0:S.projected)||0,onChange:I=>x({[v]:{...o[v],projected:I}}),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-green-600 block mb-1",children:"Harvest Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"$"}),e.jsx(ie,{value:((E=o[v])==null?void 0:E.harvest)||0,onChange:I=>x({[v]:{...o[v],harvest:I}}),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]})]})]},v)})}):e.jsx("div",{className:"text-sm text-blue-600",children:"Add crops in the Crops tab to set area prices."})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-amber-800 flex items-center gap-2",children:[e.jsx(bt,{className:"w-4 h-4"}),"County Expected Yields (",h,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[((F=r==null?void 0:r.cashFlow)==null?void 0:F.countyYieldsFetched)&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(Bs,{className:"w-3 h-3"}),"Yields loaded"]}),e.jsxs("button",{onClick:C,className:"flex items-center gap-1 px-3 py-1.5 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700",children:[e.jsx(gs,{className:"w-4 h-4"}),"Fetch ",h," County Yields"]})]})]}),e.jsx("p",{className:"text-xs text-amber-600 mb-4",children:"Expected and actual county yields from RMA for area plan calculations. Select state above then fetch or enter manually."}),u.length>0&&j.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-amber-100",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"County"}),e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"Crop"}),e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"Practice"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-blue-700 bg-blue-50",children:"Expected Yield"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-green-700 bg-green-50",children:"Actual County Yield"})]})}),e.jsx("tbody",{children:u.flatMap(v=>j.flatMap(S=>[...new Set(s.filter(I=>I.county===v&&I.crop===S).map(I=>I.practice))].map(I=>{var Y,_;const H=`${v}-${S}-${I}`;return e.jsxs("tr",{className:"border-b border-amber-100 hover:bg-amber-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-700",children:v}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:S}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${I==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:I})}),e.jsx("td",{className:"py-2 px-3 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(Qe,{value:((Y=i[H])==null?void 0:Y.expected)||0,onChange:K=>f({[H]:{...i[H],expected:K}}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-right font-mono text-sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:"bu"})]})}),e.jsx("td",{className:"py-2 px-3 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(Qe,{value:((_=i[H])==null?void 0:_.actual)||0,onChange:K=>f({[H]:{...i[H],actual:K}}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-right font-mono text-sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:"bu"})]})})]},H)})))})]})}):e.jsx("div",{className:"text-sm text-amber-600",children:"Add fields with counties and crops to set expected yields."})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Area Plan Elections by Field"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select which area-based coverage options to elect for each field. Set coverage levels and premiums per acre."}),s.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-center bg-cyan-50",children:"SCO"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-right bg-cyan-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-center bg-green-50",children:"ECO"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 bg-green-50",children:"Level"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-right bg-green-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 bg-purple-50",children:"Margin Plan"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 bg-purple-50",children:"Cov%"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-right bg-purple-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Premium"})]})}),e.jsx("tbody",{children:s.map(v=>{const S=(v.plannedAcres||0)*(v.sharePercent||100)/100,E=v.areaPlan||{},I=E.scoEnabled?S*(E.scoPerAcre||0):0,H=E.ecoEnabled?S*(E.ecoPerAcre||0):0,Y=E.marginPlan&&E.marginPlan!=="none"?S*(E.marginPerAcre||0):0,_=I+H+Y;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:v.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:v.crop||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:v.county||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:S.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2 text-center bg-cyan-50",children:e.jsx("input",{type:"checkbox",checked:E.scoEnabled||!1,onChange:K=>b(v.id,{areaPlan:{...E,scoEnabled:K.target.checked}}),className:"w-4 h-4 text-cyan-600"})}),e.jsx("td",{className:"py-2 px-2 bg-cyan-50",children:e.jsx(ie,{value:E.scoPerAcre||0,onChange:K=>b(v.id,{areaPlan:{...E,scoPerAcre:K}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!E.scoEnabled})}),e.jsx("td",{className:"py-2 px-2 text-center bg-green-50",children:e.jsx("input",{type:"checkbox",checked:E.ecoEnabled||!1,onChange:K=>b(v.id,{areaPlan:{...E,ecoEnabled:K.target.checked}}),className:"w-4 h-4 text-green-600"})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsxs("select",{value:E.ecoLevel||"90",onChange:K=>b(v.id,{areaPlan:{...E,ecoLevel:K.target.value}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!E.ecoEnabled,children:[e.jsx("option",{value:"90",children:"90%"}),e.jsx("option",{value:"95",children:"95%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsx(ie,{value:E.ecoPerAcre||0,onChange:K=>b(v.id,{areaPlan:{...E,ecoPerAcre:K}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!E.ecoEnabled})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsxs("select",{value:E.marginPlan||"none",onChange:K=>b(v.id,{areaPlan:{...E,marginPlan:K.target.value}}),className:"w-20 px-1 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"mp",children:"MP"}),e.jsx("option",{value:"mco",children:"MCO"})]})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsxs("select",{value:E.marginCoverage||"80",onChange:K=>b(v.id,{areaPlan:{...E,marginCoverage:K.target.value}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!E.marginPlan||E.marginPlan==="none",children:[e.jsx("option",{value:"70",children:"70%"}),e.jsx("option",{value:"75",children:"75%"}),e.jsx("option",{value:"80",children:"80%"}),e.jsx("option",{value:"85",children:"85%"}),e.jsx("option",{value:"90",children:"90%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsx(ie,{value:E.marginPerAcre||0,onChange:K=>b(v.id,{areaPlan:{...E,marginPerAcre:K}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!E.marginPlan||E.marginPlan==="none"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-700",children:T(_)})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"4",className:"py-3 px-3 text-right text-gray-700",children:"Totals:"}),e.jsx("td",{colSpan:"2",className:"py-3 px-3 text-right font-mono text-cyan-700 bg-cyan-50",children:T(s.reduce((v,S)=>{var I,H;const E=(S.plannedAcres||0)*(S.sharePercent||100)/100;return v+((I=S.areaPlan)!=null&&I.scoEnabled?E*(((H=S.areaPlan)==null?void 0:H.scoPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-right font-mono text-green-700 bg-green-50",children:T(s.reduce((v,S)=>{var I,H;const E=(S.plannedAcres||0)*(S.sharePercent||100)/100;return v+((I=S.areaPlan)!=null&&I.ecoEnabled?E*(((H=S.areaPlan)==null?void 0:H.ecoPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-right font-mono text-purple-700 bg-purple-50",children:T(s.reduce((v,S)=>{var I,H,Y;const E=(S.plannedAcres||0)*(S.sharePercent||100)/100;return v+((I=S.areaPlan)!=null&&I.marginPlan&&((H=S.areaPlan)==null?void 0:H.marginPlan)!=="none"?E*(((Y=S.areaPlan)==null?void 0:Y.marginPerAcre)||0):0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-gray-800",children:T(s.reduce((v,S)=>{var _,K,re,he,U,V,q;const E=(S.plannedAcres||0)*(S.sharePercent||100)/100,I=(_=S.areaPlan)!=null&&_.scoEnabled?E*(((K=S.areaPlan)==null?void 0:K.scoPerAcre)||0):0,H=(re=S.areaPlan)!=null&&re.ecoEnabled?E*(((he=S.areaPlan)==null?void 0:he.ecoPerAcre)||0):0,Y=(U=S.areaPlan)!=null&&U.marginPlan&&((V=S.areaPlan)==null?void 0:V.marginPlan)!=="none"?E*(((q=S.areaPlan)==null?void 0:q.marginPerAcre)||0):0;return v+I+H+Y},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Area Plans Premium Summary"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"rounded-lg p-3 bg-cyan-50 border border-cyan-200",children:[e.jsx("div",{className:"text-sm font-medium text-cyan-700",children:"SCO Premium"}),e.jsx("div",{className:"text-xl font-bold font-mono text-cyan-800",children:T(s.reduce((v,S)=>{var I,H;const E=(S.plannedAcres||0)*(S.sharePercent||100)/100;return v+((I=S.areaPlan)!=null&&I.scoEnabled?E*(((H=S.areaPlan)==null?void 0:H.scoPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-green-50 border border-green-200",children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"ECO Premium"}),e.jsx("div",{className:"text-xl font-bold font-mono text-green-800",children:T(s.reduce((v,S)=>{var I,H;const E=(S.plannedAcres||0)*(S.sharePercent||100)/100;return v+((I=S.areaPlan)!=null&&I.ecoEnabled?E*(((H=S.areaPlan)==null?void 0:H.ecoPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-purple-50 border border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:"Margin Plan (MP/MCO)"}),e.jsx("div",{className:"text-xl font-bold font-mono text-purple-800",children:T(s.reduce((v,S)=>{var I,H,Y;const E=(S.plannedAcres||0)*(S.sharePercent||100)/100;return v+((I=S.areaPlan)!=null&&I.marginPlan&&((H=S.areaPlan)==null?void 0:H.marginPlan)!=="none"?E*(((Y=S.areaPlan)==null?void 0:Y.marginPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-200 border border-gray-300",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Total Area Plans"}),e.jsx("div",{className:"text-xl font-bold font-mono text-gray-800",children:T(s.reduce((v,S)=>{var _,K,re,he,U,V,q;const E=(S.plannedAcres||0)*(S.sharePercent||100)/100,I=(_=S.areaPlan)!=null&&_.scoEnabled?E*(((K=S.areaPlan)==null?void 0:K.scoPerAcre)||0):0,H=(re=S.areaPlan)!=null&&re.ecoEnabled?E*(((he=S.areaPlan)==null?void 0:he.ecoPerAcre)||0):0,Y=(U=S.areaPlan)!=null&&U.marginPlan&&((V=S.areaPlan)==null?void 0:V.marginPlan)!=="none"?E*(((q=S.areaPlan)==null?void 0:q.marginPerAcre)||0):0;return v+I+H+Y},0))})]})]})]})]})})()]})}),Pe==="cropInsurance"&&Mt==="privateProducts"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(yo,{className:"w-6 h-6 text-orange-600"}),"Private Products (Hail & Wind)"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Private crop insurance products including hail and wind coverage. Enter your elections and premiums by field."}),(()=>{var i;const s=((i=r==null?void 0:r.cashFlow)==null?void 0:i.crops)||[],n=s.reduce((h,b)=>{var f,d;const x=(b.plannedAcres||0)*(b.sharePercent||100)/100;return h+((f=b.privateInsurance)!=null&&f.hailEnabled?x*(((d=b.privateInsurance)==null?void 0:d.hailPerAcre)||0):0)},0),o=s.reduce((h,b)=>{var f,d;const x=(b.plannedAcres||0)*(b.sharePercent||100)/100;return h+((f=b.privateInsurance)!=null&&f.windEnabled?x*(((d=b.privateInsurance)==null?void 0:d.windPerAcre)||0):0)},0);return e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Hail Premium"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:T(n)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Wind Premium"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:T(o)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Private Insurance"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700 font-mono",children:T(n+o)})]})]})})(),(((ru=r==null?void 0:r.cashFlow)==null?void 0:ru.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-center bg-orange-50",children:"Hail"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 bg-orange-50",children:"Hail Coverage"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-right bg-orange-50",children:"Hail $/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-right bg-orange-50",children:"Hail Total"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-center bg-purple-50",children:"Wind"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-right bg-purple-50",children:"Wind $/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-right bg-purple-50",children:"Wind Total"})]})}),e.jsx("tbody",{children:(((au=r==null?void 0:r.cashFlow)==null?void 0:au.crops)||[]).map(s=>{const n=(s.plannedAcres||0)*(s.sharePercent||100)/100,o=s.privateInsurance||{},i=o.hailEnabled?n*(o.hailPerAcre||0):0,h=o.windEnabled?n*(o.windPerAcre||0):0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:s.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:s.crop||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:n.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2 text-center bg-orange-50",children:e.jsx("input",{type:"checkbox",checked:o.hailEnabled||!1,onChange:b=>{var f;const x=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.crops)||[]).map(d=>d.id===s.id?{...d,privateInsurance:{...o,hailEnabled:b.target.checked}}:d);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:x}})},className:"w-4 h-4 text-orange-600"})}),e.jsx("td",{className:"py-2 px-2 bg-orange-50",children:e.jsxs("select",{value:o.hailCoverage||"100",onChange:b=>{var f;const x=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.crops)||[]).map(d=>d.id===s.id?{...d,privateInsurance:{...o,hailCoverage:b.target.value}}:d);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:x}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",disabled:!o.hailEnabled,children:[e.jsx("option",{value:"50",children:"50%"}),e.jsx("option",{value:"75",children:"75%"}),e.jsx("option",{value:"100",children:"100%"}),e.jsx("option",{value:"Companion",children:"Companion"})]})}),e.jsx("td",{className:"py-2 px-2 bg-orange-50",children:e.jsx(ie,{value:o.hailPerAcre||0,onChange:b=>{var f;const x=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.crops)||[]).map(d=>d.id===s.id?{...d,privateInsurance:{...o,hailPerAcre:b}}:d);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:x}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!o.hailEnabled})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-orange-700 bg-orange-50",children:o.hailEnabled?T(i):""}),e.jsx("td",{className:"py-2 px-2 text-center bg-purple-50",children:e.jsx("input",{type:"checkbox",checked:o.windEnabled||!1,onChange:b=>{var f;const x=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.crops)||[]).map(d=>d.id===s.id?{...d,privateInsurance:{...o,windEnabled:b.target.checked}}:d);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:x}})},className:"w-4 h-4 text-purple-600"})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsx(ie,{value:o.windPerAcre||0,onChange:b=>{var f;const x=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.crops)||[]).map(d=>d.id===s.id?{...d,privateInsurance:{...o,windPerAcre:b}}:d);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:x}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!o.windEnabled})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-700 bg-purple-50",children:o.windEnabled?T(h):""})]},s.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"6",className:"py-3 px-3 text-right text-gray-700",children:"Totals:"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700 bg-orange-50",children:T((((nu=r==null?void 0:r.cashFlow)==null?void 0:nu.crops)||[]).reduce((s,n)=>{var i,h;const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+((i=n.privateInsurance)!=null&&i.hailEnabled?o*(((h=n.privateInsurance)==null?void 0:h.hailPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"2",className:"bg-purple-50"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-700 bg-purple-50",children:T((((lu=r==null?void 0:r.cashFlow)==null?void 0:lu.crops)||[]).reduce((s,n)=>{var i,h;const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+((i=n.privateInsurance)!=null&&i.windEnabled?o*(((h=n.privateInsurance)==null?void 0:h.windPerAcre)||0):0)},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Add fields in the Fields tab first."})]})})]})})]})]}),ct==="cowCalf"&&e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-0 overflow-x-auto",children:[{id:"sizeScope",label:"Size & Scope",icon:Ht},{id:"revenue",label:"Revenue",icon:vt},{id:"lrp",label:"LRP Insurance",icon:$t},{id:"prf",label:"PRF Insurance",icon:xo},{id:"expenses",label:"Expenses",icon:Ot},{id:"summary",label:"Summary",icon:$r}].map(s=>e.jsxs("button",{onClick:()=>Al(s.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${Ws===s.id?"border-amber-500 text-amber-600 bg-amber-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),Ws==="sizeScope"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-6 h-6 text-amber-600"}),"Cow/Calf Size & Scope"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track your herd inventory, production metrics, and land resources for your cow/calf operation."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-amber-100 text-amber-800 px-4 py-3 font-bold border-b border-amber-200 flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5"}),"Herd Inventory (Head Count by Month)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-amber-50 text-amber-800 border-b border-amber-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-amber-50 z-10 w-40",children:"Category"}),e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-20 bg-amber-50",children:"Age"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-amber-100",children:[e.jsx("div",{className:"text-[10px]",children:"Total Head"}),e.jsx("div",{className:"text-[9px] text-amber-600",children:"Enter & click All"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-20",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-amber-100 w-24",children:"Avg"})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"bg-green-100 border-b border-green-200",children:e.jsx("td",{colSpan:"16",className:"py-2 px-3 font-bold text-green-800 text-sm",children:" Spring Breeding Cow Herd"})}),[1,2,3].map((s,n)=>{var m;const o=((m=r==null?void 0:r.cashFlow)==null?void 0:m.cowCalf)||{},i=o.herd||{},h=o.herdTotals||{},b=o.herdAges||{},x=`springCows${s}`,f=i[x]||{},d=[1,2,3,4,5,6,7,8,9,10,11,12],j=d.map(p=>parseFloat(f[p])||0).filter(p=>p>0),g=j.length>0?j.reduce((p,C)=>p+C,0)/j.length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-green-50/30":"bg-white"}`,children:[e.jsxs("td",{className:"py-1.5 px-3 font-semibold text-green-700 bg-green-50 sticky left-0 z-10 text-sm",children:["Spring Cows #",s]}),e.jsx("td",{className:"py-1 px-1 bg-green-50/50",children:e.jsx("input",{type:"text",value:b[x]||"",onChange:p=>{const C=p.target.value,N={...o};N.herdAges||(N.herdAges={}),N.herdAges={...N.herdAges,[x]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:N}})},className:"w-full px-1.5 py-1.5 border border-green-300 rounded text-xs text-center focus:border-green-500 focus:ring-1 focus:ring-green-300 outline-none",placeholder:"e.g. 2yr"})}),e.jsx("td",{className:"py-1 px-1 bg-green-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:h[x]||"",onChange:p=>{const C=p.target.value.replace(/[^0-9]/g,""),N={...o};N.herdTotals||(N.herdTotals={}),N.herdTotals={...N.herdTotals,[x]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:N}})},className:"w-14 px-1.5 py-1.5 border border-green-300 rounded text-xs text-center focus:border-green-500 focus:ring-1 focus:ring-green-300 outline-none font-mono",placeholder:"0"}),e.jsx("button",{onClick:()=>{const p=h[x]||"";if(p){const C={...o};C.herd||(C.herd={}),C.herd[x]||(C.herd[x]={}),d.forEach(N=>{C.herd[x][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:C}})}},className:"px-1.5 py-1 bg-green-500 text-white rounded text-[9px] font-bold hover:bg-green-600 transition-colors",title:"Apply to all months",children:"All"})]})}),d.map(p=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:f[p]||"",onChange:C=>{const N=C.target.value.replace(/[^0-9]/g,""),k={...o};k.herd||(k.herd={}),k.herd[x]||(k.herd[x]={}),k.herd[x]={...k.herd[x],[p]:N},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:k}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-green-400 focus:ring-1 focus:ring-green-200 outline-none font-mono",placeholder:"0"})},p)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-green-800 bg-green-50 font-mono text-sm",children:g>0?Math.round(g).toLocaleString():""})]},x)}),(()=>{var f;const n=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.cowCalf)||{}).herd||{},o=["springCows1","springCows2","springCows3"],h=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>o.reduce((u,j)=>u+(parseFloat((n[j]||{})[d])||0),0)),b=h.filter(d=>d>0),x=b.length>0?b.reduce((d,u)=>d+u,0)/b.length:0;return e.jsxs("tr",{className:"bg-green-100 border-b border-green-300 font-bold",children:[e.jsx("td",{className:"py-1.5 px-3 text-green-800 sticky left-0 bg-green-100 z-10 text-xs",children:"Spring Cows Subtotal"}),e.jsx("td",{className:"py-1.5 px-2 bg-green-100"}),e.jsx("td",{className:"py-1.5 px-2 bg-green-100"}),h.map((d,u)=>e.jsx("td",{className:"py-1.5 px-2 text-center text-green-800 font-mono text-xs",children:d>0?d.toLocaleString():""},u)),e.jsx("td",{className:"py-1.5 px-2 text-center text-green-900 font-mono bg-green-200 text-xs font-extrabold",children:x>0?Math.round(x).toLocaleString():""})]})})(),e.jsx("tr",{className:"bg-orange-100 border-b border-orange-200",children:e.jsx("td",{colSpan:"16",className:"py-2 px-3 font-bold text-orange-800 text-sm",children:" Fall Breeding Cow Herd"})}),[1,2,3].map((s,n)=>{var m;const o=((m=r==null?void 0:r.cashFlow)==null?void 0:m.cowCalf)||{},i=o.herd||{},h=o.herdTotals||{},b=o.herdAges||{},x=`fallCows${s}`,f=i[x]||{},d=[1,2,3,4,5,6,7,8,9,10,11,12],j=d.map(p=>parseFloat(f[p])||0).filter(p=>p>0),g=j.length>0?j.reduce((p,C)=>p+C,0)/j.length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-orange-50/30":"bg-white"}`,children:[e.jsxs("td",{className:"py-1.5 px-3 font-semibold text-orange-700 bg-orange-50 sticky left-0 z-10 text-sm",children:["Fall Cows #",s]}),e.jsx("td",{className:"py-1 px-1 bg-orange-50/50",children:e.jsx("input",{type:"text",value:b[x]||"",onChange:p=>{const C=p.target.value,N={...o};N.herdAges||(N.herdAges={}),N.herdAges={...N.herdAges,[x]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:N}})},className:"w-full px-1.5 py-1.5 border border-orange-300 rounded text-xs text-center focus:border-orange-500 focus:ring-1 focus:ring-orange-300 outline-none",placeholder:"e.g. 3yr"})}),e.jsx("td",{className:"py-1 px-1 bg-orange-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:h[x]||"",onChange:p=>{const C=p.target.value.replace(/[^0-9]/g,""),N={...o};N.herdTotals||(N.herdTotals={}),N.herdTotals={...N.herdTotals,[x]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:N}})},className:"w-14 px-1.5 py-1.5 border border-orange-300 rounded text-xs text-center focus:border-orange-500 focus:ring-1 focus:ring-orange-300 outline-none font-mono",placeholder:"0"}),e.jsx("button",{onClick:()=>{const p=h[x]||"";if(p){const C={...o};C.herd||(C.herd={}),C.herd[x]||(C.herd[x]={}),d.forEach(N=>{C.herd[x][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:C}})}},className:"px-1.5 py-1 bg-orange-500 text-white rounded text-[9px] font-bold hover:bg-orange-600 transition-colors",title:"Apply to all months",children:"All"})]})}),d.map(p=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:f[p]||"",onChange:C=>{const N=C.target.value.replace(/[^0-9]/g,""),k={...o};k.herd||(k.herd={}),k.herd[x]||(k.herd[x]={}),k.herd[x]={...k.herd[x],[p]:N},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:k}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-orange-400 focus:ring-1 focus:ring-orange-200 outline-none font-mono",placeholder:"0"})},p)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-orange-800 bg-orange-50 font-mono text-sm",children:g>0?Math.round(g).toLocaleString():""})]},x)}),(()=>{var f;const n=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.cowCalf)||{}).herd||{},o=["fallCows1","fallCows2","fallCows3"],h=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>o.reduce((u,j)=>u+(parseFloat((n[j]||{})[d])||0),0)),b=h.filter(d=>d>0),x=b.length>0?b.reduce((d,u)=>d+u,0)/b.length:0;return e.jsxs("tr",{className:"bg-orange-100 border-b border-orange-300 font-bold",children:[e.jsx("td",{className:"py-1.5 px-3 text-orange-800 sticky left-0 bg-orange-100 z-10 text-xs",children:"Fall Cows Subtotal"}),e.jsx("td",{className:"py-1.5 px-2 bg-orange-100"}),e.jsx("td",{className:"py-1.5 px-2 bg-orange-100"}),h.map((d,u)=>e.jsx("td",{className:"py-1.5 px-2 text-center text-orange-800 font-mono text-xs",children:d>0?d.toLocaleString():""},u)),e.jsx("td",{className:"py-1.5 px-2 text-center text-orange-900 font-mono bg-orange-200 text-xs font-extrabold",children:x>0?Math.round(x).toLocaleString():""})]})})(),e.jsx("tr",{className:"bg-amber-100 border-b border-amber-200",children:e.jsx("td",{colSpan:"16",className:"py-2 px-3 font-bold text-amber-800 text-sm",children:" Other Livestock"})}),[{key:"bulls",label:"Herd Bulls"},{key:"bredHeifers",label:"Bred Heifers"},{key:"openHeifers",label:"Open Heifers"},{key:"heiferCalves",label:"Heifer Calves"},{key:"steerCalves",label:"Steer Calves"}].map((s,n)=>{var j;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.cowCalf)||{},i=o.herd||{},h=o.herdTotals||{},b=i[s.key]||{},x=[1,2,3,4,5,6,7,8,9,10,11,12],d=x.map(g=>parseFloat(b[g])||0).filter(g=>g>0),u=d.length>0?d.reduce((g,m)=>g+m,0)/d.length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-amber-700 bg-amber-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-amber-50/30"}),e.jsx("td",{className:"py-1 px-1 bg-amber-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:h[s.key]||"",onChange:g=>{const m=g.target.value.replace(/[^0-9]/g,""),p={...o};p.herdTotals||(p.herdTotals={}),p.herdTotals={...p.herdTotals,[s.key]:m},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:p}})},className:"w-14 px-1.5 py-1.5 border border-amber-300 rounded text-xs text-center focus:border-amber-500 focus:ring-1 focus:ring-amber-300 outline-none font-mono",placeholder:"0"}),e.jsx("button",{onClick:()=>{const g=h[s.key]||"";if(g){const m={...o};m.herd||(m.herd={}),m.herd[s.key]||(m.herd[s.key]={}),x.forEach(p=>{m.herd[s.key][p]=g}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:m}})}},className:"px-1.5 py-1 bg-amber-500 text-white rounded text-[9px] font-bold hover:bg-amber-600 transition-colors",title:"Apply to all months",children:"All"})]})}),x.map(g=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:b[g]||"",onChange:m=>{const p=m.target.value.replace(/[^0-9]/g,""),C={...o};C.herd||(C.herd={}),C.herd[s.key]||(C.herd[s.key]={}),C.herd[s.key]={...C.herd[s.key],[g]:p},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:C}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-amber-400 focus:ring-1 focus:ring-amber-200 outline-none font-mono",placeholder:"0"})},g)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-amber-800 bg-amber-50 font-mono text-sm",children:u>0?Math.round(u).toLocaleString():""})]},s.key)}),(()=>{var f;const n=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.cowCalf)||{}).herd||{},o=["springCows1","springCows2","springCows3","fallCows1","fallCows2","fallCows3","bulls","bredHeifers","openHeifers","heiferCalves","steerCalves"],h=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>o.reduce((u,j)=>u+(parseFloat((n[j]||{})[d])||0),0)),b=h.filter(d=>d>0),x=b.length>0?b.reduce((d,u)=>d+u,0)/b.length:0;return e.jsxs("tr",{className:"bg-amber-200 border-t-2 border-amber-400 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-amber-900 sticky left-0 bg-amber-200 z-10 text-sm",children:"TOTAL HERD"}),e.jsx("td",{className:"py-2 px-2 bg-amber-200"}),e.jsx("td",{className:"py-2 px-2 bg-amber-200"}),h.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-amber-900 font-mono text-sm",children:d>0?d.toLocaleString():""},u)),e.jsx("td",{className:"py-2 px-2 text-center text-amber-900 font-mono bg-amber-300 text-sm font-extrabold",children:x>0?Math.round(x).toLocaleString():""})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-green-100 text-green-800 px-4 py-3 font-bold border-b border-green-200 flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Production Metrics & Goals"]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[{key:"calfDeathLoss",label:"Calf Death Loss",suffix:"%",placeholder:"3"},{key:"cowDeathLoss",label:"Cow Death Loss",suffix:"%",placeholder:"2"},{key:"heiferWeanWeight",label:"Heifer Wean Wt",suffix:"lbs",placeholder:"475"},{key:"steerWeanWeight",label:"Steer Wean Wt",suffix:"lbs",placeholder:"525"},{key:"cullRate",label:"Annual Cull Rate",suffix:"%",placeholder:"15"},{key:"replacementRate",label:"Replacement Rate",suffix:"%",placeholder:"15"}].map(s=>{var i;const n=((i=r==null?void 0:r.cashFlow)==null?void 0:i.cowCalf)||{},o=n.production||{};return e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.label}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:o[s.key]||"",onChange:h=>{const b=h.target.value.replace(/[^0-9.]/g,""),x={...n};x.production||(x.production={}),x.production={...x.production,[s.key]:b},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:x}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-1 focus:ring-green-200 outline-none font-mono text-right pr-12",placeholder:s.placeholder}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:s.suffix})]})]},s.key)})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-pink-100 text-pink-800 px-4 py-3 font-bold border-b border-pink-200 flex items-center gap-2",children:[e.jsx(Yh,{className:"w-5 h-5"}),"Breeding & Calving Season"]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[{key:"breedingStart",label:"Breeding Start",type:"date"},{key:"breedingEnd",label:"Breeding End",type:"date"},{key:"calvingStart",label:"Calving Start",type:"date"},{key:"calvingEnd",label:"Calving End",type:"date"}].map(s=>{var i;const n=((i=r==null?void 0:r.cashFlow)==null?void 0:i.cowCalf)||{},o=n.breeding||{};return e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.label}),e.jsx("input",{type:"date",value:o[s.key]||"",onChange:h=>{const b={...n};b.breeding||(b.breeding={}),b.breeding={...b.breeding,[s.key]:h.target.value},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:b}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-pink-500 focus:ring-1 focus:ring-pink-200 outline-none"})]},s.key)})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6 mt-6 pt-6 border-t border-gray-200",children:[{key:"bullCowRatio",label:"Bull:Cow Ratio",placeholder:"1:25",suffix:""},{key:"breedingMethod",label:"Breeding Method",type:"select",options:["Natural","AI","AI + Cleanup Bull","Synchronization + AI"]},{key:"gestationLength",label:"Gestation (days)",placeholder:"283",suffix:"days"}].map(s=>{var i;const n=((i=r==null?void 0:r.cashFlow)==null?void 0:i.cowCalf)||{},o=n.breeding||{};return s.type==="select"?e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.label}),e.jsxs("select",{value:o[s.key]||"",onChange:h=>{const b={...n};b.breeding||(b.breeding={}),b.breeding={...b.breeding,[s.key]:h.target.value},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:b}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-pink-500 focus:ring-1 focus:ring-pink-200 outline-none bg-white",children:[e.jsx("option",{value:"",children:"Select..."}),s.options.map(h=>e.jsx("option",{value:h,children:h},h))]})]},s.key):e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.label}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:o[s.key]||"",onChange:h=>{const b={...n};b.breeding||(b.breeding={}),b.breeding={...b.breeding,[s.key]:h.target.value},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:b}})},className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-pink-500 focus:ring-1 focus:ring-pink-200 outline-none ${s.suffix?"pr-12":""}`,placeholder:s.placeholder}),s.suffix&&e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:s.suffix})]})]},s.key)})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-emerald-100 text-emerald-800 px-4 py-3 font-bold border-b border-emerald-200 flex items-center gap-2",children:[e.jsx(go,{className:"w-5 h-5"}),"Land & Pasture Resources"]}),e.jsx("div",{className:"p-6",children:(()=>{var d;const s=((d=r==null?void 0:r.cashFlow)==null?void 0:d.cowCalf)||{},n=s.land||{},o=parseFloat(n.ownedPastureAcres)||0,i=parseFloat(n.leasedPastureAcres)||0,h=o+i,b=parseFloat(n.ownedHayAcres)||0,x=parseFloat(n.leasedHayAcres)||0,f=b+x;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-emerald-700 mb-3",children:"Pasture Acres"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Owned Pasture"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n.ownedPastureAcres||"",onChange:u=>{const j=u.target.value.replace(/[^0-9.]/g,""),g={...s};g.land||(g.land={}),g.land={...g.land,ownedPastureAcres:j},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:g}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-emerald-500 focus:ring-1 focus:ring-emerald-200 outline-none font-mono text-right pr-10",placeholder:"0"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"ac"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Leased Pasture"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n.leasedPastureAcres||"",onChange:u=>{const j=u.target.value.replace(/[^0-9.]/g,""),g={...s};g.land||(g.land={}),g.land={...g.land,leasedPastureAcres:j},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:g}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-emerald-500 focus:ring-1 focus:ring-emerald-200 outline-none font-mono text-right pr-10",placeholder:"0"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"ac"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-emerald-700 font-semibold",children:"Total Pasture"}),e.jsxs("div",{className:"bg-emerald-50 border border-emerald-300 rounded-lg px-3 py-2 text-right font-mono font-bold text-emerald-800",children:[h>0?h.toLocaleString():"0"," ",e.jsx("span",{className:"text-emerald-600 font-normal text-sm",children:"ac"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stocking Rate"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n.stockingRate||"",onChange:u=>{const j=u.target.value.replace(/[^0-9.]/g,""),g={...s};g.land||(g.land={}),g.land={...g.land,stockingRate:j},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:g}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-emerald-500 focus:ring-1 focus:ring-emerald-200 outline-none font-mono text-right pr-16",placeholder:"0"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"ac/pair"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-amber-700 mb-3",children:"Hay Acres"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Owned Hay"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n.ownedHayAcres||"",onChange:u=>{const j=u.target.value.replace(/[^0-9.]/g,""),g={...s};g.land||(g.land={}),g.land={...g.land,ownedHayAcres:j},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:g}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-1 focus:ring-amber-200 outline-none font-mono text-right pr-10",placeholder:"0"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"ac"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Leased Hay"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n.leasedHayAcres||"",onChange:u=>{const j=u.target.value.replace(/[^0-9.]/g,""),g={...s};g.land||(g.land={}),g.land={...g.land,leasedHayAcres:j},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:g}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-1 focus:ring-amber-200 outline-none font-mono text-right pr-10",placeholder:"0"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"ac"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-amber-700 font-semibold",children:"Total Hay"}),e.jsxs("div",{className:"bg-amber-50 border border-amber-300 rounded-lg px-3 py-2 text-right font-mono font-bold text-amber-800",children:[f>0?f.toLocaleString():"0"," ",e.jsx("span",{className:"text-amber-600 font-normal text-sm",children:"ac"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tons/Acre"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n.hayTonsPerAcre||"",onChange:u=>{const j=u.target.value.replace(/[^0-9.]/g,""),g={...s};g.land||(g.land={}),g.land={...g.land,hayTonsPerAcre:j},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:g}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-1 focus:ring-amber-200 outline-none font-mono text-right pr-14",placeholder:"0"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"tons/ac"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-amber-700 font-semibold",children:"Total Production"}),e.jsxs("div",{className:"bg-amber-100 border border-amber-400 rounded-lg px-3 py-2 text-right font-mono font-bold text-amber-900",children:[(()=>{const u=parseFloat(n.hayTonsPerAcre)||0,j=f*u;return j>0?j.toLocaleString():"0"})()," ",e.jsx("span",{className:"text-amber-700 font-normal text-sm",children:"tons"})]})]})]})]})]})})()})]}),(()=>{var k;const s=((k=r==null?void 0:r.cashFlow)==null?void 0:k.cowCalf)||{},n=s.herd||{};s.production;const o=s.land||{},i=[1,2,3,4,5,6,7,8,9,10,11,12],h=P=>{const A=i.map(R=>parseFloat((n[P]||{})[R])||0).filter(R=>R>0);return A.length>0?A.reduce((R,L)=>R+L,0)/A.length:0},x=["springCows1","springCows2","springCows3","fallCows1","fallCows2","fallCows3"].reduce((P,A)=>P+h(A),0),f=["springCows1","springCows2","springCows3"].reduce((P,A)=>P+h(A),0),d=["fallCows1","fallCows2","fallCows3"].reduce((P,A)=>P+h(A),0),u=h("bulls"),j=h("bredHeifers");h("heiferCalves"),h("steerCalves");const g=(parseFloat(o.ownedPastureAcres)||0)+(parseFloat(o.leasedPastureAcres)||0),m=parseFloat(o.stockingRate)||0,p=x+u+j,C=m>0?m:p>0&&g>0?g/p:0,N=m===0&&C>0;return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ur,{className:"w-5 h-5 text-amber-600"}),"Calculated Metrics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total Breeding Cows"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:Math.round(x).toLocaleString()}),e.jsxs("div",{className:"text-xs text-amber-500",children:["Spring: ",Math.round(f)," | Fall: ",Math.round(d)]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Grazing Animals"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:Math.round(p).toLocaleString()}),e.jsx("div",{className:"text-xs text-blue-500",children:"Cows + Bulls + Bred Hfrs"})]}),e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:[e.jsx("div",{className:"text-sm text-emerald-600 font-medium",children:"Stocking Rate"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-700 font-mono",children:C>0?C.toFixed(1):""}),e.jsxs("div",{className:"text-xs text-emerald-500",children:[N?"Calculated":"Entered"," ac/pair"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Bull:Cow Ratio"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:["1:",u>0?Math.round(x/u):""]}),e.jsxs("div",{className:"text-xs text-purple-500",children:[Math.round(u)," bulls total"]})]})]})]})})()]}),Ws==="revenue"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(vt,{className:"w-6 h-6 text-green-600"}),"Cow/Calf Revenue"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track calf sales, cull cow sales, and cull bull sales revenue."})]}),(()=>{var tt;const s=((tt=r==null?void 0:r.cashFlow)==null?void 0:tt.cowCalf)||{},n=s.revenue||{},o=s.herd||{},i=s.production||{},h=(parseFloat(i.calfDeathLoss)||0)/100,b=(parseFloat(i.replacementRate)||0)/100,x=[1,2,3,4,5,6,7,8,9,10,11,12],f=Je=>{const Ye=x.map(gt=>parseFloat((o[Je]||{})[gt])||0).filter(gt=>gt>0);return Ye.length>0?Ye.reduce((gt,nt)=>gt+nt,0)/Ye.length:0},d=["springCows1","springCows2","springCows3"].reduce((Je,Ye)=>Je+f(Ye),0),u=["fallCows1","fallCows2","fallCows3"].reduce((Je,Ye)=>Je+f(Ye),0),j=Math.round(d*(1-h)),g=Math.round(j*.5),m=Math.round(d*b),p=Math.max(0,g-m),C=Math.round(j*.5),N=Math.round(u*(1-h)),k=Math.round(N*.5),P=Math.round(u*b),A=Math.max(0,k-P),R=Math.round(N*.5),L=parseFloat(n.springHeiferWeight)||0,D=parseFloat(n.springHeiferPrice)||0,F=p*L*D,v=parseFloat(n.springSteerWeight)||0,S=parseFloat(n.springSteerPrice)||0,E=C*v*S,I=parseFloat(n.fallHeiferWeight)||0,H=parseFloat(n.fallHeiferPrice)||0,Y=A*I*H,_=parseFloat(n.fallSteerWeight)||0,K=parseFloat(n.fallSteerPrice)||0,re=R*_*K,he=F+E+Y+re,U=p+C+A+R,V=d+u,q=f("bulls"),X=(parseFloat(i.cullRate)||0)/100,se=Math.round(V*X),le=parseFloat(n.cullCowPrice)||0,ke=se*le,Le=Math.round(q*X),$e=parseFloat(n.cullBullPrice)||0,qe=Le*$e,et=ke+qe,be=(s.lrp||{}).policies||[],Te=be.reduce((Je,Ye)=>{const nt=(parseFloat(Ye.expectedEndValue)||0)*(parseFloat(Ye.coverageLevel)||100)/100*(parseFloat(Ye.targetWeight)||0),Is=(parseFloat(Ye.actualPrice)||0)*(parseFloat(Ye.targetWeight)||0),ps=nt-Is;return Je+ps*(parseFloat(Ye.headCount)||0)},0),ye=Te>0?Te:0,Ue=he+et+ye;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Calf Sales"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:["$",he.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-500",children:[U," head total"]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Cull Cow Sales"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",ke.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-amber-500",children:[se," head"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Cull Bull Sales"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:["$",qe.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-orange-500",children:[Le," head"]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${ye>0?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${ye>0?"text-blue-600":"text-gray-500"}`,children:"LRP Indemnity"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${ye>0?"text-blue-700":"text-gray-400"}`,children:["$",ye.toLocaleString()]}),e.jsxs("div",{className:`text-xs ${ye>0?"text-blue-500":"text-gray-400"}`,children:[be.length," ",be.length===1?"policy":"policies"]})]}),e.jsxs("div",{className:"bg-emerald-100 rounded-lg p-4 border border-emerald-300",children:[e.jsx("div",{className:"text-sm text-emerald-700 font-medium",children:"Total Revenue"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-800 font-mono",children:["$",Ue.toLocaleString()]}),e.jsx("div",{className:"text-xs text-emerald-600",children:"All sales + LRP"})]})]})})(),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-green-100 text-green-800 px-4 py-3 font-bold border-b border-green-200 flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5"}),"Calf Sales"]}),e.jsx("div",{className:"p-6",children:(()=>{var X;const s=((X=r==null?void 0:r.cashFlow)==null?void 0:X.cowCalf)||{},n=s.revenue||{},o=s.herd||{},i=s.production||{},h=(se,le)=>{const ke={...s};ke.revenue||(ke.revenue={}),ke.revenue={...ke.revenue,[se]:le},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:ke}})},b=(parseFloat(i.calfDeathLoss)||0)/100,x=(parseFloat(i.replacementRate)||0)/100,f=[1,2,3,4,5,6,7,8,9,10,11,12],d=se=>{const le=f.map(ke=>parseFloat((o[se]||{})[ke])||0).filter(ke=>ke>0);return le.length>0?le.reduce((ke,Le)=>ke+Le,0)/le.length:0},u=["springCows1","springCows2","springCows3"].reduce((se,le)=>se+d(le),0),j=["fallCows1","fallCows2","fallCows3"].reduce((se,le)=>se+d(le),0),g=Math.round(u*(1-b)),m=Math.round(g*.5),p=Math.round(u*x),C=Math.max(0,m-p),N=Math.round(g*.5),k=Math.round(j*(1-b)),P=Math.round(k*.5),A=Math.round(j*x),R=Math.max(0,P-A),L=Math.round(k*.5),D=parseFloat(n.springHeiferWeight)||0,F=parseFloat(n.springHeiferPrice)||0,v=C*D*F,S=parseFloat(n.springSteerWeight)||0,E=parseFloat(n.springSteerPrice)||0,I=N*S*E,H=v+I,Y=parseFloat(n.fallHeiferWeight)||0,_=parseFloat(n.fallHeiferPrice)||0,K=R*Y*_,re=parseFloat(n.fallSteerWeight)||0,he=parseFloat(n.fallSteerPrice)||0,U=L*re*he,V=K+U,q=H+V;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h4",{className:"text-lg font-bold text-green-700",children:"Spring Calf Sales"}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",Math.round(u)," spring cows  ",g," calves after ",(b*100).toFixed(0),"% death loss)"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"text-sm font-semibold text-green-600",children:"Spring Heifer Calves"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",m," total - ",p," replacements retained = ",C," sold)"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Head Sold"}),e.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg px-3 py-2 text-right font-mono font-semibold text-green-800",children:C})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Avg Weight (lbs)"}),e.jsx("input",{type:"text",value:n.springHeiferWeight||"",onChange:se=>h("springHeiferWeight",se.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-1 focus:ring-green-200 outline-none font-mono text-right",placeholder:"0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price ($/lb)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:n.springHeiferPrice||"",onChange:se=>h("springHeiferPrice",se.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-1 focus:ring-green-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Total Lbs"}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-right font-mono text-gray-700",children:C*D>0?(C*D).toLocaleString():""})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 font-semibold",children:"Revenue"}),e.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg px-3 py-2 text-right font-mono font-bold text-green-800",children:["$",v>0?v.toLocaleString():"0"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"text-sm font-semibold text-blue-600",children:"Spring Steer Calves"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(50% of ",g," calves = ",N," steers)"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Head Sold"}),e.jsx("div",{className:"bg-blue-50 border border-blue-300 rounded-lg px-3 py-2 text-right font-mono font-semibold text-blue-800",children:N})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Avg Weight (lbs)"}),e.jsx("input",{type:"text",value:n.springSteerWeight||"",onChange:se=>h("springSteerWeight",se.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price ($/lb)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:n.springSteerPrice||"",onChange:se=>h("springSteerPrice",se.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Total Lbs"}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-right font-mono text-gray-700",children:N*S>0?(N*S).toLocaleString():""})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 font-semibold",children:"Revenue"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg px-3 py-2 text-right font-mono font-bold text-blue-800",children:["$",I>0?I.toLocaleString():"0"]})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg px-4 py-2",children:[e.jsx("span",{className:"text-green-700 font-medium mr-3",children:"Spring Calf Sales:"}),e.jsxs("span",{className:"text-lg font-bold text-green-800 font-mono",children:["$",H.toLocaleString()]})]})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("h4",{className:"text-lg font-bold text-orange-700",children:"Fall Calf Sales"}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",Math.round(j)," fall cows  ",k," calves after ",(b*100).toFixed(0),"% death loss)"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"text-sm font-semibold text-orange-600",children:"Fall Heifer Calves"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",P," total - ",A," replacements retained = ",R," sold)"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Head Sold"}),e.jsx("div",{className:"bg-orange-50 border border-orange-300 rounded-lg px-3 py-2 text-right font-mono font-semibold text-orange-800",children:R})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Avg Weight (lbs)"}),e.jsx("input",{type:"text",value:n.fallHeiferWeight||"",onChange:se=>h("fallHeiferWeight",se.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-orange-500 focus:ring-1 focus:ring-orange-200 outline-none font-mono text-right",placeholder:"0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price ($/lb)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:n.fallHeiferPrice||"",onChange:se=>h("fallHeiferPrice",se.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-orange-500 focus:ring-1 focus:ring-orange-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Total Lbs"}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-right font-mono text-gray-700",children:R*Y>0?(R*Y).toLocaleString():""})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 font-semibold",children:"Revenue"}),e.jsxs("div",{className:"bg-orange-50 border border-orange-300 rounded-lg px-3 py-2 text-right font-mono font-bold text-orange-800",children:["$",K>0?K.toLocaleString():"0"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"text-sm font-semibold text-amber-600",children:"Fall Steer Calves"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(50% of ",k," calves = ",L," steers)"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Head Sold"}),e.jsx("div",{className:"bg-amber-50 border border-amber-300 rounded-lg px-3 py-2 text-right font-mono font-semibold text-amber-800",children:L})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Avg Weight (lbs)"}),e.jsx("input",{type:"text",value:n.fallSteerWeight||"",onChange:se=>h("fallSteerWeight",se.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-1 focus:ring-amber-200 outline-none font-mono text-right",placeholder:"0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price ($/lb)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:n.fallSteerPrice||"",onChange:se=>h("fallSteerPrice",se.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-1 focus:ring-amber-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Total Lbs"}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-right font-mono text-gray-700",children:L*re>0?(L*re).toLocaleString():""})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-amber-700 font-semibold",children:"Revenue"}),e.jsxs("div",{className:"bg-amber-50 border border-amber-300 rounded-lg px-3 py-2 text-right font-mono font-bold text-amber-800",children:["$",U>0?U.toLocaleString():"0"]})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("div",{className:"bg-orange-100 border border-orange-300 rounded-lg px-4 py-2",children:[e.jsx("span",{className:"text-orange-700 font-medium mr-3",children:"Fall Calf Sales:"}),e.jsxs("span",{className:"text-lg font-bold text-orange-800 font-mono",children:["$",V.toLocaleString()]})]})})]}),e.jsx("div",{className:"border-t-2 border-gray-300 pt-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"bg-emerald-100 border border-emerald-400 rounded-lg px-6 py-3",children:[e.jsx("span",{className:"text-emerald-700 font-medium mr-4",children:"Total Calf Sales:"}),e.jsxs("span",{className:"text-xl font-bold text-emerald-800 font-mono",children:["$",q.toLocaleString()]})]})})})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-amber-100 text-amber-800 px-4 py-3 font-bold border-b border-amber-200 flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5"}),"Cull Cow Sales"]}),e.jsx("div",{className:"p-6",children:(()=>{var m;const s=((m=r==null?void 0:r.cashFlow)==null?void 0:m.cowCalf)||{},n=s.revenue||{},o=s.herd||{},i=s.production||{},h=(p,C)=>{const N={...s};N.revenue||(N.revenue={}),N.revenue={...N.revenue,[p]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:N}})},b=[1,2,3,4,5,6,7,8,9,10,11,12],x=p=>{const C=b.map(N=>parseFloat((o[p]||{})[N])||0).filter(N=>N>0);return C.length>0?C.reduce((N,k)=>N+k,0)/C.length:0},f=["springCows1","springCows2","springCows3","fallCows1","fallCows2","fallCows3"].reduce((p,C)=>p+x(C),0),d=(parseFloat(i.cullRate)||0)/100,u=Math.round(f*d);parseFloat(n.cullCowWeight);const j=parseFloat(n.cullCowPrice)||0,g=u*j;return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsxs("span",{className:"text-sm text-gray-500",children:["(",Math.round(f)," breeding cows  ",(d*100).toFixed(0),"% cull rate = ",u," head)"]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Head Sold"}),e.jsx("div",{className:"bg-amber-50 border border-amber-300 rounded-lg px-3 py-2 text-right font-mono font-semibold text-amber-800",children:u})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Avg Weight (lbs)"}),e.jsx("input",{type:"text",value:n.cullCowWeight||"",onChange:p=>h("cullCowWeight",p.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-1 focus:ring-amber-200 outline-none font-mono text-right",placeholder:"0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price ($/head)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:n.cullCowPrice||"",onChange:p=>h("cullCowPrice",p.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-1 focus:ring-amber-200 outline-none font-mono text-right",placeholder:"0"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-amber-700 font-semibold",children:"Revenue"}),e.jsxs("div",{className:"bg-amber-50 border border-amber-300 rounded-lg px-3 py-2 text-right font-mono font-bold text-amber-800",children:["$",g>0?g.toLocaleString():"0"]})]})]})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-orange-100 text-orange-800 px-4 py-3 font-bold border-b border-orange-200 flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5"}),"Cull Bull Sales"]}),e.jsx("div",{className:"p-6",children:(()=>{var m;const s=((m=r==null?void 0:r.cashFlow)==null?void 0:m.cowCalf)||{},n=s.revenue||{},o=s.herd||{},i=s.production||{},h=(p,C)=>{const N={...s};N.revenue||(N.revenue={}),N.revenue={...N.revenue,[p]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:N}})},b=[1,2,3,4,5,6,7,8,9,10,11,12],f=(p=>{const C=b.map(N=>parseFloat((o[p]||{})[N])||0).filter(N=>N>0);return C.length>0?C.reduce((N,k)=>N+k,0)/C.length:0})("bulls"),d=(parseFloat(i.cullRate)||0)/100,u=Math.round(f*d);parseFloat(n.cullBullWeight);const j=parseFloat(n.cullBullPrice)||0,g=u*j;return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsxs("span",{className:"text-sm text-gray-500",children:["(",Math.round(f)," herd bulls  ",(d*100).toFixed(0),"% cull rate = ",u," head)"]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Head Sold"}),e.jsx("div",{className:"bg-orange-50 border border-orange-300 rounded-lg px-3 py-2 text-right font-mono font-semibold text-orange-800",children:u})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Avg Weight (lbs)"}),e.jsx("input",{type:"text",value:n.cullBullWeight||"",onChange:p=>h("cullBullWeight",p.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-orange-500 focus:ring-1 focus:ring-orange-200 outline-none font-mono text-right",placeholder:"0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price ($/head)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:n.cullBullPrice||"",onChange:p=>h("cullBullPrice",p.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-orange-500 focus:ring-1 focus:ring-orange-200 outline-none font-mono text-right",placeholder:"0"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 font-semibold",children:"Revenue"}),e.jsxs("div",{className:"bg-orange-50 border border-orange-300 rounded-lg px-3 py-2 text-right font-mono font-bold text-orange-800",children:["$",g>0?g.toLocaleString():"0"]})]})]})]})})()})]})]}),Ws==="lrp"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($t,{className:"w-6 h-6 text-blue-600"}),"LRP Insurance (Livestock Risk Protection)"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track LRP insurance policies, premiums, and indemnity payments for price protection."})]}),(()=>{var u;const o=((((u=r==null?void 0:r.cashFlow)==null?void 0:u.cowCalf)||{}).lrp||{}).policies||[],i=o.reduce((j,g)=>j+(parseFloat(g.headCount)||0)*(parseFloat(g.premiumPerHead)||0),0),h=o.reduce((j,g)=>{const m=parseFloat(g.premiumPerHead)||0,p=parseFloat(g.subsidizedPremiumPerHead)||0;return j+(parseFloat(g.headCount)||0)*(m-p)},0),b=o.reduce((j,g)=>j+(parseFloat(g.headCount)||0)*(parseFloat(g.subsidizedPremiumPerHead)||0),0),x=o.reduce((j,g)=>{const p=(parseFloat(g.expectedEndValue)||0)*(parseFloat(g.coverageLevel)||100)/100*(parseFloat(g.targetWeight)||0),C=(parseFloat(g.actualPrice)||0)*(parseFloat(g.targetWeight)||0),N=p-C;return j+N*(parseFloat(g.headCount)||0)},0),f=o.reduce((j,g)=>j+(parseFloat(g.headCount)||0),0),d=x-b;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Head Covered"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:f}),e.jsxs("div",{className:"text-xs text-blue-500",children:[o.length," policies"]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total Premiums"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",i.toLocaleString()]}),e.jsx("div",{className:"text-xs text-amber-500",children:"Before subsidy"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Subsidy"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:["$",h.toLocaleString()]}),e.jsx("div",{className:"text-xs text-green-500",children:"USDA subsidy"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Net Premium Cost"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700 font-mono",children:["$",b.toLocaleString()]}),e.jsx("div",{className:"text-xs text-red-500",children:"Your cost"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${d>=0?"bg-emerald-100 border-emerald-300":"bg-orange-100 border-orange-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${d>=0?"text-emerald-700":"text-orange-700"}`,children:"LRP Net Payout"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${d>=0?"text-emerald-800":"text-orange-800"}`,children:["$",d.toLocaleString()]}),e.jsx("div",{className:`text-xs ${d>=0?"text-emerald-600":"text-orange-600"}`,children:"Indemnity - Premiums"})]})]})})(),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-blue-100 text-blue-800 px-4 py-3 font-bold border-b border-blue-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5"}),"LRP Policies"]}),e.jsxs("button",{onClick:()=>{var x;const s=((x=r==null?void 0:r.cashFlow)==null?void 0:x.cowCalf)||{},n=s.lrp||{},o=n.policies||[],i={id:Date.now(),description:"",livestockType:"Feeder Cattle",cattleType:"",headCount:"",targetWeight:"",coverageLevel:"100",expectedEndValue:"",startDate:"",endDate:"",premiumPerHead:"",subsidizedPremiumPerHead:"",actualPrice:"",indemnityPayment:""},h=[...o,i],b={...s,lrp:{...n,policies:h}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:b}})},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Policy"]})]}),e.jsx("div",{className:"p-6",children:(()=>{var b;const s=((b=r==null?void 0:r.cashFlow)==null?void 0:b.cowCalf)||{},n=s.lrp||{},o=n.policies||[],i=(x,f,d)=>{const u=o.map(g=>g.id===x?{...g,[f]:d}:g),j={...s,lrp:{...n,policies:u}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:j}})},h=x=>{const f=o.filter(u=>u.id!==x),d={...s,lrp:{...n,policies:f}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:d}})};return o.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($t,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No LRP policies added yet."}),e.jsx("p",{className:"text-sm",children:'Click "Add Policy" to track your LRP insurance coverage.'})]}):e.jsx("div",{className:"space-y-6",children:o.map((x,f)=>{const d=parseFloat(x.headCount)||0;parseFloat(x.premiumPerHead);const u=parseFloat(x.subsidizedPremiumPerHead)||0,j=d*u,m=(parseFloat(x.expectedEndValue)||0)*(parseFloat(x.coverageLevel)||100)/100*(parseFloat(x.targetWeight)||0),p=(parseFloat(x.actualPrice)||0)*(parseFloat(x.targetWeight)||0),k=(m-p)*d-j;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-800",children:["Policy #",f+1]}),e.jsxs("button",{onClick:()=>h(x.id),className:"text-red-500 hover:text-red-700 text-sm flex items-center gap-1",children:[e.jsx(ot,{className:"w-4 h-4"}),"Remove"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-8 gap-4 mb-4",children:[e.jsxs("div",{className:"md:col-span-2 space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("input",{type:"text",value:x.description||"",onChange:P=>i(x.id,"description",P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none",placeholder:"e.g., Spring Steers 2025"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Livestock Type"}),e.jsxs("select",{value:x.livestockType||"Feeder Cattle",onChange:P=>i(x.id,"livestockType",P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none",children:[e.jsx("option",{value:"Feeder Cattle",children:"Feeder Cattle"}),e.jsx("option",{value:"Fed Cattle",children:"Fed Cattle"}),e.jsx("option",{value:"Swine",children:"Swine"}),e.jsx("option",{value:"Lamb",children:"Lamb"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),e.jsxs("select",{value:x.cattleType||"",onChange:P=>i(x.id,"cattleType",P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Unborn Bulls & Heifers",children:"Unborn Bulls & Heifers"}),e.jsx("option",{value:"Unborn Calves",children:"Unborn Calves"}),e.jsx("option",{value:"Heifers Weight 1",children:"Heifers Weight 1"}),e.jsx("option",{value:"Heifers Weight 2",children:"Heifers Weight 2"}),e.jsx("option",{value:"Steers Weight 1",children:"Steers Weight 1"}),e.jsx("option",{value:"Steers Weight 2",children:"Steers Weight 2"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("input",{type:"date",value:x.startDate||"",onChange:P=>i(x.id,"startDate",P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),e.jsx("input",{type:"date",value:x.endDate||"",onChange:P=>i(x.id,"endDate",P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Head Count"}),e.jsx("input",{type:"text",value:x.headCount||"",onChange:P=>i(x.id,"headCount",P.target.value.replace(/[^0-9]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Target Weight (lbs)"}),e.jsx("input",{type:"text",value:x.targetWeight||"",onChange:P=>i(x.id,"targetWeight",P.target.value.replace(/[^0-9]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coverage Level (%)"}),e.jsx("select",{value:x.coverageLevel||"100",onChange:P=>i(x.id,"coverageLevel",P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none",children:[100,95,90,85,80,75,70].map(P=>e.jsxs("option",{value:P,children:[P,"%"]},P))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expected End Value ($/cwt)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:x.expectedEndValue||"",onChange:P=>i(x.id,"expectedEndValue",P.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coverage Price ($/cwt)"}),e.jsxs("div",{className:"px-3 py-2 border border-gray-200 rounded-lg bg-gray-100 font-mono text-right text-gray-700",children:["$",((parseFloat(x.expectedEndValue)||0)*(parseFloat(x.coverageLevel)||100)/100).toFixed(4)]})]}),e.jsxs("div",{className:"space-y-1 bg-yellow-50 p-2 -m-2 rounded-lg border-2 border-yellow-400",children:[e.jsx("label",{className:"block text-sm font-bold text-yellow-800",children:"Actual Price ($/cwt)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-yellow-600 font-bold",children:"$"}),e.jsx("input",{type:"text",value:x.actualPrice||"",onChange:P=>i(x.id,"actualPrice",P.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-3 pl-7 border-2 border-yellow-400 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none font-mono text-right text-lg font-bold bg-white",placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Premium/Head"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:x.premiumPerHead||"",onChange:P=>i(x.id,"premiumPerHead",P.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subsidized Premium/Head"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:x.subsidizedPremiumPerHead||"",onChange:P=>i(x.id,"subsidizedPremiumPerHead",P.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subsidy/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-gray-200 rounded-lg bg-gray-100 font-mono text-right text-gray-700",children:["$",((parseFloat(x.premiumPerHead)||0)-(parseFloat(x.subsidizedPremiumPerHead)||0)).toFixed(2)]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Per Head"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Guarantee/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-blue-200 rounded-lg bg-blue-50 font-mono text-right text-blue-800",children:["$",((parseFloat(x.expectedEndValue)||0)*(parseFloat(x.coverageLevel)||100)/100*(parseFloat(x.targetWeight)||0)).toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gross Actual Revenue/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-purple-200 rounded-lg bg-purple-50 font-mono text-right text-purple-800",children:["$",((parseFloat(x.actualPrice)||0)*(parseFloat(x.targetWeight)||0)).toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gross Payment/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-orange-200 rounded-lg bg-orange-50 font-mono text-right text-orange-800",children:["$",((parseFloat(x.expectedEndValue)||0)*(parseFloat(x.coverageLevel)||100)/100*(parseFloat(x.targetWeight)||0)-(parseFloat(x.actualPrice)||0)*(parseFloat(x.targetWeight)||0)).toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Net Payment/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-orange-300 rounded-lg bg-orange-100 font-mono text-right text-orange-900",children:["$",((parseFloat(x.expectedEndValue)||0)*(parseFloat(x.coverageLevel)||100)/100*(parseFloat(x.targetWeight)||0)-(parseFloat(x.subsidizedPremiumPerHead)||0)-(parseFloat(x.actualPrice)||0)*(parseFloat(x.targetWeight)||0)).toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Totals"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Guarantee"}),e.jsxs("div",{className:"px-3 py-2 border border-blue-300 rounded-lg bg-blue-100 font-mono text-right text-blue-900 font-semibold",children:["$",((parseFloat(x.expectedEndValue)||0)*(parseFloat(x.coverageLevel)||100)/100*(parseFloat(x.targetWeight)||0)*(parseFloat(x.headCount)||0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Actual Gross"}),e.jsxs("div",{className:"px-3 py-2 border border-purple-300 rounded-lg bg-purple-100 font-mono text-right text-purple-900 font-semibold",children:["$",((parseFloat(x.actualPrice)||0)*(parseFloat(x.targetWeight)||0)*(parseFloat(x.headCount)||0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gross Indemnity Total"}),e.jsxs("div",{className:"px-3 py-2 border border-orange-200 rounded-lg bg-orange-50 font-mono text-right text-orange-800 font-semibold",children:["$",(((parseFloat(x.expectedEndValue)||0)*(parseFloat(x.coverageLevel)||100)/100*(parseFloat(x.targetWeight)||0)-(parseFloat(x.actualPrice)||0)*(parseFloat(x.targetWeight)||0))*(parseFloat(x.headCount)||0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:[e.jsx("div",{className:"text-xs text-amber-600 font-medium",children:"Net Premium Cost"}),e.jsxs("div",{className:"text-lg font-bold text-amber-700 font-mono",children:["$",j.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-amber-500",children:["$",u.toFixed(2),"/hd  ",d]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`rounded-lg p-4 border ${k>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${k>=0?"text-green-600":"text-red-600"}`,children:"LRP Net Payout"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${k>=0?"text-green-700":"text-red-700"}`,children:["$",k.toLocaleString()]}),e.jsx("div",{className:`text-xs ${k>=0?"text-green-500":"text-red-500"}`,children:"Gross Indemnity - Net Premium"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${k>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${k>=0?"text-green-600":"text-red-600"}`,children:"LRP Net Payout/Head"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${k>=0?"text-green-700":"text-red-700"}`,children:["$",d>0?(k/d).toFixed(2):"0.00"]}),e.jsxs("div",{className:`text-xs ${k>=0?"text-green-500":"text-red-500"}`,children:["Payout  ",d," head"]})]})]})]})]},x.id)})})})()})]}),(()=>{var u;const o=((((u=r==null?void 0:r.cashFlow)==null?void 0:u.cowCalf)||{}).lrp||{}).policies||[];if(o.length===0)return null;const i=o.reduce((j,g)=>j+(parseFloat(g.headCount)||0)*(parseFloat(g.premiumPerHead)||0),0),h=o.reduce((j,g)=>{const m=parseFloat(g.premiumPerHead)||0,p=parseFloat(g.subsidizedPremiumPerHead)||0;return j+(parseFloat(g.headCount)||0)*(m-p)},0),b=o.reduce((j,g)=>j+(parseFloat(g.headCount)||0)*(parseFloat(g.subsidizedPremiumPerHead)||0),0),x=o.reduce((j,g)=>{const p=(parseFloat(g.expectedEndValue)||0)*(parseFloat(g.coverageLevel)||100)/100*(parseFloat(g.targetWeight)||0),C=(parseFloat(g.actualPrice)||0)*(parseFloat(g.targetWeight)||0),N=p-C;return j+N*(parseFloat(g.headCount)||0)},0),f=o.reduce((j,g)=>j+(parseFloat(g.headCount)||0),0),d=x-b;return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-blue-200 text-blue-900 px-4 py-3 font-bold border-b border-blue-300",children:"LRP Insurance Summary"}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Premium Costs"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Total Premiums"}),e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",i.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Less: Subsidy"}),e.jsxs("span",{className:"font-mono font-semibold text-green-600",children:["-$",h.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-2 bg-amber-50 -mx-2 px-2 rounded",children:[e.jsx("span",{className:"text-amber-800 font-semibold",children:"Net Premium Cost"}),e.jsxs("span",{className:"font-mono font-bold text-amber-800",children:["$",b.toLocaleString()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Indemnity Payments"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Total Indemnity"}),e.jsxs("span",{className:"font-mono font-semibold text-green-700",children:["$",x.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Head Covered"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:f})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Policies"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:o.length})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"LRP Net Payout"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`rounded-lg p-4 ${d>=0?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${d>=0?"text-green-700":"text-red-700"}`,children:d>=0?"Payout":"Cost"}),e.jsxs("div",{className:`text-3xl font-bold font-mono ${d>=0?"text-green-800":"text-red-800"}`,children:["$",Math.abs(d).toLocaleString()]}),e.jsxs("div",{className:`text-xs mt-1 ${d>=0?"text-green-600":"text-red-600"}`,children:["$",x.toLocaleString()," indemnity - $",b.toLocaleString()," premiums"]})]}),e.jsxs("div",{className:`rounded-lg p-4 ${d>=0?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"}`,children:[e.jsxs("div",{className:`text-sm font-medium ${d>=0?"text-green-700":"text-red-700"}`,children:[d>=0?"Payout":"Cost","/Head"]}),e.jsxs("div",{className:`text-3xl font-bold font-mono ${d>=0?"text-green-800":"text-red-800"}`,children:["$",f>0?Math.abs(d/f).toFixed(2):"0.00"]}),e.jsxs("div",{className:`text-xs mt-1 ${d>=0?"text-green-600":"text-red-600"}`,children:["Payout  ",f," head"]})]})]})]})]})})]})})()]}),Ws==="prf"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(xo,{className:"w-6 h-6 text-blue-600"}),"PRF Insurance - Pasture, Rangeland, Forage"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[2023,2024,2025,2026,2027].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Track PRF (Pasture, Rangeland, Forage) Rainfall Index insurance policies to protect against drought conditions."})]}),(()=>{var g;const s=((g=r==null?void 0:r.cashFlow)==null?void 0:g.cowCalf)||{},n=s.prfPolicies||[],o=m=>{const p={...s,prfPolicies:m};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:p}})},i=()=>{const m={id:`prf-${Date.now()}`,gridId:"",county:"",acres:0,coverageLevel:90,productivityFactor:100,intervalSelections:[{interval:"Jan-Feb",percent:0,normalPrecip:0},{interval:"Feb-Mar",percent:0,normalPrecip:0},{interval:"Mar-Apr",percent:0,normalPrecip:0},{interval:"Apr-May",percent:0,normalPrecip:0},{interval:"May-Jun",percent:0,normalPrecip:0},{interval:"Jun-Jul",percent:0,normalPrecip:0},{interval:"Jul-Aug",percent:0,normalPrecip:0},{interval:"Aug-Sep",percent:0,normalPrecip:0},{interval:"Sep-Oct",percent:0,normalPrecip:0},{interval:"Oct-Nov",percent:0,normalPrecip:0},{interval:"Nov-Dec",percent:0,normalPrecip:0}],premiumPerAcre:0,totalPremium:0,subsidyPercent:55,producerPremium:0,expectedIndemnity:0,actualIndemnity:0};o([...n,m])},h=(m,p,C)=>{const N=n.map(k=>{if(k.id===m){const P={...k,[p]:C};return(p==="acres"||p==="premiumPerAcre")&&(P.totalPremium=(P.acres||0)*(P.premiumPerAcre||0),P.producerPremium=P.totalPremium*(1-(P.subsidyPercent||55)/100)),p==="subsidyPercent"&&(P.producerPremium=P.totalPremium*(1-(C||55)/100)),P}return k});o(N)},b=(m,p,C,N)=>{const k=n.map(P=>{if(P.id===m){const A=[...P.intervalSelections];return A[p]={...A[p],[C]:N},{...P,intervalSelections:A}}return P});o(k)},x=m=>{window.confirm("Delete this PRF policy?")&&o(n.filter(p=>p.id!==m))},f=n.reduce((m,p)=>m+(p.acres||0),0),d=n.reduce((m,p)=>m+(p.totalPremium||0),0),u=n.reduce((m,p)=>m+(p.producerPremium||0),0),j=n.reduce((m,p)=>m+(p.actualIndemnity||0),0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Acres Insured"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Premium"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:["$",d.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Producer Premium"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Indemnity Received"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",j.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add PRF Policy"]})}),n.map((m,p)=>{var C,N,k,P,A;return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xo,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-bold",children:["PRF Policy ",p+1]}),m.county&&e.jsxs("span",{className:"text-blue-200",children:["- ",m.county]})]}),e.jsx("button",{onClick:()=>x(m.id),className:"p-2 hover:bg-blue-800 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Grid ID"}),e.jsx("input",{type:"text",value:m.gridId||"",onChange:R=>h(m.id,"gridId",R.target.value),placeholder:"e.g., 12345",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"County"}),e.jsx("input",{type:"text",value:m.county||"",onChange:R=>h(m.id,"county",R.target.value),placeholder:"County name",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Acres"}),e.jsx("input",{type:"number",value:m.acres||"",onChange:R=>h(m.id,"acres",parseFloat(R.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Coverage Level %"}),e.jsxs("select",{value:m.coverageLevel||90,onChange:R=>h(m.id,"coverageLevel",parseInt(R.target.value)),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm",children:[e.jsx("option",{value:70,children:"70%"}),e.jsx("option",{value:75,children:"75%"}),e.jsx("option",{value:80,children:"80%"}),e.jsx("option",{value:85,children:"85%"}),e.jsx("option",{value:90,children:"90%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Productivity Factor %"}),e.jsx("input",{type:"number",value:m.productivityFactor||100,onChange:R=>h(m.id,"productivityFactor",parseFloat(R.target.value)||100),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Subsidy %"}),e.jsxs("select",{value:m.subsidyPercent||55,onChange:R=>h(m.id,"subsidyPercent",parseInt(R.target.value)),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm",children:[e.jsx("option",{value:59,children:"59% (70% coverage)"}),e.jsx("option",{value:55,children:"55% (75-80% coverage)"}),e.jsx("option",{value:51,children:"51% (85% coverage)"}),e.jsx("option",{value:44,children:"44% (90% coverage)"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Interval Selections (must total 100%)"}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 lg:grid-cols-11 gap-2",children:(C=m.intervalSelections)==null?void 0:C.map((R,L)=>e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:R.interval}),e.jsx("input",{type:"number",value:R.percent||"",onChange:D=>b(m.id,L,"percent",parseFloat(D.target.value)||0),className:"w-full px-2 py-1 border border-gray-200 rounded text-sm text-center font-mono",min:"0",max:"100",placeholder:"%"})]},L))}),e.jsx("div",{className:"mt-2 text-right",children:e.jsxs("span",{className:`text-sm font-medium ${(((N=m.intervalSelections)==null?void 0:N.reduce((R,L)=>R+(L.percent||0),0))||0)===100?"text-green-600":"text-red-600"}`,children:["Total: ",((k=m.intervalSelections)==null?void 0:k.reduce((R,L)=>R+(L.percent||0),0))||0,"%"]})}),e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3 mt-4",children:"Normal Precipitation (inches)"}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 lg:grid-cols-11 gap-2",children:(P=m.intervalSelections)==null?void 0:P.map((R,L)=>e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:R.interval}),e.jsx("input",{type:"number",step:"0.01",value:R.normalPrecip||"",onChange:D=>b(m.id,L,"normalPrecip",parseFloat(D.target.value)||0),className:"w-full px-2 py-1 border border-blue-200 rounded text-sm text-center font-mono bg-blue-50",min:"0",placeholder:"in"})]},L))}),e.jsx("div",{className:"mt-2 text-right",children:e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["Total Normal: ",(((A=m.intervalSelections)==null?void 0:A.reduce((R,L)=>R+(L.normalPrecip||0),0))||0).toFixed(2),'"']})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Premium/Acre"}),e.jsx("input",{type:"number",step:"0.01",value:m.premiumPerAcre||"",onChange:R=>h(m.id,"premiumPerAcre",parseFloat(R.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Total Premium"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:["$",(m.totalPremium||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Producer Premium"}),e.jsxs("div",{className:"px-3 py-2 bg-red-50 rounded-lg text-sm text-right font-mono font-semibold text-red-600",children:["$",(m.producerPremium||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Expected Indemnity"}),e.jsx("input",{type:"number",step:"0.01",value:m.expectedIndemnity||"",onChange:R=>h(m.id,"expectedIndemnity",parseFloat(R.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Actual Indemnity"}),e.jsx("input",{type:"number",step:"0.01",value:m.actualIndemnity||"",onChange:R=>h(m.id,"actualIndemnity",parseFloat(R.target.value)||0),className:"w-full px-3 py-2 border border-green-300 rounded-lg text-sm text-right font-mono bg-green-50"})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Net Return (Indemnity - Producer Premium)"}),e.jsxs("span",{className:`text-xl font-bold font-mono ${(m.actualIndemnity||0)-(m.producerPremium||0)>=0?"text-green-600":"text-red-600"}`,children:["$",((m.actualIndemnity||0)-(m.producerPremium||0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]})]},m.id)}),n.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"No PRF Policies"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add a PRF policy to track your Pasture, Rangeland, Forage insurance."}),e.jsxs("button",{onClick:i,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Add First PRF Policy"]})]})]})})()]}),Ws==="expenses"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-6 h-6 text-red-600"}),"Cow/Calf Operating Expenses"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:'Track operating expenses by category. Use "Last Yr Total 12" to auto-fill monthly values.'})]}),(()=>{var p;const s=((p=r==null?void 0:r.cashFlow)==null?void 0:p.cowCalf)||{},n=s.expenses||{},o=s.herd||{},i=["feedHay","pastureGrazing","vetHealth","breeding","labor","utilitiesFuel","marketing","supplies","insurance","depreciation","debtService","operatingInterest","other"],h=[1,2,3,4,5,6,7,8,9,10,11,12],b=C=>{const N=n[C]||{};return h.reduce((k,P)=>k+(parseFloat(N[P])||0),0)},f=(s.lrp||{}).policies||[],d=f.reduce((C,N)=>C+(parseFloat(N.headCount)||0)*(parseFloat(N.subsidizedPremiumPerHead)||0),0),u=i.reduce((C,N)=>C+b(N),0)+d,j=C=>{const N=h.map(k=>parseFloat((o[C]||{})[k])||0).filter(k=>k>0);return N.length>0?N.reduce((k,P)=>k+P,0)/N.length:0},g=["springCows1","springCows2","springCows3","fallCows1","fallCows2","fallCows3"].reduce((C,N)=>C+j(N),0),m=g>0?u/g:0;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Feed & Hay"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700 font-mono",children:["$",b("feedHay").toLocaleString()]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Vet & Health"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",b("vetHealth").toLocaleString()]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Pasture & Grazing"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:["$",b("pastureGrazing").toLocaleString()]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${d>0?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${d>0?"text-purple-600":"text-gray-500"}`,children:"LRP Insurance Premiums"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${d>0?"text-purple-700":"text-gray-400"}`,children:["$",d.toLocaleString()]}),e.jsxs("div",{className:`text-xs ${d>0?"text-purple-500":"text-gray-400"}`,children:[f.length," ",f.length===1?"policy":"policies"]})]}),e.jsxs("div",{className:"bg-red-100 rounded-lg p-4 border border-red-300",children:[e.jsx("div",{className:"text-sm text-red-700 font-medium",children:"Total Expenses"}),e.jsxs("div",{className:"text-2xl font-bold text-red-800 font-mono",children:["$",u.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-red-600",children:["$",m>0?m.toFixed(0):"","/cow"]})]})]})})(),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-red-100 text-red-800 px-4 py-3 font-bold border-b border-red-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),"Feed & Hay"]}),e.jsx("span",{className:"text-xs font-normal opacity-75",children:"Hay, grain, minerals, supplements (excludes grazing season May 15 - Oct 15)"})]}),e.jsx("div",{className:"p-6",children:(()=>{var L;const s=((L=r==null?void 0:r.cashFlow)==null?void 0:L.cowCalf)||{},n=s.expenses||{},o=s.herd||{},i=n.feedCostPerDay||{},h=[1,2,3,4,5,6,7,8,9,10,11,12],b=D=>{const F=h.map(v=>parseFloat((o[D]||{})[v])||0).filter(v=>v>0);return F.length>0?F.reduce((v,S)=>v+S,0)/F.length:0},x=["springCows1","springCows2","springCows3","fallCows1","fallCows2","fallCows3"].reduce((D,F)=>D+b(F),0),f=b("bulls"),d=b("bredHeifers"),u=b("openHeifers"),j=x+f+d+u,g={1:31,2:28,3:31,4:30,5:14,6:0,7:0,8:0,9:0,10:16,11:30,12:31},m={1:"31 days",2:"28 days",3:"31 days",4:"30 days",5:"14 days (1-14)",6:"On pasture",7:"On pasture",8:"On pasture",9:"On pasture",10:"16 days (16-31)",11:"30 days",12:"31 days"};let p=0;const C={};h.forEach(D=>{const v=(parseFloat(i[D])||0)*g[D]*j;C[D]=v,p+=v});const N=Object.values(g).reduce((D,F)=>D+F,0),k=(D,F)=>{const v={...s};v.expenses||(v.expenses={}),v.expenses.feedCostPerDay||(v.expenses.feedCostPerDay={}),v.expenses.feedCostPerDay={...v.expenses.feedCostPerDay,[D]:F},v.expenses.feedHay||(v.expenses.feedHay={});const E=((parseFloat(F)||0)*g[D]*j).toFixed(2);v.expenses.feedHay[D]=E,z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:v}})},P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],A=h.filter(D=>g[D]>0&&parseFloat(i[D])>0),R=A.length>0?A.reduce((D,F)=>D+(parseFloat(i[F])||0),0)/A.length:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Head Fed"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:Math.round(j)}),e.jsx("div",{className:"text-xs text-red-500",children:"Cows + Bulls + Heifers"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg $/Day/Head"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",R.toFixed(2)]}),e.jsx("div",{className:"text-xs text-amber-500",children:"Feeding months only"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Feed Days/Year"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:N}),e.jsx("div",{className:"text-xs text-blue-500",children:"Excludes grazing season"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Grazing Days"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:"153"}),e.jsx("div",{className:"text-xs text-green-500",children:"May 15 - Oct 15"})]}),e.jsxs("div",{className:"bg-red-100 rounded-lg p-4 border border-red-300",children:[e.jsx("div",{className:"text-sm text-red-700 font-medium",children:"Total Annual Feed"}),e.jsxs("div",{className:"text-2xl font-bold text-red-800 font-mono",children:["$",p.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsxs("div",{className:"text-xs text-red-600",children:[Math.round(j)," head  ",N," days"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Enter Cost per Day per Head for Each Month"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-red-50 border-b border-red-200",children:[e.jsx("th",{className:"py-2 px-2 text-left text-red-700 font-semibold w-28",children:"Month"}),P.map((D,F)=>{const v=g[F+1]===0;return e.jsx("th",{className:`py-2 px-1 text-center font-semibold ${v?"text-green-600 bg-green-50":"text-red-700"}`,children:D},F)})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2 px-2 font-medium text-gray-700 bg-gray-50",children:"$/Day/Head"}),h.map((D,F)=>{const v=g[D]===0;return e.jsx("td",{className:`py-1.5 px-1 ${v?"bg-green-50":""}`,children:v?e.jsx("div",{className:"text-center text-green-600 text-xs font-medium",children:""}):e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-1.5 top-1/2 -translate-y-1/2 text-gray-400 text-[10px]",children:"$"}),e.jsx("input",{type:"text",value:i[D]||"",onChange:S=>k(D,S.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-1.5 py-1.5 pl-4 border border-gray-200 rounded text-xs font-mono text-right focus:border-red-400 focus:ring-1 focus:ring-red-200 outline-none",placeholder:"0.00"})]})},D)})]}),e.jsxs("tr",{className:"border-b border-gray-100 bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2 font-medium text-gray-500 text-xs",children:"Feed Days"}),h.map(D=>{const F=g[D]===0;return e.jsx("td",{className:`py-2 px-1 text-center text-[10px] ${F?"text-green-600 bg-green-50":"text-gray-500"}`,children:m[D]},D)})]}),e.jsxs("tr",{className:"bg-red-50",children:[e.jsx("td",{className:"py-2 px-2 font-semibold text-red-700",children:"Monthly Total"}),h.map(D=>{const F=g[D]===0;return e.jsx("td",{className:`py-2 px-1 text-center font-mono text-xs font-semibold ${F?"text-green-600 bg-green-100":"text-red-800"}`,children:F?"":`$${Math.round(C[D]).toLocaleString()}`},D)})]})]})]})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Monthly Total = $/Day/Head  Feed Days  ",Math.round(j)," Head | Green months = on pasture (no feed cost)"]})]})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-green-100 text-green-800 px-4 py-3 font-bold border-b border-green-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),"Pasture & Grazing"]}),e.jsx("span",{className:"text-xs font-normal opacity-75",children:"Grazing Season: May 15 - Oct 15 (153 days)"})]}),e.jsx("div",{className:"p-6",children:(()=>{var P;const s=((P=r==null?void 0:r.cashFlow)==null?void 0:P.cowCalf)||{},n=s.expenses||{},o=s.herd||{},i=parseFloat(n.grazingCostPerPair)||0,h=[1,2,3,4,5,6,7,8,9,10,11,12],b=A=>{const R=h.map(L=>parseFloat((o[A]||{})[L])||0).filter(L=>L>0);return R.length>0?R.reduce((L,D)=>L+D,0)/R.length:0},x=["springCows1","springCows2","springCows3","fallCows1","fallCows2","fallCows3"].reduce((A,R)=>A+b(R),0),f=b("bulls"),d=b("bredHeifers"),u=x+f+d,g=i>0?i/153:0,m=i*u,p={5:16,6:30,7:31,8:31,9:30,10:15},C={};Object.entries(p).forEach(([A,R])=>{C[A]=g*R*u});const N=A=>{const R={...s};R.expenses||(R.expenses={}),R.expenses.grazingCostPerPair=A,R.expenses.pastureGrazing||(R.expenses.pastureGrazing={});const L=parseFloat(A)||0,D=L>0?L/153:0;for(let F=1;F<=12;F++)R.expenses.pastureGrazing[F]="0";Object.entries(p).forEach(([F,v])=>{const S=(D*v*u).toFixed(2);R.expenses.pastureGrazing[F]=S}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:R}})},k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-green-700",children:"Cost per Pair (Season)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:n.grazingCostPerPair||"",onChange:A=>N(A.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2.5 pl-7 border border-green-300 rounded-lg text-lg font-mono text-right focus:border-green-500 focus:ring-1 focus:ring-green-300 outline-none",placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enter total grazing cost per cow/pair for the season"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Cost per Day"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:["$",g.toFixed(2)]}),e.jsx("div",{className:"text-xs text-green-500",children:"Per pair / 153 days"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Grazing Pairs"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:Math.round(u)}),e.jsx("div",{className:"text-xs text-blue-500",children:"Cows + Bulls + Bred Hfrs"})]}),e.jsxs("div",{className:"bg-emerald-100 rounded-lg p-4 border border-emerald-300",children:[e.jsx("div",{className:"text-sm text-emerald-700 font-medium",children:"Total Grazing Cost"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-800 font-mono",children:["$",m.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-emerald-600",children:[Math.round(u)," pairs  $",i,"/pair"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Monthly Cost Distribution (May 15 - Oct 15)"}),e.jsx("div",{className:"grid grid-cols-6 md:grid-cols-12 gap-2",children:h.map((A,R)=>{const L=p[A]!==void 0,D=C[A]||0,F=p[A]||0;return e.jsxs("div",{className:`space-y-1 ${L?"":"opacity-40"}`,children:[e.jsx("label",{className:"block text-[10px] font-medium text-gray-500 text-center",children:k[R]}),e.jsx("div",{className:`px-1.5 py-2 rounded text-xs font-mono text-center ${L?"bg-green-100 border border-green-300 text-green-800":"bg-gray-100 border border-gray-200 text-gray-400"}`,children:L?`$${Math.round(D).toLocaleString()}`:""}),L&&e.jsxs("div",{className:"text-[9px] text-gray-500 text-center",children:[F," days"]})]},A)})})]})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-purple-100 text-purple-800 px-4 py-3 font-bold border-b border-purple-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),"Breeding Costs"]}),e.jsx("span",{className:"text-xs font-normal opacity-75",children:"Bull purchases, AI costs, and other breeding expenses"})]}),e.jsx("div",{className:"p-6",children:(()=>{var A;const s=((A=r==null?void 0:r.cashFlow)==null?void 0:A.cowCalf)||{},n=s.expenses||{},o=s.herd||{},i=s.production||{},h=n.breedingCosts||{},b=[1,2,3,4,5,6,7,8,9,10,11,12],f=(R=>{const L=b.map(D=>parseFloat((o[R]||{})[D])||0).filter(D=>D>0);return L.length>0?L.reduce((D,F)=>D+F,0)/L.length:0})("bulls"),d=(parseFloat(i.cullRate)||0)/100,u=Math.round(f*d),j=parseFloat(h.bullPricePerHead)||0,g=u*j,m=parseFloat(h.aiCosts)||0,p=parseFloat(h.pregChecking)||0,C=parseFloat(h.other)||0,N=g+m+p+C,k=(R,L)=>{const D={...s};D.expenses||(D.expenses={}),D.expenses.breedingCosts||(D.expenses.breedingCosts={}),D.expenses.breedingCosts={...D.expenses.breedingCosts,[R]:L},D.expenses.breeding||(D.expenses.breeding={});const F=parseFloat(R==="bullPricePerHead"?L:h.bullPricePerHead)||0,v=u*F,S=parseFloat(R==="aiCosts"?L:h.aiCosts)||0,E=parseFloat(R==="pregChecking"?L:h.pregChecking)||0,I=parseFloat(R==="other"?L:h.other)||0,Y=((v+S+E+I)/12).toFixed(2);for(let _=1;_<=12;_++)D.expenses.breeding[_]=Y;z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:D}})},P=R=>R?R.toString().replace(/[$,]/g,""):"";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-700 mb-3",children:"Annual Bull Purchases"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Bulls Purchased"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:u}),e.jsxs("div",{className:"text-xs text-purple-500",children:[Math.round(f)," bulls  ",(d*100).toFixed(0),"% cull rate"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-purple-700",children:"Price per Head"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:P(h.bullPricePerHead),onChange:R=>k("bullPricePerHead",R.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2.5 pl-7 border border-purple-300 rounded-lg text-lg font-mono text-right focus:border-purple-500 focus:ring-1 focus:ring-purple-300 outline-none",placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Purchase price per bull"})]}),e.jsxs("div",{className:"bg-purple-100 rounded-lg p-4 border border-purple-300 md:col-span-2",children:[e.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"Total Bull Purchase Cost"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-800 font-mono",children:["$",g.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-purple-600",children:[u," bulls  $",j.toLocaleString(),"/head"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-purple-700",children:"Total Annual AI Costs"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:P(h.aiCosts),onChange:R=>k("aiCosts",R.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2.5 pl-7 border border-purple-300 rounded-lg text-lg font-mono text-right focus:border-purple-500 focus:ring-1 focus:ring-purple-300 outline-none",placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Semen, AI technician, supplies"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-purple-700",children:"Preg Checking"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:P(h.pregChecking),onChange:R=>k("pregChecking",R.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2.5 pl-7 border border-purple-300 rounded-lg text-lg font-mono text-right focus:border-purple-500 focus:ring-1 focus:ring-purple-300 outline-none",placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Pregnancy testing costs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-purple-700",children:"Other Breeding Costs"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:P(h.other),onChange:R=>k("other",R.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2.5 pl-7 border border-purple-300 rounded-lg text-lg font-mono text-right focus:border-purple-500 focus:ring-1 focus:ring-purple-300 outline-none",placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bull lease, other expenses"})]}),e.jsxs("div",{className:"bg-purple-100 rounded-lg p-4 border border-purple-300",children:[e.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"Total Annual Breeding"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-800 font-mono",children:["$",N.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-purple-600",children:["$",(N/12).toLocaleString(void 0,{maximumFractionDigits:0}),"/month avg"]})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-700 mb-3",children:"Cost Breakdown"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-purple-200",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["Bull Purchases (",u," head)"]}),e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",g.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-purple-200",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"AI Costs"}),e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",m.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-purple-200",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Preg Checking"}),e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",p.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-purple-200",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Other"}),e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",C.toLocaleString()]})]})]})]})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-rose-100 text-rose-800 px-4 py-3 font-bold border-b border-rose-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),"Debt Service"]}),e.jsx("span",{className:"text-xs font-normal opacity-75",children:"Principal and interest payments on loans"})]}),e.jsx("div",{className:"p-6",children:(()=>{var d;const s=((d=r==null?void 0:r.cashFlow)==null?void 0:d.cowCalf)||{},o=(s.expenses||{}).debtServiceData||{},i=parseFloat(o.principal)||0,h=parseFloat(o.interest)||0,b=i+h,x=(u,j)=>{const g={...s};g.expenses||(g.expenses={}),g.expenses.debtServiceData||(g.expenses.debtServiceData={}),g.expenses.debtServiceData={...g.expenses.debtServiceData,[u]:j},g.expenses.debtService||(g.expenses.debtService={});const m=parseFloat(u==="principal"?j:o.principal)||0,p=parseFloat(u==="interest"?j:o.interest)||0,N=((m+p)/12).toFixed(2);for(let k=1;k<=12;k++)g.expenses.debtService[k]=N;z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:g}})},f=u=>u?u.toString().replace(/[$,]/g,""):"";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-rose-700",children:"Annual Principal"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:f(o.principal),onChange:u=>x("principal",u.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2.5 pl-7 border border-rose-300 rounded-lg text-lg font-mono text-right focus:border-rose-500 focus:ring-1 focus:ring-rose-300 outline-none",placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Annual principal payments"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-rose-700",children:"Annual Interest"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:f(o.interest),onChange:u=>x("interest",u.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2.5 pl-7 border border-rose-300 rounded-lg text-lg font-mono text-right focus:border-rose-500 focus:ring-1 focus:ring-rose-300 outline-none",placeholder:"0.00"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Annual interest payments"})]}),e.jsxs("div",{className:"bg-rose-100 rounded-lg p-4 border border-rose-300",children:[e.jsx("div",{className:"text-sm text-rose-700 font-medium",children:"Total Annual Debt Service"}),e.jsxs("div",{className:"text-2xl font-bold text-rose-800 font-mono",children:["$",b.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-rose-600",children:["$",(b/12).toLocaleString(void 0,{maximumFractionDigits:0}),"/month"]})]})]}),e.jsxs("div",{className:"bg-rose-50 rounded-lg p-4 border border-rose-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-rose-700 mb-3",children:"Debt Service Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-rose-200",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Principal"}),e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",i.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-rose-200",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Interest"}),e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",h.toLocaleString()]})]})]})]})]})})()})]}),[{key:"vetHealth",label:"Veterinary & Health",icon:"",color:"amber",description:"Vet bills, vaccines, medications, health supplies"},{key:"labor",label:"Labor",icon:"",color:"blue",description:"Hired labor, contract services"},{key:"utilitiesFuel",label:"Utilities & Fuel",icon:"",color:"orange",description:"Electricity, propane, diesel, gasoline"},{key:"marketing",label:"Marketing & Hauling",icon:"",color:"teal",description:"Commission, hauling, sale barn fees, brand inspection"},{key:"supplies",label:"Supplies & Equipment",icon:"",color:"gray",description:"Ear tags, tools, small equipment, repairs"},{key:"insurance",label:"Insurance & Taxes",icon:"",color:"indigo",description:"Livestock insurance, property taxes"},{key:"depreciation",label:"Equipment Depreciation",icon:"",color:"stone",description:"Annual depreciation on equipment and machinery"},{key:"operatingInterest",label:"Operating Interest",icon:"",color:"yellow",description:"Interest on operating line of credit"},{key:"other",label:"Other Operating",icon:"",color:"slate",description:"Miscellaneous operating expenses"}].map(s=>{const o={red:{bg:"bg-red-100",text:"text-red-800",border:"border-red-200",light:"bg-red-50",accent:"border-red-300"},green:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200",light:"bg-green-50",accent:"border-green-300"},amber:{bg:"bg-amber-100",text:"text-amber-800",border:"border-amber-200",light:"bg-amber-50",accent:"border-amber-300"},purple:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200",light:"bg-purple-50",accent:"border-purple-300"},blue:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200",light:"bg-blue-50",accent:"border-blue-300"},orange:{bg:"bg-orange-100",text:"text-orange-800",border:"border-orange-200",light:"bg-orange-50",accent:"border-orange-300"},teal:{bg:"bg-teal-100",text:"text-teal-800",border:"border-teal-200",light:"bg-teal-50",accent:"border-teal-300"},gray:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200",light:"bg-gray-50",accent:"border-gray-300"},indigo:{bg:"bg-indigo-100",text:"text-indigo-800",border:"border-indigo-200",light:"bg-indigo-50",accent:"border-indigo-300"},slate:{bg:"bg-slate-100",text:"text-slate-800",border:"border-slate-200",light:"bg-slate-50",accent:"border-slate-300"},stone:{bg:"bg-stone-100",text:"text-stone-800",border:"border-stone-200",light:"bg-stone-50",accent:"border-stone-300"},rose:{bg:"bg-rose-100",text:"text-rose-800",border:"border-rose-200",light:"bg-rose-50",accent:"border-rose-300"},yellow:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200",light:"bg-yellow-50",accent:"border-yellow-300"}}[s.color];return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:`${o.bg} ${o.text} px-4 py-3 font-bold ${o.border} border-b flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.icon}),s.label]}),e.jsx("span",{className:"text-xs font-normal opacity-75",children:s.description})]}),e.jsx("div",{className:"p-4",children:(()=>{var C;const i=((C=r==null?void 0:r.cashFlow)==null?void 0:C.cowCalf)||{},h=i.expenses||{},b=h[s.key]||{},x=h[`${s.key}LastYr`]||"",f=[1,2,3,4,5,6,7,8,9,10,11,12],d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=(N,k)=>{const P={...i};P.expenses||(P.expenses={}),P.expenses[s.key]||(P.expenses[s.key]={}),P.expenses[s.key]={...P.expenses[s.key],[N]:k},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:P}})},j=N=>{const k={...i};k.expenses||(k.expenses={}),k.expenses[`${s.key}LastYr`]=N,z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:k}})},g=()=>{const N=parseFloat(x.replace(/[$,]/g,""))||0;if(N>0){const k=(N/12).toFixed(2),P={...i};P.expenses||(P.expenses={}),P.expenses[s.key]||(P.expenses[s.key]={}),f.forEach(A=>{P.expenses[s.key][A]=k}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},cowCalf:P}})}},m=f.reduce((N,k)=>N+(parseFloat(b[k])||0),0),p=N=>N.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-gray-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 w-28",children:"Last Yr Total:"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:x?x.replace(/[$]/g,""):"",onChange:N=>{const k=N.target.value.replace(/[^0-9.,]/g,"");j(k)},onBlur:N=>{const k=parseFloat(N.target.value.replace(/,/g,""));isNaN(k)||j(k.toLocaleString())},className:"w-32 px-3 py-1.5 pl-7 border border-gray-300 rounded text-sm font-mono text-right focus:border-gray-500 focus:ring-1 focus:ring-gray-300 outline-none",placeholder:"0.00"})]}),e.jsx("button",{onClick:g,className:`px-3 py-1.5 ${o.bg} ${o.text} rounded text-xs font-bold hover:opacity-80 transition-colors`,children:"12  All Months"})]}),e.jsx("div",{className:"grid grid-cols-6 md:grid-cols-12 gap-2",children:f.map((N,k)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] font-medium text-gray-500 text-center",children:d[k]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-1.5 top-1/2 -translate-y-1/2 text-gray-400 text-[10px]",children:"$"}),e.jsx("input",{type:"text",value:b[N]||"",onChange:P=>u(N,p(P.target.value)),className:"w-full px-1.5 py-1.5 pl-4 border border-gray-200 rounded text-xs font-mono text-right focus:border-gray-400 focus:ring-1 focus:ring-gray-200 outline-none",placeholder:"0"})]})]},N))}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("div",{className:`${o.light} ${o.accent} border rounded-lg px-4 py-2`,children:[e.jsx("span",{className:`${o.text} font-medium mr-3`,children:"Annual Total:"}),e.jsxs("span",{className:`text-lg font-bold ${o.text} font-mono`,children:["$",m.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]})})()})]},s.key)}),(()=>{var j;const s=((j=r==null?void 0:r.cashFlow)==null?void 0:j.cowCalf)||{},n=s.expenses||{},o=s.herd||{},i=["feedHay","pastureGrazing","vetHealth","breeding","labor","utilitiesFuel","marketing","supplies","insurance","depreciation","debtService","operatingInterest","other"],h={feedHay:"Feed & Hay",pastureGrazing:"Pasture & Grazing",vetHealth:"Veterinary & Health",breeding:"Breeding Costs",labor:"Labor",utilitiesFuel:"Utilities & Fuel",marketing:"Marketing & Hauling",supplies:"Supplies & Equipment",insurance:"Insurance & Taxes",depreciation:"Equipment Depreciation",debtService:"Debt Service",operatingInterest:"Operating Interest",other:"Other Operating"},b=[1,2,3,4,5,6,7,8,9,10,11,12],x=g=>{const m=n[g]||{};return b.reduce((p,C)=>p+(parseFloat(m[C])||0),0)},f=i.reduce((g,m)=>g+x(m),0),d=g=>{const m=b.map(p=>parseFloat((o[g]||{})[p])||0).filter(p=>p>0);return m.length>0?m.reduce((p,C)=>p+C,0)/m.length:0},u=["springCows1","springCows2","springCows3","fallCows1","fallCows2","fallCows3"].reduce((g,m)=>g+d(m),0);return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-red-200 text-red-900 px-4 py-3 font-bold border-b border-red-300",children:"Total Operating Expenses Summary"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:i.map(g=>{const m=x(g),p=f>0?(m/f*100).toFixed(1):0;return e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-700",children:h[g]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",m.toLocaleString()]}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",p,"%)"]})]})]},g)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t-2 border-gray-300",children:[e.jsxs("div",{className:"bg-red-100 rounded-lg p-4 border border-red-300",children:[e.jsx("div",{className:"text-sm text-red-700 font-medium",children:"Total Annual Expenses"}),e.jsxs("div",{className:"text-3xl font-bold text-red-800 font-mono",children:["$",f.toLocaleString()]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-700 font-medium",children:"Monthly Average"}),e.jsxs("div",{className:"text-3xl font-bold text-amber-800 font-mono",children:["$",(f/12).toLocaleString(void 0,{maximumFractionDigits:0})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"Cost per Cow"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-800 font-mono",children:["$",u>0?(f/u).toFixed(0):""]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[Math.round(u)," avg breeding cows"]})]})]})]})]})})()]}),Ws==="summary"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($r,{className:"w-6 h-6 text-sky-600"}),"Cow/Calf Enterprise Summary"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Profit & Loss statement with per-head analysis."})]}),(()=>{var En;const s=((En=r==null?void 0:r.cashFlow)==null?void 0:En.cowCalf)||{},n=s.revenue||{},o=s.expenses||{},i=s.herd||{},h=s.production||{},b=[1,2,3,4,5,6,7,8,9,10,11,12],x=Se=>{const Ze=b.map(es=>parseFloat((i[Se]||{})[es])||0).filter(es=>es>0);return Ze.length>0?Ze.reduce((es,Zs)=>es+Zs,0)/Ze.length:0},f=["springCows1","springCows2","springCows3"].reduce((Se,Ze)=>Se+x(Ze),0),d=["fallCows1","fallCows2","fallCows3"].reduce((Se,Ze)=>Se+x(Ze),0),u=f+d,j=x("bulls");x("bredHeifers");const g=(parseFloat(h.calfDeathLoss)||0)/100,m=(parseFloat(h.replacementRate)||0)/100,p=(parseFloat(h.cullRate)||0)/100,C=Math.round(f*(1-g)),N=Math.round(C*.5),k=Math.round(f*m),P=Math.max(0,N-k),A=Math.round(C*.5),R=parseFloat(n.springHeiferWeight)||0,L=parseFloat(n.springHeiferPrice)||0,D=P*R*L,F=parseFloat(n.springSteerWeight)||0,v=parseFloat(n.springSteerPrice)||0,S=A*F*v,E=D+S,I=Math.round(d*(1-g)),H=Math.round(I*.5),Y=Math.round(d*m),_=Math.max(0,H-Y),K=Math.round(I*.5),re=parseFloat(n.fallHeiferWeight)||0,he=parseFloat(n.fallHeiferPrice)||0,U=_*re*he,V=parseFloat(n.fallSteerWeight)||0,q=parseFloat(n.fallSteerPrice)||0,X=K*V*q,se=U+X,le=E+se,ke=P+A+_+K,Le=Math.round(u*p),$e=parseFloat(n.cullCowPrice)||0,qe=Le*$e,et=Math.round(j*p),oe=parseFloat(n.cullBullPrice)||0,be=et*oe,Te=qe+be,Ue=(s.lrp||{}).policies||[],tt=Ue.reduce((Se,Ze)=>Se+(parseFloat(Ze.headCount)||0)*(parseFloat(Ze.subsidizedPremiumPerHead)||0),0),Je=Ue.reduce((Se,Ze)=>{const Zs=(parseFloat(Ze.expectedEndValue)||0)*(parseFloat(Ze.coverageLevel)||100)/100*(parseFloat(Ze.targetWeight)||0),Ha=(parseFloat(Ze.actualPrice)||0)*(parseFloat(Ze.targetWeight)||0),Oa=Zs-Ha;return Se+Oa*(parseFloat(Ze.headCount)||0)},0),Ye=Je>0?Je:0,gt=le+Te+Ye,nt=Se=>{const Ze=o[Se]||{};return b.reduce((es,Zs)=>es+(parseFloat(Ze[Zs])||0),0)},Is=nt("feedHay"),ps=nt("pastureGrazing"),ma=nt("breeding"),Ks=nt("vetHealth"),ua=nt("labor"),Lr=nt("utilitiesFuel"),Ul=nt("marketing"),Yl=nt("supplies"),ha=nt("insurance"),xr=nt("depreciation"),mr=nt("debtService"),Wl=nt("operatingInterest"),Ma=nt("other"),Dr=Is+ps+ma+Ks+ua+Lr+Ul+Yl+ha+xr+mr+Wl+Ma+tt,Bt=gt-Dr,Js=u>0?Bt/u:0,Qs=ke>0?Bt/ke:0,_l=u>0?gt/u:0,ql=u>0?Dr/u:0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`rounded-lg p-4 border ${Bt>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${Bt>=0?"text-green-700":"text-red-700"}`,children:"Net Income"}),e.jsxs("div",{className:`text-3xl font-bold font-mono ${Bt>=0?"text-green-800":"text-red-800"}`,children:["$",Bt.toLocaleString()]}),e.jsx("div",{className:`text-xs ${Bt>=0?"text-green-600":"text-red-600"}`,children:Bt>=0?"Profit":"Loss"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${Js>=0?"bg-emerald-50 border-emerald-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${Js>=0?"text-emerald-700":"text-red-700"}`,children:"Net Income / Cow"}),e.jsxs("div",{className:`text-3xl font-bold font-mono ${Js>=0?"text-emerald-800":"text-red-800"}`,children:["$",Js.toFixed(0)]}),e.jsxs("div",{className:`text-xs ${Js>=0?"text-emerald-600":"text-red-600"}`,children:[Math.round(u)," breeding cows"]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${Qs>=0?"bg-teal-50 border-teal-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${Qs>=0?"text-teal-700":"text-red-700"}`,children:"Net Income / Calf Sold"}),e.jsxs("div",{className:`text-3xl font-bold font-mono ${Qs>=0?"text-teal-800":"text-red-800"}`,children:["$",Qs.toFixed(0)]}),e.jsxs("div",{className:`text-xs ${Qs>=0?"text-teal-600":"text-red-600"}`,children:[ke," calves sold"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"Breakeven / Calf"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-800 font-mono",children:["$",ke>0?(Dr/ke).toFixed(0):""]}),e.jsx("div",{className:"text-xs text-blue-600",children:"Expenses  Calves Sold"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-sky-100 text-sky-800 px-6 py-4 font-bold border-b border-sky-200 text-lg",children:"Profit & Loss Statement"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-700 border-b-2 border-green-300 pb-2 mb-4",children:"REVENUE"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Spring Heifer Calves"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",D.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Spring Steer Calves"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",S.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Fall Heifer Calves"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",U.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Fall Steer Calves"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",X.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1 border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Total Calf Sales"}),e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",le.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1 mt-2",children:[e.jsx("span",{className:"text-gray-700",children:"Cull Cow Sales"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",qe.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Cull Bull Sales"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",be.toLocaleString()]})]}),Ye>0&&e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-blue-700",children:"LRP Indemnity"}),e.jsxs("span",{className:"font-mono text-blue-700",children:["$",Ye.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t-2 border-green-300 mt-2 bg-green-50 -mx-2 px-2 rounded",children:[e.jsx("span",{className:"text-green-800 font-bold",children:"TOTAL REVENUE"}),e.jsxs("span",{className:"font-mono font-bold text-green-800",children:["$",gt.toLocaleString()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-red-700 border-b-2 border-red-300 pb-2 mb-4",children:"EXPENSES"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Feed & Hay"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",Is.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Pasture & Grazing"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",ps.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Breeding Costs"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",ma.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Veterinary & Health"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",Ks.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Labor"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",ua.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Utilities & Fuel"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",Lr.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Marketing & Hauling"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",Ul.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Supplies & Equipment"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",Yl.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Insurance & Taxes"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",ha.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Equipment Depreciation"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",xr.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Debt Service"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",mr.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Operating Interest"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",Wl.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-700",children:"Other Operating"}),e.jsxs("span",{className:"font-mono text-gray-900",children:["$",Ma.toLocaleString()]})]}),tt>0&&e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-purple-700",children:"LRP Insurance Premiums"}),e.jsxs("span",{className:"font-mono text-purple-700",children:["$",tt.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t-2 border-red-300 mt-2 bg-red-50 -mx-2 px-2 rounded",children:[e.jsx("span",{className:"text-red-800 font-bold",children:"TOTAL EXPENSES"}),e.jsxs("span",{className:"font-mono font-bold text-red-800",children:["$",Dr.toLocaleString()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-purple-700 border-b-2 border-purple-300 pb-2 mb-4",children:"PER HEAD ANALYSIS"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Per Breeding Cow"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-600",children:"Revenue"}),e.jsxs("div",{className:"font-mono font-semibold text-green-700",children:["$",_l.toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-red-600",children:"Expenses"}),e.jsxs("div",{className:"font-mono font-semibold text-red-700",children:["$",ql.toFixed(0)]})]})]}),e.jsxs("div",{className:"border-t mt-2 pt-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Net Income"}),e.jsxs("div",{className:`font-mono font-bold text-lg ${Js>=0?"text-green-700":"text-red-700"}`,children:["$",Js.toFixed(0)]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Per Calf Sold"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-600",children:"Revenue"}),e.jsxs("div",{className:"font-mono font-semibold text-green-700",children:["$",ke>0?(le/ke).toFixed(0):""]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-red-600",children:"Cost"}),e.jsxs("div",{className:"font-mono font-semibold text-red-700",children:["$",ke>0?(Dr/ke).toFixed(0):""]})]})]}),e.jsxs("div",{className:"border-t mt-2 pt-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Net Income"}),e.jsxs("div",{className:`font-mono font-bold text-lg ${Qs>=0?"text-green-700":"text-red-700"}`,children:["$",Qs.toFixed(0)]})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 uppercase tracking-wide",children:"Herd Summary"}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Breeding Cows"}),e.jsx("span",{className:"font-mono font-semibold",children:Math.round(u)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Herd Bulls"}),e.jsx("span",{className:"font-mono font-semibold",children:Math.round(j)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Calves Sold"}),e.jsx("span",{className:"font-mono font-semibold",children:ke})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Cull Cows Sold"}),e.jsx("span",{className:"font-mono font-semibold",children:Le})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Cull Bulls Sold"}),e.jsx("span",{className:"font-mono font-semibold",children:et})]})]})]})]})]})]}),e.jsx("div",{className:`mt-8 p-6 rounded-lg ${Bt>=0?"bg-green-100 border-2 border-green-400":"bg-red-100 border-2 border-red-400"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-lg font-bold ${Bt>=0?"text-green-800":"text-red-800"}`,children:"NET INCOME (Revenue - Expenses)"}),e.jsxs("div",{className:`text-sm ${Bt>=0?"text-green-600":"text-red-600"}`,children:["$",gt.toLocaleString()," - $",Dr.toLocaleString()]})]}),e.jsxs("div",{className:`text-4xl font-bold font-mono ${Bt>=0?"text-green-800":"text-red-800"}`,children:["$",Bt.toLocaleString()]})]})})]})]})]})})()]})]}),ct==="custom"&&e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-0",children:[{id:"summary",label:"Summary",icon:lt},{id:"sizeScope",label:"Custom Revenue",icon:bt},{id:"expenses",label:"Expenses",icon:Ot}].map(s=>e.jsxs("button",{onClick:()=>Dt(s.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${Pe===s.id?"border-purple-500 text-purple-600 bg-purple-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),Pe==="summary"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(lt,{className:"w-6 h-6 text-purple-600"}),"Custom Farming Summary"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),(()=>{var j;const s=((j=r==null?void 0:r.cashFlow)==null?void 0:j.customFarming)||{},n=s.jobs||[],o=s.expenses||{},i=n.reduce((g,m)=>g+(m.acresPlanned||0),0),h=n.reduce((g,m)=>g+(m.acresPlanned||0)*(m.ratePerAcre||0),0),b=n.length,f=["fuel","labor","depreciation","debtPrincipal","debtInterest","repairs","insurance","utilities","supplies","licenseFees","professional","other"].reduce((g,m)=>g+(o[m]||0),0),d=h-f,u=h>0?d/h*100:0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Custom Jobs"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:b}),e.jsx("div",{className:"text-xs text-purple-500",children:"Active job types"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:i.toLocaleString()}),e.jsx("div",{className:"text-xs text-blue-500",children:"Across all jobs"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Projected Revenue"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:T(h)}),e.jsx("div",{className:"text-xs text-green-500",children:"From custom work"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${d>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${d>=0?"text-green-700":"text-red-700"}`,children:"Net Income"}),e.jsx("div",{className:`text-2xl font-bold font-mono ${d>=0?"text-green-800":"text-red-800"}`,children:T(d)}),e.jsxs("div",{className:`text-xs ${d>=0?"text-green-600":"text-red-600"}`,children:[u.toFixed(1),"% margin"]})]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-purple-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-purple-800",children:"Job Type"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-purple-800",children:"Crop"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Acres"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Rate/Acre"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Revenue"})]})}),e.jsx("tbody",{children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No custom jobs defined. Go to Custom Revenue tab to add jobs."})}):n.map(g=>{const m=(g.acresPlanned||0)*(g.ratePerAcre||0);return e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:g.jobType}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:g.crop||"All / None"}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:(g.acresPlanned||0).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:T(g.ratePerAcre||0)}),e.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-green-700",children:T(m)})]},g.id)})}),n.length>0&&e.jsx("tfoot",{className:"bg-gray-100 font-semibold",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-800",colSpan:"2",children:"Total"}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:i.toLocaleString()}),e.jsxs("td",{className:"px-4 py-3 text-right font-mono text-gray-500",children:[i>0?T(h/i):"-"," avg"]}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-green-700",children:T(h)})]})})]})})]})})()]})}),Pe==="sizeScope"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(bt,{className:"w-6 h-6 text-purple-600"}),"Custom Revenue"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Define custom jobs, crop, unit of measure, quantity, and rate per unit."})]})}),(()=>{var p,C;const s=((p=r==null?void 0:r.cashFlow)==null?void 0:p.customFarming)||{},n=s.jobs||[],o=((C=r==null?void 0:r.cashFlow)==null?void 0:C.crops)||[],i=[...new Set(o.map(N=>N.crop))].filter(Boolean),h=["Corn","Soybeans","Wheat","Grass Hay","Alfalfa","Oats","Sunflowers","Milo","Sorghum","Barley","Corn Silage","Triticale","Millet","Canola","Dry Beans","Sugar Beets","Cotton","Rice"],b=[...new Set([...h,...i])],x=["Planting","Spraying","Harvesting (Combining)","Hay - Swathing","Hay - Baling","Hay - Stacking","Chopping Silage","Chopping Hay","Chopping Earlage","Packing Silage","Tillage","Strip Tilling","Fertilizer Application","Trucking/Hauling","Other"],f=["Acres","Hours","Bales","Tons","Loads","Bushels","Miles","Head","CWT","Each"],d=N=>{const k={id:`job-${Date.now()}`,jobType:N,crop:"",uom:"Acres",acresPlanned:0,ratePerAcre:0,notes:""};z({cashFlow:{...r==null?void 0:r.cashFlow,customFarming:{...s,jobs:[...n,k]}}})},u=(N,k,P)=>{const A=n.map(R=>R.id===N?{...R,[k]:P}:R);z({cashFlow:{...r==null?void 0:r.cashFlow,customFarming:{...s,jobs:A}}})},j=N=>{const k=n.filter(P=>P.id!==N);z({cashFlow:{...r==null?void 0:r.cashFlow,customFarming:{...s,jobs:k}}})},g=n.reduce((N,k)=>N+(k.acresPlanned||0),0),m=n.reduce((N,k)=>N+(k.acresPlanned||0)*(k.ratePerAcre||0),0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Add Custom Job:"}),e.jsxs("select",{className:"px-4 py-2 border border-purple-300 rounded-lg bg-white text-gray-700 focus:ring-2 focus:ring-purple-500",value:"",onChange:N=>{N.target.value&&(d(N.target.value),N.target.value="")},children:[e.jsx("option",{value:"",children:"Select job type..."}),x.map(N=>e.jsx("option",{value:N,children:N},N))]})]})}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-purple-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-purple-800",children:"Job Type"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-purple-800",children:"Crop"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-purple-800 w-24",children:"UOM"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Rate/Unit"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-purple-800",children:"Revenue"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-purple-800 w-20",children:"Actions"})]})}),e.jsx("tbody",{children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ps,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"No custom jobs added yet"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Select a job type from the dropdown above"})]})})}):n.map(N=>{const k=(N.acresPlanned||0)*(N.ratePerAcre||0),P=N.uom||"Acres";return e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:N.jobType})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{value:N.crop||"",onChange:A=>u(N.id,"crop",A.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm bg-white",children:[e.jsx("option",{value:"",children:"All / None"}),b.map(A=>e.jsx("option",{value:A,children:A},A))]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("select",{value:P,onChange:A=>u(N.id,"uom",A.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm bg-white",children:f.map(A=>e.jsx("option",{value:A,children:A},A))})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Qe,{value:N.acresPlanned||0,onChange:A=>u(N.id,"acresPlanned",A),decimals:0,className:"w-full px-3 py-1.5 border border-gray-300 rounded text-right font-mono"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(ie,{value:N.ratePerAcre||0,onChange:A=>u(N.id,"ratePerAcre",A),className:"w-full px-3 py-1.5 border border-gray-300 rounded text-right font-mono"})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-green-700",children:T(k)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>j(N.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded",title:"Delete job",children:e.jsx(ot,{className:"w-4 h-4"})})})]},N.id)})}),n.length>0&&e.jsx("tfoot",{className:"bg-purple-100 font-semibold",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-purple-800",colSpan:"3",children:"Total"}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-purple-700",children:g.toLocaleString()}),e.jsxs("td",{className:"px-4 py-3 text-right font-mono text-purple-600",children:[g>0?T(m/g):"-"," avg"]}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-green-700",children:T(m)}),e.jsx("td",{className:"px-4 py-3"})]})})]})})]})})()]})}),Pe==="expenses"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2 mb-6",children:[e.jsx(Ot,{className:"w-6 h-6 text-purple-600"}),"Custom Farming Expenses"]}),(()=>{var u;const s=((u=r==null?void 0:r.cashFlow)==null?void 0:u.customFarming)||{},n=s.expenses||{},o=s.jobs||[],i=o.reduce((j,g)=>j+(g.acresPlanned||0),0),h=(j,g)=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFarming:{...s,expenses:{...n,[j]:g}}}})},b=[{key:"fuel",label:"Fuel & Oil",icon:Uh},{key:"labor",label:"Labor",icon:Ya},{key:"depreciation",label:"Depreciation",icon:rj},{key:"debtPrincipal",label:"Debt Principal",icon:Ua},{key:"debtInterest",label:"Debt Interest",icon:ej},{key:"repairs",label:"Repairs & Maintenance",icon:qh},{key:"insurance",label:"Insurance",icon:$t},{key:"utilities",label:"Utilities",icon:Gh},{key:"supplies",label:"Supplies",icon:ho},{key:"licenseFees",label:"License & Fees",icon:Ge},{key:"professional",label:"Professional Services",icon:Kf},{key:"other",label:"Other Expenses",icon:Xf}],x=b.reduce((j,g)=>j+(n[g.key]||0),0),f=o.reduce((j,g)=>j+(g.acresPlanned||0)*(g.ratePerAcre||0),0),d=f-x;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:b.map(j=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j.icon,{className:"w-4 h-4 text-purple-600"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:j.label})]}),i>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[T((n[j.key]||0)/i),"/ac"]})]}),e.jsx(ie,{value:n[j.key]||0,onChange:g=>h(j.key,g),className:"w-full px-3 py-2 border border-gray-300 rounded text-right font-mono"})]},j.key))}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Revenue"}),e.jsx("div",{className:"text-xl font-bold text-green-700 font-mono",children:T(f)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Expenses"}),e.jsx("div",{className:"text-xl font-bold text-red-700 font-mono",children:T(x)})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${d>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${d>=0?"text-green-700":"text-red-700"}`,children:"Net Income"}),e.jsx("div",{className:`text-xl font-bold font-mono ${d>=0?"text-green-800":"text-red-800"}`,children:T(d)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Profit Margin"}),e.jsxs("div",{className:"text-xl font-bold text-purple-700 font-mono",children:[f>0?(d/f*100).toFixed(1):"0.0","%"]})]})]})]})})()]})})]}),ct==="customFeeding"&&e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-0",children:[{id:"summary",label:"Summary",icon:lt},{id:"sizeScope",label:"Size & Scope",icon:bt},{id:"revenue",label:"Revenue",icon:vt},{id:"feedingSummary",label:"Feeding Summary",icon:bt},{id:"feedInventory",label:"Feed Inventory",icon:Ht},{id:"expenses",label:"Expenses",icon:Ot}].map(s=>e.jsxs("button",{onClick:()=>Dt(s.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${Pe===s.id?"border-orange-500 text-orange-600 bg-orange-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),Pe==="summary"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(lt,{className:"w-6 h-6 text-orange-600"}),"Custom Feeding Cash Flow Summary"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),(()=>{var Le;const s=((Le=r==null?void 0:r.cashFlow)==null?void 0:Le.customFeeding)||{},n=s.feedingSummary||{},o=s.feedInventory||[],i=s.expenses||{},h=s.sizeScope||{},b=s.revenue||{},x=["January","February","March","April","May","June","July","August","September","October","November","December"],f=n.currentHead||0,d=n.headDays||0;n.avgDaysOnFeed;const u=n.estimatedADG||0,j=n.totalLbFed||o.reduce(($e,qe)=>$e+(qe.asFedAmount||0),0);n.totalDryMatterFed||o.reduce(($e,qe)=>$e+(qe.dryMatterAmount||0),0);const g=n.currentEstAvgWeight||0,m=n.estimatedBreakEvenCWT||0,p=o.reduce(($e,qe)=>$e+(qe.totalCost||0),0),C=i.feed||p,N=i.yardage||0,k=i.delivery||0,P=i.managementFee||0,A=i.insurance||0,R=i.processing||0,L=i.vetMed||0,D=i.bedding||0,F=i.profitShare||0,v=i.interest||0,S=i.salesTax||0,E=i.other||0,I=C+N+k+P+A+R+L+D+F+v+S+E,H=d>0?I/d:0,Y=d>0&&u>0?d*u:0,_=Y>0?I/Y:0,K=b.yardageRatePerDay||0,re=x.reduce(($e,qe)=>{var et;return $e+(((et=h[qe])==null?void 0:et.projected)||0)},0),he=re*K,U=b.feedMarkupIncome||0,V=b.otherIncome||0,q=he+U+V,X=q-I,se=we||new Date().getFullYear(),le=se%4===0&&se%100!==0||se%400===0?366:365,ke=le>0?re/le:0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Current Head"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:f.toLocaleString()})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Projected Head Days"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:re.toLocaleString()})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Avg Head on Feed"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:ke.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Est. ADG"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:[u.toFixed(2)," lbs"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total lb Fed"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:j.toLocaleString()})]}),e.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 border border-teal-200",children:[e.jsx("div",{className:"text-sm text-teal-600 font-medium",children:"Total Feed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-teal-700 font-mono",children:T(p)})]}),e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4 border border-cyan-200",children:[e.jsx("div",{className:"text-sm text-cyan-600 font-medium",children:"Current Est. Avg Wt"}),e.jsxs("div",{className:"text-2xl font-bold text-cyan-700 font-mono",children:[g.toLocaleString()," lbs"]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Est. Break Even CWT"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700 font-mono",children:["$",m.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg border border-green-200 p-4",children:[e.jsxs("h3",{className:"font-bold text-green-800 mb-4 flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5"}),"Total Revenue"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Yardage Income"}),e.jsx("span",{className:"font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(he)})]}),e.jsx("div",{className:"flex justify-between text-xs text-gray-500 pl-4",children:e.jsxs("span",{children:[re.toLocaleString()," hd days  $",K.toFixed(2),"/day"]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Feed Markup"}),e.jsx("span",{className:"font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(U)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Income"}),e.jsx("span",{className:"font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(V)})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-green-200",children:[e.jsx("span",{children:"Total Revenue"}),e.jsx("span",{className:"font-mono text-green-700",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(q)})]})]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg border border-red-200 p-4",children:[e.jsx("h3",{className:"font-bold text-red-800 mb-4",children:"Total Expenses"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Feed"}),e.jsx("span",{className:"font-mono",children:T(C)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Yardage"}),e.jsx("span",{className:"font-mono",children:T(N)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vet & Med"}),e.jsx("span",{className:"font-mono",children:T(L)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Processing"}),e.jsx("span",{className:"font-mono",children:T(R)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other"}),e.jsx("span",{className:"font-mono",children:T(k+P+A+D+F+v+S+E)})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-red-200",children:[e.jsx("span",{children:"Total Expenses"}),e.jsx("span",{className:"font-mono text-red-700",children:T(I)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`rounded-lg border p-4 ${X>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("h3",{className:`font-bold mb-2 ${X>=0?"text-green-800":"text-red-800"}`,children:"Net Income"}),e.jsx("div",{className:`text-3xl font-bold font-mono ${X>=0?"text-green-700":"text-red-700"}`,children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(X)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Revenue - Expenses"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4",children:[e.jsx("h3",{className:"font-bold text-blue-800 mb-3",children:"Per Unit Analysis"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cost/Head Day"}),e.jsx("span",{className:"font-mono font-semibold",children:T(H)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cost/lb Gain"}),e.jsx("span",{className:"font-mono font-semibold",children:T(_)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Revenue/Head Day"}),e.jsx("span",{className:"font-mono font-semibold text-green-700",children:re>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(q/re):"$0.00"})]})]})]})]})]})]})})()]})}),Pe==="sizeScope"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(bt,{className:"w-6 h-6 text-orange-600"}),"Size & Scope Projection"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Compare projected monthly head days against last year's actuals to plan capacity and cash flow."}),(()=>{var C;const s=((C=r==null?void 0:r.cashFlow)==null?void 0:C.customFeeding)||{},n=s.sizeScope||{},o=["January","February","March","April","May","June","July","August","September","October","November","December"],i=[31,28,31,30,31,30,31,31,30,31,30,31],h=(N,k)=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,sizeScope:{...n,[N]:k}}}})},b=(N,k,P)=>{const A=n[N]||{};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,sizeScope:{...n,[N]:{...A,[k]:P}}}}})},x=n.yardCapacity||0,f=x*365,d=o.reduce((N,k)=>{var P;return N+(((P=n[k])==null?void 0:P.projected)||0)},0),u=o.reduce((N,k)=>{var P;return N+(((P=n[k])==null?void 0:P.actual)||0)},0),j=d-u,g=u>0?(d-u)/u*100:0,m=f>0?d/f*100:0,p=f>0?u/f*100:0;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-orange-700 block mb-1",children:"Yard Capacity (Head)"}),e.jsx(Qe,{value:x,onChange:N=>h("yardCapacity",N),decimals:0,className:"w-32 px-3 py-2 border border-orange-300 rounded-lg text-right font-mono text-lg font-bold bg-white"})]}),e.jsxs("div",{className:"border-l border-orange-300 pl-6",children:[e.jsx("div",{className:"text-sm text-orange-600",children:"Annual Capacity (Head Days)"}),e.jsx("div",{className:"text-xl font-bold text-orange-700 font-mono",children:f.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-orange-500",children:[x.toLocaleString()," head  365 days"]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-center px-4 py-2 bg-white rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Projected Utilization"}),e.jsxs("div",{className:`text-xl font-bold font-mono ${m>100?"text-red-600":m>85?"text-amber-600":"text-blue-700"}`,children:[m.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center px-4 py-2 bg-white rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Last Year Utilization"}),e.jsxs("div",{className:`text-xl font-bold font-mono ${p>100?"text-red-600":p>85?"text-amber-600":"text-gray-700"}`,children:[p.toFixed(1),"%"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Projected Head Days"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:d.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-blue-500",children:[we||new Date().getFullYear()," Projection"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Last Year Actual"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700 font-mono",children:u.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(we||new Date().getFullYear())-1," Actual"]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${j>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${j>=0?"text-green-600":"text-red-600"}`,children:"Variance"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${j>=0?"text-green-700":"text-red-700"}`,children:[j>=0?"+":"",j.toLocaleString("en-US",{maximumFractionDigits:0})]}),e.jsxs("div",{className:`text-xs ${j>=0?"text-green-500":"text-red-500"}`,children:[g>=0?"+":"",g.toFixed(1),"% vs last year"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Avg Monthly Projected"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:(d/12).toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-orange-500",children:"Head days per month"})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Month"}),e.jsx("th",{className:"py-3 px-3 text-right font-semibold text-orange-700 bg-orange-50",children:"Capacity"}),e.jsxs("th",{className:"py-3 px-4 text-right font-semibold text-blue-700 bg-blue-50",children:[we||new Date().getFullYear()," Projected"]}),e.jsx("th",{className:"py-3 px-3 text-right font-semibold text-purple-700 bg-purple-50",children:"Util %"}),e.jsxs("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:[(we||new Date().getFullYear())-1," Actual"]}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Variance"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"% Change"})]})}),e.jsx("tbody",{children:o.map((N,k)=>{const P=n[N]||{},A=P.projected||0,R=P.actual||0,L=A-R,D=R>0?(A-R)/R*100:0,F=x*i[k],v=F>0?A/F*100:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${k%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-4 font-medium text-gray-800",children:N}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-orange-700 bg-orange-50",children:F.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-2 bg-blue-50",children:e.jsx(Qe,{value:A,onChange:S=>b(N,"projected",S),decimals:0,className:"w-full px-3 py-1.5 border border-blue-200 rounded text-right font-mono bg-white"})}),e.jsx("td",{className:`py-2 px-3 text-right font-mono bg-purple-50 ${v>100?"text-red-600 font-bold":v>85?"text-amber-600":"text-purple-700"}`,children:x>0?`${v.toFixed(1)}%`:""}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Qe,{value:R,onChange:S=>b(N,"actual",S),decimals:0,className:"w-full px-3 py-1.5 border border-gray-200 rounded text-right font-mono"})}),e.jsxs("td",{className:`py-2 px-4 text-right font-mono ${L>=0?"text-green-600":"text-red-600"}`,children:[L>=0?"+":"",L.toLocaleString("en-US",{maximumFractionDigits:0})]}),e.jsx("td",{className:`py-2 px-4 text-right font-mono ${D>=0?"text-green-600":"text-red-600"}`,children:R>0?`${D>=0?"+":""}${D.toFixed(1)}%`:""})]},N)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Annual Total"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700 bg-orange-100",children:f.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-700 bg-blue-100",children:d.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:`py-3 px-3 text-right font-mono bg-purple-100 ${m>100?"text-red-700":"text-purple-700"}`,children:x>0?`${m.toFixed(1)}%`:""}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-700",children:u.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("td",{className:`py-3 px-4 text-right font-mono ${j>=0?"text-green-700":"text-red-700"}`,children:[j>=0?"+":"",j.toLocaleString("en-US",{maximumFractionDigits:0})]}),e.jsx("td",{className:`py-3 px-4 text-right font-mono ${g>=0?"text-green-700":"text-red-700"}`,children:u>0?`${g>=0?"+":""}${g.toFixed(1)}%`:""})]})})]})}),e.jsx("div",{className:"mt-6 grid grid-cols-4 gap-4",children:[{label:"Q1",months:["January","February","March"]},{label:"Q2",months:["April","May","June"]},{label:"Q3",months:["July","August","September"]},{label:"Q4",months:["October","November","December"]}].map(N=>{const k=N.months.reduce((R,L)=>{var D;return R+(((D=n[L])==null?void 0:D.projected)||0)},0),P=N.months.reduce((R,L)=>{var D;return R+(((D=n[L])==null?void 0:D.actual)||0)},0),A=k-P;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2 text-center",children:N.label}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Projected:"}),e.jsx("span",{className:"font-mono text-blue-700",children:k.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Actual:"}),e.jsx("span",{className:"font-mono text-gray-600",children:P.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-t",children:[e.jsx("span",{className:"text-gray-600",children:"Variance:"}),e.jsxs("span",{className:`font-mono font-semibold ${A>=0?"text-green-600":"text-red-600"}`,children:[A>=0?"+":"",A.toLocaleString()]})]})]})]},N.label)})})]})})()]})}),Pe==="revenue"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-0",children:[{id:"yardage",label:"Yardage Income",icon:vt},{id:"other",label:"Other Income",icon:Ot}].map(s=>e.jsxs("button",{onClick:()=>Tl(s.id),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors ${Sa===s.id?"border-green-500 text-green-600 bg-green-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),Sa==="yardage"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(vt,{className:"w-6 h-6 text-green-600"}),"Yardage Income"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var u;const s=((u=r==null?void 0:r.cashFlow)==null?void 0:u.customFeeding)||{},n=s.sizeScope||{},o=s.revenue||{},i=["January","February","March","April","May","June","July","August","September","October","November","December"],h=(j,g)=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,revenue:{...o,[j]:g}}}})},b=o.yardageRatePerDay||0,f=i.map(j=>{var m;return(((m=n[j])==null?void 0:m.projected)||0)*b}).reduce((j,g)=>j+g,0),d=i.reduce((j,g)=>{var m;return j+(((m=n[g])==null?void 0:m.projected)||0)},0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-green-700 block mb-1",children:"Yardage Rate ($/Head/Day)"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:"$"}),e.jsx(ie,{value:b,onChange:j=>h("yardageRatePerDay",j),className:"w-24 px-3 py-2 border border-green-300 rounded-lg text-right font-mono text-lg font-bold bg-white"})]})]}),e.jsxs("div",{className:"border-l border-green-300 pl-6",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Projected Head Days"}),e.jsx("div",{className:"text-xl font-bold text-green-700 font-mono",children:d.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-green-500",children:"From Size & Scope projections"})]})]}),e.jsxs("div",{className:"text-center px-6 py-3 bg-white rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Yardage Income"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(f)})]})]})}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Monthly Yardage Income"}),e.jsx("div",{className:"border rounded-lg overflow-hidden mb-6",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Month"}),e.jsx("th",{className:"py-3 px-3 text-right font-semibold text-gray-600",children:"Days"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-blue-700 bg-blue-50",children:"Projected Head Days"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-orange-700 bg-orange-50",children:"Avg Head on Feed"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Rate/Day"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-green-700 bg-green-50",children:"Yardage Income"})]})}),e.jsx("tbody",{children:i.map((j,g)=>{var A;const m=((A=n[j])==null?void 0:A.projected)||0,p=m*b,C=we||new Date().getFullYear(),N=g,k=new Date(C,N+1,0).getDate(),P=k>0?m/k:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${g%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-4 font-medium text-gray-800",children:j}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:k}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-blue-700 bg-blue-50",children:m.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-orange-700 bg-orange-50",children:P.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-600",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(b)}),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-green-700 bg-green-50",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(p)})]},j)})}),e.jsx("tfoot",{children:(()=>{const j=we||new Date().getFullYear(),g=j%4===0&&j%100!==0||j%400===0?366:365,m=g>0?d/g:0;return e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Annual Total"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-gray-600",children:g}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-blue-700 bg-blue-100",children:d.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono font-semibold text-orange-700 bg-orange-100",children:m.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-gray-600",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(b)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700 bg-green-100",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(f)})]})})()})]})}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Quarterly Yardage Income Summary"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"Q1",months:["January","February","March"]},{label:"Q2",months:["April","May","June"]},{label:"Q3",months:["July","August","September"]},{label:"Q4",months:["October","November","December"]}].map(j=>{const g=j.months.reduce((p,C)=>{var N;return p+(((N=n[C])==null?void 0:N.projected)||0)},0),m=g*b;return e.jsxs("div",{className:"border rounded-lg p-4 bg-green-50",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2 text-center",children:j.label}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Head Days:"}),e.jsx("span",{className:"font-mono text-blue-700",children:g.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-t border-green-200",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Yardage Income:"}),e.jsx("span",{className:"font-mono font-semibold text-green-700",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(m)})]})]})]},j.label)})})]})})()]}),Sa==="other"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-6 h-6 text-blue-600"}),"Other Income"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var j;const s=((j=r==null?void 0:r.cashFlow)==null?void 0:j.customFeeding)||{},n=s.revenue||{},o=(g,m)=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,revenue:{...n,[g]:m}}}})},i=n.processingIncome||0,h=n.vetMedIncome||0,b=n.interestIncome||0,x=n.beddingIncome||0,f=n.otherIncome||0,d=n.feedMarkupIncome||0,u=i+h+b+x+f+d;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 col-span-3",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Other Income"}),e.jsx("div",{className:"text-3xl font-bold text-blue-700 font-mono",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(u)}),e.jsx("div",{className:"text-xs text-blue-500",children:"Sum of all other income categories"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Income Categories"}),e.jsx("div",{className:"text-3xl font-bold text-green-700",children:"6"}),e.jsx("div",{className:"text-xs text-green-500",children:"Active categories"})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Income Category"}),e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-500",children:"Description"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-green-700 bg-green-50 w-48",children:"Annual Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Processing Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Charges for cattle processing services"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ie,{value:i,onChange:g=>o("processingIncome",g),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Vet & Medicine Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Reimbursement for veterinary and medical services"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ie,{value:h,onChange:g=>o("vetMedIncome",g),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Interest Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Interest charged on cattle owner accounts"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ie,{value:b,onChange:g=>o("interestIncome",g),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Bedding Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Charges for bedding materials provided"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ie,{value:x,onChange:g=>o("beddingIncome",g),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Feed Markup Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Margin on feed sales to cattle owners"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ie,{value:d,onChange:g=>o("feedMarkupIncome",g),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]}),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:"Other Income"}),e.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:"Miscellaneous income not categorized above"}),e.jsx("td",{className:"py-3 px-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"$"}),e.jsx(ie,{value:f,onChange:g=>o("otherIncome",g),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono font-semibold"})]})})]})]}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-green-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Total Other Income"}),e.jsx("td",{className:"py-3 px-4"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700 text-lg",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(u)})]})})]})}),e.jsx("div",{className:"mt-6 grid grid-cols-6 gap-2",children:[{label:"Processing",value:i,color:"bg-blue-500"},{label:"Vet & Med",value:h,color:"bg-purple-500"},{label:"Interest",value:b,color:"bg-amber-500"},{label:"Bedding",value:x,color:"bg-orange-500"},{label:"Feed Markup",value:d,color:"bg-green-500"},{label:"Other",value:f,color:"bg-gray-500"}].map(g=>{const m=u>0?g.value/u*100:0;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-32 bg-gray-100 rounded-lg relative overflow-hidden mb-2",children:e.jsx("div",{className:`absolute bottom-0 left-0 right-0 ${g.color} transition-all`,style:{height:`${m}%`}})}),e.jsx("div",{className:"text-xs font-medium text-gray-700",children:g.label}),e.jsxs("div",{className:"text-xs text-gray-500",children:[m.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm font-mono font-semibold text-gray-700",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(g.value)})]},g.label)})})]})})()]})]}),Pe==="feedingSummary"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(bt,{className:"w-6 h-6 text-orange-600"}),"Feeding Summary"]})}),(()=>{var b;const s=((b=r==null?void 0:r.cashFlow)==null?void 0:b.customFeeding)||{},n=s.feedingSummary||{};s.feedInventory;const o=(x,f)=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedingSummary:{...n,[x]:f}}}})},i=n.headDays>0&&n.totalLbFed>0?n.totalLbFed/n.headDays:0,h=n.headDays>0&&n.totalDryMatterFed>0?n.totalDryMatterFed/n.headDays:0;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4 text-center bg-gray-100 -mx-4 -mt-4 px-4 py-2 rounded-t-lg",children:"Current Invoice Period"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Head"}),e.jsx(Qe,{value:n.currentHead||0,onChange:x=>o("currentHead",x),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Head Days"}),e.jsx(Qe,{value:n.headDays||0,onChange:x=>o("headDays",x),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Average Days on Feed"}),e.jsx(Qe,{value:n.avgDaysOnFeed||0,onChange:x=>o("avgDaysOnFeed",x),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Estimated Avg Daily Gain (lbs)"}),e.jsx(Qe,{value:n.estimatedADG||0,onChange:x=>o("estimatedADG",x),decimals:2,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total lb Fed"}),e.jsx(Qe,{value:n.totalLbFed||0,onChange:x=>o("totalLbFed",x),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Average lb Fed"}),e.jsxs("span",{className:"font-mono text-gray-600 bg-gray-100 px-3 py-2 rounded",children:[i.toFixed(0)," lbs"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Dry Matter lb Fed"}),e.jsx(Qe,{value:n.totalDryMatterFed||0,onChange:x=>o("totalDryMatterFed",x),decimals:2,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Average Dry Matter lb Fed"}),e.jsxs("span",{className:"font-mono text-gray-600 bg-gray-100 px-3 py-2 rounded",children:[h.toFixed(2)," lbs"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Est. Average Weight"}),e.jsx(Qe,{value:n.currentEstAvgWeight||0,onChange:x=>o("currentEstAvgWeight",x),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Estimated Break Even CWT"}),e.jsx(ie,{value:n.estimatedBreakEvenCWT||0,onChange:x=>o("estimatedBreakEvenCWT",x),className:"w-32 px-3 py-2 border rounded text-right font-mono"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4 text-center bg-gray-100 -mx-4 -mt-4 px-4 py-2 rounded-t-lg",children:"Total Through Period"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Head (Cumulative)"}),e.jsx(Qe,{value:n.totalHeadCumulative||0,onChange:x=>o("totalHeadCumulative",x),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Head Days (Cumulative)"}),e.jsx(Qe,{value:n.totalHeadDaysCumulative||0,onChange:x=>o("totalHeadDaysCumulative",x),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Avg Days on Feed"}),e.jsx(Qe,{value:n.totalAvgDaysOnFeed||0,onChange:x=>o("totalAvgDaysOnFeed",x),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Est. ADG (lbs)"}),e.jsx(Qe,{value:n.totalEstimatedADG||0,onChange:x=>o("totalEstimatedADG",x),decimals:2,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total lb Fed (Cumulative)"}),e.jsx(Qe,{value:n.totalLbFedCumulative||0,onChange:x=>o("totalLbFedCumulative",x),decimals:0,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Avg lb Fed (Cumulative)"}),e.jsxs("span",{className:"font-mono text-gray-600 bg-gray-100 px-3 py-2 rounded",children:[n.totalHeadDaysCumulative>0?(n.totalLbFedCumulative/n.totalHeadDaysCumulative).toFixed(0):0," lbs"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Dry Matter Fed (Cum)"}),e.jsx(Qe,{value:n.totalDryMatterFedCumulative||0,onChange:x=>o("totalDryMatterFedCumulative",x),decimals:2,className:"w-32 px-3 py-2 border rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Avg Dry Matter lb Fed (Cum)"}),e.jsxs("span",{className:"font-mono text-gray-600 bg-gray-100 px-3 py-2 rounded",children:[n.totalHeadDaysCumulative>0?(n.totalDryMatterFedCumulative/n.totalHeadDaysCumulative).toFixed(2):0," lbs"]})]})]})]})]})})})()]})}),Pe==="feedInventory"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-6 h-6 text-amber-600"}),"Feed Inventory & Costs"]}),e.jsxs("button",{onClick:()=>{var i;const s=((i=r==null?void 0:r.cashFlow)==null?void 0:i.customFeeding)||{},n=s.feedInventory||[],o={id:`feed-${Date.now()}`,name:"",asFedAmount:0,asFedCostPerTon:0,dryMatterAmount:0,dryMatterCostPerTon:0,totalCost:0};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedInventory:[...n,o]}}})},className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Feed"]})]}),(()=>{var f;const s=((f=r==null?void 0:r.cashFlow)==null?void 0:f.customFeeding)||{},n=s.feedInventory||[],o=n.reduce((d,u)=>d+(u.asFedAmount||0),0),i=n.reduce((d,u)=>d+(u.dryMatterAmount||0),0),h=n.reduce((d,u)=>d+(u.totalCost||0),0),b=o>0?h/o*2e3:0,x=i>0?h/i*2e3:0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total As Fed (lbs)"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:o.toLocaleString()})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Avg As Fed Cost/Ton"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:T(b)})]}),e.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 border border-teal-200",children:[e.jsx("div",{className:"text-sm text-teal-600 font-medium",children:"Total Dry Matter (lbs)"}),e.jsx("div",{className:"text-2xl font-bold text-teal-700 font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Feed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:T(h)})]})]}),n.length===0?e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(Ht,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No feeds added yet."}),e.jsx("span",{className:"text-amber-600",children:'Click "Add Feed" to start adding your feed inventory.'})]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Feed"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"As Fed Amount (lbs)"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"As Fed Cost/Ton"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Dry Matter Amount"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Dry Matter Cost/Ton"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right bg-green-50",children:"Total Feed Cost"}),e.jsx("th",{className:"py-3 px-2 w-10"})]})}),e.jsx("tbody",{children:n.map(d=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"text",value:d.name||"",onChange:u=>{const j=n.map(g=>g.id===d.id?{...g,name:u.target.value}:g);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedInventory:j}}})},placeholder:"Feed name",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Qe,{value:d.asFedAmount||0,onChange:u=>{const j=u>0&&d.asFedCostPerTon>0?u/2e3*d.asFedCostPerTon:d.totalCost||0,g=n.map(m=>m.id===d.id?{...m,asFedAmount:u,totalCost:j}:m);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedInventory:g}}})},decimals:0,className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ie,{value:d.asFedCostPerTon||0,onChange:u=>{const j=d.asFedAmount>0&&u>0?d.asFedAmount/2e3*u:d.totalCost||0,g=n.map(m=>m.id===d.id?{...m,asFedCostPerTon:u,totalCost:j}:m);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedInventory:g}}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Qe,{value:d.dryMatterAmount||0,onChange:u=>{const j=n.map(g=>g.id===d.id?{...g,dryMatterAmount:u}:g);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedInventory:j}}})},decimals:0,className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ie,{value:d.dryMatterCostPerTon||0,onChange:u=>{const j=n.map(g=>g.id===d.id?{...g,dryMatterCostPerTon:u}:g);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedInventory:j}}})},className:"w-28 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsx(ie,{value:d.totalCost||0,onChange:u=>{const j=n.map(g=>g.id===d.id?{...g,totalCost:u}:g);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedInventory:j}}})},className:"w-32 px-2 py-1 border border-green-300 rounded text-right font-mono font-semibold"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("button",{onClick:()=>{if(confirm("Delete this feed?")){const u=n.filter(j=>j.id!==d.id);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedInventory:u}}})}},className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},d.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-700",children:"Total"}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono",children:[o.toLocaleString()," lbs"]}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:T(b)}),e.jsxs("td",{className:"py-3 px-3 text-right font-mono",children:[i.toLocaleString("en-US",{maximumFractionDigits:0})," lbs"]}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:T(x)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700 bg-green-50",children:T(h)}),e.jsx("td",{})]})})]})}),e.jsxs("div",{className:"mt-6 bg-amber-50 rounded-lg border border-amber-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-amber-800 mb-3",children:"Quick Add Common Feeds"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Corn Silage","Mixed Hay","Cracked Corn","Alfalfa Hay","Distillers","Earlage","HMC","Liquid Protein","Cane Silage","Wheatlage","Cattle Premix","QLF Liquid","MGA"].map(d=>e.jsxs("button",{onClick:()=>{if(!n.some(j=>j.name===d)){const j={id:`feed-${Date.now()}-${Math.random()}`,name:d,asFedAmount:0,asFedCostPerTon:0,dryMatterAmount:0,dryMatterCostPerTon:0,totalCost:0};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedInventory:[...n,j]}}})}},className:"px-3 py-1 text-sm bg-white border border-amber-300 rounded hover:bg-amber-100 text-amber-800",children:["+ ",d]},d))})]})]})})()]})}),Pe==="expenses"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-6 h-6 text-red-600"}),"Summary of All Feeding Expenses"]})}),(()=>{var p;const s=((p=r==null?void 0:r.cashFlow)==null?void 0:p.customFeeding)||{},n=s.feedingSummary||{},o=s.expenses||{},i=s.feedInventory||[],h=(C,N)=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,expenses:{...o,[C]:N}}}})},b=n.headDays||0,x=b>0&&(n.estimatedADG||0)>0?b*n.estimatedADG:0,f=n.totalHeadDaysCumulative||0,d=f>0&&(n.totalEstimatedADG||n.estimatedADG||0)>0?f*(n.totalEstimatedADG||n.estimatedADG):0,u=i.reduce((C,N)=>C+(N.totalCost||0),0),j=[{key:"feed",label:"Feed",current:o.feed||u,cumulative:o.feedCumulative||0},{key:"yardage",label:"Yardage",current:o.yardage||0,cumulative:o.yardageCumulative||0},{key:"delivery",label:"Delivery",current:o.delivery||0,cumulative:o.deliveryCumulative||0},{key:"managementFee",label:"Management Fee",current:o.managementFee||0,cumulative:o.managementFeeCumulative||0},{key:"insurance",label:"Insurance",current:o.insurance||0,cumulative:o.insuranceCumulative||0},{key:"processing",label:"Processing",current:o.processing||0,cumulative:o.processingCumulative||0},{key:"vetMed",label:"Vet & Med",current:o.vetMed||0,cumulative:o.vetMedCumulative||0},{key:"bedding",label:"Bedding",current:o.bedding||0,cumulative:o.beddingCumulative||0},{key:"profitShare",label:"Profit Share",current:o.profitShare||0,cumulative:o.profitShareCumulative||0},{key:"interest",label:"Interest",current:o.interest||0,cumulative:o.interestCumulative||0},{key:"salesTax",label:"Sales Tax or GST",current:o.salesTax||0,cumulative:o.salesTaxCumulative||0},{key:"other",label:"Other",current:o.other||0,cumulative:o.otherCumulative||0}],g=j.reduce((C,N)=>C+N.current,0),m=j.reduce((C,N)=>C+N.cumulative,0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Expense Category"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Current Invoice Period"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Per Head Day"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-purple-700 text-right bg-purple-50",children:"Per lb/Gain"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Through Period"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Per Head Day"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-purple-700 text-right bg-purple-50",children:"Per lb/Gain"})]})}),e.jsx("tbody",{children:j.map(C=>{const N=b>0?C.current/b:0,k=x>0?C.current/x:0,P=f>0?C.cumulative/f:0,A=d>0?C.cumulative/d:0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-700",children:C.label}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ie,{value:C.current,onChange:R=>h(C.key,R),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-blue-700 bg-blue-50",children:T(N)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-700 bg-purple-50",children:T(k)}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ie,{value:C.cumulative,onChange:R=>h(`${C.key}Cumulative`,R),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-blue-700 bg-blue-50",children:T(P)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-700 bg-purple-50",children:T(A)})]},C.key)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-bold",children:[e.jsx("td",{className:"py-3 px-3 text-gray-800",children:"Total Expenses"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700",children:T(g)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-800 bg-blue-100",children:T(b>0?g/b:0)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-800 bg-purple-100",children:T(x>0?g/x:0)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700",children:T(m)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-800 bg-blue-100",children:T(f>0?m/f:0)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-800 bg-purple-100",children:T(d>0?m/d:0)})]})})]})}),e.jsx("div",{className:"mt-6 bg-red-100 border-2 border-red-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-800",children:"Your Total Amount Due"}),e.jsx("div",{className:"text-sm text-red-600",children:"Current Invoice Period"})]}),e.jsx("div",{className:"text-3xl font-bold font-mono text-red-800",children:T(g)})]})})]})})()]})}),Pe==="capacity"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(hr,{className:"w-6 h-6 text-orange-600"}),"Yard Capacity & Pens"]}),e.jsxs("button",{onClick:()=>{var i;const s=((i=r==null?void 0:r.cashFlow)==null?void 0:i.customFeeding)||{},n=s.pens||[],o={id:`pen-${Date.now()}`,name:`Pen ${n.length+1}`,headCapacity:0,occupancyPercent:85,notes:""};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,pens:[...n,o]}}})},className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Pen"]})]}),(()=>{var b;const n=(((b=r==null?void 0:r.cashFlow)==null?void 0:b.customFeeding)||{}).pens||[],o=n.reduce((x,f)=>x+(f.headCapacity||0),0),i=n.length>0?n.reduce((x,f)=>x+(f.occupancyPercent||0),0)/n.length:0,h=o*(i/100);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Pens"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:n.length})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Capacity"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:o.toLocaleString()}),e.jsx("div",{className:"text-xs text-blue-500",children:"head"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Avg Occupancy"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:[i.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Avg Head on Feed"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:h.toLocaleString("en-US",{maximumFractionDigits:0})})]})]})})(),(((iu=(ou=r==null?void 0:r.cashFlow)==null?void 0:ou.customFeeding)==null?void 0:iu.pens)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700",children:"Pen Name"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Head Capacity"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Occupancy %"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 text-right",children:"Avg Head"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700",children:"Notes"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 w-16"})]})}),e.jsx("tbody",{children:(((du=(cu=r==null?void 0:r.cashFlow)==null?void 0:cu.customFeeding)==null?void 0:du.pens)||[]).map(s=>{const n=(s.headCapacity||0)*((s.occupancyPercent||0)/100);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4",children:e.jsx("input",{type:"text",value:s.name||"",onChange:o=>{var b;const i=((b=r==null?void 0:r.cashFlow)==null?void 0:b.customFeeding)||{},h=(i.pens||[]).map(x=>x.id===s.id?{...x,name:o.target.value}:x);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...i,pens:h}}})},className:"w-full px-2 py-1 border border-gray-200 rounded"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx(Qe,{value:s.headCapacity||0,onChange:o=>{var b;const i=((b=r==null?void 0:r.cashFlow)==null?void 0:b.customFeeding)||{},h=(i.pens||[]).map(x=>x.id===s.id?{...x,headCapacity:o}:x);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...i,pens:h}}})},className:"w-24 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx(Qe,{value:s.occupancyPercent||0,onChange:o=>{var b;const i=((b=r==null?void 0:r.cashFlow)==null?void 0:b.customFeeding)||{},h=(i.pens||[]).map(x=>x.id===s.id?{...x,occupancyPercent:o}:x);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...i,pens:h}}})},decimals:1,className:"w-20 px-2 py-1 border border-gray-200 rounded text-right font-mono"})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono text-gray-600",children:n.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("input",{type:"text",value:s.notes||"",onChange:o=>{var b;const i=((b=r==null?void 0:r.cashFlow)==null?void 0:b.customFeeding)||{},h=(i.pens||[]).map(x=>x.id===s.id?{...x,notes:o.target.value}:x);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...i,pens:h}}})},placeholder:"Notes...",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("button",{onClick:()=>{var h;const o=((h=r==null?void 0:r.cashFlow)==null?void 0:h.customFeeding)||{},i=(o.pens||[]).filter(b=>b.id!==s.id);z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...o,pens:i}}})},className:"text-red-500 hover:text-red-700",children:e.jsx(pr,{className:"w-4 h-4"})})})]},s.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:"Totals"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:(((mu=(xu=r==null?void 0:r.cashFlow)==null?void 0:xu.customFeeding)==null?void 0:mu.pens)||[]).reduce((s,n)=>s+(n.headCapacity||0),0).toLocaleString()}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:(()=>{var n,o;const s=((o=(n=r==null?void 0:r.cashFlow)==null?void 0:n.customFeeding)==null?void 0:o.pens)||[];return s.length>0?(s.reduce((i,h)=>i+(h.occupancyPercent||0),0)/s.length).toFixed(1)+"%":""})()}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-purple-700",children:(()=>{var n,o;return(((o=(n=r==null?void 0:r.cashFlow)==null?void 0:n.customFeeding)==null?void 0:o.pens)||[]).reduce((i,h)=>i+(h.headCapacity||0)*((h.occupancyPercent||0)/100),0).toLocaleString("en-US",{maximumFractionDigits:0})})()}),e.jsx("td",{colSpan:"2"})]})})]})}):e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6 text-center",children:[e.jsx(hr,{className:"w-12 h-12 text-orange-400 mx-auto mb-3"}),e.jsx("p",{className:"text-orange-700 font-medium",children:"No pens configured"}),e.jsx("p",{className:"text-orange-600 text-sm",children:'Click "Add Pen" to start setting up your yard capacity.'})]}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Average Days on Feed"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{value:((hu=(uu=r==null?void 0:r.cashFlow)==null?void 0:uu.customFeeding)==null?void 0:hu.avgDaysOnFeed)||150,onChange:s=>{var o;const n=((o=r==null?void 0:r.cashFlow)==null?void 0:o.customFeeding)||{};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...n,avgDaysOnFeed:s}}})},className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("span",{className:"text-gray-500",children:"days"})]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:e.jsxs("div",{children:["Turns per year: ",e.jsx("span",{className:"font-mono font-semibold",children:(365/(((gu=(pu=r==null?void 0:r.cashFlow)==null?void 0:pu.customFeeding)==null?void 0:gu.avgDaysOnFeed)||150)).toFixed(2)})]})})]})})]})}),Pe==="yardage"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(vt,{className:"w-6 h-6 text-green-600"}),"Yardage & Income Settings"]})}),(()=>{var A;const s=((A=r==null?void 0:r.cashFlow)==null?void 0:A.customFeeding)||{},n=s.pens||[],o=n.reduce((R,L)=>R+(L.headCapacity||0),0),i=n.length>0?n.reduce((R,L)=>R+(L.occupancyPercent||0),0)/n.length:0,h=o*(i/100),b=s.avgDaysOnFeed||150,x=b>0?365/b:0,f=h*x,d=s.yardageRate||0,u=h*365*d,j=s.feedMarkupPercent||0,g=s.feedCostPerHeadPerDay||0,m=h*365*g,p=m*(j/100),C=s.processingFeePerHead||0,N=f*C,k=s.otherIncome||0,P=u+p+N+k;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 border-b pb-2",children:"Yardage Charges"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yardage Rate (per head/day)"}),e.jsx(ie,{value:s.yardageRate||0,onChange:R=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,yardageRate:R}}})},className:"w-40 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Annual Yardage Income"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:T(u)}),e.jsxs("div",{className:"text-xs text-green-500 mt-1",children:[h.toLocaleString("en-US",{maximumFractionDigits:0})," head  365 days  ",T(d)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 border-b pb-2",children:"Feed Markup"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feed Markup Percentage"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{value:s.feedMarkupPercent||0,onChange:R=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedMarkupPercent:R}}})},decimals:1,className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("span",{className:"text-gray-500",children:"%"})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Annual Feed Markup Income"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:T(p)}),e.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:[T(m)," feed cost  ",j,"%"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 border-b pb-2",children:"Processing Fees"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Fee (per head)"}),e.jsx(ie,{value:s.processingFeePerHead||0,onChange:R=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,processingFeePerHead:R}}})},className:"w-40 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Annual Processing Income"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:T(N)}),e.jsxs("div",{className:"text-xs text-purple-500 mt-1",children:[f.toLocaleString("en-US",{maximumFractionDigits:0})," head  ",T(C)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 border-b pb-2",children:"Other Income"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Annual Income"}),e.jsx(ie,{value:s.otherIncome||0,onChange:R=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,otherIncome:R}}})},className:"w-40 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manure sales, commodity commissions, etc."})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Other Income"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T(k)})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200 p-6",children:[e.jsx("h3",{className:"font-bold text-green-800 mb-4",children:"Total Revenue Summary"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Yardage"}),e.jsx("div",{className:"text-lg font-bold font-mono text-green-700",children:T(u)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Feed Markup"}),e.jsx("div",{className:"text-lg font-bold font-mono text-blue-700",children:T(p)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Processing"}),e.jsx("div",{className:"text-lg font-bold font-mono text-purple-700",children:T(N)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Other"}),e.jsx("div",{className:"text-lg font-bold font-mono text-amber-700",children:T(k)})]}),e.jsxs("div",{className:"text-center bg-white rounded-lg p-2 border border-green-300",children:[e.jsx("div",{className:"text-xs text-green-600 uppercase tracking-wide font-semibold",children:"Total Revenue"}),e.jsx("div",{className:"text-2xl font-bold font-mono text-green-800",children:T(P)})]})]})]})]})})()]})}),Pe==="feed"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-6 h-6 text-amber-600"}),"Feed Costs"]})}),(()=>{var f,d,u,j,g,m,p,C,N,k,P;const s=((f=r==null?void 0:r.cashFlow)==null?void 0:f.customFeeding)||{},n=s.pens||[],o=n.reduce((A,R)=>A+(R.headCapacity||0),0),i=n.length>0?n.reduce((A,R)=>A+(R.occupancyPercent||0),0)/n.length:0,h=o*(i/100),b=s.feedCostPerHeadPerDay||0,x=h*365*b;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Avg Head on Feed"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:h.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Feed Cost/Head/Day"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T(b)})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Daily Feed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:T(h*b)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Annual Feed Cost"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:T(x)})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Feed Cost per Head per Day"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Enter the average feed cost per head per day. This is typically the blended cost of all feed ingredients."}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Head per Day"}),e.jsx(ie,{value:s.feedCostPerHeadPerDay||0,onChange:A=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedCostPerHeadPerDay:A}}})},className:"w-40 px-3 py-2 border border-gray-300 rounded-lg text-right font-mono"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("div",{children:["Monthly per head: ",e.jsx("span",{className:"font-mono font-semibold",children:T(b*30)})]}),e.jsxs("div",{children:["Per head @ 150 days: ",e.jsx("span",{className:"font-mono font-semibold",children:T(b*150)})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-amber-50 rounded-lg border border-amber-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-amber-800 mb-4",children:"Feed Cost Breakdown (Reference)"}),e.jsx("p",{className:"text-sm text-amber-600 mb-4",children:"Optional: Break down your feed costs by ingredient for reference. This helps validate your per-head-per-day cost."}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Corn/Grain"}),e.jsx(ie,{value:((d=s.feedBreakdown)==null?void 0:d.corn)||0,onChange:A=>{const R=s.feedBreakdown||{};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedBreakdown:{...R,corn:A}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Silage"}),e.jsx(ie,{value:((u=s.feedBreakdown)==null?void 0:u.silage)||0,onChange:A=>{const R=s.feedBreakdown||{};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedBreakdown:{...R,silage:A}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Hay/Roughage"}),e.jsx(ie,{value:((j=s.feedBreakdown)==null?void 0:j.hay)||0,onChange:A=>{const R=s.feedBreakdown||{};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedBreakdown:{...R,hay:A}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Distillers/Byproducts"}),e.jsx(ie,{value:((g=s.feedBreakdown)==null?void 0:g.distillers)||0,onChange:A=>{const R=s.feedBreakdown||{};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedBreakdown:{...R,distillers:A}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Supplement/Mineral"}),e.jsx(ie,{value:((m=s.feedBreakdown)==null?void 0:m.supplement)||0,onChange:A=>{const R=s.feedBreakdown||{};z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,feedBreakdown:{...R,supplement:A}}}})},className:"w-28 px-2 py-1 border border-amber-200 rounded text-right font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between font-semibold",children:[e.jsx("span",{className:"text-sm text-amber-800",children:"Breakdown Total"}),e.jsx("span",{className:"font-mono text-amber-800",children:T((((p=s.feedBreakdown)==null?void 0:p.corn)||0)+(((C=s.feedBreakdown)==null?void 0:C.silage)||0)+(((N=s.feedBreakdown)==null?void 0:N.hay)||0)+(((k=s.feedBreakdown)==null?void 0:k.distillers)||0)+(((P=s.feedBreakdown)==null?void 0:P.supplement)||0))})]})]})]})]})]})})()]})}),Pe==="operating"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-6 h-6 text-gray-600"}),"Operating Expenses"]})}),(()=>{var m;const s=((m=r==null?void 0:r.cashFlow)==null?void 0:m.customFeeding)||{},n=s.expenses||{},o=(n.labor||0)+(n.utilities||0)+(n.repairs||0)+(n.fuel||0)+(n.insurance||0)+(n.vetSupplies||0)+(n.bedding||0)+(n.deathLoss||0)+(n.misc||0),i=s.pens||[],h=i.reduce((p,C)=>p+(C.headCapacity||0),0),b=i.length>0?i.reduce((p,C)=>p+(C.occupancyPercent||0),0)/i.length:0,x=h*(b/100),f=s.avgDaysOnFeed||150,d=f>0?365/f:0,u=x*d,j=u>0?o/u:0,g=(p,C)=>{z({cashFlow:{...r==null?void 0:r.cashFlow,customFeeding:{...s,expenses:{...n,[p]:C}}}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Operating Expenses"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:T(o)})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Head Fed/Year"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:u.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Operating Cost/Head"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:T(j)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Monthly Operating"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:T(o/12)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Labor & Personnel"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Labor (Annual)"}),e.jsx(ie,{value:n.labor||0,onChange:p=>g("labor",p),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Utilities & Overhead"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Utilities"}),e.jsx(ie,{value:n.utilities||0,onChange:p=>g("utilities",p),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Insurance"}),e.jsx(ie,{value:n.insurance||0,onChange:p=>g("insurance",p),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Equipment & Maintenance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Repairs & Maintenance"}),e.jsx(ie,{value:n.repairs||0,onChange:p=>g("repairs",p),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Fuel & Equipment"}),e.jsx(ie,{value:n.fuel||0,onChange:p=>g("fuel",p),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Animal Health & Supplies"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Vet & Health Supplies"}),e.jsx(ie,{value:n.vetSupplies||0,onChange:p=>g("vetSupplies",p),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Bedding"}),e.jsx(ie,{value:n.bedding||0,onChange:p=>g("bedding",p),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Death Loss (absorbed)"}),e.jsx(ie,{value:n.deathLoss||0,onChange:p=>g("deathLoss",p),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Other Expenses"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Miscellaneous"}),e.jsx(ie,{value:n.misc||0,onChange:p=>g("misc",p),className:"w-32 px-2 py-1 border border-gray-200 rounded text-right font-mono"})]})})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg border border-red-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-red-800 mb-3",children:"Expense Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Labor"}),e.jsx("span",{className:"font-mono",children:T(n.labor||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Utilities"}),e.jsx("span",{className:"font-mono",children:T(n.utilities||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Repairs"}),e.jsx("span",{className:"font-mono",children:T(n.repairs||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fuel"}),e.jsx("span",{className:"font-mono",children:T(n.fuel||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Insurance"}),e.jsx("span",{className:"font-mono",children:T(n.insurance||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vet & Supplies"}),e.jsx("span",{className:"font-mono",children:T(n.vetSupplies||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bedding"}),e.jsx("span",{className:"font-mono",children:T(n.bedding||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Death Loss"}),e.jsx("span",{className:"font-mono",children:T(n.deathLoss||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Miscellaneous"}),e.jsx("span",{className:"font-mono",children:T(n.misc||0)})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-red-200",children:[e.jsx("span",{className:"text-red-800",children:"TOTAL"}),e.jsx("span",{className:"font-mono text-red-800",children:T(o)})]})]})]})]})]})]})})()]})})]}),ct==="cattleFeeding"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"projection",label:"Projection",icon:lt},{id:"lrp",label:"LRP Insurance",icon:$t},{id:"closeouts",label:"Closeouts",icon:Ge},{id:"analysis",label:"Analysis",icon:bt}].map(s=>e.jsxs("button",{onClick:()=>ht(s.id),className:`flex items-center gap-2 px-4 py-3 font-medium text-sm border-b-2 transition-colors whitespace-nowrap ${kt===s.id?"border-red-600 text-red-600 bg-red-50":"border-transparent text-gray-600 hover:text-red-600 hover:bg-red-50"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[kt==="projection"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cattle Feeding Projection"}),e.jsx("p",{className:"text-gray-600",children:"Plan and project cattle feeding lots"})]}),e.jsxs("button",{onClick:()=>{const s=`lot-${Date.now()}`;Oe(n=>[...n,{id:s,lotName:`Lot ${n.length+1}`,cattleType:"Steers",headCount:0,purchaseDate:"",purchaseWeight:0,purchasePrice:0,projectedSaleDate:"",projectedSaleWeight:0,projectedSalePrice:0,daysOnFeed:0,avgDailyGain:3.5,deathLossPercent:1.5,feedCostPerDay:0,yardageCostPerDay:0,vetHealthPerHead:0,interestRate:8,freightInPerHead:0,freightOutPerHead:0,commissionPerHead:0,otherCostsPerHead:0}])},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Lot"]})]}),fe.map((s,n)=>{const o=s.projectedSaleWeight-s.purchaseWeight,i=s.avgDailyGain>0?Math.round(o/s.avgDailyGain):0,h=Math.round(s.headCount*(1-s.deathLossPercent/100)),b=s.headCount*s.purchaseWeight*s.purchasePrice,x=s.headCount*i*s.feedCostPerDay,f=s.headCount*i*s.yardageCostPerDay,d=s.headCount*s.vetHealthPerHead,u=s.headCount*s.freightInPerHead,j=h*s.freightOutPerHead,g=h*s.commissionPerHead,m=s.headCount*s.otherCostsPerHead,p=s.purchaseWeight*s.purchasePrice*(s.interestRate/100)*(i/365),C=s.headCount*p,N=b+x+f+d+u+j+g+m+C,k=h*s.projectedSaleWeight*s.projectedSalePrice,P=k-N,A=s.headCount>0?P/s.headCount:0,R=s.headCount>0&&s.projectedSaleWeight>s.purchaseWeight?(N-b)/(h*(s.projectedSaleWeight-s.purchaseWeight)):0,L=h>0&&s.projectedSaleWeight>0?N/(h*s.projectedSaleWeight):0,D=(H,Y)=>{Oe(_=>_.map(K=>K.id===s.id?{...K,[H]:Y}:K))},F=H=>!H&&H!==0?"":"$"+parseFloat(H).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),v=H=>!H&&H!==0?"":"$"+parseFloat(H).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}),S=({value:H,onChange:Y,decimals:_=2,placeholder:K=""})=>{const[re,he]=Jt.useState(!1),[U,V]=Jt.useState(""),q=re?U:H?"$"+parseFloat(H).toLocaleString("en-US",{minimumFractionDigits:_,maximumFractionDigits:_}):"";return e.jsx("input",{type:"text",value:q,onFocus:X=>{he(!0),V(H?String(H):"")},onBlur:X=>{he(!1);const se=parseFloat(U.replace(/[$,%]/g,"").replace(/,/g,""))||0;Y(se)},onChange:X=>{V(X.target.value)},placeholder:K,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})},E=({value:H,onChange:Y,placeholder:_=""})=>{const[K,re]=Jt.useState(!1),[he,U]=Jt.useState(""),V=K?he:H?parseFloat(H).toFixed(2)+"%":"";return e.jsx("input",{type:"text",value:V,onFocus:q=>{re(!0),U(H?String(H):"")},onBlur:q=>{re(!1);const X=parseFloat(he.replace(/[$,%]/g,""))||0;Y(X)},onChange:q=>{U(q.target.value)},placeholder:_,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})},I=({value:H,onChange:Y,placeholder:_=""})=>{const[K,re]=Jt.useState(!1),[he,U]=Jt.useState(""),V=K?he:H?parseFloat(H).toLocaleString("en-US"):"";return e.jsx("input",{type:"text",value:V,onFocus:q=>{re(!0),U(H?String(H):"")},onBlur:q=>{re(!1);const X=parseFloat(he.replace(/,/g,""))||0;Y(X)},onChange:q=>{U(q.target.value)},placeholder:_,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(go,{className:"w-6 h-6"}),e.jsx("input",{type:"text",value:s.lotName,onChange:H=>D("lotName",H.target.value),className:"bg-transparent border-b border-white/50 text-xl font-bold focus:outline-none focus:border-white"})]}),e.jsx("button",{onClick:()=>{window.confirm("Delete this lot?")&&Oe(H=>H.filter(Y=>Y.id!==s.id))},className:"p-2 hover:bg-red-800 rounded",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(_h,{className:"w-5 h-5 text-red-600"}),"Cattle Purchase"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Cattle Type"}),e.jsxs("select",{value:s.cattleType,onChange:H=>D("cattleType",H.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm",children:[e.jsx("option",{value:"Steers",children:"Steers"}),e.jsx("option",{value:"Heifers",children:"Heifers"}),e.jsx("option",{value:"Mixed",children:"Mixed"}),e.jsx("option",{value:"Holstein Steers",children:"Holstein Steers"}),e.jsx("option",{value:"Dairy Cross",children:"Dairy Cross"}),e.jsx("option",{value:"Feeding Cows",children:"Feeding Cows"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Head Count"}),e.jsx(I,{value:s.headCount,onChange:H=>D("headCount",Math.round(H))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:s.purchaseDate,onChange:H=>D("purchaseDate",H.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Purchase Wt (lbs)"}),e.jsx(I,{value:s.purchaseWeight,onChange:H=>D("purchaseWeight",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Purchase $/lb"}),e.jsx(S,{value:s.purchasePrice,onChange:H=>D("purchasePrice",H),decimals:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Total Purchase"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold text-gray-800",children:F(b)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Purchase $/Head"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold text-gray-800",children:F(s.headCount>0?b/s.headCount:0)})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ps,{className:"w-5 h-5 text-amber-600"}),"Feeding Plan"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Avg Daily Gain (lbs)"}),e.jsx(I,{value:s.avgDailyGain,onChange:H=>D("avgDailyGain",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Days on Feed"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold text-gray-800",children:i.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Death Loss"}),e.jsx(E,{value:s.deathLossPercent,onChange:H=>D("deathLossPercent",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Feed Cost/hd/day"}),e.jsx(S,{value:s.feedCostPerDay,onChange:H=>D("feedCostPerDay",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Yardage/hd/day"}),e.jsx(S,{value:s.yardageCostPerDay,onChange:H=>D("yardageCostPerDay",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Head After Loss"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold text-gray-800",children:h.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5 text-green-600"}),"Projected Sale"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Projected Sale Date"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm font-mono font-semibold text-gray-800",children:s.purchaseDate&&i>0?(()=>{const H=new Date(s.purchaseDate);return H.setDate(H.getDate()+i),H.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})():"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Sale Weight (lbs)"}),e.jsx(I,{value:s.projectedSaleWeight,onChange:H=>D("projectedSaleWeight",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Sale Price $/lb"}),e.jsx(S,{value:s.projectedSalePrice,onChange:H=>D("projectedSalePrice",H),decimals:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Total Gain (lbs)"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold text-gray-800",children:(s.projectedSaleWeight-s.purchaseWeight).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Total Lbs Sold"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold text-gray-800",children:(h*s.projectedSaleWeight).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Gross Revenue"}),e.jsx("div",{className:"px-3 py-2 bg-green-100 rounded-lg text-sm text-right font-mono font-semibold text-green-700",children:F(k)})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5 text-orange-600"}),"Other Costs (per head)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Vet/Health"}),e.jsx(S,{value:s.vetHealthPerHead,onChange:H=>D("vetHealthPerHead",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Freight In"}),e.jsx(S,{value:s.freightInPerHead,onChange:H=>D("freightInPerHead",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Freight Out"}),e.jsx(S,{value:s.freightOutPerHead,onChange:H=>D("freightOutPerHead",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Commission"}),e.jsx(S,{value:s.commissionPerHead,onChange:H=>D("commissionPerHead",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Interest Rate"}),e.jsx(E,{value:s.interestRate,onChange:H=>D("interestRate",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Interest/Head"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold text-gray-800",children:F(s.purchaseWeight*s.purchasePrice*(s.interestRate/100)*(i/365))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Other Costs"}),e.jsx(S,{value:s.otherCostsPerHead,onChange:H=>D("otherCostsPerHead",H)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ur,{className:"w-5 h-5 text-blue-600"}),"Lot Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Costs"}),e.jsx("div",{className:"text-xl font-bold font-mono text-red-600",children:F(N)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[F(s.headCount>0?N/s.headCount:0),"/head"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Gross Revenue"}),e.jsx("div",{className:"text-xl font-bold font-mono text-green-600",children:F(k)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[F(s.headCount>0?k/s.headCount:0),"/head"]})]}),e.jsxs("div",{className:`rounded-lg p-4 shadow-sm ${P>=0?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Net Profit"}),e.jsx("div",{className:`text-xl font-bold font-mono ${P>=0?"text-green-700":"text-red-700"}`,children:F(P)}),e.jsxs("div",{className:`text-xs mt-1 ${P>=0?"text-green-600":"text-red-600"}`,children:[F(A),"/head purchased"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cost of Gain"}),e.jsxs("div",{className:"text-xl font-bold font-mono text-blue-600",children:[v(R),"/lb"]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Break-even: ",v(L),"/lb"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Purchase"}),e.jsx("div",{className:"font-mono font-semibold",children:F(b)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Feed"}),e.jsx("div",{className:"font-mono font-semibold",children:F(x)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Yardage"}),e.jsx("div",{className:"font-mono font-semibold",children:F(f)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Vet/Health"}),e.jsx("div",{className:"font-mono font-semibold",children:F(d)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Freight In"}),e.jsx("div",{className:"font-mono font-semibold",children:F(u)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Freight Out"}),e.jsx("div",{className:"font-mono font-semibold",children:F(j)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Interest"}),e.jsx("div",{className:"font-mono font-semibold",children:F(C)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Other"}),e.jsx("div",{className:"font-mono font-semibold",children:F(g+m)})]})]})]})]})]},s.id)}),fe.length>1&&e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-red-700 rounded-xl p-6 text-white",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"All Lots Summary"}),(()=>{let s=0,n=0,o=0,i=0;const h=f=>"$"+parseFloat(f).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});fe.forEach(f=>{const d=f.projectedSaleWeight-f.purchaseWeight,u=f.avgDailyGain>0?Math.round(d/f.avgDailyGain):0,j=Math.round(f.headCount*(1-f.deathLossPercent/100)),g=f.headCount*f.purchaseWeight*f.purchasePrice,m=f.headCount*u*f.feedCostPerDay,p=f.headCount*u*f.yardageCostPerDay,C=f.headCount*f.vetHealthPerHead,N=f.headCount*f.freightInPerHead,k=j*f.freightOutPerHead,P=j*f.commissionPerHead,A=f.headCount*f.otherCostsPerHead,R=f.purchaseWeight*f.purchasePrice*(f.interestRate/100)*(u/365),L=f.headCount*R;s+=f.headCount,n+=j,o+=g+m+p+C+N+k+P+A+L,i+=j*f.projectedSaleWeight*f.projectedSalePrice});const b=i-o,x=s>0?b/s:0;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Total Head Purchased"}),e.jsx("div",{className:"text-2xl font-bold font-mono",children:s.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Total Head Sold"}),e.jsx("div",{className:"text-2xl font-bold font-mono",children:n.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Total Costs"}),e.jsx("div",{className:"text-2xl font-bold font-mono",children:h(o)})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Total Revenue"}),e.jsx("div",{className:"text-2xl font-bold font-mono",children:h(i)})]}),e.jsxs("div",{className:`rounded-lg p-4 ${b>=0?"bg-green-500":"bg-red-500"}`,children:[e.jsx("div",{className:"text-sm text-white/70",children:"Net Profit"}),e.jsx("div",{className:"text-2xl font-bold font-mono",children:h(b)}),e.jsxs("div",{className:"text-xs text-white/70",children:[h(x),"/head"]})]})]})})()]}),fe.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx(go,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"No Lots Created"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add a lot to start projecting your cattle feeding operation."}),e.jsxs("button",{onClick:()=>{const s=`lot-${Date.now()}`;Oe([{id:s,lotName:"Lot 1",cattleType:"Steers",headCount:0,purchaseDate:"",purchaseWeight:0,purchasePrice:0,projectedSaleDate:"",projectedSaleWeight:0,projectedSalePrice:0,daysOnFeed:0,avgDailyGain:3.5,deathLossPercent:1.5,feedCostPerDay:0,yardageCostPerDay:0,vetHealthPerHead:0,interestRate:8,freightInPerHead:0,freightOutPerHead:0,commissionPerHead:0,otherCostsPerHead:0}])},className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 inline-flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Create First Lot"]})]})]}),kt==="lrp"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($t,{className:"w-6 h-6 text-blue-600"}),"LRP Insurance (Livestock Risk Protection)"]})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track LRP insurance policies for your cattle feeding operation. Protect against price declines on fed cattle."})]}),(()=>{const s=st||[],n=s.reduce((f,d)=>f+(parseFloat(d.headCount)||0)*(parseFloat(d.premiumPerHead)||0),0),o=s.reduce((f,d)=>{const u=parseFloat(d.premiumPerHead)||0,j=parseFloat(d.subsidizedPremiumPerHead)||0;return f+(parseFloat(d.headCount)||0)*(u-j)},0),i=s.reduce((f,d)=>f+(parseFloat(d.headCount)||0)*(parseFloat(d.subsidizedPremiumPerHead)||0),0),h=s.reduce((f,d)=>{const j=(parseFloat(d.expectedEndValue)||0)*(parseFloat(d.coverageLevel)||100)/100*(parseFloat(d.targetWeight)||0),g=(parseFloat(d.actualPrice)||0)*(parseFloat(d.targetWeight)||0),m=Math.max(0,j-g);return f+m*(parseFloat(d.headCount)||0)},0),b=s.reduce((f,d)=>f+(parseFloat(d.headCount)||0),0),x=h-i;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Head Covered"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:b}),e.jsxs("div",{className:"text-xs text-blue-500",children:[s.length," policies"]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total Premiums"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",n.toLocaleString()]}),e.jsx("div",{className:"text-xs text-amber-500",children:"Before subsidy"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Subsidy"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:["$",o.toLocaleString()]}),e.jsx("div",{className:"text-xs text-green-500",children:"USDA subsidy"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Net Premium Cost"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700 font-mono",children:["$",i.toLocaleString()]}),e.jsx("div",{className:"text-xs text-red-500",children:"Your cost"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${x>=0?"bg-emerald-100 border-emerald-300":"bg-orange-100 border-orange-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${x>=0?"text-emerald-700":"text-orange-700"}`,children:"LRP Net Payout"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${x>=0?"text-emerald-800":"text-orange-800"}`,children:["$",x.toLocaleString()]}),e.jsx("div",{className:`text-xs ${x>=0?"text-emerald-600":"text-orange-600"}`,children:"Indemnity - Premiums"})]})]})})(),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-blue-100 text-blue-800 px-4 py-3 font-bold border-b border-blue-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5"}),"LRP Policies"]}),e.jsxs("button",{onClick:()=>{const s={id:Date.now(),linkedLotId:"",description:"",livestockType:"Fed Cattle",cattleType:"",headCount:"",targetWeight:"",coverageLevel:"100",expectedEndValue:"",startDate:"",endDate:"",premiumPerHead:"",subsidizedPremiumPerHead:"",actualPrice:"",indemnityPayment:""};ws(n=>[...n,s])},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Policy"]})]}),e.jsx("div",{className:"p-6",children:(()=>{const s=st||[],n=(i,h,b)=>{ws(x=>x.map(f=>f.id===i?{...f,[h]:b}:f))},o=i=>{window.confirm("Delete this LRP policy?")&&ws(h=>h.filter(b=>b.id!==i))};return s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($t,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No LRP policies added yet."}),e.jsx("p",{className:"text-sm",children:'Click "Add Policy" to track your LRP insurance coverage.'})]}):e.jsx("div",{className:"space-y-6",children:s.map((i,h)=>{const b=parseFloat(i.headCount)||0,x=parseFloat(i.premiumPerHead)||0,f=parseFloat(i.subsidizedPremiumPerHead)||0,d=x-f,u=b*f,j=(parseFloat(i.expectedEndValue)||0)*(parseFloat(i.coverageLevel)||100)/100,g=j*(parseFloat(i.targetWeight)||0),m=(parseFloat(i.actualPrice)||0)*(parseFloat(i.targetWeight)||0),p=Math.max(0,g-m),C=p*b,N=C-u;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-800",children:["Policy #",h+1]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:i.linkedLotId||"",onChange:k=>{const P=k.target.value;if(n(i.id,"linkedLotId",P),P){const A=fe.find(R=>R.id===P);if(A){const R=A.projectedSaleWeight-A.purchaseWeight,L=A.avgDailyGain>0?Math.round(R/A.avgDailyGain):0;let D="";if(A.purchaseDate&&L>0){const v=new Date(A.purchaseDate);v.setDate(v.getDate()+L),D=v.toISOString().split("T")[0]}const F=Math.round(A.headCount*(1-A.deathLossPercent/100));ws(v=>v.map(S=>S.id===i.id?{...S,linkedLotId:P,description:A.lotName,headCount:String(F),targetWeight:String(A.projectedSaleWeight/100),startDate:A.purchaseDate,endDate:D}:S))}}},className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Link to Lot..."}),fe.map(k=>e.jsx("option",{value:k.id,children:k.lotName},k.id))]}),e.jsxs("button",{onClick:()=>o(i.id),className:"text-red-500 hover:text-red-700 text-sm flex items-center gap-1",children:[e.jsx(ot,{className:"w-4 h-4"}),"Remove"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-8 gap-4 mb-4",children:[e.jsxs("div",{className:"md:col-span-2 space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("input",{type:"text",value:i.description||"",onChange:k=>n(i.id,"description",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none",placeholder:"e.g., Lot 1 Fed Cattle"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Livestock Type"}),e.jsxs("select",{value:i.livestockType||"Fed Cattle",onChange:k=>n(i.id,"livestockType",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none",children:[e.jsx("option",{value:"Fed Cattle",children:"Fed Cattle"}),e.jsx("option",{value:"Feeder Cattle",children:"Feeder Cattle"}),e.jsx("option",{value:"Swine",children:"Swine"}),e.jsx("option",{value:"Lamb",children:"Lamb"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),e.jsxs("select",{value:i.cattleType||"",onChange:k=>n(i.id,"cattleType",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Steers",children:"Steers"}),e.jsx("option",{value:"Heifers",children:"Heifers"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("input",{type:"date",value:i.startDate||"",onChange:k=>n(i.id,"startDate",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),e.jsx("input",{type:"date",value:i.endDate||"",onChange:k=>n(i.id,"endDate",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Head Count"}),e.jsx("input",{type:"text",value:i.headCount||"",onChange:k=>n(i.id,"headCount",k.target.value.replace(/[^0-9]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Target Wt (cwt)"}),e.jsx("input",{type:"text",value:i.targetWeight||"",onChange:k=>n(i.id,"targetWeight",k.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coverage Level (%)"}),e.jsx("select",{value:i.coverageLevel||"100",onChange:k=>n(i.id,"coverageLevel",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none",children:[100,95,90,85,80,75,70].map(k=>e.jsxs("option",{value:k,children:[k,"%"]},k))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expected End Value ($/cwt)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:i.expectedEndValue||"",onChange:k=>n(i.id,"expectedEndValue",k.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coverage Price ($/cwt)"}),e.jsxs("div",{className:"px-3 py-2 border border-gray-200 rounded-lg bg-gray-100 font-mono text-right text-gray-700",children:["$",j.toFixed(4)]})]}),e.jsxs("div",{className:"space-y-1 bg-yellow-50 p-2 -m-2 rounded-lg border-2 border-yellow-400",children:[e.jsx("label",{className:"block text-sm font-bold text-yellow-800",children:"Actual Price ($/cwt)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-yellow-600 font-bold",children:"$"}),e.jsx("input",{type:"text",value:i.actualPrice||"",onChange:k=>n(i.id,"actualPrice",k.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-3 pl-7 border-2 border-yellow-400 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none font-mono text-right text-lg font-bold bg-white",placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Premium/Head"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:i.premiumPerHead||"",onChange:k=>n(i.id,"premiumPerHead",k.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subsidized Premium/Head"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"text",value:i.subsidizedPremiumPerHead||"",onChange:k=>n(i.id,"subsidizedPremiumPerHead",k.target.value.replace(/[^0-9.]/g,"")),className:"w-full px-3 py-2 pl-7 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-200 outline-none font-mono text-right",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subsidy/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-gray-200 rounded-lg bg-gray-100 font-mono text-right text-gray-700",children:["$",d.toFixed(2)]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Per Head"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Guarantee/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-blue-200 rounded-lg bg-blue-50 font-mono text-right text-blue-800",children:["$",g.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gross Actual Revenue/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-purple-200 rounded-lg bg-purple-50 font-mono text-right text-purple-800",children:["$",m.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gross Payment/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-orange-200 rounded-lg bg-orange-50 font-mono text-right text-orange-800",children:["$",p.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Net Payment/Head"}),e.jsxs("div",{className:"px-3 py-2 border border-orange-300 rounded-lg bg-orange-100 font-mono text-right text-orange-900",children:["$",(p-f).toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Totals"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Guarantee"}),e.jsxs("div",{className:"px-3 py-2 border border-blue-300 rounded-lg bg-blue-100 font-mono text-right text-blue-900 font-semibold",children:["$",(g*b).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Actual Gross"}),e.jsxs("div",{className:"px-3 py-2 border border-purple-300 rounded-lg bg-purple-100 font-mono text-right text-purple-900 font-semibold",children:["$",(m*b).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gross Indemnity Total"}),e.jsxs("div",{className:"px-3 py-2 border border-orange-200 rounded-lg bg-orange-50 font-mono text-right text-orange-800 font-semibold",children:["$",C.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:[e.jsx("div",{className:"text-xs text-amber-600 font-medium",children:"Net Premium Cost"}),e.jsxs("div",{className:"text-lg font-bold text-amber-700 font-mono",children:["$",u.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-amber-500",children:["$",f.toFixed(2),"/hd  ",b]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`rounded-lg p-4 border ${N>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${N>=0?"text-green-600":"text-red-600"}`,children:"LRP Net Payout"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${N>=0?"text-green-700":"text-red-700"}`,children:["$",N.toLocaleString()]}),e.jsx("div",{className:`text-xs ${N>=0?"text-green-500":"text-red-500"}`,children:"Gross Indemnity - Net Premium"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${N>=0?"bg-green-100 border-green-300":"bg-red-100 border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${N>=0?"text-green-600":"text-red-600"}`,children:"LRP Net Payout/Head"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${N>=0?"text-green-700":"text-red-700"}`,children:["$",b>0?(N/b).toFixed(2):"0.00"]}),e.jsxs("div",{className:`text-xs ${N>=0?"text-green-500":"text-red-500"}`,children:["Payout  ",b," head"]})]})]})]})]},i.id)})})})()})]}),(()=>{const s=st||[];if(s.length===0)return null;const n=s.reduce((f,d)=>f+(parseFloat(d.headCount)||0)*(parseFloat(d.premiumPerHead)||0),0),o=s.reduce((f,d)=>{const u=parseFloat(d.premiumPerHead)||0,j=parseFloat(d.subsidizedPremiumPerHead)||0;return f+(parseFloat(d.headCount)||0)*(u-j)},0),i=s.reduce((f,d)=>f+(parseFloat(d.headCount)||0)*(parseFloat(d.subsidizedPremiumPerHead)||0),0),h=s.reduce((f,d)=>{const j=(parseFloat(d.expectedEndValue)||0)*(parseFloat(d.coverageLevel)||100)/100*(parseFloat(d.targetWeight)||0),g=(parseFloat(d.actualPrice)||0)*(parseFloat(d.targetWeight)||0),m=Math.max(0,j-g);return f+m*(parseFloat(d.headCount)||0)},0),b=s.reduce((f,d)=>f+(parseFloat(d.headCount)||0),0),x=h-i;return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-blue-200 text-blue-900 px-4 py-3 font-bold border-b border-blue-300",children:"LRP Insurance Summary"}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Premium Costs"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Total Premiums"}),e.jsxs("span",{className:"font-mono font-semibold text-gray-900",children:["$",n.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Less: Subsidy"}),e.jsxs("span",{className:"font-mono font-semibold text-green-600",children:["-$",o.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-2 bg-amber-50 -mx-2 px-2 rounded",children:[e.jsx("span",{className:"text-amber-800 font-semibold",children:"Net Premium Cost"}),e.jsxs("span",{className:"font-mono font-bold text-amber-800",children:["$",i.toLocaleString()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Indemnity Payments"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Total Indemnity"}),e.jsxs("span",{className:"font-mono font-semibold text-green-700",children:["$",h.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Head Covered"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:b})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Policies"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:s.length})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"LRP Net Payout"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`rounded-lg p-4 ${x>=0?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"}`,children:[e.jsx("div",{className:`text-sm font-medium ${x>=0?"text-green-700":"text-red-700"}`,children:x>=0?"Payout":"Cost"}),e.jsxs("div",{className:`text-3xl font-bold font-mono ${x>=0?"text-green-800":"text-red-800"}`,children:["$",Math.abs(x).toLocaleString()]}),e.jsxs("div",{className:`text-xs mt-1 ${x>=0?"text-green-600":"text-red-600"}`,children:["$",h.toLocaleString()," indemnity - $",i.toLocaleString()," premiums"]})]}),e.jsxs("div",{className:`rounded-lg p-4 ${x>=0?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"}`,children:[e.jsxs("div",{className:`text-sm font-medium ${x>=0?"text-green-700":"text-red-700"}`,children:[x>=0?"Payout":"Cost","/Head"]}),e.jsxs("div",{className:`text-3xl font-bold font-mono ${x>=0?"text-green-800":"text-red-800"}`,children:["$",b>0?Math.abs(x/b).toFixed(2):"0.00"]}),e.jsxs("div",{className:`text-xs mt-1 ${x>=0?"text-green-600":"text-red-600"}`,children:["Payout  ",b," head"]})]})]})]})]})})]})})()]}),kt==="closeouts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cattle Closeouts"}),e.jsx("p",{className:"text-gray-600",children:"Record actual results when lots are sold"})]}),e.jsxs("button",{onClick:()=>{const s=`closeout-${Date.now()}`;Be(n=>[...n,{id:s,linkedLotId:"",linkedLRPPolicies:[],lotName:`Closeout ${n.length+1}`,cattleType:"Steers",headPurchased:0,purchaseDate:"",purchaseWeight:0,purchasePrice:0,headSold:0,saleDate:"",saleWeight:0,salePrice:0,headDied:0,totalFeedCost:0,totalYardageCost:0,totalVetHealth:0,totalFreightIn:0,totalFreightOut:0,totalCommission:0,totalInterest:0,totalOtherCosts:0,lrpPremiumCost:0,lrpIndemnity:0}])},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Closeout"]})]}),Ie.map((s,n)=>{const o=s.headPurchased*s.purchaseWeight*s.purchasePrice,i=s.headSold*s.saleWeight*s.salePrice,h=s.headPurchased>0?s.headDied/s.headPurchased*100:0;let b=0;if(s.purchaseDate&&s.saleDate){const L=new Date(s.purchaseDate),D=new Date(s.saleDate);b=Math.round((D-L)/(1e3*60*60*24))}const x=s.saleWeight-s.purchaseWeight,f=b>0?x/b:0,d=o+s.totalFeedCost+s.totalYardageCost+s.totalVetHealth+s.totalFreightIn+s.totalFreightOut+s.totalCommission+s.totalInterest+s.totalOtherCosts+(s.lrpPremiumCost||0),u=i+(s.lrpIndemnity||0),j=u-d,g=s.headPurchased>0?j/s.headPurchased:0,m=s.headSold*x,p=m>0?(d-o)/m:0,C=s.headSold*s.saleWeight,N=C>0?d/C:0,k=L=>!L&&L!==0?"$0.00":"$"+parseFloat(L).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),P=({value:L,onChange:D,decimals:F=2})=>{const[v,S]=Jt.useState(!1),[E,I]=Jt.useState(""),H=v?E:L?"$"+parseFloat(L).toLocaleString("en-US",{minimumFractionDigits:F,maximumFractionDigits:F}):"";return e.jsx("input",{type:"text",value:H,onFocus:Y=>{S(!0),I(L?String(L):"")},onBlur:Y=>{S(!1);const _=parseFloat(E.replace(/[$,%]/g,"").replace(/,/g,""))||0;D(_)},onChange:Y=>I(Y.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})},A=(L,D)=>{Be(F=>F.map(v=>v.id===s.id?{...v,[L]:D}:v))},R=fe.find(L=>L.id===s.linkedLotId);return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ge,{className:"w-6 h-6"}),e.jsx("input",{type:"text",value:s.lotName,onChange:L=>A("lotName",L.target.value),className:"bg-transparent border-b border-white/50 text-xl font-bold focus:outline-none focus:border-white"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:s.linkedLotId||"",onChange:L=>{const D=L.target.value;if(A("linkedLotId",D),D){const F=fe.find(v=>v.id===D);if(F){const v=F.projectedSaleWeight-F.purchaseWeight,S=F.avgDailyGain>0?Math.round(v/F.avgDailyGain):0,E=Math.round(F.headCount*(1-F.deathLossPercent/100)),I=F.headCount-E;let H="";if(F.purchaseDate&&S>0){const Le=new Date(F.purchaseDate);Le.setDate(Le.getDate()+S),H=Le.toISOString().split("T")[0]}const Y=F.headCount*S*F.feedCostPerDay,_=F.headCount*S*F.yardageCostPerDay,K=F.headCount*F.vetHealthPerHead,re=F.headCount*F.freightInPerHead,he=E*F.freightOutPerHead,U=E*F.commissionPerHead,V=F.purchaseWeight*F.purchasePrice*(F.interestRate/100)*(S/365),q=F.headCount*V,X=F.headCount*F.otherCostsPerHead,se=st.filter(Le=>Le.linkedLotId===D),le=se.map(Le=>String(Le.id));let ke=0;se.forEach(Le=>{const $e=parseFloat(Le.headCount)||0,qe=parseFloat(Le.subsidizedPremiumPerHead)||0;ke+=$e*qe}),Be(Le=>Le.map($e=>$e.id===s.id?{...$e,linkedLotId:D,linkedLRPPolicies:le,lotName:F.lotName+" (Closeout)",cattleType:F.cattleType,headPurchased:F.headCount,purchaseDate:F.purchaseDate,purchaseWeight:F.purchaseWeight,purchasePrice:F.purchasePrice,headSold:E,saleDate:H,saleWeight:F.projectedSaleWeight,salePrice:F.projectedSalePrice,headDied:I,totalFeedCost:Y,totalYardageCost:_,totalVetHealth:K,totalFreightIn:re,totalFreightOut:he,totalCommission:U,totalInterest:q,totalOtherCosts:X,lrpPremiumCost:ke,lrpIndemnity:0}:$e))}}},className:"bg-white/20 text-white border border-white/30 rounded px-3 py-1 text-sm",children:[e.jsx("option",{value:"",className:"text-gray-800",children:"Link to Projection..."}),fe.map(L=>e.jsx("option",{value:L.id,className:"text-gray-800",children:L.lotName},L.id))]}),e.jsx("button",{onClick:()=>{window.confirm("Delete this closeout?")&&Be(L=>L.filter(D=>D.id!==s.id))},className:"p-2 hover:bg-green-800 rounded",children:e.jsx(ot,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(_h,{className:"w-5 h-5 text-red-600"}),"Actual Purchase"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Cattle Type"}),e.jsxs("select",{value:s.cattleType,onChange:L=>A("cattleType",L.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm",children:[e.jsx("option",{value:"Steers",children:"Steers"}),e.jsx("option",{value:"Heifers",children:"Heifers"}),e.jsx("option",{value:"Mixed",children:"Mixed"}),e.jsx("option",{value:"Holstein Steers",children:"Holstein Steers"}),e.jsx("option",{value:"Dairy Cross",children:"Dairy Cross"}),e.jsx("option",{value:"Feeding Cows",children:"Feeding Cows"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Head Purchased"}),e.jsx("input",{type:"number",value:s.headPurchased||"",onChange:L=>A("headPurchased",parseInt(L.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Purchase Date"}),e.jsx("input",{type:"date",value:s.purchaseDate,onChange:L=>A("purchaseDate",L.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Purchase Wt (lbs)"}),e.jsx("input",{type:"number",value:s.purchaseWeight||"",onChange:L=>A("purchaseWeight",parseFloat(L.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Purchase $/lb"}),e.jsx(P,{value:s.purchasePrice,onChange:L=>A("purchasePrice",L),decimals:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Cost/Head"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:k(s.purchaseWeight*s.purchasePrice)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Total Purchase"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:k(o)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5 text-green-600"}),"Actual Sale"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Head Sold"}),e.jsx("input",{type:"number",value:s.headSold||"",onChange:L=>A("headSold",parseInt(L.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Sale Date"}),e.jsx("input",{type:"date",value:s.saleDate,onChange:L=>A("saleDate",L.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Sale Weight (lbs)"}),e.jsx("input",{type:"number",value:s.saleWeight||"",onChange:L=>A("saleWeight",parseFloat(L.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Sale Price $/lb"}),e.jsx(P,{value:s.salePrice,onChange:L=>A("salePrice",L),decimals:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Revenue/Head"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:k(s.saleWeight*s.salePrice)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Total Lbs Sold"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:C.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Total Revenue"}),e.jsx("div",{className:"px-3 py-2 bg-green-100 rounded-lg text-sm text-right font-mono font-semibold text-green-700",children:k(i)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-600"}),"Death Loss & Performance"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Head Died"}),e.jsx("input",{type:"number",value:s.headDied||"",onChange:L=>A("headDied",parseInt(L.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Death Loss %"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:[h.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Days on Feed"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Total Gain/Head"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:[x.toLocaleString()," lbs"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Avg Daily Gain"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:[f.toFixed(2)," lbs"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Total Lbs Gained"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-mono font-semibold",children:m.toLocaleString()})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5 text-orange-600"}),"Actual Costs (Total Amounts)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Feed Cost"}),e.jsx(P,{value:s.totalFeedCost,onChange:L=>A("totalFeedCost",L)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Yardage"}),e.jsx(P,{value:s.totalYardageCost,onChange:L=>A("totalYardageCost",L)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Vet/Health"}),e.jsx(P,{value:s.totalVetHealth,onChange:L=>A("totalVetHealth",L)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Freight In"}),e.jsx(P,{value:s.totalFreightIn,onChange:L=>A("totalFreightIn",L)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Freight Out"}),e.jsx(P,{value:s.totalFreightOut,onChange:L=>A("totalFreightOut",L)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Commission"}),e.jsx(P,{value:s.totalCommission,onChange:L=>A("totalCommission",L)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Interest"}),e.jsx(P,{value:s.totalInterest,onChange:L=>A("totalInterest",L)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Other Costs"}),e.jsx(P,{value:s.totalOtherCosts,onChange:L=>A("totalOtherCosts",L)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5 text-blue-600"}),"LRP Insurance",(()=>{const L=st.filter(D=>D.linkedLotId===s.linkedLotId);return L.length>0?e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full ml-2",children:[L.length," linked ",L.length===1?"policy":"policies"]}):null})()]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("label",{className:"text-sm font-medium text-blue-700",children:"Link LRP Policy:"}),e.jsxs("select",{className:"px-3 py-1.5 border border-blue-300 rounded-lg text-sm bg-white",value:"",onChange:L=>{const D=L.target.value;if(D){const F=st.find(v=>String(v.id)===D);if(F){const v=parseFloat(F.headCount)||0,S=parseFloat(F.subsidizedPremiumPerHead)||0,I=(parseFloat(F.expectedEndValue)||0)*(parseFloat(F.coverageLevel)||100)/100*(parseFloat(F.targetWeight)||0),H=(parseFloat(F.actualPrice)||0)*(parseFloat(F.targetWeight)||0),Y=Math.max(0,I-H),_=(s.lrpPremiumCost||0)+v*S,K=(s.lrpIndemnity||0)+v*Y;Be(re=>re.map(he=>he.id===s.id?{...he,lrpPremiumCost:_,lrpIndemnity:K,linkedLRPPolicies:[...he.linkedLRPPolicies||[],D]}:he))}}},children:[e.jsx("option",{value:"",children:"Select policy to add..."}),st.map(L=>e.jsxs("option",{value:L.id,disabled:(s.linkedLRPPolicies||[]).includes(String(L.id)),children:[L.description||`Policy ${L.id}`," - ",L.headCount||0," head"]},L.id))]}),e.jsx("button",{onClick:()=>{const L=s.linkedLRPPolicies||[];let D=0,F=0;L.forEach(v=>{const S=st.find(E=>String(E.id)===v);if(S){const E=parseFloat(S.headCount)||0,I=parseFloat(S.subsidizedPremiumPerHead)||0,Y=(parseFloat(S.expectedEndValue)||0)*(parseFloat(S.coverageLevel)||100)/100*(parseFloat(S.targetWeight)||0),_=(parseFloat(S.actualPrice)||0)*(parseFloat(S.targetWeight)||0),K=Math.max(0,Y-_);D+=E*I,F+=E*K}}),Be(v=>v.map(S=>S.id===s.id?{...S,lrpPremiumCost:D,lrpIndemnity:F}:S))},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:"Refresh from Policies"})]}),(s.linkedLRPPolicies||[]).length>0&&e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-700",children:"Linked Policies:"}),(s.linkedLRPPolicies||[]).map(L=>{const D=st.find(K=>String(K.id)===L);if(!D)return null;const F=parseFloat(D.headCount)||0,v=parseFloat(D.subsidizedPremiumPerHead)||0,E=(parseFloat(D.expectedEndValue)||0)*(parseFloat(D.coverageLevel)||100)/100*(parseFloat(D.targetWeight)||0),I=(parseFloat(D.actualPrice)||0)*(parseFloat(D.targetWeight)||0),H=Math.max(0,E-I),Y=F*v,_=F*H;return e.jsxs("div",{className:"flex items-center justify-between text-xs bg-white p-2 rounded border border-blue-200",children:[e.jsxs("span",{className:"text-blue-700",children:[D.description||`Policy ${L}`," (",F," head)"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-mono text-gray-600",children:["Premium: $",Y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("span",{className:"font-mono text-green-600",children:["Indemnity: $",_.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("button",{onClick:()=>{const K=(s.linkedLRPPolicies||[]).filter(U=>U!==L);let re=0,he=0;K.forEach(U=>{const V=st.find(q=>String(q.id)===U);if(V){const q=parseFloat(V.headCount)||0,X=parseFloat(V.subsidizedPremiumPerHead)||0,le=(parseFloat(V.expectedEndValue)||0)*(parseFloat(V.coverageLevel)||100)/100*(parseFloat(V.targetWeight)||0),ke=(parseFloat(V.actualPrice)||0)*(parseFloat(V.targetWeight)||0),Le=Math.max(0,le-ke);re+=q*X,he+=q*Le}}),Be(U=>U.map(V=>V.id===s.id?{...V,linkedLRPPolicies:K,lrpPremiumCost:re,lrpIndemnity:he}:V))},className:"text-red-500 hover:text-red-700",children:e.jsx(ot,{className:"w-3 h-3"})})]})]},L)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"LRP Premium Cost"}),e.jsx(P,{value:s.lrpPremiumCost||0,onChange:L=>A("lrpPremiumCost",L)}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Added to costs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"LRP Indemnity"}),e.jsx(P,{value:s.lrpIndemnity||0,onChange:L=>A("lrpIndemnity",L)}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Added to revenue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"LRP Net Benefit"}),e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm text-right font-mono font-semibold ${(s.lrpIndemnity||0)-(s.lrpPremiumCost||0)>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:k((s.lrpIndemnity||0)-(s.lrpPremiumCost||0))}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Indemnity - Premium"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"LRP Net/Head"}),e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm text-right font-mono font-semibold ${(s.lrpIndemnity||0)-(s.lrpPremiumCost||0)>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:k(s.headPurchased>0?((s.lrpIndemnity||0)-(s.lrpPremiumCost||0))/s.headPurchased:0)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ur,{className:"w-5 h-5 text-blue-600"}),"Closeout Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Costs"}),e.jsx("div",{className:"text-xl font-bold font-mono text-red-600",children:k(d)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[k(s.headPurchased>0?d/s.headPurchased:0),"/head"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Revenue"}),e.jsx("div",{className:"text-xl font-bold font-mono text-green-600",children:k(u)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[k(s.headPurchased>0?u/s.headPurchased:0),"/head"]}),(s.lrpIndemnity||0)>0&&e.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["Includes $",(s.lrpIndemnity||0).toLocaleString()," LRP"]})]}),e.jsxs("div",{className:`rounded-lg p-4 shadow-sm ${j>=0?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Net Profit/Loss"}),e.jsx("div",{className:`text-xl font-bold font-mono ${j>=0?"text-green-700":"text-red-700"}`,children:k(j)}),e.jsxs("div",{className:`text-xs mt-1 ${j>=0?"text-green-600":"text-red-600"}`,children:[k(g),"/head"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cost of Gain"}),e.jsxs("div",{className:"text-xl font-bold font-mono text-blue-600",children:["$",p.toFixed(4),"/lb"]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Break-even: $",N.toFixed(4),"/lb"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 lg:grid-cols-10 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Purchase"}),e.jsx("div",{className:"font-mono font-semibold",children:k(o)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Feed"}),e.jsx("div",{className:"font-mono font-semibold",children:k(s.totalFeedCost)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Yardage"}),e.jsx("div",{className:"font-mono font-semibold",children:k(s.totalYardageCost)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Vet/Health"}),e.jsx("div",{className:"font-mono font-semibold",children:k(s.totalVetHealth)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Freight In"}),e.jsx("div",{className:"font-mono font-semibold",children:k(s.totalFreightIn)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Freight Out"}),e.jsx("div",{className:"font-mono font-semibold",children:k(s.totalFreightOut)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Commission"}),e.jsx("div",{className:"font-mono font-semibold",children:k(s.totalCommission)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Interest"}),e.jsx("div",{className:"font-mono font-semibold",children:k(s.totalInterest)})]}),e.jsxs("div",{className:"bg-white rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Other"}),e.jsx("div",{className:"font-mono font-semibold",children:k(s.totalOtherCosts)})]}),e.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600",children:"LRP Premium"}),e.jsx("div",{className:"font-mono font-semibold text-blue-700",children:k(s.lrpPremiumCost||0)})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-green-50 rounded p-2 text-center border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600",children:"Cattle Sales"}),e.jsx("div",{className:"font-mono font-semibold text-green-700",children:k(i)})]}),e.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600",children:"LRP Indemnity"}),e.jsx("div",{className:"font-mono font-semibold text-blue-700",children:k(s.lrpIndemnity||0)})]}),e.jsxs("div",{className:"bg-green-100 rounded p-2 text-center border border-green-300",children:[e.jsx("div",{className:"text-xs text-green-700 font-semibold",children:"Total Revenue"}),e.jsx("div",{className:"font-mono font-bold text-green-800",children:k(u)})]})]})]}),R&&e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-800 mb-4 flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5"}),"Comparison to Projection: ",R.lotName]}),(()=>{const L=R.projectedSaleWeight-R.purchaseWeight,D=R.avgDailyGain>0?Math.round(L/R.avgDailyGain):0,F=Math.round(R.headCount*(1-R.deathLossPercent/100)),v=R.headCount*R.purchaseWeight*R.purchasePrice,S=R.headCount*D*R.feedCostPerDay,E=R.headCount*D*R.yardageCostPerDay,I=R.headCount*R.vetHealthPerHead,H=R.headCount*R.freightInPerHead,Y=F*R.freightOutPerHead,_=F*R.commissionPerHead,K=R.purchaseWeight*R.purchasePrice*(R.interestRate/100)*(D/365),re=R.headCount*K,he=R.headCount*R.otherCostsPerHead,U=v+S+E+I+H+Y+_+re+he,V=F*R.projectedSaleWeight*R.projectedSalePrice,q=V-U,se=((le,ke)=>{const Le=le-ke;return{diff:Le,percent:ke!==0?Le/ke*100:0}})(j,q);return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-blue-200",children:[e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-blue-800",children:"Metric"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-blue-800",children:"Projected"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-blue-800",children:"Actual"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-blue-800",children:"Variance"})]})}),e.jsxs("tbody",{className:"divide-y divide-blue-100",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-3",children:"Head Purchased"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:R.headCount}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:s.headPurchased}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:s.headPurchased-R.headCount})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-3",children:"Head Sold"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:F}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:s.headSold}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:s.headSold-F})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-3",children:"Days on Feed"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:D}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:b}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:b-D})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-3",children:"Sale Weight"}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:[R.projectedSaleWeight," lbs"]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:[s.saleWeight," lbs"]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:[s.saleWeight-R.projectedSaleWeight," lbs"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-3",children:"Sale Price"}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",R.projectedSalePrice.toFixed(4)]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",s.salePrice.toFixed(4)]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",(s.salePrice-R.projectedSalePrice).toFixed(4)]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-3",children:"Total Costs"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:k(U)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:k(d)}),e.jsx("td",{className:`py-2 px-3 text-right font-mono ${d>U?"text-red-600":"text-green-600"}`,children:k(d-U)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-3",children:"Cattle Sales"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:k(V)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:k(i)}),e.jsx("td",{className:`py-2 px-3 text-right font-mono ${i>V?"text-green-600":"text-red-600"}`,children:k(i-V)})]}),((s.lrpIndemnity||0)>0||(s.lrpPremiumCost||0)>0)&&e.jsxs("tr",{className:"bg-blue-100/50",children:[e.jsx("td",{className:"py-2 px-3",children:"LRP Net (Indemnity - Premium)"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-400",children:"-"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-blue-600",children:k((s.lrpIndemnity||0)-(s.lrpPremiumCost||0))}),e.jsx("td",{className:`py-2 px-3 text-right font-mono ${(s.lrpIndemnity||0)-(s.lrpPremiumCost||0)>=0?"text-green-600":"text-red-600"}`,children:k((s.lrpIndemnity||0)-(s.lrpPremiumCost||0))})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-3 font-semibold",children:"Total Revenue"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold",children:k(V)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold",children:k(u)}),e.jsx("td",{className:`py-2 px-3 text-right font-mono font-semibold ${u>V?"text-green-600":"text-red-600"}`,children:k(u-V)})]}),e.jsxs("tr",{className:"bg-blue-100 font-bold",children:[e.jsx("td",{className:"py-2 px-3",children:"Net Profit"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:k(q)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:k(j)}),e.jsxs("td",{className:`py-2 px-3 text-right font-mono ${se.diff>=0?"text-green-600":"text-red-600"}`,children:[k(se.diff)," (",se.percent>=0?"+":"",se.percent.toFixed(1),"%)"]})]})]})]})})})()]})]})]},s.id)}),Ie.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx(Ge,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"No Closeouts Recorded"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Add a closeout when you sell a lot to record actual results."}),e.jsxs("button",{onClick:()=>{const s=`closeout-${Date.now()}`;Be([{id:s,linkedLotId:"",lotName:"Closeout 1",cattleType:"Steers",headPurchased:0,purchaseDate:"",purchaseWeight:0,purchasePrice:0,headSold:0,saleDate:"",saleWeight:0,salePrice:0,headDied:0,totalFeedCost:0,totalYardageCost:0,totalVetHealth:0,totalFreightIn:0,totalFreightOut:0,totalCommission:0,totalInterest:0,totalOtherCosts:0}])},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 inline-flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Create First Closeout"]})]})]}),kt==="analysis"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cattle Feeding Analysis"}),e.jsx("p",{className:"text-gray-600",children:"Profit & Loss summary from actual closeouts"})]})}),Ie.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx(bt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"No Closeout Data"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Complete closeouts in the Closeouts tab to see P&L analysis."}),e.jsx("button",{onClick:()=>ht("closeouts"),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Go to Closeouts"})]}):(()=>{const s=U=>!U&&U!==0?"$0.00":"$"+parseFloat(U).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let n=0,o=0,i=0,h=0,b=0,x=0,f=0,d=0,u=0,j=0,g=0,m=0,p=0,C=0,N=0,k=0,P=0,A=0,R=0;const L={};Ie.forEach(U=>{const V=U.headPurchased*U.purchaseWeight*U.purchasePrice,q=U.headSold*U.saleWeight*U.salePrice;let X=0;if(U.purchaseDate&&U.saleDate){const Le=new Date(U.purchaseDate),$e=new Date(U.saleDate);X=Math.round(($e-Le)/(1e3*60*60*24))}n+=U.headPurchased||0,o+=U.headSold||0,i+=U.headDied||0,h+=V,b+=q,x+=U.totalFeedCost||0,f+=U.totalYardageCost||0,d+=U.totalVetHealth||0,u+=U.totalFreightIn||0,j+=U.totalFreightOut||0,g+=U.totalCommission||0,m+=U.totalInterest||0,p+=U.totalOtherCosts||0,C+=U.lrpPremiumCost||0,N+=U.lrpIndemnity||0,k+=(U.headPurchased||0)*(U.purchaseWeight||0),P+=(U.headSold||0)*(U.saleWeight||0),A+=X,R++;const se=U.cattleType||"Unknown";L[se]||(L[se]={headPurchased:0,headSold:0,purchaseCost:0,saleRevenue:0,totalCosts:0,netProfit:0,lots:0,lrpIndemnity:0});const le=V+(U.totalFeedCost||0)+(U.totalYardageCost||0)+(U.totalVetHealth||0)+(U.totalFreightIn||0)+(U.totalFreightOut||0)+(U.totalCommission||0)+(U.totalInterest||0)+(U.totalOtherCosts||0)+(U.lrpPremiumCost||0),ke=q+(U.lrpIndemnity||0);L[se].headPurchased+=U.headPurchased||0,L[se].headSold+=U.headSold||0,L[se].purchaseCost+=V,L[se].saleRevenue+=q,L[se].totalCosts+=le,L[se].netProfit+=ke-le,L[se].lrpIndemnity+=U.lrpIndemnity||0,L[se].lots++});const D=x+f+d+u+j+g+m+p+C,F=h+D,v=b+N,S=b-h,E=v-F,I=n>0?i/n*100:0,H=R>0?A/R:0,Y=P-k+i*(k/(n||1)),_=Y>0?D/Y:0,K=P>0?F/P:0,re=n>0?E/n:0,he=F>0?E/F*100:0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-5",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Head Marketed"}),e.jsx("div",{className:"text-3xl font-bold text-gray-800",children:o.toLocaleString()}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["of ",n.toLocaleString()," purchased"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-5",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Revenue"}),e.jsx("div",{className:"text-3xl font-bold text-green-600",children:s(v)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[s(n>0?v/n:0),"/head"]}),N>0&&e.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["Includes $",N.toLocaleString()," LRP"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-5",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Costs"}),e.jsx("div",{className:"text-3xl font-bold text-red-600",children:s(F)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[s(n>0?F/n:0),"/head"]}),C>0&&e.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["Includes $",C.toLocaleString()," LRP"]})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 ${E>=0?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Net Profit/Loss"}),e.jsx("div",{className:`text-3xl font-bold ${E>=0?"text-green-700":"text-red-700"}`,children:s(E)}),e.jsxs("div",{className:`text-xs mt-1 ${E>=0?"text-green-600":"text-red-600"}`,children:[s(re),"/head"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-700 to-gray-800 text-white px-6 py-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Profit & Loss Statement"}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["Summary of all ",Ie.length," closeout(s)"]})]}),e.jsx("div",{className:"p-6",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.jsx("tr",{className:"bg-green-50",children:e.jsx("td",{colSpan:"3",className:"px-4 py-3 font-bold text-green-800 text-lg",children:"REVENUE"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Cattle Sales"}),e.jsxs("td",{className:"px-4 py-2 text-right font-mono",children:[P.toLocaleString()," lbs"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono font-semibold text-green-600",children:s(b)})]}),N>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"LRP Indemnity"}),e.jsx("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:"Insurance proceeds"}),e.jsx("td",{className:"px-4 py-2 text-right font-mono font-semibold text-blue-600",children:s(N)})]}),e.jsxs("tr",{className:"bg-green-100 font-bold",children:[e.jsx("td",{className:"px-4 py-3",children:"Total Revenue"}),e.jsx("td",{}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-green-700",children:s(v)})]}),e.jsx("tr",{className:"bg-orange-50",children:e.jsx("td",{colSpan:"3",className:"px-4 py-3 font-bold text-orange-800 text-lg",children:"COST OF CATTLE PURCHASED"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Cattle Purchases"}),e.jsxs("td",{className:"px-4 py-2 text-right font-mono",children:[n.toLocaleString()," head @ ",k.toLocaleString()," lbs"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono text-red-600",children:s(h)})]}),e.jsxs("tr",{className:"bg-orange-100 font-bold",children:[e.jsx("td",{className:"px-4 py-3",children:"Gross Profit"}),e.jsx("td",{}),e.jsx("td",{className:`px-4 py-3 text-right font-mono ${S>=0?"text-green-700":"text-red-700"}`,children:s(S)})]}),e.jsx("tr",{className:"bg-red-50",children:e.jsx("td",{colSpan:"3",className:"px-4 py-3 font-bold text-red-800 text-lg",children:"OPERATING EXPENSES"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Feed"}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:[s(n>0?x/n:0),"/head"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:s(x)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Yardage"}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:[s(n>0?f/n:0),"/head"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:s(f)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Vet & Health"}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:[s(n>0?d/n:0),"/head"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:s(d)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Freight In"}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:[s(n>0?u/n:0),"/head"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:s(u)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Freight Out"}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:[s(o>0?j/o:0),"/head"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:s(j)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Commission"}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:[s(o>0?g/o:0),"/head"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:s(g)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Interest"}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:[s(n>0?m/n:0),"/head"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:s(m)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"Other Costs"}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:[s(n>0?p/n:0),"/head"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:s(p)})]}),C>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:"LRP Premium"}),e.jsxs("td",{className:"px-4 py-2 text-right text-xs text-gray-500",children:[s(n>0?C/n:0),"/head"]}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:s(C)})]}),e.jsxs("tr",{className:"bg-red-100 font-bold",children:[e.jsx("td",{className:"px-4 py-3",children:"Total Operating Expenses"}),e.jsxs("td",{className:"px-4 py-3 text-right text-sm",children:[s(n>0?D/n:0),"/head"]}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-red-700",children:s(D)})]}),e.jsxs("tr",{className:`${E>=0?"bg-green-200":"bg-red-200"}`,children:[e.jsx("td",{className:"px-4 py-4 font-bold text-xl",children:"NET PROFIT / (LOSS)"}),e.jsxs("td",{className:"px-4 py-4 text-right font-semibold",children:[s(re),"/head"]}),e.jsx("td",{className:`px-4 py-4 text-right font-mono font-bold text-xl ${E>=0?"text-green-800":"text-red-800"}`,children:s(E)})]})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-600"}),"Key Performance Metrics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Death Loss"}),e.jsxs("div",{className:`text-2xl font-bold ${I>2?"text-red-600":"text-green-600"}`,children:[I.toFixed(2),"%"]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[i," head"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Avg Days on Feed"}),e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Math.round(H)}),e.jsx("div",{className:"text-xs text-gray-400",children:"days"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cost of Gain"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",_.toFixed(4)]}),e.jsx("div",{className:"text-xs text-gray-400",children:"per lb"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Break-even Price"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",K.toFixed(4)]}),e.jsx("div",{className:"text-xs text-gray-400",children:"per lb"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Return on Investment"}),e.jsxs("div",{className:`text-2xl font-bold ${he>=0?"text-green-600":"text-red-600"}`,children:[he.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-gray-400",children:"ROI"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Lots Closed"}),e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Ie.length}),e.jsx("div",{className:"text-xs text-gray-400",children:"closeouts"})]})]})]}),Object.keys(L).length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-600 to-amber-700 text-white px-6 py-4",children:e.jsx("h3",{className:"text-lg font-bold",children:"Performance by Cattle Type"})}),e.jsx("div",{className:"p-6 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Cattle Type"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"Lots"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"Head Purchased"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"Head Sold"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"Total Revenue"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"Total Costs"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"Net Profit"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"$/Head"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:Object.entries(L).map(([U,V])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium",children:U}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:V.lots}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:V.headPurchased.toLocaleString()}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:V.headSold.toLocaleString()}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-600",children:s(V.saleRevenue)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-red-600",children:s(V.totalCosts)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono font-semibold ${V.netProfit>=0?"text-green-700":"text-red-700"}`,children:s(V.netProfit)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono ${V.netProfit>=0?"text-green-600":"text-red-600"}`,children:s(V.headPurchased>0?V.netProfit/V.headPurchased:0)})]},U))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-bold",children:[e.jsx("td",{className:"py-3 px-4",children:"TOTAL"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:Ie.length}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:n.toLocaleString()}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:o.toLocaleString()}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700",children:s(b)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-red-700",children:s(F)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono ${E>=0?"text-green-800":"text-red-800"}`,children:s(E)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono ${re>=0?"text-green-700":"text-red-700"}`,children:s(re)})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4",children:e.jsx("h3",{className:"text-lg font-bold",children:"Individual Lot Performance"})}),e.jsx("div",{className:"p-6 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-3 font-semibold",children:"Lot Name"}),e.jsx("th",{className:"text-left py-3 px-3 font-semibold",children:"Type"}),e.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Head"}),e.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Days"}),e.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"In Wt"}),e.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Out Wt"}),e.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"ADG"}),e.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Revenue"}),e.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Costs"}),e.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Net P/L"}),e.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"$/Head"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:Ie.map(U=>{const V=U.headPurchased*U.purchaseWeight*U.purchasePrice,q=U.headSold*U.saleWeight*U.salePrice,X=V+(U.totalFeedCost||0)+(U.totalYardageCost||0)+(U.totalVetHealth||0)+(U.totalFreightIn||0)+(U.totalFreightOut||0)+(U.totalCommission||0)+(U.totalInterest||0)+(U.totalOtherCosts||0)+(U.lrpPremiumCost||0),se=q+(U.lrpIndemnity||0),le=se-X,ke=U.headPurchased>0?le/U.headPurchased:0;let Le=0;if(U.purchaseDate&&U.saleDate){const et=new Date(U.purchaseDate),oe=new Date(U.saleDate);Le=Math.round((oe-et)/(1e3*60*60*24))}const $e=U.saleWeight-U.purchaseWeight,qe=Le>0?$e/Le:0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-3 font-medium",children:U.lotName}),e.jsx("td",{className:"py-3 px-3 text-gray-600",children:U.cattleType}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:U.headPurchased}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:Le}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:U.purchaseWeight}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:U.saleWeight}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:qe.toFixed(2)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-600",children:s(se)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-600",children:s(X)}),e.jsx("td",{className:`py-3 px-3 text-right font-mono font-semibold ${le>=0?"text-green-700":"text-red-700"}`,children:s(le)}),e.jsx("td",{className:`py-3 px-3 text-right font-mono ${ke>=0?"text-green-600":"text-red-600"}`,children:s(ke)})]},U.id)})})]})})]})]})})()]})]})]}),ct==="dairy"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"beginning",label:"Beginning",icon:Yn},{id:"livestockSales",label:"Livestock Sales",icon:er},{id:"revenue",label:"Milk Revenue",icon:vt},{id:"expenses",label:"Expenses",icon:Ot},{id:"summary",label:"Summary",icon:lt}].map(s=>e.jsxs("button",{onClick:()=>kl(s.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${ns===s.id?"border-sky-600 text-sky-700 bg-sky-50":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),ns==="beginning"&&e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ic,{className:"w-6 h-6 text-sky-600"}),"Dairy  Size & Scope"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enter monthly herd inventory and production metrics to establish the size and scope of the dairy operation."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-sky-100 text-sky-800 px-4 py-3 font-bold border-b border-sky-200 flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5"}),"Monthly Herd Inventory"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-sky-50 text-sky-800 border-b border-sky-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-sky-50 z-10 w-44",children:"Category"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-20",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-sky-100 w-20",children:"Average"})]})}),e.jsxs("tbody",{children:[[{key:"milkingCows",label:"Milking Cows",color:"text-sky-700",bgLabel:"bg-sky-50"},{key:"dryCows",label:"Dry Cows",color:"text-sky-700",bgLabel:"bg-sky-50"},{key:"bredHeifers",label:"Bred Heifers",color:"text-amber-700",bgLabel:"bg-amber-50"},{key:"openHeifers",label:"Open Heifers",color:"text-amber-700",bgLabel:"bg-amber-50"},{key:"calves",label:"Calves (0-12 mo)",color:"text-green-700",bgLabel:"bg-green-50"},{key:"bulls",label:"Bulls",color:"text-gray-700",bgLabel:"bg-gray-50"}].map((s,n)=>{var u;const o=((u=r==null?void 0:r.cashFlow)==null?void 0:u.dairy)||{},i=o.herd||{},h=i[s.key]||{},b=[1,2,3,4,5,6,7,8,9,10,11,12],f=b.map(j=>parseInt(h[j])||0).filter(j=>j>0),d=f.length>0?f.reduce((j,g)=>j+g,0)/f.length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:`py-1.5 px-3 font-semibold ${s.color} ${s.bgLabel} sticky left-0 z-10 text-sm`,children:s.label}),b.map(j=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:h[j]||"",onChange:g=>{const m=g.target.value.replace(/[^0-9]/g,""),p={...i};p[s.key]||(p[s.key]={}),p[s.key]={...p[s.key],[j]:parseInt(m)||0},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,herd:p}}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-sky-400 focus:ring-1 focus:ring-sky-200 outline-none",placeholder:"0"})},j)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-sky-800 bg-sky-50 font-mono text-sm",children:d>0?Math.round(d).toLocaleString():""})]},s.key)}),(()=>{var f;const n=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).herd||{},o=["milkingCows","dryCows","bredHeifers","openHeifers","calves","bulls"],h=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>o.reduce((u,j)=>u+(parseFloat((n[j]||{})[d])||0),0)),b=h.filter(d=>d>0),x=b.length>0?b.reduce((d,u)=>d+u,0)/b.length:0;return e.jsxs("tr",{className:"bg-sky-100 border-t-2 border-sky-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-sky-800 sticky left-0 bg-sky-100 z-10 text-sm",children:"Total Herd"}),h.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-sky-800 font-mono text-sm",children:d>0?d.toLocaleString():""},u)),e.jsx("td",{className:"py-2 px-2 text-center text-sky-900 font-mono bg-sky-200 text-sm",children:x>0?Math.round(x).toLocaleString():""})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-green-100 text-green-800 px-4 py-3 font-bold border-b border-green-200 flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5"}),"Monthly Production Metrics"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-green-50 text-green-800 border-b border-green-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-green-50 z-10 w-44",children:"Metric"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-20",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-green-100 w-20",children:"Average"})]})}),e.jsxs("tbody",{children:[[{key:"avgDailyProduction",label:"Avg Production (lbs/cow/day)",unit:"",decimals:1},{key:"totalMilkShipped",label:"Total Milk Shipped (lbs)",unit:"",decimals:0},{key:"butterfatPct",label:"Butterfat %",unit:"%",decimals:2},{key:"proteinPct",label:"Protein %",unit:"%",decimals:2},{key:"otherSolidsPct",label:"Other Solids %",unit:"%",decimals:2},{key:"scc",label:"SCC (x1,000)",unit:"",decimals:0}].map((s,n)=>{var u;const o=((u=r==null?void 0:r.cashFlow)==null?void 0:u.dairy)||{},i=o.production||{},h=i[s.key]||{},b=[1,2,3,4,5,6,7,8,9,10,11,12],f=b.map(j=>parseFloat(h[j])||0).filter(j=>j>0),d=f.length>0?f.reduce((j,g)=>j+g,0)/f.length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-green-700 bg-green-50 sticky left-0 z-10 text-sm",children:s.label}),b.map(j=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:h[j]||"",onChange:g=>{const m=g.target.value;if(m===""||/^[0-9]*\.?[0-9]*$/.test(m)){const p={...i};p[s.key]||(p[s.key]={}),p[s.key]={...p[s.key],[j]:m===""?0:m.endsWith(".")?m:parseFloat(m)||0},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,production:p}}})}},onBlur:g=>{const m=parseFloat(g.target.value)||0,p={...i};p[s.key]||(p[s.key]={}),p[s.key]={...p[s.key],[j]:m},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,production:p}}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-green-400 focus:ring-1 focus:ring-green-200 outline-none",placeholder:"0"})},j)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-green-800 bg-green-50 font-mono text-sm",children:d>0?s.decimals>0?Number(d).toFixed(s.decimals):Math.round(d).toLocaleString():""})]},s.key)}),(()=>{var f;const s=((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{},n=s.herd||{},o=s.production||{},i=[1,2,3,4,5,6,7,8,9,10,11,12],h=[31,28,31,30,31,30,31,31,30,31,30,31],b=i.map((d,u)=>{const j=parseFloat((n.milkingCows||{})[d])||0,g=parseFloat((o.avgDailyProduction||{})[d])||0;return j*g*h[u]}),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-green-100 border-t-2 border-green-300 font-bold",children:[e.jsxs("td",{className:"py-2 px-3 text-green-800 sticky left-0 bg-green-100 z-10 text-sm",children:["Calc. Monthly Production (lbs)",e.jsx("div",{className:"text-[10px] font-normal text-green-600",children:"Milking Cows  Avg/Day  Days"})]}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-green-800 font-mono text-sm",children:d>0?Math.round(d).toLocaleString():""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-green-900 font-mono bg-green-200 text-sm",children:[x>0?Math.round(x).toLocaleString():"",e.jsx("div",{className:"text-[10px] font-normal text-green-700",children:"Total"})]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-purple-100 text-purple-800 px-4 py-3 font-bold border-b border-purple-200 flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5"}),"Milk Pricing (per cwt)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-purple-50 text-purple-800 border-b border-purple-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-purple-50 z-10 w-44",children:"Price Component"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-20",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-purple-100 w-20",children:"Average"})]})}),e.jsxs("tbody",{children:[[{key:"baseMilkPrice",label:"Base Milk Price ($/cwt)"},{key:"bfDifferential",label:"Butterfat Differential"},{key:"proteinPremium",label:"Protein Premium"},{key:"qualityPremium",label:"Quality Premium"},{key:"otherPremiums",label:"Other Premiums/Deductions"}].map((s,n)=>{var u;const o=((u=r==null?void 0:r.cashFlow)==null?void 0:u.dairy)||{},i=o.pricing||{},h=i[s.key]||{},b=[1,2,3,4,5,6,7,8,9,10,11,12],f=b.map(j=>parseFloat(h[j])||0).filter(j=>j!==0),d=f.length>0?f.reduce((j,g)=>j+g,0)/f.length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-purple-700 bg-purple-50 sticky left-0 z-10 text-sm",children:s.label}),b.map(j=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:h[j]||"",onChange:g=>{const m=g.target.value;if(m===""||/^-?[0-9]*\.?[0-9]*$/.test(m)){const p={...i};p[s.key]||(p[s.key]={}),p[s.key]={...p[s.key],[j]:m===""?0:m==="-"||m.endsWith(".")?m:parseFloat(m)||0},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,pricing:p}}})}},onBlur:g=>{const m=parseFloat(g.target.value)||0,p={...i};p[s.key]||(p[s.key]={}),p[s.key]={...p[s.key],[j]:m},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,pricing:p}}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-purple-400 focus:ring-1 focus:ring-purple-200 outline-none",placeholder:"0.00"})},j)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-purple-800 bg-purple-50 font-mono text-sm",children:d!==0?"$"+Number(d).toFixed(2):""})]},s.key)}),(()=>{var f;const n=(((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).pricing||{},o=["baseMilkPrice","bfDifferential","proteinPremium","qualityPremium","otherPremiums"],h=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>o.reduce((u,j)=>u+(parseFloat((n[j]||{})[d])||0),0)),b=h.filter(d=>d!==0),x=b.length>0?b.reduce((d,u)=>d+u,0)/b.length:0;return e.jsxs("tr",{className:"bg-purple-100 border-t-2 border-purple-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-purple-800 sticky left-0 bg-purple-100 z-10 text-sm",children:"Net Milk Price ($/cwt)"}),h.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-purple-800 font-mono text-sm",children:d!==0?"$"+Number(d).toFixed(2):""},u)),e.jsx("td",{className:"py-2 px-2 text-center text-purple-900 font-mono bg-purple-200 text-sm",children:x!==0?"$"+Number(x).toFixed(2):""})]})})()]})]})})]}),(()=>{var C;const s=((C=r==null?void 0:r.cashFlow)==null?void 0:C.dairy)||{},n=s.herd||{},o=s.production||{},i=s.pricing||{},h=[1,2,3,4,5,6,7,8,9,10,11,12],b=[31,28,31,30,31,30,31,31,30,31,30,31],x=(()=>{const N=h.map(k=>parseFloat((n.milkingCows||{})[k])||0).filter(k=>k>0);return N.length>0?N.reduce((k,P)=>k+P,0)/N.length:0})(),f=(()=>{const N=["milkingCows","dryCows","bredHeifers","openHeifers","calves","bulls"],P=h.map(A=>N.reduce((R,L)=>R+(parseFloat((n[L]||{})[A])||0),0)).filter(A=>A>0);return P.length>0?P.reduce((A,R)=>A+R,0)/P.length:0})(),d=h.reduce((N,k,P)=>{const A=parseFloat((n.milkingCows||{})[k])||0,R=parseFloat((o.avgDailyProduction||{})[k])||0;return N+A*R*b[P]},0),u=["baseMilkPrice","bfDifferential","proteinPremium","qualityPremium","otherPremiums"],g=h.map(N=>u.reduce((k,P)=>k+(parseFloat((i[P]||{})[N])||0),0)).filter(N=>N!==0),m=g.length>0?g.reduce((N,k)=>N+k,0)/g.length:0,p=d/100*m;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-sky-50 rounded-lg p-4 border border-sky-200",children:[e.jsx("div",{className:"text-sm text-sky-600 font-medium",children:"Avg Milking Cows"}),e.jsx("div",{className:"text-2xl font-bold text-sky-700 font-mono",children:x>0?Math.round(x).toLocaleString():""})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Avg Total Herd"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:f>0?Math.round(f).toLocaleString():""})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Est. Annual Production"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:d>0?Math.round(d).toLocaleString()+" lbs":""})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Est. Annual Milk Revenue"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:p>0?"$"+Math.round(p).toLocaleString():""})]})]})})()]})}),ns==="livestockSales"&&e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(er,{className:"w-6 h-6 text-amber-600"}),"Livestock Sales Projections"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Project monthly cull cow and calf sales revenue."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-amber-100 text-amber-800 px-4 py-3 font-bold border-b border-amber-200 flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5"}),"Cull Cow Sales"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-amber-50 text-amber-800 border-b border-amber-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-amber-50 z-10 w-44",children:"Category"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-20",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-amber-100 w-24",children:"Total"})]})}),e.jsxs("tbody",{children:[[{key:"cullCowHead",label:"Head Sold",unit:"head"},{key:"cullCowAvgWeight",label:"Avg Weight (lbs)",unit:"lbs",group:"weight"},{key:"cullCowPricePerLb",label:"Price ($/lb)",unit:"$/lb",decimals:2,group:"weight"},{key:"cullCowPricePerHead",label:" OR  Price ($/hd)",unit:"$/hd",decimals:2,group:"perHead",highlight:!0}].map((s,n)=>{var d;const o=((d=r==null?void 0:r.cashFlow)==null?void 0:d.dairy)||{},i=o.cullCowSales||{},h=i[s.key]||{},b=[1,2,3,4,5,6,7,8,9,10,11,12],x=b.map(u=>parseFloat(h[u])||0),f=s.key==="cullCowHead"?x.reduce((u,j)=>u+j,0):x.filter(u=>u>0).length>0?x.filter(u=>u>0).reduce((u,j)=>u+j,0)/x.filter(u=>u>0).length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${s.highlight?"bg-amber-50/50":n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:`py-1.5 px-3 font-semibold text-amber-700 ${s.highlight?"bg-amber-100":"bg-amber-50"} sticky left-0 z-10 text-sm`,children:s.label}),b.map(u=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:h[u]||"",onChange:j=>{const g=j.target.value;if(g===""||/^[0-9]*\.?[0-9]*$/.test(g)){const m={...i};m[s.key]||(m[s.key]={}),m[s.key]={...m[s.key],[u]:g===""?0:g.endsWith(".")?g:parseFloat(g)||0},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,cullCowSales:m}}})}},onBlur:j=>{const g=parseFloat(j.target.value)||0,m={...i};m[s.key]||(m[s.key]={}),m[s.key]={...m[s.key],[u]:g},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,cullCowSales:m}}})},className:`w-full px-1.5 py-1.5 border rounded text-xs text-center outline-none ${s.highlight?"border-amber-300 bg-amber-50 focus:border-amber-500 focus:ring-1 focus:ring-amber-300":"border-gray-200 focus:border-amber-400 focus:ring-1 focus:ring-amber-200"}`,placeholder:"0"})},u)),e.jsxs("td",{className:`py-1.5 px-2 text-center font-bold text-amber-800 ${s.highlight?"bg-amber-100":"bg-amber-50"} font-mono text-sm`,children:[f>0?s.decimals?"$"+Number(f).toFixed(s.decimals):Math.round(f).toLocaleString():"",s.key==="cullCowHead"&&e.jsx("span",{className:"text-[10px] font-normal ml-1",children:"hd"}),(s.key==="cullCowAvgWeight"||s.key==="cullCowPricePerLb"||s.key==="cullCowPricePerHead")&&e.jsx("span",{className:"text-[10px] font-normal ml-1",children:"avg"})]})]},s.key)}),(()=>{var x;const n=(((x=r==null?void 0:r.cashFlow)==null?void 0:x.dairy)||{}).cullCowSales||{},o=[1,2,3,4,5,6,7,8,9,10,11,12],i=o.map(f=>{const d=parseFloat((n.cullCowHead||{})[f])||0,u=parseFloat((n.cullCowPricePerHead||{})[f])||0,j=parseFloat((n.cullCowAvgWeight||{})[f])||0,g=parseFloat((n.cullCowPricePerLb||{})[f])||0;return u>0?d*u:d*j*g}),h=i.reduce((f,d)=>f+d,0),b=o.some(f=>(parseFloat((n.cullCowPricePerHead||{})[f])||0)>0);return e.jsxs("tr",{className:"bg-amber-100 border-t-2 border-amber-300 font-bold",children:[e.jsxs("td",{className:"py-2 px-3 text-amber-800 sticky left-0 bg-amber-100 z-10 text-sm",children:["Monthly Revenue",e.jsx("div",{className:"text-[10px] font-normal text-amber-600",children:b?"Head  $/Head":"Head  Weight  $/lb"})]}),i.map((f,d)=>e.jsx("td",{className:"py-2 px-2 text-center text-amber-800 font-mono text-sm",children:f>0?"$"+Math.round(f).toLocaleString():""},d)),e.jsxs("td",{className:"py-2 px-2 text-center text-amber-900 font-mono bg-amber-200 text-sm",children:["$",Math.round(h).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-blue-100 text-blue-800 px-4 py-3 font-bold border-b border-blue-200 flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5"}),"Bull Calf Sales"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-50 text-blue-800 border-b border-blue-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-blue-50 z-10 w-44",children:"Category"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-20",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-blue-100 w-24",children:"Total"})]})}),e.jsxs("tbody",{children:[[{key:"bullCalfHead",label:"Head Sold",unit:"head"},{key:"bullCalfAvgWeight",label:"Avg Weight (lbs)",unit:"lbs"},{key:"bullCalfPricePerLb",label:"Price ($/lb)",unit:"$/lb",decimals:2},{key:"bullCalfPricePerHead",label:" OR  Price ($/hd)",unit:"$/hd",decimals:2,highlight:!0}].map((s,n)=>{var d;const o=((d=r==null?void 0:r.cashFlow)==null?void 0:d.dairy)||{},i=o.bullCalfSales||{},h=i[s.key]||{},b=[1,2,3,4,5,6,7,8,9,10,11,12],x=b.map(u=>parseFloat(h[u])||0),f=s.key==="bullCalfHead"?x.reduce((u,j)=>u+j,0):x.filter(u=>u>0).length>0?x.filter(u=>u>0).reduce((u,j)=>u+j,0)/x.filter(u=>u>0).length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${s.highlight?"bg-blue-50/50":n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:`py-1.5 px-3 font-semibold text-blue-700 ${s.highlight?"bg-blue-100":"bg-blue-50"} sticky left-0 z-10 text-sm`,children:s.label}),b.map(u=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:h[u]||"",onChange:j=>{const g=j.target.value;if(g===""||/^[0-9]*\.?[0-9]*$/.test(g)){const m={...i};m[s.key]||(m[s.key]={}),m[s.key]={...m[s.key],[u]:g===""?0:g.endsWith(".")?g:parseFloat(g)||0},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,bullCalfSales:m}}})}},onBlur:j=>{const g=parseFloat(j.target.value)||0,m={...i};m[s.key]||(m[s.key]={}),m[s.key]={...m[s.key],[u]:g},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,bullCalfSales:m}}})},className:`w-full px-1.5 py-1.5 border rounded text-xs text-center outline-none ${s.highlight?"border-blue-300 bg-blue-50 focus:border-blue-500 focus:ring-1 focus:ring-blue-300":"border-gray-200 focus:border-blue-400 focus:ring-1 focus:ring-blue-200"}`,placeholder:"0"})},u)),e.jsxs("td",{className:`py-1.5 px-2 text-center font-bold text-blue-800 ${s.highlight?"bg-blue-100":"bg-blue-50"} font-mono text-sm`,children:[f>0?s.decimals?"$"+Number(f).toFixed(s.decimals):Math.round(f).toLocaleString():"",s.key==="bullCalfHead"&&e.jsx("span",{className:"text-[10px] font-normal ml-1",children:"hd"}),(s.key==="bullCalfAvgWeight"||s.key==="bullCalfPricePerLb"||s.key==="bullCalfPricePerHead")&&e.jsx("span",{className:"text-[10px] font-normal ml-1",children:"avg"})]})]},s.key)}),(()=>{var x;const n=(((x=r==null?void 0:r.cashFlow)==null?void 0:x.dairy)||{}).bullCalfSales||{},o=[1,2,3,4,5,6,7,8,9,10,11,12],i=o.map(f=>{const d=parseFloat((n.bullCalfHead||{})[f])||0,u=parseFloat((n.bullCalfPricePerHead||{})[f])||0,j=parseFloat((n.bullCalfAvgWeight||{})[f])||0,g=parseFloat((n.bullCalfPricePerLb||{})[f])||0;return u>0?d*u:d*j*g}),h=i.reduce((f,d)=>f+d,0),b=o.some(f=>(parseFloat((n.bullCalfPricePerHead||{})[f])||0)>0);return e.jsxs("tr",{className:"bg-blue-100 border-t-2 border-blue-300 font-bold",children:[e.jsxs("td",{className:"py-2 px-3 text-blue-800 sticky left-0 bg-blue-100 z-10 text-sm",children:["Monthly Revenue",e.jsx("div",{className:"text-[10px] font-normal text-blue-600",children:b?"Head  $/Head":"Head  Weight  $/lb"})]}),i.map((f,d)=>e.jsx("td",{className:"py-2 px-2 text-center text-blue-800 font-mono text-sm",children:f>0?"$"+Math.round(f).toLocaleString():""},d)),e.jsxs("td",{className:"py-2 px-2 text-center text-blue-900 font-mono bg-blue-200 text-sm",children:["$",Math.round(h).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-pink-100 text-pink-800 px-4 py-3 font-bold border-b border-pink-200 flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5"}),"Heifer Calf Sales"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-pink-50 text-pink-800 border-b border-pink-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-pink-50 z-10 w-44",children:"Category"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-20",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-pink-100 w-24",children:"Total"})]})}),e.jsxs("tbody",{children:[[{key:"heiferCalfHead",label:"Head Sold",unit:"head"},{key:"heiferCalfAvgWeight",label:"Avg Weight (lbs)",unit:"lbs"},{key:"heiferCalfPricePerLb",label:"Price ($/lb)",unit:"$/lb",decimals:2},{key:"heiferCalfPricePerHead",label:" OR  Price ($/hd)",unit:"$/hd",decimals:2,highlight:!0}].map((s,n)=>{var d;const o=((d=r==null?void 0:r.cashFlow)==null?void 0:d.dairy)||{},i=o.heiferCalfSales||{},h=i[s.key]||{},b=[1,2,3,4,5,6,7,8,9,10,11,12],x=b.map(u=>parseFloat(h[u])||0),f=s.key==="heiferCalfHead"?x.reduce((u,j)=>u+j,0):x.filter(u=>u>0).length>0?x.filter(u=>u>0).reduce((u,j)=>u+j,0)/x.filter(u=>u>0).length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${s.highlight?"bg-pink-50/50":n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:`py-1.5 px-3 font-semibold text-pink-700 ${s.highlight?"bg-pink-100":"bg-pink-50"} sticky left-0 z-10 text-sm`,children:s.label}),b.map(u=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:h[u]||"",onChange:j=>{const g=j.target.value;if(g===""||/^[0-9]*\.?[0-9]*$/.test(g)){const m={...i};m[s.key]||(m[s.key]={}),m[s.key]={...m[s.key],[u]:g===""?0:g.endsWith(".")?g:parseFloat(g)||0},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,heiferCalfSales:m}}})}},onBlur:j=>{const g=parseFloat(j.target.value)||0,m={...i};m[s.key]||(m[s.key]={}),m[s.key]={...m[s.key],[u]:g},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,heiferCalfSales:m}}})},className:`w-full px-1.5 py-1.5 border rounded text-xs text-center outline-none ${s.highlight?"border-pink-300 bg-pink-50 focus:border-pink-500 focus:ring-1 focus:ring-pink-300":"border-gray-200 focus:border-pink-400 focus:ring-1 focus:ring-pink-200"}`,placeholder:"0"})},u)),e.jsxs("td",{className:`py-1.5 px-2 text-center font-bold text-pink-800 ${s.highlight?"bg-pink-100":"bg-pink-50"} font-mono text-sm`,children:[f>0?s.decimals?"$"+Number(f).toFixed(s.decimals):Math.round(f).toLocaleString():"",s.key==="heiferCalfHead"&&e.jsx("span",{className:"text-[10px] font-normal ml-1",children:"hd"}),(s.key==="heiferCalfAvgWeight"||s.key==="heiferCalfPricePerLb"||s.key==="heiferCalfPricePerHead")&&e.jsx("span",{className:"text-[10px] font-normal ml-1",children:"avg"})]})]},s.key)}),(()=>{var x;const n=(((x=r==null?void 0:r.cashFlow)==null?void 0:x.dairy)||{}).heiferCalfSales||{},o=[1,2,3,4,5,6,7,8,9,10,11,12],i=o.map(f=>{const d=parseFloat((n.heiferCalfHead||{})[f])||0,u=parseFloat((n.heiferCalfPricePerHead||{})[f])||0,j=parseFloat((n.heiferCalfAvgWeight||{})[f])||0,g=parseFloat((n.heiferCalfPricePerLb||{})[f])||0;return u>0?d*u:d*j*g}),h=i.reduce((f,d)=>f+d,0),b=o.some(f=>(parseFloat((n.heiferCalfPricePerHead||{})[f])||0)>0);return e.jsxs("tr",{className:"bg-pink-100 border-t-2 border-pink-300 font-bold",children:[e.jsxs("td",{className:"py-2 px-3 text-pink-800 sticky left-0 bg-pink-100 z-10 text-sm",children:["Monthly Revenue",e.jsx("div",{className:"text-[10px] font-normal text-pink-600",children:b?"Head  $/Head":"Head  Weight  $/lb"})]}),i.map((f,d)=>e.jsx("td",{className:"py-2 px-2 text-center text-pink-800 font-mono text-sm",children:f>0?"$"+Math.round(f).toLocaleString():""},d)),e.jsxs("td",{className:"py-2 px-2 text-center text-pink-900 font-mono bg-pink-200 text-sm",children:["$",Math.round(h).toLocaleString()]})]})})()]})]})})]}),(()=>{var m;const s=((m=r==null?void 0:r.cashFlow)==null?void 0:m.dairy)||{},n=s.cullCowSales||{},o=s.bullCalfSales||{},i=s.heiferCalfSales||{},h=[1,2,3,4,5,6,7,8,9,10,11,12],b=h.reduce((p,C)=>{const N=parseFloat((n.cullCowHead||{})[C])||0,k=parseFloat((n.cullCowPricePerHead||{})[C])||0,P=parseFloat((n.cullCowAvgWeight||{})[C])||0,A=parseFloat((n.cullCowPricePerLb||{})[C])||0;return k>0?p+N*k:p+N*P*A},0),x=h.reduce((p,C)=>{const N=parseFloat((o.bullCalfHead||{})[C])||0,k=parseFloat((o.bullCalfPricePerHead||{})[C])||0,P=parseFloat((o.bullCalfAvgWeight||{})[C])||0,A=parseFloat((o.bullCalfPricePerLb||{})[C])||0;return k>0?p+N*k:p+N*P*A},0),f=h.reduce((p,C)=>{const N=parseFloat((i.heiferCalfHead||{})[C])||0,k=parseFloat((i.heiferCalfPricePerHead||{})[C])||0,P=parseFloat((i.heiferCalfAvgWeight||{})[C])||0,A=parseFloat((i.heiferCalfPricePerLb||{})[C])||0;return k>0?p+N*k:p+N*P*A},0),d=b+x+f,u=h.reduce((p,C)=>p+(parseFloat((n.cullCowHead||{})[C])||0),0),j=h.reduce((p,C)=>p+(parseFloat((o.bullCalfHead||{})[C])||0),0),g=h.reduce((p,C)=>p+(parseFloat((i.heiferCalfHead||{})[C])||0),0);return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Cull Cow Revenue"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",Math.round(b).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-amber-500",children:[u," head"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Bull Calf Revenue"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:["$",Math.round(x).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-blue-500",children:[j," head"]})]}),e.jsxs("div",{className:"bg-pink-50 rounded-lg p-4 border border-pink-200",children:[e.jsx("div",{className:"text-sm text-pink-600 font-medium",children:"Heifer Calf Revenue"}),e.jsxs("div",{className:"text-2xl font-bold text-pink-700 font-mono",children:["$",Math.round(f).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-pink-500",children:[g," head"]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Livestock Revenue"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:["$",Math.round(d).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-500",children:[u+j+g," total head"]})]})]})})()]})}),ns==="revenue"&&e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(vt,{className:"w-6 h-6 text-green-600"}),"Monthly Milk Check Tracking"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track monthly milk check data including production, component pricing, deductions, and net pay."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-green-100 text-green-800 px-4 py-3 font-bold border-b border-green-200 flex items-center gap-2",children:[e.jsx(ic,{className:"w-5 h-5"}),"Milk Production (lbs)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-green-50 text-green-800 border-b border-green-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-green-50 z-10 w-44",children:"Component"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-green-100",children:[e.jsx("div",{className:"text-[10px]",children:"Annual Total"}),e.jsx("div",{className:"text-[9px] text-green-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-green-100 w-28",children:"YTD Total"})]})}),e.jsx("tbody",{children:[{key:"totalFarmLbs",label:"Total Farm Lbs"},{key:"skimLbs",label:"Skim Lbs"},{key:"butterfatLbs",label:"Butterfat Lbs"},{key:"proteinLbs",label:"Protein Lbs"},{key:"otherSolidsLbs",label:"Other Solids Lbs"}].map((s,n)=>{var u,j;const o=((u=r==null?void 0:r.cashFlow)==null?void 0:u.dairy)||{},i=o.milkRevenue||{},h=i[s.key]||{},b=((j=o.annualTotals)==null?void 0:j.production)||{},x=[1,2,3,4,5,6,7,8,9,10,11,12],d=x.map(g=>parseFloat(h[g])||0).reduce((g,m)=>g+m,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-green-700 bg-green-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-green-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:b[s.key]&&!isNaN(parseFloat(b[s.key]))?parseFloat(b[s.key]).toLocaleString():b[s.key]||"",onChange:g=>{let m=g.target.value.replace(/,/g,"").replace(/[^0-9.]/g,"");const p={...o.annualTotals||{},production:{...b,[s.key]:m}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,annualTotals:p}}})},className:"w-24 px-1.5 py-1.5 border border-green-300 rounded text-xs text-center focus:border-green-500 focus:ring-1 focus:ring-green-300 outline-none font-mono",placeholder:"0"}),e.jsx("button",{onClick:()=>{const g=parseFloat(b[s.key])||0;if(g>0){const m=Math.round(g/12*100)/100,p={...i};p[s.key]||(p[s.key]={}),x.forEach(C=>{p[s.key][C]=m}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,milkRevenue:p}}})}},className:"px-2 py-1 bg-green-500 text-white rounded text-[10px] font-bold hover:bg-green-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),x.map(g=>{const m=h[g]||"",p=m&&!isNaN(parseFloat(m))?parseFloat(m).toLocaleString():m;return e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:p,onChange:C=>{const N=C.target.value.replace(/,/g,""),k={...i};k[s.key]||(k[s.key]={}),k[s.key]={...k[s.key],[g]:N},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,milkRevenue:k}}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-green-400 focus:ring-1 focus:ring-green-200 outline-none font-mono",placeholder:"0"})},g)}),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-green-800 bg-green-50 font-mono text-sm",children:d>0?Math.round(d).toLocaleString():""})]},s.key)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-blue-100 text-blue-800 px-4 py-3 font-bold border-b border-blue-200 flex items-center gap-2",children:[e.jsx(ur,{className:"w-5 h-5"}),"Component Pricing ($/lb)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-50 text-blue-800 border-b border-blue-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-blue-50 z-10 w-44",children:"Price Component"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-blue-100",children:[e.jsx("div",{className:"text-[10px]",children:"Annual Avg"}),e.jsx("div",{className:"text-[9px] text-blue-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-blue-100 w-28",children:"Avg"})]})}),e.jsxs("tbody",{children:[[{key:"butterfatPrice",label:"Butterfat Price"},{key:"proteinPrice",label:"Protein Price"},{key:"proteinCaseinatePrice",label:"Protein Caseinate Price"},{key:"otherSolidsPrice",label:"Other Solids Price"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.milkRevenue||{},h=i[s.key]||{},b=((g=o.annualTotals)==null?void 0:g.pricing)||{},x=[1,2,3,4,5,6,7,8,9,10,11,12],d=x.map(m=>parseFloat(h[m])||0).filter(m=>m>0),u=d.length>0?d.reduce((m,p)=>m+p,0)/d.length:0;return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-blue-700 bg-blue-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-blue-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:b[s.key]?"$"+b[s.key]:"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.annualTotals||{},pricing:{...b,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,annualTotals:C}}})},className:"w-20 px-1.5 py-1.5 border border-blue-300 rounded text-xs text-center focus:border-blue-500 focus:ring-1 focus:ring-blue-300 outline-none font-mono",placeholder:"$0.00"}),e.jsx("button",{onClick:()=>{const m=parseFloat(b[s.key])||0;if(m>0){const p={...i};p[s.key]||(p[s.key]={}),x.forEach(C=>{p[s.key][C]=m}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,milkRevenue:p}}})}},className:"px-2 py-1 bg-blue-500 text-white rounded text-[10px] font-bold hover:bg-blue-600 transition-colors",title:"Apply to all 12 months",children:"12"})]})}),x.map(m=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:h[m]?"$"+h[m]:"",onChange:p=>{const C=p.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,""),N={...i};N[s.key]||(N[s.key]={}),N[s.key]={...N[s.key],[m]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,milkRevenue:N}}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-blue-400 focus:ring-1 focus:ring-blue-200 outline-none font-mono",placeholder:"$0.0000"})},m)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-blue-800 bg-blue-50 font-mono text-sm",children:u>0?"$"+Number(u).toFixed(5):""})]},s.key)}),[{key:"butterfatRevenue",label:"Butterfat Revenue",lbsKey:"butterfatLbs",priceKey:"butterfatPrice"},{key:"proteinRevenue",label:"Protein Revenue",lbsKey:"proteinLbs",priceKey:"proteinPrice"},{key:"proteinCaseinateRevenue",label:"Protein Caseinate Rev",lbsKey:"proteinLbs",priceKey:"proteinCaseinatePrice"}].map(s=>{var x;const o=(((x=r==null?void 0:r.cashFlow)==null?void 0:x.dairy)||{}).milkRevenue||{},h=[1,2,3,4,5,6,7,8,9,10,11,12].map(f=>{const d=parseFloat((o[s.lbsKey]||{})[f])||0,u=parseFloat((o[s.priceKey]||{})[f])||0;return d*u}),b=h.reduce((f,d)=>f+d,0);return e.jsxs("tr",{className:"bg-blue-50/50 border-b border-blue-100",children:[e.jsxs("td",{className:"py-1.5 px-3 font-semibold text-blue-600 bg-blue-100/50 sticky left-0 z-10 text-xs italic",children:[" ",s.label]}),e.jsx("td",{className:"py-1 px-1 bg-blue-50/50"}),h.map((f,d)=>e.jsx("td",{className:"py-1.5 px-2 text-center text-blue-700 font-mono text-xs",children:f>0?"$"+Math.round(f).toLocaleString():""},d)),e.jsxs("td",{className:"py-1.5 px-2 text-center font-bold text-blue-800 bg-blue-100 font-mono text-xs",children:["$",Math.round(b).toLocaleString()]})]},s.key)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-emerald-100 text-emerald-800 px-4 py-3 font-bold border-b border-emerald-200 flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5"}),"Gross Pay, Deductions & Net Pay"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-emerald-50 text-emerald-800 border-b border-emerald-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-emerald-50 z-10 w-44",children:"Item"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-emerald-100",children:[e.jsx("div",{className:"text-[10px]",children:"Annual Total"}),e.jsx("div",{className:"text-[9px] text-emerald-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-emerald-100 w-28",children:"YTD Total"})]})}),e.jsxs("tbody",{children:[(()=>{var b;const n=(((b=r==null?void 0:r.cashFlow)==null?void 0:b.dairy)||{}).milkRevenue||{},i=[1,2,3,4,5,6,7,8,9,10,11,12].map(x=>{const f=parseFloat((n.butterfatLbs||{})[x])||0,d=parseFloat((n.butterfatPrice||{})[x])||0,u=parseFloat((n.proteinLbs||{})[x])||0,j=parseFloat((n.proteinPrice||{})[x])||0,g=parseFloat((n.proteinCaseinatePrice||{})[x])||0,m=f*d,p=u*j,C=u*g;return m+p+C}),h=i.reduce((x,f)=>x+f,0);return e.jsxs("tr",{className:"bg-emerald-50 border-b-2 border-emerald-200",children:[e.jsxs("td",{className:"py-2 px-3 font-bold text-emerald-800 bg-emerald-100 sticky left-0 z-10 text-sm",children:["Gross Pay",e.jsx("div",{className:"text-xs font-normal text-emerald-600 italic",children:"Auto-calc from components"})]}),e.jsx("td",{className:"py-1 px-1 bg-emerald-50"}),i.map((x,f)=>e.jsx("td",{className:"py-1.5 px-1 text-center font-bold text-emerald-800 bg-emerald-50 font-mono text-sm",children:x>0?"$"+Math.round(x).toLocaleString():""},f)),e.jsxs("td",{className:"py-2 px-2 text-center font-bold text-emerald-900 bg-emerald-200 font-mono text-sm",children:["$",Math.round(h).toLocaleString()]})]})})(),[{key:"stopCharges",label:"Stop Charges"},{key:"nationalMilkPromo",label:"National Milk Promotion"},{key:"stateInspectionFund",label:"State Inspection Fund"},{key:"stateMilkPromo",label:"State Milk Promotion"},{key:"producerPremium",label:"Producer Premium"},{key:"otherDeductions",label:"Other Deductions"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.milkRevenue||{},b=(i.deductions||{})[s.key]||{},x=((g=o.annualTotals)==null?void 0:g.deductions)||{},f=[1,2,3,4,5,6,7,8,9,10,11,12],u=f.map(m=>parseFloat(b[m])||0).reduce((m,p)=>m+p,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-red-700 bg-red-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-red-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:x[s.key]?"$"+parseFloat(x[s.key]).toLocaleString():"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.annualTotals||{},deductions:{...x,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,annualTotals:C}}})},className:"w-24 px-1.5 py-1.5 border border-red-300 rounded text-xs text-center focus:border-red-500 focus:ring-1 focus:ring-red-300 outline-none font-mono",placeholder:"$0"}),e.jsx("button",{onClick:()=>{const m=parseFloat(x[s.key])||0;if(m>0){const p=Math.round(m/12*100)/100,C={...i};C.deductions||(C.deductions={}),C.deductions[s.key]||(C.deductions[s.key]={}),f.forEach(N=>{C.deductions[s.key][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,milkRevenue:C}}})}},className:"px-2 py-1 bg-red-500 text-white rounded text-[10px] font-bold hover:bg-red-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),f.map(m=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:b[m]?"$"+parseFloat(b[m]).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"",onChange:p=>{const C=p.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,""),N={...i};N.deductions||(N.deductions={}),N.deductions[s.key]||(N.deductions[s.key]={}),N.deductions[s.key]={...N.deductions[s.key],[m]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,milkRevenue:N}}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-red-400 focus:ring-1 focus:ring-red-200 outline-none font-mono",placeholder:"$0.00"})},m)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-red-700 bg-red-50 font-mono text-sm",children:u>0?"($"+Math.round(u).toLocaleString()+")":""})]},s.key)}),(()=>{var f;const o=((((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).milkRevenue||{}).deductions||{},i=["stopCharges","nationalMilkPromo","stateInspectionFund","stateMilkPromo","producerPremium","otherDeductions"],b=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>i.reduce((u,j)=>u+(parseFloat((o[j]||{})[d])||0),0)),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-red-100 border-t-2 border-red-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-red-800 sticky left-0 bg-red-100 z-10 text-sm",children:"Less Deductions"}),e.jsx("td",{className:"py-2 px-2 bg-red-100"}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-red-800 font-mono text-sm",children:d>0?"($"+Math.round(d).toLocaleString()+")":""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-red-900 font-mono bg-red-200 text-sm",children:["($",Math.round(x).toLocaleString(),")"]})]})})(),[{key:"fuelSurcharge",label:"Fuel Surcharge"},{key:"baseHauling",label:"Base Hauling"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.milkRevenue||{},b=(i.hauling||{})[s.key]||{},x=((g=o.annualTotals)==null?void 0:g.hauling)||{},f=[1,2,3,4,5,6,7,8,9,10,11,12],u=f.map(m=>parseFloat(b[m])||0).reduce((m,p)=>m+p,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-amber-50/30":"bg-white"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-amber-700 bg-amber-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-amber-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:x[s.key]?"$"+parseFloat(x[s.key]).toLocaleString():"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.annualTotals||{},hauling:{...x,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,annualTotals:C}}})},className:"w-24 px-1.5 py-1.5 border border-amber-300 rounded text-xs text-center focus:border-amber-500 focus:ring-1 focus:ring-amber-300 outline-none font-mono",placeholder:"$0"}),e.jsx("button",{onClick:()=>{const m=parseFloat(x[s.key])||0;if(m>0){const p=Math.round(m/12*100)/100,C={...i};C.hauling||(C.hauling={}),C.hauling[s.key]||(C.hauling[s.key]={}),f.forEach(N=>{C.hauling[s.key][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,milkRevenue:C}}})}},className:"px-2 py-1 bg-amber-500 text-white rounded text-[10px] font-bold hover:bg-amber-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),f.map(m=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:b[m]?"$"+parseFloat(b[m]).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"",onChange:p=>{const C=p.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,""),N={...i};N.hauling||(N.hauling={}),N.hauling[s.key]||(N.hauling[s.key]={}),N.hauling[s.key]={...N.hauling[s.key],[m]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,milkRevenue:N}}})},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-amber-400 focus:ring-1 focus:ring-amber-200 outline-none font-mono",placeholder:"$0.00"})},m)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-amber-700 bg-amber-50 font-mono text-sm",children:u>0?"($"+Math.round(u).toLocaleString()+")":""})]},s.key)}),(()=>{var f;const o=((((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).milkRevenue||{}).hauling||{},i=["fuelSurcharge","baseHauling"],b=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>i.reduce((u,j)=>u+(parseFloat((o[j]||{})[d])||0),0)),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-amber-100 border-t border-amber-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-amber-800 sticky left-0 bg-amber-100 z-10 text-sm",children:"Less Hauling"}),e.jsx("td",{className:"py-2 px-2 bg-amber-100"}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-amber-800 font-mono text-sm",children:d>0?"($"+Math.round(d).toLocaleString()+")":""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-amber-900 font-mono bg-amber-200 text-sm",children:["($",Math.round(x).toLocaleString(),")"]})]})})(),(()=>{var u;const n=(((u=r==null?void 0:r.cashFlow)==null?void 0:u.dairy)||{}).milkRevenue||{},o=n.deductions||{},i=n.hauling||{},h=["stopCharges","nationalMilkPromo","stateInspectionFund","stateMilkPromo","producerPremium","otherDeductions"],b=["fuelSurcharge","baseHauling"],f=[1,2,3,4,5,6,7,8,9,10,11,12].map(j=>{const g=parseFloat((n.butterfatLbs||{})[j])||0,m=parseFloat((n.butterfatPrice||{})[j])||0,p=parseFloat((n.proteinLbs||{})[j])||0,C=parseFloat((n.proteinPrice||{})[j])||0,N=parseFloat((n.proteinCaseinatePrice||{})[j])||0,k=g*m+p*C+p*N,P=h.reduce((R,L)=>R+(parseFloat((o[L]||{})[j])||0),0),A=b.reduce((R,L)=>R+(parseFloat((i[L]||{})[j])||0),0);return k-P-A}),d=f.reduce((j,g)=>j+g,0);return e.jsxs("tr",{className:"bg-green-200 border-t-4 border-green-500 font-bold",children:[e.jsx("td",{className:"py-3 px-3 text-green-900 sticky left-0 bg-green-200 z-10 text-sm",children:"Net Pay"}),e.jsx("td",{className:"py-3 px-2 bg-green-200"}),f.map((j,g)=>e.jsx("td",{className:"py-3 px-2 text-center text-green-900 font-mono text-sm",children:j!==0?"$"+Math.round(j).toLocaleString():""},g)),e.jsxs("td",{className:"py-3 px-2 text-center text-green-900 font-mono bg-green-300 text-base font-extrabold",children:["$",Math.round(d).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-purple-100 text-purple-800 px-4 py-3 font-bold border-b border-purple-200 flex items-center gap-2",children:[e.jsx(sj,{className:"w-5 h-5"}),"Lab Results & Quality Metrics"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-purple-50 text-purple-800 border-b border-purple-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-purple-50 z-10 w-44",children:"Metric"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-purple-100 w-28",children:"Avg"})]})}),e.jsx("tbody",{children:[{key:"spcAvg",label:"SPC Average"},{key:"sccAvg",label:"SCC Average (x1,000)"},{key:"butterfatPct",label:"Butterfat %"},{key:"proteinPct",label:"Protein %"},{key:"pickups",label:"Pickups/Stops"}].map((s,n)=>{var g;const o=((g=r==null?void 0:r.cashFlow)==null?void 0:g.dairy)||{},i=o.milkRevenue||{},b=(i.labResults||{})[s.key]||{},x=[1,2,3,4,5,6,7,8,9,10,11,12],d=x.map(m=>parseFloat(b[m])||0).filter(m=>m>0),u=d.length>0?d.reduce((m,p)=>m+p,0)/d.length:0,j=s.key==="pickups";return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-purple-700 bg-purple-50 sticky left-0 z-10 text-sm",children:s.label}),x.map(m=>e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:b[m]||"",onChange:p=>{const C=p.target.value;if(C===""||/^\.?[0-9]*\.?[0-9]*$/.test(C)){const N={...i};N.labResults||(N.labResults={}),N.labResults[s.key]||(N.labResults[s.key]={}),N.labResults[s.key]={...N.labResults[s.key],[m]:C},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,milkRevenue:N}}})}},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-purple-400 focus:ring-1 focus:ring-purple-200 outline-none font-mono",placeholder:"0"})},m)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-purple-800 bg-purple-50 font-mono text-sm",children:u>0?j?Math.round(u):Number(u).toFixed(2):""})]},s.key)})})]})})]}),(()=>{var P;const n=(((P=r==null?void 0:r.cashFlow)==null?void 0:P.dairy)||{}).milkRevenue||{},o=n.deductions||{},i=n.hauling||{},h=n.totalFarmLbs||{},b=n.labResults||{},x=[1,2,3,4,5,6,7,8,9,10,11,12],f=["stopCharges","nationalMilkPromo","stateInspectionFund","stateMilkPromo","producerPremium","otherDeductions"],d=["fuelSurcharge","baseHauling"],u=x.reduce((A,R)=>{const L=parseFloat((n.butterfatLbs||{})[R])||0,D=parseFloat((n.butterfatPrice||{})[R])||0,F=parseFloat((n.proteinLbs||{})[R])||0,v=parseFloat((n.proteinPrice||{})[R])||0,S=parseFloat((n.proteinCaseinatePrice||{})[R])||0;return A+L*D+F*v+F*S},0),j=x.reduce((A,R)=>A+f.reduce((L,D)=>L+(parseFloat((o[D]||{})[R])||0),0),0),g=x.reduce((A,R)=>A+d.reduce((L,D)=>L+(parseFloat((i[D]||{})[R])||0),0),0),m=u-j-g,p=x.reduce((A,R)=>A+(parseFloat(h[R])||0),0),C=p>0?m/p*100:0,N=x.map(A=>parseFloat((b.sccAvg||{})[A])||0).filter(A=>A>0),k=N.length>0?N.reduce((A,R)=>A+R,0)/N.length:0;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"YTD Net Pay"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 font-mono",children:["$",Math.round(m).toLocaleString()]}),e.jsx("div",{className:"text-xs text-green-500",children:"After deductions & hauling"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"YTD Milk Shipped"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:Math.round(p).toLocaleString()}),e.jsx("div",{className:"text-xs text-blue-500",children:"lbs"})]}),e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:[e.jsx("div",{className:"text-sm text-emerald-600 font-medium",children:"Avg Net $/cwt"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-700 font-mono",children:["$",Number(C).toFixed(2)]}),e.jsx("div",{className:"text-xs text-emerald-500",children:"Net pay  cwt shipped"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Avg SCC"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:k>0?Math.round(k).toLocaleString():""}),e.jsx("div",{className:"text-xs text-purple-500",children:"x1,000 cells/mL"})]})]})})()]})}),ns==="expenses"&&e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-6 h-6 text-red-600"}),"Monthly Dairy Expenses"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track monthly operating expenses for your dairy enterprise."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-lime-100 text-lime-800 px-4 py-3 font-bold border-b border-lime-200 flex items-center gap-2",children:[e.jsx(ur,{className:"w-5 h-5"}),"Feed Cost Calculator (Daily Cost  Head  Days)"]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Enter the daily feed cost per head for each category. Monthly totals are automatically calculated based on herd counts from the Beginning tab."}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-lime-50 text-lime-800 border-b border-lime-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-lime-50 z-10 w-36",children:"Category"}),e.jsx("th",{className:"py-2 px-3 text-center font-semibold w-24",children:"$/Day/Head"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-lime-100 w-28",children:"YTD Total"})]})}),e.jsxs("tbody",{children:[(()=>{var d;const s=((d=r==null?void 0:r.cashFlow)==null?void 0:d.dairy)||{},n=s.herd||{},o=s.feedCalculator||{},i=[1,2,3,4,5,6,7,8,9,10,11,12],h=we||new Date().getFullYear(),x=[31,h%4===0&&h%100!==0||h%400===0?29:28,31,30,31,30,31,31,30,31,30,31];return[{key:"milkingCows",label:"Milking Cows",herdKey:"milkingCows"},{key:"dryCows",label:"Dry Cows",herdKey:"dryCows"},{key:"bredHeifers",label:"Bred Heifers",herdKey:"bredHeifers"},{key:"openHeifers",label:"Open Heifers",herdKey:"openHeifers"},{key:"bulls",label:"Bulls",herdKey:"bulls"}].map((u,j)=>{const g=parseFloat(o[u.key])||0,m=n[u.herdKey]||{},p=i.map((N,k)=>{const P=parseFloat(m[N])||0,A=x[k];return g*P*A}),C=p.reduce((N,k)=>N+k,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${j%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-lime-700 bg-lime-50 sticky left-0 z-10 text-sm",children:u.label}),e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:o[u.key]?"$"+o[u.key]:"",onChange:N=>{let k=N.target.value.replace(/[$,]/g,"");if(k===""||/^[0-9]*\.?[0-9]*$/.test(k)){const P={...o,[u.key]:k};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...s,feedCalculator:P}}})}},className:"w-full px-1.5 py-1.5 border border-lime-300 rounded text-xs text-center focus:border-lime-500 focus:ring-1 focus:ring-lime-300 outline-none font-mono bg-lime-50",placeholder:"$0.00"})}),p.map((N,k)=>e.jsx("td",{className:"py-1.5 px-2 text-center font-mono text-sm text-lime-700",children:N>0?"$"+Math.round(N).toLocaleString():""},k)),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-lime-800 bg-lime-100 font-mono text-sm",children:C>0?"$"+Math.round(C).toLocaleString():""})]},u.key)})})(),(()=>{var j;const s=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},n=s.herd||{},o=s.feedCalculator||{},i=[1,2,3,4,5,6,7,8,9,10,11,12],h=we||new Date().getFullYear(),x=[31,h%4===0&&h%100!==0||h%400===0?29:28,31,30,31,30,31,31,30,31,30,31],f=[{key:"milkingCows",herdKey:"milkingCows"},{key:"dryCows",herdKey:"dryCows"},{key:"bredHeifers",herdKey:"bredHeifers"},{key:"openHeifers",herdKey:"openHeifers"},{key:"bulls",herdKey:"bulls"}],d=i.map((g,m)=>f.reduce((p,C)=>{const N=parseFloat(o[C.key])||0,k=parseFloat((n[C.herdKey]||{})[g])||0;return p+N*k*x[m]},0)),u=d.reduce((g,m)=>g+m,0);return e.jsxs("tr",{className:"bg-lime-200 border-t-2 border-lime-400 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-lime-800 sticky left-0 bg-lime-200 z-10 text-sm",children:"Total Feed Cost"}),e.jsx("td",{className:"py-2 px-2 text-center text-lime-800 font-mono text-sm",children:""}),d.map((g,m)=>e.jsx("td",{className:"py-2 px-2 text-center text-lime-800 font-mono text-sm",children:g>0?"$"+Math.round(g).toLocaleString():""},m)),e.jsxs("td",{className:"py-2 px-2 text-center text-lime-900 font-mono bg-lime-300 text-sm font-extrabold",children:["$",Math.round(u).toLocaleString()]})]})})()]})]})}),e.jsx("p",{className:"text-xs text-gray-400 mt-3 italic",children:"Note: Head counts are pulled from the Beginning tab. Make sure to enter your monthly herd inventory there first."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-amber-100 text-amber-800 px-4 py-3 font-bold border-b border-amber-200 flex items-center gap-2",children:[e.jsx(Ps,{className:"w-5 h-5"}),"Feed & Nutrition"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-amber-50 text-amber-800 border-b border-amber-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-amber-50 z-10 w-44",children:"Expense"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-amber-100",children:[e.jsx("div",{className:"text-[10px]",children:"Last Yr Total"}),e.jsx("div",{className:"text-[9px] text-amber-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-amber-100 w-28",children:"YTD Total"})]})}),e.jsxs("tbody",{children:[[{key:"purchasedFeed",label:"Purchased Feed/Grain"},{key:"mineralsSupplements",label:"Minerals & Supplements"},{key:"hayForage",label:"Hay/Forage Purchases"},{key:"silageHaylage",label:"Silage/Haylage"},{key:"milkReplacer",label:"Milk Replacer"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.expenses||{},b=(i.feed||{})[s.key]||{},x=((g=o.lastYearTotals)==null?void 0:g.feed)||{},f=[1,2,3,4,5,6,7,8,9,10,11,12],u=f.map(m=>parseFloat(b[m])||0).reduce((m,p)=>m+p,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-amber-700 bg-amber-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-amber-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:x[s.key]?"$"+parseFloat(x[s.key]).toLocaleString():"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.lastYearTotals||{},feed:{...x,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,lastYearTotals:C}}})},className:"w-24 px-1.5 py-1.5 border border-amber-300 rounded text-xs text-center focus:border-amber-500 focus:ring-1 focus:ring-amber-300 outline-none font-mono",placeholder:"$0"}),e.jsx("button",{onClick:()=>{const m=parseFloat(x[s.key])||0;if(m>0){const p=Math.round(m/12*100)/100,C={...i};C.feed||(C.feed={}),C.feed[s.key]||(C.feed[s.key]={}),f.forEach(N=>{C.feed[s.key][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:C}}})}},className:"px-2 py-1 bg-amber-500 text-white rounded text-[10px] font-bold hover:bg-amber-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),f.map(m=>{const p=b[m],C=parseFloat(p)||0,N=p&&String(p).includes(".")&&String(p).endsWith(".")?"$"+p:C>0?"$"+C.toLocaleString():"";return e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:N,onChange:k=>{let P=k.target.value.replace(/^\$/,"").replace(/,/g,"");if(P===""||/^[0-9]*\.?[0-9]*$/.test(P)){const A={...i};A.feed||(A.feed={}),A.feed[s.key]||(A.feed[s.key]={}),A.feed[s.key]={...A.feed[s.key],[m]:P},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:A}}})}},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-amber-400 focus:ring-1 focus:ring-amber-200 outline-none font-mono",placeholder:"$0"})},m)}),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-amber-800 bg-amber-50 font-mono text-sm",children:u>0?"$"+Math.round(u).toLocaleString():""})]},s.key)}),(()=>{var f;const o=((((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).expenses||{}).feed||{},i=["purchasedFeed","mineralsSupplements","hayForage","silageHaylage","milkReplacer"],b=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>i.reduce((u,j)=>u+(parseFloat((o[j]||{})[d])||0),0)),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-amber-100 border-t-2 border-amber-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-amber-800 sticky left-0 bg-amber-100 z-10 text-sm",children:"Feed Subtotal"}),e.jsx("td",{className:"py-2 px-2 bg-amber-100"}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-amber-800 font-mono text-sm",children:d>0?"$"+Math.round(d).toLocaleString():""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-amber-900 font-mono bg-amber-200 text-sm font-extrabold",children:["$",Math.round(x).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-blue-100 text-blue-800 px-4 py-3 font-bold border-b border-blue-200 flex items-center gap-2",children:[e.jsx(Ya,{className:"w-5 h-5"}),"Labor"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-50 text-blue-800 border-b border-blue-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-blue-50 z-10 w-44",children:"Expense"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-blue-100",children:[e.jsx("div",{className:"text-[10px]",children:"Last Yr Total"}),e.jsx("div",{className:"text-[9px] text-blue-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-blue-100 w-28",children:"YTD Total"})]})}),e.jsxs("tbody",{children:[[{key:"hiredLabor",label:"Hired Labor/Wages"},{key:"payrollTaxes",label:"Payroll Taxes"},{key:"benefits",label:"Benefits/Insurance"},{key:"contractLabor",label:"Contract Labor"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.expenses||{},b=(i.labor||{})[s.key]||{},x=((g=o.lastYearTotals)==null?void 0:g.labor)||{},f=[1,2,3,4,5,6,7,8,9,10,11,12],u=f.map(m=>parseFloat(b[m])||0).reduce((m,p)=>m+p,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-blue-700 bg-blue-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-blue-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:x[s.key]?"$"+parseFloat(x[s.key]).toLocaleString():"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.lastYearTotals||{},labor:{...x,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,lastYearTotals:C}}})},className:"w-24 px-1.5 py-1.5 border border-blue-300 rounded text-xs text-center focus:border-blue-500 focus:ring-1 focus:ring-blue-300 outline-none font-mono",placeholder:"$0"}),e.jsx("button",{onClick:()=>{const m=parseFloat(x[s.key])||0;if(m>0){const p=Math.round(m/12*100)/100,C={...i};C.labor||(C.labor={}),C.labor[s.key]||(C.labor[s.key]={}),f.forEach(N=>{C.labor[s.key][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:C}}})}},className:"px-2 py-1 bg-blue-500 text-white rounded text-[10px] font-bold hover:bg-blue-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),f.map(m=>{const p=b[m],C=parseFloat(p)||0,N=p&&String(p).includes(".")&&String(p).endsWith(".")?"$"+p:C>0?"$"+C.toLocaleString():"";return e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:N,onChange:k=>{let P=k.target.value.replace(/^\$/,"").replace(/,/g,"");if(P===""||/^[0-9]*\.?[0-9]*$/.test(P)){const A={...i};A.labor||(A.labor={}),A.labor[s.key]||(A.labor[s.key]={}),A.labor[s.key]={...A.labor[s.key],[m]:P},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:A}}})}},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-blue-400 focus:ring-1 focus:ring-blue-200 outline-none font-mono",placeholder:"$0"})},m)}),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-blue-800 bg-blue-50 font-mono text-sm",children:u>0?"$"+Math.round(u).toLocaleString():""})]},s.key)}),(()=>{var f;const o=((((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).expenses||{}).labor||{},i=["hiredLabor","payrollTaxes","benefits","contractLabor"],b=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>i.reduce((u,j)=>u+(parseFloat((o[j]||{})[d])||0),0)),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-blue-100 border-t-2 border-blue-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-blue-800 sticky left-0 bg-blue-100 z-10 text-sm",children:"Labor Subtotal"}),e.jsx("td",{className:"py-2 px-2 bg-blue-100"}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-blue-800 font-mono text-sm",children:d>0?"$"+Math.round(d).toLocaleString():""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-blue-900 font-mono bg-blue-200 text-sm font-extrabold",children:["$",Math.round(x).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-pink-100 text-pink-800 px-4 py-3 font-bold border-b border-pink-200 flex items-center gap-2",children:[e.jsx(Yh,{className:"w-5 h-5"}),"Veterinary & Health"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-pink-50 text-pink-800 border-b border-pink-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-pink-50 z-10 w-44",children:"Expense"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-pink-100",children:[e.jsx("div",{className:"text-[10px]",children:"Last Yr Total"}),e.jsx("div",{className:"text-[9px] text-pink-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-pink-100 w-28",children:"YTD Total"})]})}),e.jsxs("tbody",{children:[[{key:"vetServices",label:"Veterinary Services"},{key:"medications",label:"Medications/Vaccines"},{key:"breedingAI",label:"Breeding/AI Services"},{key:"herdHealthSupplies",label:"Herd Health Supplies"},{key:"dhiaTesting",label:"DHIA Testing"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.expenses||{},b=(i.vet||{})[s.key]||{},x=((g=o.lastYearTotals)==null?void 0:g.vet)||{},f=[1,2,3,4,5,6,7,8,9,10,11,12],u=f.map(m=>parseFloat(b[m])||0).reduce((m,p)=>m+p,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-pink-700 bg-pink-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-pink-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:x[s.key]?"$"+parseFloat(x[s.key]).toLocaleString():"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.lastYearTotals||{},vet:{...x,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,lastYearTotals:C}}})},className:"w-24 px-1.5 py-1.5 border border-pink-300 rounded text-xs text-center focus:border-pink-500 focus:ring-1 focus:ring-pink-300 outline-none font-mono",placeholder:"$0"}),e.jsx("button",{onClick:()=>{const m=parseFloat(x[s.key])||0;if(m>0){const p=Math.round(m/12*100)/100,C={...i};C.vet||(C.vet={}),C.vet[s.key]||(C.vet[s.key]={}),f.forEach(N=>{C.vet[s.key][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:C}}})}},className:"px-2 py-1 bg-pink-500 text-white rounded text-[10px] font-bold hover:bg-pink-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),f.map(m=>{const p=b[m],C=parseFloat(p)||0,N=p&&String(p).includes(".")&&String(p).endsWith(".")?"$"+p:C>0?"$"+C.toLocaleString():"";return e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:N,onChange:k=>{let P=k.target.value.replace(/^\$/,"").replace(/,/g,"");if(P===""||/^[0-9]*\.?[0-9]*$/.test(P)){const A={...i};A.vet||(A.vet={}),A.vet[s.key]||(A.vet[s.key]={}),A.vet[s.key]={...A.vet[s.key],[m]:P},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:A}}})}},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-pink-400 focus:ring-1 focus:ring-pink-200 outline-none font-mono",placeholder:"$0"})},m)}),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-pink-800 bg-pink-50 font-mono text-sm",children:u>0?"$"+Math.round(u).toLocaleString():""})]},s.key)}),(()=>{var f;const o=((((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).expenses||{}).vet||{},i=["vetServices","medications","breedingAI","herdHealthSupplies","dhiaTesting"],b=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>i.reduce((u,j)=>u+(parseFloat((o[j]||{})[d])||0),0)),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-pink-100 border-t-2 border-pink-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-pink-800 sticky left-0 bg-pink-100 z-10 text-sm",children:"Vet/Health Subtotal"}),e.jsx("td",{className:"py-2 px-2 bg-pink-100"}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-pink-800 font-mono text-sm",children:d>0?"$"+Math.round(d).toLocaleString():""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-pink-900 font-mono bg-pink-200 text-sm font-extrabold",children:["$",Math.round(x).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-yellow-100 text-yellow-800 px-4 py-3 font-bold border-b border-yellow-200 flex items-center gap-2",children:[e.jsx(Gh,{className:"w-5 h-5"}),"Utilities"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-yellow-50 text-yellow-800 border-b border-yellow-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-yellow-50 z-10 w-44",children:"Expense"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-yellow-100",children:[e.jsx("div",{className:"text-[10px]",children:"Last Yr Total"}),e.jsx("div",{className:"text-[9px] text-yellow-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-yellow-100 w-28",children:"YTD Total"})]})}),e.jsxs("tbody",{children:[[{key:"electricity",label:"Electricity"},{key:"propaneGas",label:"Propane/Natural Gas"},{key:"water",label:"Water"},{key:"phoneInternet",label:"Phone/Internet"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.expenses||{},b=(i.utilities||{})[s.key]||{},x=((g=o.lastYearTotals)==null?void 0:g.utilities)||{},f=[1,2,3,4,5,6,7,8,9,10,11,12],u=f.map(m=>parseFloat(b[m])||0).reduce((m,p)=>m+p,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-yellow-700 bg-yellow-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-yellow-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:x[s.key]?"$"+parseFloat(x[s.key]).toLocaleString():"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.lastYearTotals||{},utilities:{...x,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,lastYearTotals:C}}})},className:"w-24 px-1.5 py-1.5 border border-yellow-300 rounded text-xs text-center focus:border-yellow-500 focus:ring-1 focus:ring-yellow-300 outline-none font-mono",placeholder:"$0"}),e.jsx("button",{onClick:()=>{const m=parseFloat(x[s.key])||0;if(m>0){const p=Math.round(m/12*100)/100,C={...i};C.utilities||(C.utilities={}),C.utilities[s.key]||(C.utilities[s.key]={}),f.forEach(N=>{C.utilities[s.key][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:C}}})}},className:"px-2 py-1 bg-yellow-500 text-white rounded text-[10px] font-bold hover:bg-yellow-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),f.map(m=>{const p=b[m],C=parseFloat(p)||0,N=p&&String(p).includes(".")&&String(p).endsWith(".")?"$"+p:C>0?"$"+C.toLocaleString():"";return e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:N,onChange:k=>{let P=k.target.value.replace(/^\$/,"").replace(/,/g,"");if(P===""||/^[0-9]*\.?[0-9]*$/.test(P)){const A={...i};A.utilities||(A.utilities={}),A.utilities[s.key]||(A.utilities[s.key]={}),A.utilities[s.key]={...A.utilities[s.key],[m]:P},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:A}}})}},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-yellow-400 focus:ring-1 focus:ring-yellow-200 outline-none font-mono",placeholder:"$0"})},m)}),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-yellow-800 bg-yellow-50 font-mono text-sm",children:u>0?"$"+Math.round(u).toLocaleString():""})]},s.key)}),(()=>{var f;const o=((((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).expenses||{}).utilities||{},i=["electricity","propaneGas","water","phoneInternet"],b=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>i.reduce((u,j)=>u+(parseFloat((o[j]||{})[d])||0),0)),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-yellow-100 border-t-2 border-yellow-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-yellow-800 sticky left-0 bg-yellow-100 z-10 text-sm",children:"Utilities Subtotal"}),e.jsx("td",{className:"py-2 px-2 bg-yellow-100"}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-yellow-800 font-mono text-sm",children:d>0?"$"+Math.round(d).toLocaleString():""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-yellow-900 font-mono bg-yellow-200 text-sm font-extrabold",children:["$",Math.round(x).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-orange-100 text-orange-800 px-4 py-3 font-bold border-b border-orange-200 flex items-center gap-2",children:[e.jsx(qh,{className:"w-5 h-5"}),"Repairs & Maintenance"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-orange-50 text-orange-800 border-b border-orange-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-orange-50 z-10 w-44",children:"Expense"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-orange-100",children:[e.jsx("div",{className:"text-[10px]",children:"Last Yr Total"}),e.jsx("div",{className:"text-[9px] text-orange-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-orange-100 w-28",children:"YTD Total"})]})}),e.jsxs("tbody",{children:[[{key:"equipmentRepairs",label:"Equipment Repairs"},{key:"buildingRepairs",label:"Building Repairs"},{key:"vehicleMaint",label:"Vehicle Maintenance"},{key:"milkingEquip",label:"Milking Equipment"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.expenses||{},b=(i.repairs||{})[s.key]||{},x=((g=o.lastYearTotals)==null?void 0:g.repairs)||{},f=[1,2,3,4,5,6,7,8,9,10,11,12],u=f.map(m=>parseFloat(b[m])||0).reduce((m,p)=>m+p,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-orange-700 bg-orange-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-orange-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:x[s.key]?"$"+parseFloat(x[s.key]).toLocaleString():"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.lastYearTotals||{},repairs:{...x,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,lastYearTotals:C}}})},className:"w-24 px-1.5 py-1.5 border border-orange-300 rounded text-xs text-center focus:border-orange-500 focus:ring-1 focus:ring-orange-300 outline-none font-mono",placeholder:"$0"}),e.jsx("button",{onClick:()=>{const m=parseFloat(x[s.key])||0;if(m>0){const p=Math.round(m/12*100)/100,C={...i};C.repairs||(C.repairs={}),C.repairs[s.key]||(C.repairs[s.key]={}),f.forEach(N=>{C.repairs[s.key][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:C}}})}},className:"px-2 py-1 bg-orange-500 text-white rounded text-[10px] font-bold hover:bg-orange-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),f.map(m=>{const p=b[m],C=parseFloat(p)||0,N=p&&String(p).includes(".")&&String(p).endsWith(".")?"$"+p:C>0?"$"+C.toLocaleString():"";return e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:N,onChange:k=>{let P=k.target.value.replace(/^\$/,"").replace(/,/g,"");if(P===""||/^[0-9]*\.?[0-9]*$/.test(P)){const A={...i};A.repairs||(A.repairs={}),A.repairs[s.key]||(A.repairs[s.key]={}),A.repairs[s.key]={...A.repairs[s.key],[m]:P},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:A}}})}},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-orange-400 focus:ring-1 focus:ring-orange-200 outline-none font-mono",placeholder:"$0"})},m)}),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-orange-800 bg-orange-50 font-mono text-sm",children:u>0?"$"+Math.round(u).toLocaleString():""})]},s.key)}),(()=>{var f;const o=((((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).expenses||{}).repairs||{},i=["equipmentRepairs","buildingRepairs","vehicleMaint","milkingEquip"],b=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>i.reduce((u,j)=>u+(parseFloat((o[j]||{})[d])||0),0)),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-orange-100 border-t-2 border-orange-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-orange-800 sticky left-0 bg-orange-100 z-10 text-sm",children:"Repairs Subtotal"}),e.jsx("td",{className:"py-2 px-2 bg-orange-100"}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-orange-800 font-mono text-sm",children:d>0?"$"+Math.round(d).toLocaleString():""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-orange-900 font-mono bg-orange-200 text-sm font-extrabold",children:["$",Math.round(x).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-teal-100 text-teal-800 px-4 py-3 font-bold border-b border-teal-200 flex items-center gap-2",children:[e.jsx(Uh,{className:"w-5 h-5"}),"Supplies & Fuel"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-teal-50 text-teal-800 border-b border-teal-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-teal-50 z-10 w-44",children:"Expense"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-teal-100",children:[e.jsx("div",{className:"text-[10px]",children:"Last Yr Total"}),e.jsx("div",{className:"text-[9px] text-teal-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-teal-100 w-28",children:"YTD Total"})]})}),e.jsxs("tbody",{children:[[{key:"milkingSupplies",label:"Milking Supplies"},{key:"cleaningSupplies",label:"Cleaning Supplies"},{key:"bedding",label:"Bedding"},{key:"diesel",label:"Diesel Fuel"},{key:"gasoline",label:"Gasoline"},{key:"lubricants",label:"Lubricants/Oil"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.expenses||{},b=(i.supplies||{})[s.key]||{},x=((g=o.lastYearTotals)==null?void 0:g.supplies)||{},f=[1,2,3,4,5,6,7,8,9,10,11,12],u=f.map(m=>parseFloat(b[m])||0).reduce((m,p)=>m+p,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-teal-700 bg-teal-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-teal-50/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:x[s.key]?"$"+parseFloat(x[s.key]).toLocaleString():"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.lastYearTotals||{},supplies:{...x,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,lastYearTotals:C}}})},className:"w-24 px-1.5 py-1.5 border border-teal-300 rounded text-xs text-center focus:border-teal-500 focus:ring-1 focus:ring-teal-300 outline-none font-mono",placeholder:"$0"}),e.jsx("button",{onClick:()=>{const m=parseFloat(x[s.key])||0;if(m>0){const p=Math.round(m/12*100)/100,C={...i};C.supplies||(C.supplies={}),C.supplies[s.key]||(C.supplies[s.key]={}),f.forEach(N=>{C.supplies[s.key][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:C}}})}},className:"px-2 py-1 bg-teal-500 text-white rounded text-[10px] font-bold hover:bg-teal-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),f.map(m=>{const p=b[m],C=parseFloat(p)||0,N=p&&String(p).includes(".")&&String(p).endsWith(".")?"$"+p:C>0?"$"+C.toLocaleString():"";return e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:N,onChange:k=>{let P=k.target.value.replace(/^\$/,"").replace(/,/g,"");if(P===""||/^[0-9]*\.?[0-9]*$/.test(P)){const A={...i};A.supplies||(A.supplies={}),A.supplies[s.key]||(A.supplies[s.key]={}),A.supplies[s.key]={...A.supplies[s.key],[m]:P},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:A}}})}},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-teal-400 focus:ring-1 focus:ring-teal-200 outline-none font-mono",placeholder:"$0"})},m)}),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-teal-800 bg-teal-50 font-mono text-sm",children:u>0?"$"+Math.round(u).toLocaleString():""})]},s.key)}),(()=>{var f;const o=((((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).expenses||{}).supplies||{},i=["milkingSupplies","cleaningSupplies","bedding","diesel","gasoline","lubricants"],b=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>i.reduce((u,j)=>u+(parseFloat((o[j]||{})[d])||0),0)),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-teal-100 border-t-2 border-teal-300 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-teal-800 sticky left-0 bg-teal-100 z-10 text-sm",children:"Supplies/Fuel Subtotal"}),e.jsx("td",{className:"py-2 px-2 bg-teal-100"}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-teal-800 font-mono text-sm",children:d>0?"$"+Math.round(d).toLocaleString():""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-teal-900 font-mono bg-teal-200 text-sm font-extrabold",children:["$",Math.round(x).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-200 text-gray-800 px-4 py-3 font-bold border-b border-gray-300 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),"Other Operating Expenses"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-gray-800 border-b border-gray-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-gray-100 z-10 w-44",children:"Expense"}),e.jsxs("th",{className:"py-2 px-2 text-center font-semibold w-32 bg-gray-200",children:[e.jsx("div",{className:"text-[10px]",children:"Last Yr Total"}),e.jsx("div",{className:"text-[9px] text-gray-600",children:"Enter & click 12"})]}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-gray-200 w-28",children:"YTD Total"})]})}),e.jsxs("tbody",{children:[[{key:"insurance",label:"Insurance"},{key:"propertyTaxes",label:"Property Taxes"},{key:"licensesPermits",label:"Licenses/Permits"},{key:"professionalFees",label:"Professional Fees"},{key:"customHire",label:"Custom Hire"},{key:"marketing",label:"Marketing/Advertising"},{key:"officeSupplies",label:"Office Supplies"},{key:"miscellaneous",label:"Miscellaneous"}].map((s,n)=>{var j,g;const o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.dairy)||{},i=o.expenses||{},b=(i.other||{})[s.key]||{},x=((g=o.lastYearTotals)==null?void 0:g.other)||{},f=[1,2,3,4,5,6,7,8,9,10,11,12],u=f.map(m=>parseFloat(b[m])||0).reduce((m,p)=>m+p,0);return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-gray-700 bg-gray-50 sticky left-0 z-10 text-sm",children:s.label}),e.jsx("td",{className:"py-1 px-1 bg-gray-100/50",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:x[s.key]?"$"+parseFloat(x[s.key]).toLocaleString():"",onChange:m=>{let p=m.target.value.replace(/[$,]/g,"").replace(/[^0-9.]/g,"");const C={...o.lastYearTotals||{},other:{...x,[s.key]:p}};z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,lastYearTotals:C}}})},className:"w-24 px-1.5 py-1.5 border border-gray-300 rounded text-xs text-center focus:border-gray-500 focus:ring-1 focus:ring-gray-300 outline-none font-mono",placeholder:"$0"}),e.jsx("button",{onClick:()=>{const m=parseFloat(x[s.key])||0;if(m>0){const p=Math.round(m/12*100)/100,C={...i};C.other||(C.other={}),C.other[s.key]||(C.other[s.key]={}),f.forEach(N=>{C.other[s.key][N]=p}),z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:C}}})}},className:"px-2 py-1 bg-gray-500 text-white rounded text-[10px] font-bold hover:bg-gray-600 transition-colors",title:"Divide by 12 and apply to all months",children:"12"})]})}),f.map(m=>{const p=b[m],C=parseFloat(p)||0,N=p&&String(p).includes(".")&&String(p).endsWith(".")?"$"+p:C>0?"$"+C.toLocaleString():"";return e.jsx("td",{className:"py-1 px-1",children:e.jsx("input",{type:"text",value:N,onChange:k=>{let P=k.target.value.replace(/^\$/,"").replace(/,/g,"");if(P===""||/^[0-9]*\.?[0-9]*$/.test(P)){const A={...i};A.other||(A.other={}),A.other[s.key]||(A.other[s.key]={}),A.other[s.key]={...A.other[s.key],[m]:P},z({cashFlow:{...(r==null?void 0:r.cashFlow)||{},dairy:{...o,expenses:A}}})}},className:"w-full px-1.5 py-1.5 border border-gray-200 rounded text-xs text-center focus:border-gray-400 focus:ring-1 focus:ring-gray-200 outline-none font-mono",placeholder:"$0"})},m)}),e.jsx("td",{className:"py-1.5 px-2 text-center font-bold text-gray-800 bg-gray-100 font-mono text-sm",children:u>0?"$"+Math.round(u).toLocaleString():""})]},s.key)}),(()=>{var f;const o=((((f=r==null?void 0:r.cashFlow)==null?void 0:f.dairy)||{}).expenses||{}).other||{},i=["insurance","propertyTaxes","licensesPermits","professionalFees","customHire","marketing","officeSupplies","miscellaneous"],b=[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>i.reduce((u,j)=>u+(parseFloat((o[j]||{})[d])||0),0)),x=b.reduce((d,u)=>d+u,0);return e.jsxs("tr",{className:"bg-gray-200 border-t-2 border-gray-400 font-bold",children:[e.jsx("td",{className:"py-2 px-3 text-gray-800 sticky left-0 bg-gray-200 z-10 text-sm",children:"Other Subtotal"}),e.jsx("td",{className:"py-2 px-2 bg-gray-200"}),b.map((d,u)=>e.jsx("td",{className:"py-2 px-2 text-center text-gray-800 font-mono text-sm",children:d>0?"$"+Math.round(d).toLocaleString():""},u)),e.jsxs("td",{className:"py-2 px-2 text-center text-gray-900 font-mono bg-gray-300 text-sm font-extrabold",children:["$",Math.round(x).toLocaleString()]})]})})()]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-red-600 text-white px-4 py-3 font-bold border-b border-red-700 flex items-center gap-2",children:[e.jsx(ur,{className:"w-5 h-5"}),"Total Operating Expenses"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-red-50 text-red-800 border-b border-red-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-red-50 z-10 w-44",children:"Category"}),e.jsx("th",{className:"py-2 px-2 w-32 bg-red-100"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-red-100 w-28",children:"YTD Total"})]})}),e.jsx("tbody",{children:(()=>{var N;const s=((N=r==null?void 0:r.cashFlow)==null?void 0:N.dairy)||{},n=s.expenses||{},o=s.herd||{},i=s.feedCalculator||{},h=[1,2,3,4,5,6,7,8,9,10,11,12],b=we||new Date().getFullYear(),f=[31,b%4===0&&b%100!==0||b%400===0?29:28,31,30,31,30,31,31,30,31,30,31],d=[{key:"milkingCows",herdKey:"milkingCows"},{key:"dryCows",herdKey:"dryCows"},{key:"bredHeifers",herdKey:"bredHeifers"},{key:"openHeifers",herdKey:"openHeifers"},{key:"bulls",herdKey:"bulls"}],u=h.map((k,P)=>d.reduce((A,R)=>{const L=parseFloat(i[R.key])||0,D=parseFloat((o[R.herdKey]||{})[k])||0;return A+L*D*f[P]},0)),j=u.reduce((k,P)=>k+P,0),m=[{name:"Feed & Nutrition",data:n.feed||{},keys:["purchasedFeed","mineralsSupplements","hayForage","silageHaylage","milkReplacer"],color:"amber"},{name:"Labor",data:n.labor||{},keys:["hiredLabor","payrollTaxes","benefits","contractLabor"],color:"blue"},{name:"Veterinary & Health",data:n.vet||{},keys:["vetServices","medications","breedingAI","herdHealthSupplies","dhiaTesting"],color:"pink"},{name:"Utilities",data:n.utilities||{},keys:["electricity","propaneGas","water","phoneInternet"],color:"yellow"},{name:"Repairs & Maintenance",data:n.repairs||{},keys:["equipmentRepairs","buildingRepairs","vehicleMaint","milkingEquip"],color:"orange"},{name:"Supplies & Fuel",data:n.supplies||{},keys:["milkingSupplies","cleaningSupplies","bedding","diesel","gasoline","lubricants"],color:"teal"},{name:"Other Operating",data:n.other||{},keys:["insurance","propertyTaxes","licensesPermits","professionalFees","customHire","marketing","officeSupplies","miscellaneous"],color:"gray"}].map(k=>{const P=h.map(R=>k.keys.reduce((L,D)=>L+(parseFloat((k.data[D]||{})[R])||0),0)),A=P.reduce((R,L)=>R+L,0);return{...k,monthlyTotals:P,ytd:A}}),p=h.map((k,P)=>m.reduce((A,R)=>A+R.monthlyTotals[P],0)+u[P]),C=p.reduce((k,P)=>k+P,0);return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-100 bg-lime-50",children:[e.jsx("td",{className:"py-1.5 px-3 font-semibold text-lime-700 bg-lime-100 sticky left-0 z-10 text-sm",children:"Feed Cost Calculator"}),e.jsx("td",{}),u.map((k,P)=>e.jsx("td",{className:"py-1.5 px-2 text-center text-lime-700 font-mono text-sm",children:k>0?"$"+Math.round(k).toLocaleString():""},P)),e.jsxs("td",{className:"py-1.5 px-2 text-center font-bold text-lime-800 bg-lime-100 font-mono text-sm",children:["$",Math.round(j).toLocaleString()]})]}),m.map((k,P)=>e.jsxs("tr",{className:`border-b border-gray-100 ${P%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:`py-1.5 px-3 font-semibold text-${k.color}-700 bg-${k.color}-50 sticky left-0 z-10 text-sm`,children:k.name}),e.jsx("td",{}),k.monthlyTotals.map((A,R)=>e.jsx("td",{className:"py-1.5 px-2 text-center text-gray-700 font-mono text-sm",children:A>0?"$"+Math.round(A).toLocaleString():""},R)),e.jsxs("td",{className:"py-1.5 px-2 text-center font-bold text-gray-800 bg-gray-100 font-mono text-sm",children:["$",Math.round(k.ytd).toLocaleString()]})]},k.name)),e.jsxs("tr",{className:"bg-red-200 border-t-4 border-red-500 font-bold",children:[e.jsx("td",{className:"py-3 px-3 text-red-900 sticky left-0 bg-red-200 z-10 text-sm",children:"TOTAL EXPENSES"}),e.jsx("td",{className:"bg-red-200"}),p.map((k,P)=>e.jsx("td",{className:"py-3 px-2 text-center text-red-900 font-mono text-sm",children:k>0?"$"+Math.round(k).toLocaleString():""},P)),e.jsxs("td",{className:"py-3 px-2 text-center text-red-900 font-mono bg-red-300 text-base font-extrabold",children:["$",Math.round(C).toLocaleString()]})]})]})})()})]})})]}),(()=>{var k;const s=((k=r==null?void 0:r.cashFlow)==null?void 0:k.dairy)||{},n=s.expenses||{},o=s.herd||{},i=s.feedCalculator||{},h=[1,2,3,4,5,6,7,8,9,10,11,12],b=we||new Date().getFullYear(),f=[31,b%4===0&&b%100!==0||b%400===0?29:28,31,30,31,30,31,31,30,31,30,31],d={feed:{keys:["purchasedFeed","mineralsSupplements","hayForage","silageHaylage","milkReplacer"]},labor:{keys:["hiredLabor","payrollTaxes","benefits","contractLabor"]},vet:{keys:["vetServices","medications","breedingAI","herdHealthSupplies","dhiaTesting"]},utilities:{keys:["electricity","propaneGas","water","phoneInternet"]},repairs:{keys:["equipmentRepairs","buildingRepairs","vehicleMaint","milkingEquip"]},supplies:{keys:["milkingSupplies","cleaningSupplies","bedding","diesel","gasoline","lubricants"]},other:{keys:["insurance","propertyTaxes","licensesPermits","professionalFees","customHire","marketing","officeSupplies","miscellaneous"]}},u=P=>{const A=n[P]||{};return h.reduce((R,L)=>R+d[P].keys.reduce((D,F)=>D+(parseFloat((A[F]||{})[L])||0),0),0)},j=[{key:"milkingCows",herdKey:"milkingCows"},{key:"dryCows",herdKey:"dryCows"},{key:"bredHeifers",herdKey:"bredHeifers"},{key:"openHeifers",herdKey:"openHeifers"},{key:"bulls",herdKey:"bulls"}],g=h.reduce((P,A,R)=>P+j.reduce((L,D)=>{const F=parseFloat(i[D.key])||0,v=parseFloat((o[D.herdKey]||{})[A])||0;return L+F*v*f[R]},0),0);u("feed");const m=u("labor"),p=Object.keys(d).reduce((P,A)=>P+u(A),0),C=g+p,N=C/12;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"YTD Total Expenses"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700 font-mono",children:["$",Math.round(C).toLocaleString()]}),e.jsx("div",{className:"text-xs text-red-500",children:"All categories + Feed Calculator"})]}),e.jsxs("div",{className:"bg-lime-50 rounded-lg p-4 border border-lime-200",children:[e.jsx("div",{className:"text-sm text-lime-600 font-medium",children:"YTD Feed Calculator"}),e.jsxs("div",{className:"text-2xl font-bold text-lime-700 font-mono",children:["$",Math.round(g).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-lime-500",children:[C>0?Math.round(g/C*100):0,"% of total"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"YTD Labor Costs"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:["$",Math.round(m).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-blue-500",children:[C>0?Math.round(m/C*100):0,"% of total"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Avg Monthly Expenses"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:["$",Math.round(N).toLocaleString()]}),e.jsx("div",{className:"text-xs text-purple-500",children:"Per month average"})]})]})})()]})}),ns==="summary"&&e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($r,{className:"w-6 h-6 text-sky-600"}),"Dairy Enterprise Summary"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Income vs Expense analysis per milking cow with monthly breakdown."})]}),(()=>{var V;const s=((V=r==null?void 0:r.cashFlow)==null?void 0:V.dairy)||{},n=s.milkRevenue||{},o=s.expenses||{},i=s.herd||{},h=s.feedCalculator||{},b=s.cullCowSales||{},x=s.bullCalfSales||{},f=s.heiferCalfSales||{},d=[1,2,3,4,5,6,7,8,9,10,11,12],u=we||new Date().getFullYear(),g=[31,u%4===0&&u%100!==0||u%400===0?29:28,31,30,31,30,31,31,30,31,30,31],m=d.map(q=>parseFloat((i.milkingCows||{})[q])||0).filter(q=>q>0),p=m.length>0?m.reduce((q,X)=>q+X,0)/m.length:0,C=d.reduce((q,X)=>{const se=parseFloat((n.butterfatLbs||{})[X])||0,le=parseFloat((n.butterfatPrice||{})[X])||0,ke=parseFloat((n.proteinLbs||{})[X])||0,Le=parseFloat((n.proteinPrice||{})[X])||0,$e=parseFloat((n.proteinCaseinatePrice||{})[X])||0;return q+se*le+ke*Le+ke*$e},0),N=n.deductions||{},k=n.hauling||{},P=["stopCharges","nationalMilkPromo","stateInspectionFund","stateMilkPromo","producerPremium","otherDeductions"],A=["fuelSurcharge","baseHauling"],R=d.reduce((q,X)=>q+P.reduce((se,le)=>se+(parseFloat((N[le]||{})[X])||0),0),0),L=d.reduce((q,X)=>q+A.reduce((se,le)=>se+(parseFloat((k[le]||{})[X])||0),0),0),D=C-R-L,F=d.reduce((q,X)=>{const se=parseFloat((b.cullCowHead||{})[X])||0,le=parseFloat((b.cullCowPricePerHead||{})[X])||0,ke=parseFloat((b.cullCowAvgWeight||{})[X])||0,Le=parseFloat((b.cullCowPricePerLb||{})[X])||0,$e=le>0?se*le:se*ke*Le,qe=parseFloat((x.bullCalfHead||{})[X])||0,et=parseFloat((x.bullCalfPricePerHead||{})[X])||0,oe=parseFloat((x.bullCalfAvgWeight||{})[X])||0,be=parseFloat((x.bullCalfPricePerLb||{})[X])||0,Te=et>0?qe*et:qe*oe*be,ye=parseFloat((f.heiferCalfHead||{})[X])||0,Ue=parseFloat((f.heiferCalfPricePerHead||{})[X])||0,tt=parseFloat((f.heiferCalfAvgWeight||{})[X])||0,Je=parseFloat((f.heiferCalfPricePerLb||{})[X])||0,Ye=Ue>0?ye*Ue:ye*tt*Je;return q+$e+Te+Ye},0),v=D+F,S={feed:{keys:["purchasedFeed","mineralsSupplements","hayForage","silageHaylage","milkReplacer"]},labor:{keys:["hiredLabor","payrollTaxes","benefits","contractLabor"]},vet:{keys:["vetServices","medications","breedingAI","herdHealthSupplies","dhiaTesting"]},utilities:{keys:["electricity","propaneGas","water","phoneInternet"]},repairs:{keys:["equipmentRepairs","buildingRepairs","vehicleMaint","milkingEquip"]},supplies:{keys:["milkingSupplies","cleaningSupplies","bedding","diesel","gasoline","lubricants"]},other:{keys:["insurance","propertyTaxes","licensesPermits","professionalFees","customHire","marketing","officeSupplies","miscellaneous"]}},E=[{key:"milkingCows",herdKey:"milkingCows"},{key:"dryCows",herdKey:"dryCows"},{key:"bredHeifers",herdKey:"bredHeifers"},{key:"openHeifers",herdKey:"openHeifers"},{key:"bulls",herdKey:"bulls"}],I=d.reduce((q,X,se)=>q+E.reduce((le,ke)=>{const Le=parseFloat(h[ke.key])||0,$e=parseFloat((i[ke.herdKey]||{})[X])||0;return le+Le*$e*g[se]},0),0),H=Object.keys(S).reduce((q,X)=>{const se=o[X]||{};return q+d.reduce((le,ke)=>le+S[X].keys.reduce((Le,$e)=>Le+(parseFloat((se[$e]||{})[ke])||0),0),0)},0),Y=I+H,_=v-Y,K=p>0?v/p:0,re=p>0?Y/p:0,he=p>0?_/p:0,U=n.totalFarmLbs||{};return d.reduce((q,X)=>q+(parseFloat(U[X])||0),0),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-sky-50 rounded-lg p-4 border border-sky-200",children:[e.jsx("div",{className:"text-sm text-sky-600 font-medium",children:"Avg Milking Cows"}),e.jsx("div",{className:"text-3xl font-bold text-sky-700 font-mono",children:Math.round(p)}),e.jsx("div",{className:"text-xs text-sky-500",children:"Monthly average"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Net Income/Cow"}),e.jsxs("div",{className:`text-3xl font-bold font-mono ${he>=0?"text-green-700":"text-red-700"}`,children:["$",Math.round(he).toLocaleString()]}),e.jsx("div",{className:"text-xs text-green-500",children:"YTD per milking cow"})]}),e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:[e.jsx("div",{className:"text-sm text-emerald-600 font-medium",children:"Revenue/Cow"}),e.jsxs("div",{className:"text-3xl font-bold text-emerald-700 font-mono",children:["$",Math.round(K).toLocaleString()]}),e.jsx("div",{className:"text-xs text-emerald-500",children:"YTD per milking cow"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Expense/Cow"}),e.jsxs("div",{className:"text-3xl font-bold text-red-700 font-mono",children:["$",Math.round(re).toLocaleString()]}),e.jsx("div",{className:"text-xs text-red-500",children:"YTD per milking cow"})]})]})})(),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-sky-600 text-white px-4 py-3 font-bold border-b border-sky-700 flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5"}),"Monthly Income vs Expense Per Milking Cow"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-sky-50 text-sky-800 border-b border-sky-200",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold sticky left-0 bg-sky-50 z-10 w-48",children:"Metric"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(s=>e.jsx("th",{className:"py-2 px-2 text-center font-semibold w-24",children:s},s)),e.jsx("th",{className:"py-2 px-3 text-center font-semibold bg-sky-100 w-28",children:"YTD Total"})]})}),e.jsx("tbody",{children:(()=>{var et;const s=((et=r==null?void 0:r.cashFlow)==null?void 0:et.dairy)||{},n=s.milkRevenue||{},o=s.expenses||{},i=s.herd||{},h=s.feedCalculator||{},b=s.cullCowSales||{},x=s.bullCalfSales||{},f=s.heiferCalfSales||{},d=[1,2,3,4,5,6,7,8,9,10,11,12],u=we||new Date().getFullYear(),g=[31,u%4===0&&u%100!==0||u%400===0?29:28,31,30,31,30,31,31,30,31,30,31],m=d.map(oe=>parseFloat((i.milkingCows||{})[oe])||0),p=d.map(oe=>{const be=parseFloat((n.butterfatLbs||{})[oe])||0,Te=parseFloat((n.butterfatPrice||{})[oe])||0,ye=parseFloat((n.proteinLbs||{})[oe])||0,Ue=parseFloat((n.proteinPrice||{})[oe])||0,tt=parseFloat((n.proteinCaseinatePrice||{})[oe])||0;return be*Te+ye*Ue+ye*tt}),C=n.deductions||{},N=n.hauling||{},k=["stopCharges","nationalMilkPromo","stateInspectionFund","stateMilkPromo","producerPremium","otherDeductions"],P=["fuelSurcharge","baseHauling"],A=d.map(oe=>k.reduce((be,Te)=>be+(parseFloat((C[Te]||{})[oe])||0),0)),R=d.map(oe=>P.reduce((be,Te)=>be+(parseFloat((N[Te]||{})[oe])||0),0)),L=d.map((oe,be)=>p[be]-A[be]-R[be]),D=d.map(oe=>{const be=parseFloat((b.cullCowHead||{})[oe])||0,Te=parseFloat((b.cullCowPricePerHead||{})[oe])||0,ye=parseFloat((b.cullCowAvgWeight||{})[oe])||0,Ue=parseFloat((b.cullCowPricePerLb||{})[oe])||0,tt=Te>0?be*Te:be*ye*Ue,Je=parseFloat((x.bullCalfHead||{})[oe])||0,Ye=parseFloat((x.bullCalfPricePerHead||{})[oe])||0,gt=parseFloat((x.bullCalfAvgWeight||{})[oe])||0,nt=parseFloat((x.bullCalfPricePerLb||{})[oe])||0,Is=Ye>0?Je*Ye:Je*gt*nt,ps=parseFloat((f.heiferCalfHead||{})[oe])||0,ma=parseFloat((f.heiferCalfPricePerHead||{})[oe])||0,Ks=parseFloat((f.heiferCalfAvgWeight||{})[oe])||0,ua=parseFloat((f.heiferCalfPricePerLb||{})[oe])||0,Lr=ma>0?ps*ma:ps*Ks*ua;return tt+Is+Lr}),F=d.map((oe,be)=>L[be]+D[be]),v={feed:{keys:["purchasedFeed","mineralsSupplements","hayForage","silageHaylage","milkReplacer"]},labor:{keys:["hiredLabor","payrollTaxes","benefits","contractLabor"]},vet:{keys:["vetServices","medications","breedingAI","herdHealthSupplies","dhiaTesting"]},utilities:{keys:["electricity","propaneGas","water","phoneInternet"]},repairs:{keys:["equipmentRepairs","buildingRepairs","vehicleMaint","milkingEquip"]},supplies:{keys:["milkingSupplies","cleaningSupplies","bedding","diesel","gasoline","lubricants"]},other:{keys:["insurance","propertyTaxes","licensesPermits","professionalFees","customHire","marketing","officeSupplies","miscellaneous"]}},S=[{key:"milkingCows",herdKey:"milkingCows"},{key:"dryCows",herdKey:"dryCows"},{key:"bredHeifers",herdKey:"bredHeifers"},{key:"openHeifers",herdKey:"openHeifers"},{key:"bulls",herdKey:"bulls"}],E=d.map((oe,be)=>S.reduce((Te,ye)=>{const Ue=parseFloat(h[ye.key])||0,tt=parseFloat((i[ye.herdKey]||{})[oe])||0;return Te+Ue*tt*g[be]},0)),I=d.map((oe,be)=>{const Te=Object.keys(v).reduce((ye,Ue)=>{const tt=o[Ue]||{};return ye+v[Ue].keys.reduce((Je,Ye)=>Je+(parseFloat((tt[Ye]||{})[oe])||0),0)},0);return E[be]+Te}),H=d.map((oe,be)=>F[be]-I[be]),Y=d.map((oe,be)=>m[be]>0?F[be]/m[be]:0),_=d.map((oe,be)=>m[be]>0?I[be]/m[be]:0),K=d.map((oe,be)=>m[be]>0?H[be]/m[be]:0),re=n.totalFarmLbs||{},he=d.map(oe=>parseFloat(re[oe])||0),U=d.map((oe,be)=>m[be]>0?he[be]/m[be]:0),V=m.filter(oe=>oe>0).length>0?m.filter(oe=>oe>0).reduce((oe,be)=>oe+be,0)/m.filter(oe=>oe>0).length:0,q=F.reduce((oe,be)=>oe+be,0),X=I.reduce((oe,be)=>oe+be,0),se=q-X,le=he.reduce((oe,be)=>oe+be,0),ke=d.map((oe,be)=>{const Te=U[be],ye=g[be];return Te>0?Te/ye:0}),Le=g.reduce((oe,be)=>oe+be,0),$e=V>0?le/V/Le:0;return[{label:"Milking Cows",data:m,ytd:V,format:"int",color:"sky",isAvg:!0},{label:"Milk Production (lbs)",data:he,ytd:le,format:"int",color:"blue"},{label:"Lbs/Cow",data:U,ytd:V>0?le/V:0,format:"int",color:"blue",highlight:!0},{label:"Avg Daily Lbs/Cow",data:ke,ytd:$e,format:"decimal",color:"blue",highlight:!0,isDaily:!0},{label:"divider1",isDivider:!0},{label:"Net Milk Revenue",data:L,ytd:L.reduce((oe,be)=>oe+be,0),format:"currency",color:"green"},{label:"Livestock Sales",data:D,ytd:D.reduce((oe,be)=>oe+be,0),format:"currency",color:"green"},{label:"Total Revenue",data:F,ytd:q,format:"currency",color:"emerald",isBold:!0},{label:"Revenue/Cow",data:Y,ytd:V>0?q/V:0,format:"currency",color:"emerald",highlight:!0},{label:"divider2",isDivider:!0},{label:"Total Expenses",data:I,ytd:X,format:"currency",color:"red",isBold:!0},{label:"Expense/Cow",data:_,ytd:V>0?X/V:0,format:"currency",color:"red",highlight:!0},{label:"divider3",isDivider:!0},{label:"Net Income",data:H,ytd:se,format:"currency",color:"purple",isBold:!0,isNet:!0},{label:"Net Income/Cow",data:K,ytd:V>0?se/V:0,format:"currency",color:"purple",highlight:!0,isNet:!0}].map((oe,be)=>{if(oe.isDivider)return e.jsx("tr",{className:"bg-gray-100 h-1",children:e.jsx("td",{colSpan:14})},oe.label);oe.highlight?`${oe.color}`:be%2;const Te=`text-${oe.color}-700`,ye=`bg-${oe.color}-50`;return e.jsxs("tr",{className:`border-b border-gray-100 ${oe.highlight?`bg-${oe.color}-50`:be%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:`py-2 px-3 font-semibold ${Te} ${ye} sticky left-0 z-10 text-sm ${oe.isBold?"font-bold":""} ${oe.highlight?"italic":""}`,children:oe.highlight?` ${oe.label}`:oe.label}),oe.data.map((Ue,tt)=>{let Je="";return Ue!==0&&(oe.format==="currency"?Je=(oe.isNet&&Ue<0?"-":"")+"$"+Math.abs(Math.round(Ue)).toLocaleString():oe.format==="decimal"?Je=Number(Ue).toFixed(1):Je=Math.round(Ue).toLocaleString()),e.jsx("td",{className:`py-2 px-2 text-center font-mono text-sm ${oe.isBold?"font-bold":""} ${oe.isNet&&Ue<0?"text-red-600":Te}`,children:Je},tt)}),e.jsx("td",{className:`py-2 px-2 text-center font-bold font-mono text-sm bg-${oe.color}-100 ${oe.isNet&&oe.ytd<0?"text-red-600":`text-${oe.color}-800`}`,children:oe.format==="currency"?(oe.isNet&&oe.ytd<0?"-":"")+"$"+Math.abs(Math.round(oe.ytd)).toLocaleString():oe.format==="decimal"?Number(oe.ytd).toFixed(1)+" avg":oe.isAvg?Math.round(oe.ytd).toLocaleString()+" avg":Math.round(oe.ytd).toLocaleString()})]},oe.label)})})()})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-red-600 text-white px-4 py-3 font-bold border-b border-red-700 flex items-center gap-2",children:[e.jsx($r,{className:"w-5 h-5"}),"Expense Breakdown Per Milking Cow (YTD)"]}),e.jsx("div",{className:"p-4",children:(()=>{var k;const s=((k=r==null?void 0:r.cashFlow)==null?void 0:k.dairy)||{},n=s.expenses||{},o=s.herd||{},i=s.feedCalculator||{},h=[1,2,3,4,5,6,7,8,9,10,11,12],b=we||new Date().getFullYear(),f=[31,b%4===0&&b%100!==0||b%400===0?29:28,31,30,31,30,31,31,30,31,30,31],d=h.map(P=>parseFloat((o.milkingCows||{})[P])||0).filter(P=>P>0),u=d.length>0?d.reduce((P,A)=>P+A,0)/d.length:0,j=[{key:"milkingCows",herdKey:"milkingCows"},{key:"dryCows",herdKey:"dryCows"},{key:"bredHeifers",herdKey:"bredHeifers"},{key:"openHeifers",herdKey:"openHeifers"},{key:"bulls",herdKey:"bulls"}],p=[{name:"Feed Cost Calculator",key:"feedCalc",ytdOverride:h.reduce((P,A,R)=>P+j.reduce((L,D)=>{const F=parseFloat(i[D.key])||0,v=parseFloat((o[D.herdKey]||{})[A])||0;return L+F*v*f[R]},0),0),color:"lime"},{name:"Feed & Nutrition",key:"feed",keys:["purchasedFeed","mineralsSupplements","hayForage","silageHaylage","milkReplacer"],color:"amber"},{name:"Labor",key:"labor",keys:["hiredLabor","payrollTaxes","benefits","contractLabor"],color:"blue"},{name:"Veterinary & Health",key:"vet",keys:["vetServices","medications","breedingAI","herdHealthSupplies","dhiaTesting"],color:"pink"},{name:"Utilities",key:"utilities",keys:["electricity","propaneGas","water","phoneInternet"],color:"yellow"},{name:"Repairs & Maintenance",key:"repairs",keys:["equipmentRepairs","buildingRepairs","vehicleMaint","milkingEquip"],color:"orange"},{name:"Supplies & Fuel",key:"supplies",keys:["milkingSupplies","cleaningSupplies","bedding","diesel","gasoline","lubricants"],color:"teal"},{name:"Other Operating",key:"other",keys:["insurance","propertyTaxes","licensesPermits","professionalFees","customHire","marketing","officeSupplies","miscellaneous"],color:"gray"}].map(P=>{let A;if(P.ytdOverride!==void 0)A=P.ytdOverride;else{const L=n[P.key]||{};A=h.reduce((D,F)=>D+P.keys.reduce((v,S)=>v+(parseFloat((L[S]||{})[F])||0),0),0)}const R=u>0?A/u:0;return{...P,ytd:A,perCow:R}}),C=p.reduce((P,A)=>P+A.ytd,0),N=u>0?C/u:0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-4",children:"Cost Per Cow by Category"}),p.map(P=>{const A=N>0?P.perCow/N*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:`font-medium text-${P.color}-700`,children:P.name}),e.jsxs("span",{className:"font-mono font-semibold",children:["$",Math.round(P.perCow).toLocaleString()]})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${P.color}-500 rounded-full transition-all duration-500`,style:{width:`${Math.min(A,100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[A.toFixed(1),"% of total"]})]},P.key)}),e.jsx("div",{className:"pt-4 border-t-2 border-gray-300 mt-4",children:e.jsxs("div",{className:"flex justify-between text-base font-bold",children:[e.jsx("span",{className:"text-gray-800",children:"Total Per Cow"}),e.jsxs("span",{className:"font-mono text-red-700",children:["$",Math.round(N).toLocaleString()]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-4",children:"Category Summary"}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold",children:"Category"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"YTD Total"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"Per Cow"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold",children:"%"})]})}),e.jsxs("tbody",{children:[p.map((P,A)=>e.jsxs("tr",{className:A%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:`py-2 px-3 font-medium text-${P.color}-700`,children:P.name}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:["$",Math.round(P.ytd).toLocaleString()]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono font-semibold",children:["$",Math.round(P.perCow).toLocaleString()]}),e.jsxs("td",{className:"py-2 px-3 text-right text-gray-600",children:[C>0?(P.ytd/C*100).toFixed(1):0,"%"]})]},P.key)),e.jsxs("tr",{className:"bg-red-100 font-bold border-t-2 border-red-300",children:[e.jsx("td",{className:"py-2 px-3 text-red-800",children:"TOTAL"}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-red-800",children:["$",Math.round(C).toLocaleString()]}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono text-red-800",children:["$",Math.round(N).toLocaleString()]}),e.jsx("td",{className:"py-2 px-3 text-right text-red-800",children:"100%"})]})]})]})]})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-purple-600 text-white px-4 py-3 font-bold border-b border-purple-700 flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Profitability Metrics"]}),e.jsx("div",{className:"p-6",children:(()=>{var Y;const s=((Y=r==null?void 0:r.cashFlow)==null?void 0:Y.dairy)||{},n=s.milkRevenue||{},o=s.expenses||{},i=s.herd||{},h=[1,2,3,4,5,6,7,8,9,10,11,12];h.map(_=>parseFloat((i.milkingCows||{})[_])||0).filter(_=>_>0);const b=n.totalFarmLbs||{},f=h.reduce((_,K)=>_+(parseFloat(b[K])||0),0)/100,d=h.reduce((_,K)=>{const re=parseFloat((n.butterfatLbs||{})[K])||0,he=parseFloat((n.butterfatPrice||{})[K])||0,U=parseFloat((n.proteinLbs||{})[K])||0,V=parseFloat((n.proteinPrice||{})[K])||0,q=parseFloat((n.proteinCaseinatePrice||{})[K])||0;return _+re*he+U*V+U*q},0),u=n.deductions||{},j=n.hauling||{},g=["stopCharges","nationalMilkPromo","stateInspectionFund","stateMilkPromo","producerPremium","otherDeductions"],m=["fuelSurcharge","baseHauling"],p=h.reduce((_,K)=>_+g.reduce((re,he)=>re+(parseFloat((u[he]||{})[K])||0),0),0),C=h.reduce((_,K)=>_+m.reduce((re,he)=>re+(parseFloat((j[he]||{})[K])||0),0),0),N=d-p-C,k={feed:{keys:["purchasedFeed","mineralsSupplements","hayForage","silageHaylage","milkReplacer"]},labor:{keys:["hiredLabor","payrollTaxes","benefits","contractLabor"]},vet:{keys:["vetServices","medications","breedingAI","herdHealthSupplies","dhiaTesting"]},utilities:{keys:["electricity","propaneGas","water","phoneInternet"]},repairs:{keys:["equipmentRepairs","buildingRepairs","vehicleMaint","milkingEquip"]},supplies:{keys:["milkingSupplies","cleaningSupplies","bedding","diesel","gasoline","lubricants"]},other:{keys:["insurance","propertyTaxes","licensesPermits","professionalFees","customHire","marketing","officeSupplies","miscellaneous"]}},P=Object.keys(k).reduce((_,K)=>{const re=o[K]||{};return _+h.reduce((he,U)=>he+k[K].keys.reduce((V,q)=>V+(parseFloat((re[q]||{})[U])||0),0),0)},0),A=o.feed||{},R=["purchasedFeed","mineralsSupplements","hayForage","silageHaylage","milkReplacer"],L=h.reduce((_,K)=>_+R.reduce((re,he)=>re+(parseFloat((A[he]||{})[K])||0),0),0),D=f>0?N/f:0,F=f>0?P/f:0,v=D-F,S=f>0?L/f:0,E=D-S,I=N>0?(N-P)/N*100:0,H=P>0?L/P*100:0;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[e.jsx("div",{className:"text-sm text-emerald-600 font-medium mb-1",children:"Net Milk Revenue/cwt"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-700 font-mono",children:["$",D.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium mb-1",children:"Total Expense/cwt"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700 font-mono",children:["$",F.toFixed(2)]})]}),e.jsxs("div",{className:`text-center p-4 rounded-lg border ${v>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${v>=0?"text-green-600":"text-red-600"}`,children:"Margin/cwt"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${v>=0?"text-green-700":"text-red-700"}`,children:["$",v.toFixed(2)]})]}),e.jsxs("div",{className:`text-center p-4 rounded-lg border ${I>=0?"bg-purple-50 border-purple-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${I>=0?"text-purple-600":"text-red-600"}`,children:"Profit Margin"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${I>=0?"text-purple-700":"text-red-700"}`,children:[I.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center p-4 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium mb-1",children:"Feed Cost/cwt"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",S.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium mb-1",children:"Income Over Feed/cwt"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:["$",E.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium mb-1",children:"Feed % of Expenses"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-700 font-mono",children:[H.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center p-4 bg-sky-50 rounded-lg border border-sky-200",children:[e.jsx("div",{className:"text-sm text-sky-600 font-medium mb-1",children:"YTD Milk Produced"}),e.jsx("div",{className:"text-2xl font-bold text-sky-700 font-mono",children:Math.round(f).toLocaleString()}),e.jsx("div",{className:"text-xs text-sky-500",children:"cwt"})]})]})})()})]})]})})]})]}),O==="cropInsurance"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-purple-700 to-purple-600 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>W("landing"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Back to Dashboard",children:e.jsx(Er,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx($t,{className:"w-7 h-7"}),"Crop Insurance"]}),e.jsx("p",{className:"text-purple-200 text-sm",children:te==null?void 0:te.name})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-purple-200 text-xs block mb-1",children:"Crop Year"}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white font-semibold",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,className:"text-gray-800",children:o},o)})})]})})]})})}),e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"insuranceSummary",label:"Insurance Summary",icon:$r},{id:"guarantees",label:"Guarantees",icon:$t},{id:"mpci",label:"MPCI Elections",icon:Ge},{id:"areaPlans",label:"Area Plans",icon:Ht},{id:"privateProducts",label:"Private Products",icon:yo}].map(s=>e.jsxs("button",{onClick:()=>us(s.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${Mt===s.id?"border-purple-600 text-purple-700 bg-purple-50":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[Mt==="insuranceSummary"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($r,{className:"w-6 h-6 text-blue-600"}),"Crop Insurance Summary"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var m,p;const s=((m=r==null?void 0:r.cashFlow)==null?void 0:m.crops)||[],n=((p=r==null?void 0:r.cashFlow)==null?void 0:p.springPrices)||{},o=s.reduce((C,N)=>{var P;const k=(N.plannedAcres||0)*(N.sharePercent||100)/100;return C+k*(((P=N.mpciElection)==null?void 0:P.premiumPerAcre)||0)},0),i=s.reduce((C,N)=>{var P,A;const k=(N.plannedAcres||0)*(N.sharePercent||100)/100;return C+((P=N.areaPlan)!=null&&P.scoEnabled?k*(((A=N.areaPlan)==null?void 0:A.scoPerAcre)||0):0)},0),h=s.reduce((C,N)=>{var P,A;const k=(N.plannedAcres||0)*(N.sharePercent||100)/100;return C+((P=N.areaPlan)!=null&&P.ecoEnabled?k*(((A=N.areaPlan)==null?void 0:A.ecoPerAcre)||0):0)},0),b=s.reduce((C,N)=>{var P,A,R;const k=(N.plannedAcres||0)*(N.sharePercent||100)/100;return C+((P=N.areaPlan)!=null&&P.marginPlan&&((A=N.areaPlan)==null?void 0:A.marginPlan)!=="none"?k*(((R=N.areaPlan)==null?void 0:R.marginPerAcre)||0):0)},0),x=s.reduce((C,N)=>{var P,A;const k=(N.plannedAcres||0)*(N.sharePercent||100)/100;return C+((P=N.privateInsurance)!=null&&P.hailEnabled?k*(((A=N.privateInsurance)==null?void 0:A.hailPerAcre)||0):0)},0),f=s.reduce((C,N)=>{var P,A;const k=(N.plannedAcres||0)*(N.sharePercent||100)/100;return C+((P=N.privateInsurance)!=null&&P.windEnabled?k*(((A=N.privateInsurance)==null?void 0:A.windPerAcre)||0):0)},0),d=o+i+h+b+x+f,u=s.reduce((C,N)=>C+(N.plannedAcres||0)*(N.sharePercent||100)/100,0),j=s.reduce((C,N)=>{var A;const k=(N.plannedAcres||0)*(N.sharePercent||100)/100,P=(((A=N.mpciElection)==null?void 0:A.coverageLevel)||75)/100;return C+k*(N.aph||0)*P},0),g=s.reduce((C,N)=>{var R,L;const k=(N.plannedAcres||0)*(N.sharePercent||100)/100,P=(((R=N.mpciElection)==null?void 0:R.coverageLevel)||75)/100,A=n[N.crop]||((L=N.mpciElection)==null?void 0:L.projectedPrice)||0;return C+k*(N.aph||0)*P*A},0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Insurance Premium"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:T(d)}),e.jsx("div",{className:"text-xs text-blue-500",children:u>0?`$${(d/u).toFixed(2)}/acre`:""})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Acres Insured"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:u.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("div",{className:"text-xs text-green-500",children:["Across ",s.length," fields"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Guaranteed Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:j.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-purple-500",children:"Based on MPCI coverage"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Revenue Guarantee"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T(g)}),e.jsx("div",{className:"text-xs text-amber-500",children:"At spring projected prices"})]})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Premium Breakdown by Type"}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"MPCI"}),e.jsx("div",{className:"text-lg font-bold text-gray-800 font-mono",children:T(o)})]}),e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-3 border border-cyan-200",children:[e.jsx("div",{className:"text-xs text-cyan-600 font-medium",children:"SCO"}),e.jsx("div",{className:"text-lg font-bold text-cyan-700 font-mono",children:T(i)})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"ECO"}),e.jsx("div",{className:"text-lg font-bold text-green-700 font-mono",children:T(h)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"MP/MCO"}),e.jsx("div",{className:"text-lg font-bold text-purple-700 font-mono",children:T(b)})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 border border-orange-200",children:[e.jsx("div",{className:"text-xs text-orange-600 font-medium",children:"Hail"}),e.jsx("div",{className:"text-lg font-bold text-orange-700 font-mono",children:T(x)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Wind"}),e.jsx("div",{className:"text-lg font-bold text-red-700 font-mono",children:T(f)})]})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Field-by-Field Insurance Detail"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This data flows to Cash Flow projections as variable crop expense."}),s.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Guar. Bu"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-amber-700 text-right bg-amber-50",children:"Rev. Guar."}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"MPCI"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-cyan-700 text-right",children:"SCO"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right",children:"ECO"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-purple-700 text-right",children:"MP/MCO"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-orange-700 text-right",children:"Hail"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-red-700 text-right",children:"Wind"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-800 text-right bg-gray-100",children:"Total"})]})}),e.jsx("tbody",{children:s.map((C,N)=>{var Y,_,K,re,he,U,V,q,X,se,le,ke,Le,$e;const k=(C.plannedAcres||0)*(C.sharePercent||100)/100,P=(((Y=C.mpciElection)==null?void 0:Y.coverageLevel)||75)/100,A=n[C.crop]||((_=C.mpciElection)==null?void 0:_.projectedPrice)||0,R=k*(C.aph||0)*P,L=R*A,D=k*(((K=C.mpciElection)==null?void 0:K.premiumPerAcre)||0),F=(re=C.areaPlan)!=null&&re.scoEnabled?k*(((he=C.areaPlan)==null?void 0:he.scoPerAcre)||0):0,v=(U=C.areaPlan)!=null&&U.ecoEnabled?k*(((V=C.areaPlan)==null?void 0:V.ecoPerAcre)||0):0,S=(q=C.areaPlan)!=null&&q.marginPlan&&((X=C.areaPlan)==null?void 0:X.marginPlan)!=="none"?k*(((se=C.areaPlan)==null?void 0:se.marginPerAcre)||0):0,E=(le=C.privateInsurance)!=null&&le.hailEnabled?k*(((ke=C.privateInsurance)==null?void 0:ke.hailPerAcre)||0):0,I=(Le=C.privateInsurance)!=null&&Le.windEnabled?k*((($e=C.privateInsurance)==null?void 0:$e.windPerAcre)||0):0,H=D+F+v+S+E+I;return e.jsxs("tr",{className:`border-b border-gray-100 ${N%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:C.fieldName}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:C.crop}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:k.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:C.aph||0}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-blue-700 bg-blue-50",children:R.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-amber-700 bg-amber-50",children:T(L)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:T(D)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-cyan-700",children:F>0?T(F):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-green-700",children:v>0?T(v):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-700",children:S>0?T(S):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-orange-700",children:E>0?T(E):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono text-red-700",children:I>0?T(I):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-800 bg-gray-100",children:T(H)})]},C.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-200 font-semibold",children:[e.jsx("td",{colSpan:"2",className:"py-3 px-3 text-gray-700",children:"TOTALS"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:u.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-3 px-3"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700 bg-blue-100",children:j.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-amber-700 bg-amber-100",children:T(g)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono",children:T(o)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-cyan-700",children:T(i)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:T(h)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-700",children:T(b)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700",children:T(x)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700",children:T(f)}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-gray-800 bg-gray-300",children:T(d)})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})}),e.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(lt,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Cash Flow Integration"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Total insurance premium of ",e.jsx("span",{className:"font-bold",children:T(d)})," flows to your Row Crop cash flow projection as a variable expense. Insurance costs are calculated per-field and included in the Variable Crop Expenses section."]})]})]})})]})})()]})}),Mt==="guarantees"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($t,{className:"w-6 h-6 text-purple-600"}),"Coverage Guarantees"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"View calculated coverage guarantees based on your MPCI elections. Guaranteed bushels and revenue are calculated using APH, coverage level, and spring projected prices."}),(()=>{var x,f;const s=((x=r==null?void 0:r.cashFlow)==null?void 0:x.crops)||[],n=((f=r==null?void 0:r.cashFlow)==null?void 0:f.springPrices)||{},o=s.reduce((d,u)=>d+(u.plannedAcres||0)*(u.sharePercent||100)/100,0),i=s.reduce((d,u)=>{const j=(u.plannedAcres||0)*(u.sharePercent||100)/100;return d+j*(u.aph||0)},0),h=s.reduce((d,u)=>{var m;const j=(u.plannedAcres||0)*(u.sharePercent||100)/100,g=(((m=u.mpciElection)==null?void 0:m.coverageLevel)||75)/100;return d+j*(u.aph||0)*g},0),b=s.reduce((d,u)=>{var p,C;const j=(u.plannedAcres||0)*(u.sharePercent||100)/100,g=(((p=u.mpciElection)==null?void 0:p.coverageLevel)||75)/100,m=n[u.crop]||((C=u.mpciElection)==null?void 0:C.projectedPrice)||0;return d+j*(u.aph||0)*g*m},0);return e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total Acres"}),e.jsx("div",{className:"text-2xl font-bold text-gray-800 font-mono",children:o.toLocaleString("en-US",{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"APH Bushels (100%)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:i.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Guaranteed Bushels"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:h.toLocaleString("en-US",{maximumFractionDigits:0})})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Revenue Guarantee"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T(b)})]})]})})(),(((bu=r==null?void 0:r.cashFlow)==null?void 0:bu.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Coverage %"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-blue-700 text-right bg-blue-50",children:"Spring Price"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-green-700 text-right bg-green-50",children:"Guar. Bushels"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-amber-700 text-right bg-amber-50",children:"Revenue Guar."})]})}),e.jsx("tbody",{children:(((yu=r==null?void 0:r.cashFlow)==null?void 0:yu.crops)||[]).map(s=>{var f,d;const n=(s.plannedAcres||0)*(s.sharePercent||100)/100,o=s.mpciElection||{},i=(o.coverageLevel||75)/100,h=((d=(f=r==null?void 0:r.cashFlow)==null?void 0:f.springPrices)==null?void 0:d[s.crop])||o.projectedPrice||0,b=n*(s.aph||0)*i,x=b*h;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:s.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:s.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:s.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:n.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:(s.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:[o.coverageLevel||75,"%"]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700 bg-blue-50",children:h>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(h):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700 bg-green-50",children:b.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-amber-700 bg-amber-50",children:h>0?T(x):""})]},s.id)})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})})]})}),Mt==="mpci"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-6 h-6 text-blue-600"}),"MPCI Elections"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Multi-Peril Crop Insurance (MPCI) elections including coverage levels, plan types, and projected prices."}),(()=>{var d,u,j,g;const s=((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[],n=((u=r==null?void 0:r.cashFlow)==null?void 0:u.springPrices)||{},o=((j=r==null?void 0:r.cashFlow)==null?void 0:j.springPriceYear)||new Date().getFullYear(),i=((g=r==null?void 0:r.cashFlow)==null?void 0:g.springPricesFetched)||!1,h=[...new Set(s.map(m=>m.crop).filter(Boolean))];if(h.length===0)return null;const b=(m,p)=>{const C={...n,[m]:p},N=s.map(k=>k.crop===m?{...k,mpciElection:{...k.mpciElection||{},projectedPrice:p}}:k);z({cashFlow:{...r==null?void 0:r.cashFlow,springPrices:C,crops:N}})},x={2025:{Corn:4.7,Soybeans:11.55,Wheat:5.65,"Grain Sorghum":4.35},2026:{Corn:4.35,Soybeans:10.65,Wheat:5.35,"Grain Sorghum":4.1},2027:{Corn:4.5,Soybeans:10.75,Wheat:5.45,"Grain Sorghum":4.25}},f=async()=>{const m=we||new Date().getFullYear(),p=x[m]||x[2026],C={...n};let N=[...s];h.forEach(k=>{p[k]&&(C[k]=p[k],N=N.map(P=>P.crop===k?{...P,mpciElection:{...P.mpciElection||{},projectedPrice:p[k]}}:P))}),z({cashFlow:{...r==null?void 0:r.cashFlow,springPrices:C,springPriceYear:m,springPricesFetched:!0,crops:N}})};return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"Spring Discovery Prices by Crop"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(Bs,{className:"w-3 h-3"}),o," prices loaded"]}),e.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:"RMA prices typically released Feb/March"}),e.jsxs("button",{onClick:f,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:[e.jsx(gs,{className:"w-4 h-4"}),"Fetch ",we," RMA Prices"]})]})]}),e.jsx("p",{className:"text-xs text-blue-600 mb-4",children:'Enter spring projected prices manually or click "Fetch RMA Prices" to auto-fill. These will apply to all fields with the same crop.'}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:h.map(m=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:m}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ie,{value:n[m]||0,onChange:p=>b(m,p),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono font-semibold"}),e.jsx("span",{className:"text-xs text-gray-500",children:"/bu"})]})]},m))})]})})(),(((fu=r==null?void 0:r.cashFlow)==null?void 0:fu.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Practice"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"APH"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Plan Type"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Coverage Level"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-blue-700 text-right bg-blue-50",children:"Spring Price"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Premium/Ac"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Premium"})]})}),e.jsx("tbody",{children:(((ju=r==null?void 0:r.cashFlow)==null?void 0:ju.crops)||[]).map(s=>{var b,x;const n=(s.plannedAcres||0)*(s.sharePercent||100)/100,o=s.mpciElection||{},i=((x=(b=r==null?void 0:r.cashFlow)==null?void 0:b.springPrices)==null?void 0:x[s.crop])||o.projectedPrice||0,h=n*(o.premiumPerAcre||0);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:s.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:s.crop||""}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.practice==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:s.practice||"Dryland"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:n.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:(s.aph||0).toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:o.planType||"RP",onChange:f=>{var u;const d=(((u=r==null?void 0:r.cashFlow)==null?void 0:u.crops)||[]).map(j=>j.id===s.id?{...j,mpciElection:{...o,planType:f.target.value}}:j);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:d}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"RP",children:"RP"}),e.jsx("option",{value:"RP-HPE",children:"RP-HPE"}),e.jsx("option",{value:"YP",children:"YP"})]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("select",{value:o.coverageLevel||75,onChange:f=>{var u;const d=(((u=r==null?void 0:r.cashFlow)==null?void 0:u.crops)||[]).map(j=>j.id===s.id?{...j,mpciElection:{...o,coverageLevel:parseInt(f.target.value)}}:j);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:d}})},className:"w-full px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:50,children:"50%"}),e.jsx("option",{value:55,children:"55%"}),e.jsx("option",{value:60,children:"60%"}),e.jsx("option",{value:65,children:"65%"}),e.jsx("option",{value:70,children:"70%"}),e.jsx("option",{value:75,children:"75%"}),e.jsx("option",{value:80,children:"80%"}),e.jsx("option",{value:85,children:"85%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-blue-50",children:e.jsx("span",{className:"font-mono font-semibold text-blue-700",children:i>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(i):""})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ie,{value:o.premiumPerAcre||0,onChange:f=>{var u;const d=(((u=r==null?void 0:r.cashFlow)==null?void 0:u.crops)||[]).map(j=>j.id===s.id?{...j,mpciElection:{...o,premiumPerAcre:f}}:j);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:d}})},className:"w-20 px-2 py-1 border border-gray-200 rounded text-sm text-right font-mono"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-blue-700",children:T(h)})]},s.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"9",className:"py-3 px-3 text-right text-gray-700",children:"Total MPCI Premium:"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-blue-700",children:T((((Nu=r==null?void 0:r.cashFlow)==null?void 0:Nu.crops)||[]).reduce((s,n)=>{var i;const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+o*(((i=n.mpciElection)==null?void 0:i.premiumPerAcre)||0)},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})})]})}),Mt==="areaPlans"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-6 h-6 text-cyan-600"}),"Area Plans"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),(()=>{var N,k,P,A,R,L,D;const s=((N=r==null?void 0:r.cashFlow)==null?void 0:N.crops)||[],n=((k=r==null?void 0:r.cashFlow)==null?void 0:k.areaPrices)||{},o=((P=r==null?void 0:r.cashFlow)==null?void 0:P.countyYields)||{},i=((A=r==null?void 0:r.cashFlow)==null?void 0:A.areaState)||"NE",h=(F,v)=>{const S=s.map(E=>E.id===F?{...E,...v}:E);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:S}})},b=F=>{z({cashFlow:{...r==null?void 0:r.cashFlow,areaPrices:{...n,...F}}})},x=F=>{z({cashFlow:{...r==null?void 0:r.cashFlow,countyYields:{...o,...F}}})},f=F=>{z({cashFlow:{...r==null?void 0:r.cashFlow,areaState:F}})},d=[...new Set(s.map(F=>F.county).filter(Boolean))],u=[...new Set(s.map(F=>F.crop).filter(Boolean))],j={2025:{Corn:{projected:4.7,harvest:4.35},Soybeans:{projected:11.55,harvest:10.5},Wheat:{projected:5.65,harvest:5.3},"Grain Sorghum":{projected:4.35,harvest:4.1}},2026:{Corn:{projected:4.35,harvest:4.3},Soybeans:{projected:10.65,harvest:10.55},Wheat:{projected:5.35,harvest:5.25},"Grain Sorghum":{projected:4.1,harvest:4.05}},2027:{Corn:{projected:4.5,harvest:4.45},Soybeans:{projected:10.75,harvest:10.65},Wheat:{projected:5.45,harvest:5.35},"Grain Sorghum":{projected:4.25,harvest:4.2}}},g={NE:{"Cedar-Corn-Irrigated":{expected:215,actual:208},"Cedar-Corn-Dryland":{expected:168,actual:158},"Cedar-Wheat-Dryland":{expected:52,actual:48},"Cedar-Soybeans-Dryland":{expected:50,actual:46},"Cedar-Soybeans-Irrigated":{expected:62,actual:58},"Dixon-Corn-Irrigated":{expected:210,actual:202},"Dixon-Corn-Dryland":{expected:165,actual:155},"Dixon-Soybeans-Dryland":{expected:48,actual:45},"Dixon-Soybeans-Irrigated":{expected:60,actual:56},"Dixon-Wheat-Dryland":{expected:50,actual:46}},IA:{"Story-Corn-Dryland":{expected:195,actual:188},"Story-Soybeans-Dryland":{expected:58,actual:55}},KS:{"Sedgwick-Wheat-Dryland":{expected:42,actual:38},"Sedgwick-Corn-Irrigated":{expected:200,actual:192}}},m=()=>{const F=we||new Date().getFullYear(),v=j[F]||j[2026],S={...n};u.forEach(E=>{v[E]&&(S[E]=v[E])}),z({cashFlow:{...r==null?void 0:r.cashFlow,areaPrices:S,areaPriceYear:F,areaPricesFetched:!0}})},p=()=>{const F=g[i]||{},v={...o};d.forEach(S=>{u.forEach(E=>{[...new Set(s.filter(H=>H.county===S&&H.crop===E).map(H=>H.practice))].forEach(H=>{const Y=`${S}-${E}-${H}`;F[Y]&&(v[Y]=F[Y])})})}),z({cashFlow:{...r==null?void 0:r.cashFlow,countyYields:v,countyYieldsFetched:!0}})},C=["NE","IA","KS","SD","MN","MO","CO","WY","TX","OK"];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"State:"}),e.jsx("select",{value:i,onChange:F=>f(F.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:C.map(F=>e.jsx("option",{value:F,children:F},F))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"Area Plan Prices by Crop"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[((R=r==null?void 0:r.cashFlow)==null?void 0:R.areaPricesFetched)&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(Bs,{className:"w-3 h-3"}),((L=r==null?void 0:r.cashFlow)==null?void 0:L.areaPriceYear)||we," prices loaded"]}),e.jsxs("button",{onClick:m,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:[e.jsx(gs,{className:"w-4 h-4"}),"Fetch ",we," RMA Prices"]})]})]}),e.jsx("p",{className:"text-xs text-blue-600 mb-4",children:"Projected prices (Feb/March) and harvest prices (Oct/Nov) for area-based coverage."}),u.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(F=>{var v,S;return e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:F}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-blue-600 block mb-1",children:"Projected Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"$"}),e.jsx(ie,{value:((v=n[F])==null?void 0:v.projected)||0,onChange:E=>b({[F]:{...n[F],projected:E}}),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-green-600 block mb-1",children:"Harvest Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"$"}),e.jsx(ie,{value:((S=n[F])==null?void 0:S.harvest)||0,onChange:E=>b({[F]:{...n[F],harvest:E}}),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]})]})]},F)})}):e.jsx("div",{className:"text-sm text-blue-600",children:"Add crops in the Row Crop enterprise to set area prices."})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-amber-800 flex items-center gap-2",children:[e.jsx(bt,{className:"w-4 h-4"}),"County Expected Yields (",i,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[((D=r==null?void 0:r.cashFlow)==null?void 0:D.countyYieldsFetched)&&e.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(Bs,{className:"w-3 h-3"}),"Yields loaded"]}),e.jsxs("button",{onClick:p,className:"flex items-center gap-1 px-3 py-1.5 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700",children:[e.jsx(gs,{className:"w-4 h-4"}),"Fetch ",i," County Yields"]})]})]}),e.jsx("p",{className:"text-xs text-amber-600 mb-4",children:"Expected and actual county yields from RMA for area plan calculations."}),d.length>0&&u.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-amber-100",children:[e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"County"}),e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"Crop"}),e.jsx("th",{className:"py-2 px-3 text-left font-semibold text-amber-800",children:"Practice"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-blue-700 bg-blue-50",children:"Expected Yield"}),e.jsx("th",{className:"py-2 px-3 text-right font-semibold text-green-700 bg-green-50",children:"Actual County Yield"})]})}),e.jsx("tbody",{children:d.flatMap(F=>u.flatMap(v=>[...new Set(s.filter(E=>E.county===F&&E.crop===v).map(E=>E.practice))].map(E=>{var H,Y;const I=`${F}-${v}-${E}`;return e.jsxs("tr",{className:"border-b border-amber-100 hover:bg-amber-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-700",children:F}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:v}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${E==="Irrigated"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:E})}),e.jsx("td",{className:"py-2 px-3 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(Qe,{value:((H=o[I])==null?void 0:H.expected)||0,onChange:_=>x({[I]:{...o[I],expected:_}}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-right font-mono text-sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:"bu"})]})}),e.jsx("td",{className:"py-2 px-3 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(Qe,{value:((Y=o[I])==null?void 0:Y.actual)||0,onChange:_=>x({[I]:{...o[I],actual:_}}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-right font-mono text-sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:"bu"})]})})]},I)})))})]})}):e.jsx("div",{className:"text-sm text-amber-600",children:"Add fields with counties and crops to set expected yields."})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Area Plan Elections by Field"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select which area-based coverage options to elect for each field. SCO, ECO, and MP/MCO (mutually exclusive)."}),s.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"County"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-center bg-cyan-50",children:"SCO"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-cyan-700 text-right bg-cyan-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-center bg-green-50",children:"ECO"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 bg-green-50",children:"Level"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-green-700 text-right bg-green-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 bg-purple-50",children:"Margin Plan"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 bg-purple-50",children:"Cov%"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-purple-700 text-right bg-purple-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total Premium"})]})}),e.jsx("tbody",{children:s.map(F=>{const v=(F.plannedAcres||0)*(F.sharePercent||100)/100,S=F.areaPlan||{},E=S.scoEnabled?v*(S.scoPerAcre||0):0,I=S.ecoEnabled?v*(S.ecoPerAcre||0):0,H=S.marginPlan&&S.marginPlan!=="none"?v*(S.marginPerAcre||0):0,Y=E+I+H;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:F.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:F.crop||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:F.county||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:v.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2 text-center bg-cyan-50",children:e.jsx("input",{type:"checkbox",checked:S.scoEnabled||!1,onChange:_=>h(F.id,{areaPlan:{...S,scoEnabled:_.target.checked}}),className:"w-4 h-4 text-cyan-600"})}),e.jsx("td",{className:"py-2 px-2 bg-cyan-50",children:e.jsx(ie,{value:S.scoPerAcre||0,onChange:_=>h(F.id,{areaPlan:{...S,scoPerAcre:_}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!S.scoEnabled})}),e.jsx("td",{className:"py-2 px-2 text-center bg-green-50",children:e.jsx("input",{type:"checkbox",checked:S.ecoEnabled||!1,onChange:_=>h(F.id,{areaPlan:{...S,ecoEnabled:_.target.checked}}),className:"w-4 h-4 text-green-600"})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsxs("select",{value:S.ecoLevel||"90",onChange:_=>h(F.id,{areaPlan:{...S,ecoLevel:_.target.value}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!S.ecoEnabled,children:[e.jsx("option",{value:"90",children:"90%"}),e.jsx("option",{value:"95",children:"95%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-green-50",children:e.jsx(ie,{value:S.ecoPerAcre||0,onChange:_=>h(F.id,{areaPlan:{...S,ecoPerAcre:_}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!S.ecoEnabled})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsxs("select",{value:S.marginPlan||"none",onChange:_=>h(F.id,{areaPlan:{...S,marginPlan:_.target.value}}),className:"w-20 px-1 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"mp",children:"MP"}),e.jsx("option",{value:"mco",children:"MCO"})]})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsxs("select",{value:S.marginCoverage||"80",onChange:_=>h(F.id,{areaPlan:{...S,marginCoverage:_.target.value}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!S.marginPlan||S.marginPlan==="none",children:[e.jsx("option",{value:"70",children:"70%"}),e.jsx("option",{value:"75",children:"75%"}),e.jsx("option",{value:"80",children:"80%"}),e.jsx("option",{value:"85",children:"85%"}),e.jsx("option",{value:"90",children:"90%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-purple-50",children:e.jsx(ie,{value:S.marginPerAcre||0,onChange:_=>h(F.id,{areaPlan:{...S,marginPerAcre:_}}),className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!S.marginPlan||S.marginPlan==="none"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-700",children:T(Y)})]},F.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"4",className:"py-3 px-3 text-right text-gray-700",children:"Totals:"}),e.jsx("td",{colSpan:"2",className:"py-3 px-3 text-right font-mono text-cyan-700 bg-cyan-50",children:T(s.reduce((F,v)=>{var E,I;const S=(v.plannedAcres||0)*(v.sharePercent||100)/100;return F+((E=v.areaPlan)!=null&&E.scoEnabled?S*(((I=v.areaPlan)==null?void 0:I.scoPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-right font-mono text-green-700 bg-green-50",children:T(s.reduce((F,v)=>{var E,I;const S=(v.plannedAcres||0)*(v.sharePercent||100)/100;return F+((E=v.areaPlan)!=null&&E.ecoEnabled?S*(((I=v.areaPlan)==null?void 0:I.ecoPerAcre)||0):0)},0))}),e.jsx("td",{colSpan:"3",className:"py-3 px-3 text-right font-mono text-purple-700 bg-purple-50",children:T(s.reduce((F,v)=>{var E,I,H;const S=(v.plannedAcres||0)*(v.sharePercent||100)/100;return F+((E=v.areaPlan)!=null&&E.marginPlan&&((I=v.areaPlan)==null?void 0:I.marginPlan)!=="none"?S*(((H=v.areaPlan)==null?void 0:H.marginPerAcre)||0):0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-gray-800",children:T(s.reduce((F,v)=>{var Y,_,K,re,he,U,V;const S=(v.plannedAcres||0)*(v.sharePercent||100)/100,E=(Y=v.areaPlan)!=null&&Y.scoEnabled?S*(((_=v.areaPlan)==null?void 0:_.scoPerAcre)||0):0,I=(K=v.areaPlan)!=null&&K.ecoEnabled?S*(((re=v.areaPlan)==null?void 0:re.ecoPerAcre)||0):0,H=(he=v.areaPlan)!=null&&he.marginPlan&&((U=v.areaPlan)==null?void 0:U.marginPlan)!=="none"?S*(((V=v.areaPlan)==null?void 0:V.marginPerAcre)||0):0;return F+E+I+H},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Area Plans Premium Summary"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"rounded-lg p-3 bg-cyan-50 border border-cyan-200",children:[e.jsx("div",{className:"text-sm font-medium text-cyan-700",children:"SCO Premium"}),e.jsx("div",{className:"text-xl font-bold font-mono text-cyan-800",children:T(s.reduce((F,v)=>{var E,I;const S=(v.plannedAcres||0)*(v.sharePercent||100)/100;return F+((E=v.areaPlan)!=null&&E.scoEnabled?S*(((I=v.areaPlan)==null?void 0:I.scoPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-green-50 border border-green-200",children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"ECO Premium"}),e.jsx("div",{className:"text-xl font-bold font-mono text-green-800",children:T(s.reduce((F,v)=>{var E,I;const S=(v.plannedAcres||0)*(v.sharePercent||100)/100;return F+((E=v.areaPlan)!=null&&E.ecoEnabled?S*(((I=v.areaPlan)==null?void 0:I.ecoPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-purple-50 border border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:"Margin Plan (MP/MCO)"}),e.jsx("div",{className:"text-xl font-bold font-mono text-purple-800",children:T(s.reduce((F,v)=>{var E,I,H;const S=(v.plannedAcres||0)*(v.sharePercent||100)/100;return F+((E=v.areaPlan)!=null&&E.marginPlan&&((I=v.areaPlan)==null?void 0:I.marginPlan)!=="none"?S*(((H=v.areaPlan)==null?void 0:H.marginPerAcre)||0):0)},0))})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-200 border border-gray-300",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Total Area Plans"}),e.jsx("div",{className:"text-xl font-bold font-mono text-gray-800",children:T(s.reduce((F,v)=>{var Y,_,K,re,he,U,V;const S=(v.plannedAcres||0)*(v.sharePercent||100)/100,E=(Y=v.areaPlan)!=null&&Y.scoEnabled?S*(((_=v.areaPlan)==null?void 0:_.scoPerAcre)||0):0,I=(K=v.areaPlan)!=null&&K.ecoEnabled?S*(((re=v.areaPlan)==null?void 0:re.ecoPerAcre)||0):0,H=(he=v.areaPlan)!=null&&he.marginPlan&&((U=v.areaPlan)==null?void 0:U.marginPlan)!=="none"?S*(((V=v.areaPlan)==null?void 0:V.marginPerAcre)||0):0;return F+E+I+H},0))})]})]})]})]})})()]})}),Mt==="privateProducts"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(yo,{className:"w-6 h-6 text-orange-600"}),"Private Products (Hail & Wind)"]}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,children:o},o)})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Private crop insurance products including hail and wind coverage by field."}),(((vu=r==null?void 0:r.cashFlow)==null?void 0:vu.crops)||[]).length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700",children:"Crop"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Acres"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-center bg-orange-50",children:"Hail"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 bg-orange-50",children:"Coverage"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-right bg-orange-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-orange-700 text-right bg-orange-50",children:"Premium"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-red-700 text-center bg-red-50",children:"Wind"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-red-700 text-right bg-red-50",children:"$/Ac"}),e.jsx("th",{className:"py-3 px-2 font-semibold text-red-700 text-right bg-red-50",children:"Premium"}),e.jsx("th",{className:"py-3 px-3 font-semibold text-gray-700 text-right",children:"Total"})]})}),e.jsx("tbody",{children:(((wu=r==null?void 0:r.cashFlow)==null?void 0:wu.crops)||[]).map(s=>{const n=(s.plannedAcres||0)*(s.sharePercent||100)/100,o=s.privateInsurance||{},i=o.hailEnabled?n*(o.hailPerAcre||0):0,h=o.windEnabled?n*(o.windPerAcre||0):0,b=i+h;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 font-medium text-gray-800",children:s.fieldName||"(unnamed)"}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:s.crop||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:n.toLocaleString("en-US",{maximumFractionDigits:1})}),e.jsx("td",{className:"py-2 px-2 text-center bg-orange-50",children:e.jsx("input",{type:"checkbox",checked:o.hailEnabled||!1,onChange:x=>{var d;const f=(((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[]).map(u=>u.id===s.id?{...u,privateInsurance:{...o,hailEnabled:x.target.checked}}:u);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:f}})},className:"w-4 h-4 text-orange-600"})}),e.jsx("td",{className:"py-2 px-2 bg-orange-50",children:e.jsxs("select",{value:o.hailCoverage||"100",onChange:x=>{var d;const f=(((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[]).map(u=>u.id===s.id?{...u,privateInsurance:{...o,hailCoverage:x.target.value}}:u);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:f}})},className:"w-20 px-1 py-1 border border-gray-200 rounded text-sm",disabled:!o.hailEnabled,children:[e.jsx("option",{value:"50",children:"50%"}),e.jsx("option",{value:"75",children:"75%"}),e.jsx("option",{value:"100",children:"100%"})]})}),e.jsx("td",{className:"py-2 px-2 bg-orange-50",children:e.jsx(ie,{value:o.hailPerAcre||0,onChange:x=>{var d;const f=(((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[]).map(u=>u.id===s.id?{...u,privateInsurance:{...o,hailPerAcre:x}}:u);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:f}})},className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!o.hailEnabled})}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-orange-700 bg-orange-50",children:o.hailEnabled?T(i):""}),e.jsx("td",{className:"py-2 px-2 text-center bg-red-50",children:e.jsx("input",{type:"checkbox",checked:o.windEnabled||!1,onChange:x=>{var d;const f=(((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[]).map(u=>u.id===s.id?{...u,privateInsurance:{...o,windEnabled:x.target.checked}}:u);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:f}})},className:"w-4 h-4 text-red-600"})}),e.jsx("td",{className:"py-2 px-2 bg-red-50",children:e.jsx(ie,{value:o.windPerAcre||0,onChange:x=>{var d;const f=(((d=r==null?void 0:r.cashFlow)==null?void 0:d.crops)||[]).map(u=>u.id===s.id?{...u,privateInsurance:{...o,windPerAcre:x}}:u);z({cashFlow:{...r==null?void 0:r.cashFlow,crops:f}})},className:"w-16 px-1 py-1 border border-gray-200 rounded text-sm text-right font-mono",disabled:!o.windEnabled})}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-red-700 bg-red-50",children:o.windEnabled?T(h):""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-gray-700",children:T(b)})]},s.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{colSpan:"6",className:"py-3 px-3 text-right text-gray-700",children:"Totals:"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-orange-700 bg-orange-50",children:T((((Cu=r==null?void 0:r.cashFlow)==null?void 0:Cu.crops)||[]).reduce((s,n)=>{var i,h;const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+((i=n.privateInsurance)!=null&&i.hailEnabled?o*(((h=n.privateInsurance)==null?void 0:h.hailPerAcre)||0):0)},0))}),e.jsx("td",{className:"py-3 px-3 bg-red-50"}),e.jsx("td",{className:"py-3 px-3 bg-red-50"}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700 bg-red-50",children:T((((Fu=r==null?void 0:r.cashFlow)==null?void 0:Fu.crops)||[]).reduce((s,n)=>{var i,h;const o=(n.plannedAcres||0)*(n.sharePercent||100)/100;return s+((i=n.privateInsurance)!=null&&i.windEnabled?o*(((h=n.privateInsurance)==null?void 0:h.windPerAcre)||0):0)},0))}),e.jsx("td",{className:"py-3 px-3 text-right font-mono font-bold text-gray-800",children:T((((Pu=r==null?void 0:r.cashFlow)==null?void 0:Pu.crops)||[]).reduce((s,n)=>{var b,x,f,d;const o=(n.plannedAcres||0)*(n.sharePercent||100)/100,i=(b=n.privateInsurance)!=null&&b.hailEnabled?o*(((x=n.privateInsurance)==null?void 0:x.hailPerAcre)||0):0,h=(f=n.privateInsurance)!=null&&f.windEnabled?o*(((d=n.privateInsurance)==null?void 0:d.windPerAcre)||0):0;return s+i+h},0))})]})})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No fields found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields."})]})})]})})]})]}),O==="marketing"&&e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-gradient-to-r from-amber-700 to-amber-600 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>W("landing"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Back to Dashboard",children:e.jsx(Er,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(lt,{className:"w-7 h-7"}),"Crop Marketing"]}),e.jsx("p",{className:"text-amber-200 text-sm",children:te==null?void 0:te.name})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-amber-200 text-xs block mb-1",children:"Marketing Year"}),e.jsx("select",{value:we||new Date().getFullYear(),onChange:s=>We(parseInt(s.target.value)),className:"px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white font-semibold",children:[...Array(5)].map((s,n)=>{const o=new Date().getFullYear()+n-1;return e.jsx("option",{value:o,className:"text-gray-800",children:o},o)})})]})})]})})}),e.jsx("div",{className:"bg-amber-800 border-b border-amber-900",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("div",{className:"flex gap-1",children:[{id:"positions",label:"Positions",icon:"ClipboardList"},{id:"scenarios",label:"Scenarios",icon:"Calculator"}].map(s=>e.jsx("button",{onClick:()=>fn(s.id),className:`px-4 py-3 text-sm font-medium transition-colors flex items-center gap-2 ${Da===s.id?"bg-white text-amber-800 rounded-t-lg":"text-amber-100 hover:bg-amber-700"}`,children:s.label},s.id))})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:(()=>{var A,R;const s=((A=r==null?void 0:r.cashFlow)==null?void 0:A.crops)||[],n=((R=r==null?void 0:r.cashFlow)==null?void 0:R.marketing)||{},o=[...new Set(s.map(L=>L.crop).filter(Boolean))],i={Corn:"DEC",Soybeans:"NOV",Wheat:"JUL","Grain Sorghum":"DEC"},h={2025:{Corn:4.35,Soybeans:10.55,Wheat:5.2,"Grain Sorghum":4.15},2026:{Corn:4.55,Soybeans:10.7,Wheat:5.35,"Grain Sorghum":4.35},2027:{Corn:4.65,Soybeans:10.85,Wheat:5.5,"Grain Sorghum":4.45}},b=L=>{z({cashFlow:{...r==null?void 0:r.cashFlow,marketing:{...n,...L}}})},x=(L,D)=>{const F=n.byCrop||{},v={...F,[L]:{...F[L],...D}};b({byCrop:v})},f=L=>{var S;const F=(((S=n.byCrop)==null?void 0:S[L])||{}).positions||[],v={id:Date.now(),type:"cash",action:"sell",bushels:0,price:0,date:new Date().toISOString().split("T")[0],notes:""};x(L,{positions:[...F,v]})},d=(L,D,F)=>{var E;const S=((((E=n.byCrop)==null?void 0:E[L])||{}).positions||[]).map(I=>I.id===D?{...I,...F}:I);x(L,{positions:S})},u=(L,D)=>{var S;const v=((((S=n.byCrop)==null?void 0:S[L])||{}).positions||[]).filter(E=>E.id!==D);x(L,{positions:v})},j=(L,D)=>{const F=String(D).slice(-2);return{Corn:`ZCZ${F}`,Soybeans:`ZSX${F}`,Wheat:`ZWZ${F}`,"Grain Sorghum":`ZCZ${F}`}[L]||null},g=async()=>{var F,v;const L=we||new Date().getFullYear(),D=n.barchartApiKey;if(!D){const S=h[L]||h[2026],E={...n.byCrop};o.forEach(I=>{S[I]&&(E[I]={...E[I],futuresPrice:S[I],priceSource:"embedded"})}),b({byCrop:E,futuresPricesFetched:!0,futuresPricesYear:L,priceSource:"embedded"});return}jn(!0),vn(null);try{const S=o.map(_=>j(_,L)).filter(Boolean).join(",");if(!S)throw new Error("No valid futures symbols for selected crops");const E=await fetch(`https://ondemand.websol.barchart.com/getQuote.json?apikey=${D}&symbols=${S}&fields=lastPrice,contractMonth,contractYear`);if(!E.ok)throw new Error(`API error: ${E.status}`);const I=await E.json();if(((F=I.status)==null?void 0:F.code)!==200)throw new Error(((v=I.status)==null?void 0:v.message)||"API request failed");const H={...n.byCrop},Y=I.results||[];o.forEach(_=>{var he;const K=j(_,L),re=Y.find(U=>U.symbol===K);if(re&&re.lastPrice){const U=re.lastPrice>100?re.lastPrice/100:re.lastPrice;H[_]={...H[_],futuresPrice:U,priceSource:"barchart",lastUpdated:new Date().toISOString()}}else{const U=(he=h[L]||h[2026])==null?void 0:he[_];U&&(H[_]={...H[_],futuresPrice:U,priceSource:"embedded"})}}),b({byCrop:H,futuresPricesFetched:!0,futuresPricesYear:L,priceSource:"barchart",lastFetchTime:new Date().toISOString()})}catch(S){console.error("Futures fetch error:",S),vn(S.message);const E=h[L]||h[2026],I={...n.byCrop};o.forEach(H=>{E[H]&&(I[H]={...I[H],futuresPrice:E[H],priceSource:"embedded"})}),b({byCrop:I,futuresPricesFetched:!0,futuresPricesYear:L,priceSource:"embedded"})}finally{jn(!1)}},m=o.map(L=>{var X;const D=s.filter(se=>se.crop===L),F=D.reduce((se,le)=>se+(le.plannedAcres||0)*(le.sharePercent||100)/100,0),v=D.reduce((se,le)=>{const ke=(le.plannedAcres||0)*(le.sharePercent||100)/100;return se+ke*(le.projectedYield||le.aph||0)},0),S=((X=n.byCrop)==null?void 0:X[L])||{},E=S.positions||[],I=S.futuresPrice||0,H=S.basis||0,Y=I+H,_=E.reduce((se,le)=>le.type==="cash"||le.type==="futures"||le.type==="hta"?se+(le.bushels||0):se,0),K=Math.max(0,v-_),re=v>0?_/v*100:0,he=E.reduce((se,le)=>(le.type==="cash"||le.type==="futures"||le.type==="hta")&&le.bushels>0?se+le.bushels*le.price:se,0),U=_>0?he/_:Y,V=v>0?(_*U+K*Y)/v:Y,q=v*V;return{crop:L,futuresMonth:i[L]||"DEC",totalAcres:F,totalBushels:v,futuresPrice:I,basis:H,cashPrice:Y,positions:E,pricedBushels:_,openBushels:K,pricedPercent:re,weightedAvgPrice:U,blendedPrice:V,projectedRevenue:q}}),p=m.reduce((L,D)=>L+D.totalBushels,0),C=m.reduce((L,D)=>L+D.pricedBushels,0),N=m.reduce((L,D)=>L+D.openBushels,0),k=p>0?C/p*100:0,P=m.reduce((L,D)=>L+D.projectedRevenue,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Total Production"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:p.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("div",{className:"text-xs text-amber-500",children:"Bushels"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Priced"}),e.jsx("div",{className:"text-2xl font-bold text-green-700 font-mono",children:C.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-green-500",children:[k.toFixed(1),"% sold"]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Open / Unpriced"}),e.jsx("div",{className:"text-2xl font-bold text-red-700 font-mono",children:N.toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsxs("div",{className:"text-xs text-red-500",children:[(100-k).toFixed(1),"% open"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Crops Tracked"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:o.length}),e.jsx("div",{className:"text-xs text-blue-500",children:o.join(", ")||"None"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Projected Revenue"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:T(P)}),e.jsx("div",{className:"text-xs text-purple-500",children:"Blended pricing"})]})]}),Da==="positions"&&e.jsxs(e.Fragment,{children:[Ll&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-5 h-5 text-amber-600"}),"Futures Price API Settings"]}),e.jsx("button",{onClick:()=>sa(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(pr,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Barchart OnDemand API"})," provides real-time futures prices by contract year. Get your API key at ",e.jsx("a",{href:"https://www.barchart.com/ondemand",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 underline",children:"barchart.com/ondemand"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barchart API Key"}),e.jsx("input",{type:"password",value:n.barchartApiKey||"",onChange:L=>b({barchartApiKey:L.target.value}),placeholder:"Enter your Barchart OnDemand API key",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.jsx("strong",{children:"Contract Symbols Used:"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs font-mono",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Corn:"}),e.jsxs("span",{children:["ZCZ",String(we).slice(-2)," (Dec)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Soybeans:"}),e.jsxs("span",{children:["ZSX",String(we).slice(-2)," (Nov)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Wheat:"}),e.jsxs("span",{children:["ZWZ",String(we).slice(-2)," (Dec)"]})]})]})]}),!n.barchartApiKey&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"No API key?"})," Embedded prices will be used as fallback."]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>sa(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Close"}),e.jsxs("button",{onClick:()=>{sa(!1),g()},className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4"}),"Fetch Prices"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5 text-amber-600"}),"Futures Prices & Basis"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n.futuresPricesFetched&&e.jsxs("span",{className:`text-xs px-2 py-1 rounded flex items-center gap-1 ${n.priceSource==="barchart"?"text-green-600 bg-green-100":"text-amber-600 bg-amber-100"}`,children:[e.jsx(Bs,{className:"w-3 h-3"}),n.futuresPricesYear||we," (",n.priceSource==="barchart"?"Barchart":"Embedded",")"]}),Nn&&e.jsxs("span",{className:"text-xs text-red-600 bg-red-100 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(lc,{className:"w-3 h-3"}),"Error: ",Nn.substring(0,30),"..."]}),e.jsx("button",{onClick:()=>sa(!0),className:"p-1.5 text-gray-500 hover:text-amber-600 hover:bg-amber-50 rounded",title:"API Settings",children:e.jsx(Rr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:g,disabled:Ta,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm font-medium ${Ta?"bg-gray-300 text-gray-500 cursor-wait":"bg-amber-600 text-white hover:bg-amber-700"}`,children:Ta?e.jsxs(e.Fragment,{children:[e.jsx(Ir,{className:"w-4 h-4 animate-spin"}),"Fetching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"w-4 h-4"}),"Fetch ",we," Futures"]})})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Set new crop futures prices and local basis by crop. Cash Price = Futures + Basis.",!n.barchartApiKey&&e.jsxs("span",{className:"text-amber-600 ml-1",children:["(Click ",e.jsx(Rr,{className:"w-3 h-3 inline"})," to add Barchart API key for live prices)"]})]}),o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(L=>{var D,F;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:L.crop}),e.jsxs("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:[L.futuresMonth," ",we]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Futures"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"$"}),e.jsx(ie,{value:L.futuresPrice,onChange:v=>x(L.crop,{futuresPrice:v}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Basis"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"$"}),e.jsx(ie,{value:((F=(D=n.byCrop)==null?void 0:D[L.crop])==null?void 0:F.basis)||0,onChange:v=>x(L.crop,{basis:v}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-right font-mono text-sm",allowNegative:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Cash Price"}),e.jsxs("div",{className:"px-2 py-1.5 bg-green-100 border border-green-300 rounded text-right font-mono text-sm font-semibold text-green-700",children:["$",L.cashPrice.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Production:"}),e.jsxs("span",{className:"font-mono font-medium",children:[L.totalBushels.toLocaleString("en-US",{maximumFractionDigits:0})," bu"]})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-green-600",children:"Priced:"}),e.jsxs("span",{className:"font-mono font-medium text-green-700",children:[L.pricedBushels.toLocaleString("en-US",{maximumFractionDigits:0})," bu (",L.pricedPercent.toFixed(0),"%)"]})]}),L.pricedBushels>0&&e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Priced @ Avg:"}),e.jsxs("span",{className:"font-mono text-gray-600",children:["$",L.weightedAvgPrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1 pt-1 border-t border-gray-100",children:[e.jsx("span",{className:"text-amber-600 font-medium",children:"Blended Price:"}),e.jsxs("span",{className:"font-mono font-semibold text-amber-700",children:["$",L.blendedPrice.toFixed(2)]})]})]})]},L.crop)})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"No crops found."}),e.jsx("span",{className:"text-blue-600",children:"Go to Cash Flow  Row Crop to add fields and crops."})]})})]}),m.map(L=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800",children:[L.crop," Positions"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded font-medium ${L.pricedPercent>=75?"bg-green-100 text-green-700":L.pricedPercent>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[L.pricedPercent.toFixed(0),"% Priced"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[L.pricedBushels.toLocaleString()," of ",L.totalBushels.toLocaleString()," bu"]})]})]}),e.jsxs("button",{onClick:()=>f(L.crop),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Position"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Priced Bushels"}),e.jsx("div",{className:"text-lg font-bold text-green-700 font-mono",children:L.pricedBushels.toLocaleString()})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Open Bushels"}),e.jsx("div",{className:"text-lg font-bold text-red-700 font-mono",children:L.openBushels.toLocaleString()})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:[e.jsx("div",{className:"text-xs text-amber-600 font-medium",children:"Positions Avg Price"}),e.jsxs("div",{className:"text-lg font-bold text-amber-700 font-mono",children:["$",L.weightedAvgPrice.toFixed(2)]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Blended Price"}),e.jsxs("div",{className:"text-lg font-bold text-blue-700 font-mono",children:["$",L.blendedPrice.toFixed(2)]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Projected Revenue"}),e.jsx("div",{className:"text-lg font-bold text-purple-700 font-mono",children:T(L.projectedRevenue)})]})]}),L.positions.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700",children:"Action"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700 text-right",children:"Bushels"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700 text-right",children:"Price"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700 text-right",children:"Value"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700",children:"Date"}),e.jsx("th",{className:"py-2 px-3 font-semibold text-gray-700",children:"Notes"}),e.jsx("th",{className:"py-2 px-3"})]})}),e.jsx("tbody",{children:L.positions.map((D,F)=>e.jsxs("tr",{className:`border-b border-gray-100 ${F%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-3",children:e.jsxs("select",{value:D.type,onChange:v=>d(L.crop,D.id,{type:v.target.value}),className:"px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"cash",children:"Cash Sale"}),e.jsx("option",{value:"futures",children:"Futures"}),e.jsx("option",{value:"hta",children:"HTA Contract"}),e.jsx("option",{value:"basis",children:"Basis Contract"}),e.jsx("option",{value:"put",children:"Put Option"}),e.jsx("option",{value:"call",children:"Call Option"})]})}),e.jsx("td",{className:"py-2 px-3",children:e.jsxs("select",{value:D.action,onChange:v=>d(L.crop,D.id,{action:v.target.value}),className:"px-2 py-1 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"sell",children:"Sell"}),e.jsx("option",{value:"buy",children:"Buy"})]})}),e.jsx("td",{className:"py-2 px-3",children:e.jsx(Qe,{value:D.bushels||0,onChange:v=>d(L.crop,D.id,{bushels:v}),className:"w-24 px-2 py-1 border border-gray-200 rounded text-right font-mono text-sm"})}),e.jsx("td",{className:"py-2 px-3",children:e.jsx(ie,{value:D.price||0,onChange:v=>d(L.crop,D.id,{price:v}),className:"w-20 px-2 py-1 border border-gray-200 rounded text-right font-mono text-sm"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono font-semibold text-green-700",children:T((D.bushels||0)*(D.price||0))}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("input",{type:"date",value:D.date||"",onChange:v=>d(L.crop,D.id,{date:v.target.value}),className:"px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("input",{type:"text",value:D.notes||"",onChange:v=>d(L.crop,D.id,{notes:v.target.value}),placeholder:"Notes...",className:"w-full px-2 py-1 border border-gray-200 rounded text-sm"})}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("button",{onClick:()=>u(L.crop,D.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(ot,{className:"w-4 h-4"})})})]},D.id))})]})}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:'No positions yet. Click "Add Position" to start tracking sales.'})})]},L.crop)),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(lt,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Cash Flow Integration"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Marketing prices flow to Cash Flow  Row Crop  Crop Revenue. When positions are entered, the ",e.jsx("span",{className:"font-bold",children:"weighted average price"})," (for priced bushels) and ",e.jsx("span",{className:"font-bold",children:"cash price"})," (for open bushels) are blended to calculate projected crop revenue. Total projected revenue: ",e.jsx("span",{className:"font-bold",children:T(P)})]})]})]})})]}),Da==="scenarios"&&e.jsx(e.Fragment,{children:(()=>{var Js,Qs,_l,ql,En;const L=n.scenarios||{},D=L.selectedCrop||o[0]||"",F=m.find(Se=>Se.crop===D)||m[0]||{},v=s.filter(Se=>Se.crop===D),S=((Js=r==null?void 0:r.cashFlow)==null?void 0:Js.fertilizerTypes)||["Starter Fertilizer","Liquid Fertilizer","Dry Fertilizer","Pivot Solution","Foliar Fertilizer"],E=((Qs=r==null?void 0:r.cashFlow)==null?void 0:Qs.chemicalTypes)||["Herbicide","Fungicide","Insecticide","Growth Regulator"];let I=0,H=0,Y=0,_=0,K=0,re=0,he=0,U=0;v.forEach(Se=>{const Ze=(Se.plannedAcres||0)*(Se.sharePercent||100)/100;I+=Ze,H+=Ze*((Se.seedPerAcre||0)+(Se.seedTreatmentPerAcre||0));const es=Se.fertilizerCosts||{},Zs=S.reduce((Fs,za)=>Fs+(es[za]||0),0)+(Se.fertAppCostPerAcre||0);Y+=Ze*Zs;const Ha=Se.chemicalCosts||{},Oa=E.reduce((Fs,za)=>Fs+(Ha[za]||0),0)+(Se.chemAppCostPerAcre||0);_+=Ze*Oa,K+=Ze*(Se.irrigationCostPerAcre||0);const $n=Se.projectedYield||Se.aph||0;re+=Ze*(Se.freightPerBushel||0)*$n,he+=Ze*(Se.rentPerAcre||0);const Tr=Se.insurance||{};["Multiperil","Hail","ECO","SCO"].forEach(Fs=>{var za,ku,Au,Lu,Du;(za=Tr[Fs])!=null&&za.enabled&&(U+=(ku=Tr[Fs])!=null&&ku.useTotal?((Au=Tr[Fs])==null?void 0:Au.totalCost)||0:Ze*(((Lu=Tr[Fs])==null?void 0:Lu.perAcre)||((Du=Tr[Fs])==null?void 0:Du.premiumPerAcre)||0))})});const V=I>0?H/I:0,q=I>0?Y/I:0,X=I>0?_/I:0,se=I>0?K/I:0,le=I>0?re/I:0,ke=I>0?he/I:0,Le=I>0?U/I:0,$e=V+q+X+se+le+ke+Le,qe=(_l=L.costOverrides)==null?void 0:_l[D],et=qe!==void 0?qe:$e,oe=((ql=n.byCrop)==null?void 0:ql[D])||{},be=oe.futuresPrice||0,Te=oe.basis||0,ye=((En=L.scenarioFutures)==null?void 0:En[D])??be,Ue=ye+Te,tt=F.totalBushels||0,Je=F.pricedBushels||0,Ye=F.openBushels||0,gt=tt>0?Je/tt*100:0,nt=oe.positions||[],Is=nt.reduce((Se,Ze)=>(Ze.type==="cash"||Ze.type==="futures"||Ze.type==="hta")&&Ze.bushels>0?Se+Ze.bushels*Ze.price:Se,0),ps=Je>0?Is/Je:0,ma=tt>0?(Je*ps+Ye*Ue)/tt:Ue,Ks=Je*ps,ua=Ye*Ue,Lr=Ks+ua,Ul=I>0?tt/I:0,Yl=I>0?Lr/I:0,ha=et*I,xr=Lr-ha,mr=I>0?xr/I:0,Wl=Math.max(0,ha-Ks),Ma=Ye>0?Wl/Ye:0,Dr=Ma-Te,Bt=[-1,-.5,-.25,0,.25,.5,1];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ur,{className:"w-6 h-6 text-amber-600"}),"Scenario Analysis"]}),e.jsx("select",{value:D,onChange:Se=>b({scenarios:{...L,selectedCrop:Se.target.value}}),className:"px-4 py-2 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white text-lg",children:o.map(Se=>e.jsx("option",{value:Se,children:Se},Se))})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Production"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:[tt.toLocaleString()," bu"]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[I.toLocaleString()," acres @ ",Ul.toFixed(1)," bu/ac"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Priced Bushels"}),e.jsx("div",{className:"text-xl font-bold text-green-700 font-mono",children:Je.toLocaleString()}),e.jsxs("div",{className:"text-xs text-green-500",children:[gt.toFixed(0),"% sold"]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Open Bushels"}),e.jsx("div",{className:"text-xl font-bold text-red-700 font-mono",children:Ye.toLocaleString()}),e.jsxs("div",{className:"text-xs text-red-500",children:[(100-gt).toFixed(0),"% open"]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-xs text-amber-600 font-medium",children:"Wtd Avg (Priced)"}),e.jsxs("div",{className:"text-xl font-bold text-amber-700 font-mono",children:["$",ps.toFixed(2)]}),e.jsx("div",{className:"text-xs text-amber-500",children:"locked in price"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Scenario Cash"}),e.jsxs("div",{className:"text-xl font-bold text-blue-700 font-mono",children:["$",Ue.toFixed(2)]}),e.jsx("div",{className:"text-xs text-blue-500",children:"on open bu"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Blended Price"}),e.jsxs("div",{className:"text-xl font-bold text-purple-700 font-mono",children:["$",ma.toFixed(2)]}),e.jsx("div",{className:"text-xs text-purple-500",children:"all production"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${mr>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-xs font-medium ${mr>=0?"text-green-600":"text-red-600"}`,children:"P&L / Acre"}),e.jsx("div",{className:`text-xl font-bold font-mono ${mr>=0?"text-green-700":"text-red-700"}`,children:T(mr)}),e.jsx("div",{className:`text-xs ${mr>=0?"text-green-500":"text-red-500"}`,children:"scenario result"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-5 h-5 text-amber-600"}),"Scenario Inputs"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-600 block mb-1",children:["Scenario Futures Price",e.jsxs("span",{className:"text-gray-400 ml-2",children:["(Current: $",be.toFixed(2),")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ie,{value:ye,onChange:Se=>b({scenarios:{...L,scenarioFutures:{...L.scenarioFutures,[D]:Se}}}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg font-mono text-lg"}),e.jsx("button",{onClick:()=>b({scenarios:{...L,scenarioFutures:{...L.scenarioFutures,[D]:be}}}),className:"px-3 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200",children:"Reset"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Local Basis"}),e.jsxs("div",{className:"px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg font-mono text-lg",children:["$",Te>=0?"+":"",Te.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Set in Positions tab"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx("label",{className:"text-sm text-amber-600 block mb-1 font-medium",children:"Scenario Cash Price"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:["$",Ue.toFixed(2)]}),e.jsx("p",{className:"text-xs text-amber-500",children:"Futures + Basis"})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("label",{className:"text-sm text-gray-600 block mb-1",children:["Cost of Production ($/Acre)",e.jsxs("span",{className:"text-green-600 ml-2",children:["(from Cash Flow: $",$e.toFixed(2),")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx(ie,{value:et,onChange:Se=>b({scenarios:{...L,costOverrides:{...L.costOverrides,[D]:Se}}}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg font-mono text-lg"}),e.jsx("button",{onClick:()=>{const Se={...L.costOverrides};delete Se[D],b({scenarios:{...L,costOverrides:Se}})},className:"px-3 py-2 bg-green-100 text-green-600 rounded-lg text-sm hover:bg-green-200",title:"Use calculated cost from Cash Flow",children:"Auto"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg text-xs",children:[e.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Cost Breakdown ($/Acre)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Seed:"}),e.jsxs("span",{className:"font-mono",children:["$",V.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fertilizer:"}),e.jsxs("span",{className:"font-mono",children:["$",q.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Chemicals:"}),e.jsxs("span",{className:"font-mono",children:["$",X.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Irrigation:"}),e.jsxs("span",{className:"font-mono",children:["$",se.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Freight:"}),e.jsxs("span",{className:"font-mono",children:["$",le.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Land/Rent:"}),e.jsxs("span",{className:"font-mono",children:["$",ke.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Insurance:"}),e.jsxs("span",{className:"font-mono",children:["$",Le.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1 mt-1",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"font-mono",children:["$",$e.toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5 text-amber-600"}),"Scenario Results"]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"Revenue from Priced"}),e.jsxs("div",{className:"text-xs text-green-500",children:[Je.toLocaleString()," bu @ $",ps.toFixed(2)]})]}),e.jsx("div",{className:"text-xl font-bold text-green-700 font-mono",children:T(Ks)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-amber-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-amber-700",children:"Revenue from Open"}),e.jsxs("div",{className:"text-xs text-amber-500",children:[Ye.toLocaleString()," bu @ $",Ue.toFixed(2)]})]}),e.jsx("div",{className:"text-xl font-bold text-amber-700 font-mono",children:T(ua)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg border-2 border-blue-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Total Projected Revenue"}),e.jsxs("div",{className:"text-xs text-blue-500",children:["$",Yl.toFixed(2),"/acre"]})]}),e.jsx("div",{className:"text-xl font-bold text-blue-700 font-mono",children:T(Lr)})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-red-700",children:"Total Costs"}),e.jsxs("div",{className:"text-xs text-red-500",children:[I.toLocaleString()," ac @ $",et.toFixed(2)]})]}),e.jsxs("div",{className:"text-xl font-bold text-red-700 font-mono",children:["(",T(ha),")"]})]}),e.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg border-2 ${xr>=0?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${xr>=0?"text-green-700":"text-red-700"}`,children:"Net Profit/Loss"}),e.jsxs("div",{className:`text-xs ${xr>=0?"text-green-500":"text-red-500"}`,children:[T(mr),"/acre"]})]}),e.jsx("div",{className:`text-2xl font-bold font-mono ${xr>=0?"text-green-700":"text-red-700"}`,children:T(xr)})]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:"Breakeven on Open Bushels"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-purple-600",children:"Breakeven Cash Price"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:["$",Ma.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-purple-600",children:"Breakeven Futures"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700 font-mono",children:["$",Dr.toFixed(2)]})]})]}),e.jsxs("p",{className:"text-xs text-purple-500 mt-2",children:["Need $",Ma.toFixed(2)," cash on ",Ye.toLocaleString()," open bu to cover remaining costs after priced revenue."]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5 text-amber-600"}),"Futures Price Scenarios"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["See how different futures prices affect your ",D," P&L with ",Ye.toLocaleString()," open bushels."]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Futures Change"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Futures Price"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Cash Price"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Open Revenue"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Total Revenue"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"Total P&L"}),e.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-700",children:"P&L/Acre"})]})}),e.jsx("tbody",{children:Bt.map((Se,Ze)=>{const es=be+Se,Zs=es+Te,Ha=Ye*Zs,Oa=Ks+Ha,$n=Oa-ha,Tr=I>0?$n/I:0,Fs=Math.abs(es-ye)<.01;return e.jsxs("tr",{className:`border-b border-gray-100 cursor-pointer hover:bg-amber-50 transition-colors ${Fs?"bg-amber-100 font-semibold":Se===0?"bg-gray-50":""}`,onClick:()=>b({scenarios:{...L,scenarioFutures:{...L.scenarioFutures,[D]:es}}}),children:[e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Se<0?"bg-red-100 text-red-700":Se>0?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:Se===0?"Current":(Se>0?"+":"")+"$"+Se.toFixed(2)}),Fs&&e.jsx("span",{className:"ml-2 text-amber-600",children:""})]}),e.jsxs("td",{className:"py-3 px-4 text-right font-mono",children:["$",es.toFixed(2)]}),e.jsxs("td",{className:"py-3 px-4 text-right font-mono",children:["$",Zs.toFixed(2)]}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:T(Ha)}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:T(Oa)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono font-semibold ${$n>=0?"text-green-700":"text-red-700"}`,children:T($n)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono ${Tr>=0?"text-green-700":"text-red-700"}`,children:T(Tr)})]},Ze)})})]})}),e.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Click any row to apply that scenario"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Yn,{className:"w-5 h-5 text-amber-600"}),D," Position Review"]}),nt.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-4 text-left font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"py-2 px-4 text-right font-semibold text-gray-700",children:"Bushels"}),e.jsx("th",{className:"py-2 px-4 text-right font-semibold text-gray-700",children:"Price"}),e.jsx("th",{className:"py-2 px-4 text-right font-semibold text-gray-700",children:"Value"}),e.jsx("th",{className:"py-2 px-4 text-left font-semibold text-gray-700",children:"Date"}),e.jsx("th",{className:"py-2 px-4 text-left font-semibold text-gray-700",children:"Notes"})]})}),e.jsxs("tbody",{children:[nt.filter(Se=>Se.bushels>0).map((Se,Ze)=>e.jsxs("tr",{className:`border-b border-gray-100 ${Ze%2===0?"":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-2 px-4",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${Se.type==="cash"?"bg-green-100 text-green-700":Se.type==="futures"?"bg-blue-100 text-blue-700":Se.type==="hta"?"bg-purple-100 text-purple-700":Se.type==="basis"?"bg-amber-100 text-amber-700":Se.type==="put"?"bg-red-100 text-red-700":"bg-teal-100 text-teal-700"}`,children:Se.type.toUpperCase()})}),e.jsx("td",{className:"py-2 px-4 text-right font-mono",children:Se.bushels.toLocaleString()}),e.jsxs("td",{className:"py-2 px-4 text-right font-mono",children:["$",Se.price.toFixed(2)]}),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-green-700",children:T(Se.bushels*Se.price)}),e.jsx("td",{className:"py-2 px-4 text-gray-600",children:Se.date||""}),e.jsx("td",{className:"py-2 px-4 text-gray-500",children:Se.notes||""})]},Se.id)),e.jsxs("tr",{className:"bg-amber-50 font-semibold",children:[e.jsx("td",{className:"py-3 px-4",children:"PRICED TOTAL"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono",children:Je.toLocaleString()}),e.jsxs("td",{className:"py-3 px-4 text-right font-mono",children:["$",ps.toFixed(2)," avg"]}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700",children:T(Ks)}),e.jsx("td",{colSpan:"2"})]})]})]})}):e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[e.jsxs("p",{className:"text-gray-500",children:["No positions entered for ",D,"."]}),e.jsx("button",{onClick:()=>fn("positions"),className:"mt-3 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"Add Positions"})]})]})]})})()})]})})()})]}),O==="refinanceCalc"&&e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>W("landing"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Er,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Refinance Calculator"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[te==null?void 0:te.name,"  Analyze debt restructuring scenarios"]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(Ir,{className:"w-6 h-6 text-teal-600"})})]}),e.jsx("main",{className:"p-6 max-w-7xl mx-auto",children:(()=>{const s=(r==null?void 0:r.debtService)||[],n=s.filter(F=>Ea.selectedDebts.includes(F.id)),{newLoanTerms:o}=Ea,i=F=>F.currentBalance||F.principalAmount||F.principal||0,h=n.reduce((F,v)=>F+i(v),0),b=n.reduce((F,v)=>F+(v.annualPayment||v.totalPayment||0),0),x=n.reduce((F,v)=>F+(v.principalPayment||0),0),f=n.reduce((F,v)=>F+(v.interestPayment||0),0),d=h>0?n.reduce((F,v)=>F+i(v)*(v.interestRate||0),0)/h:0,u=h+(o.closingCosts||0)+(o.cashOut||0),j=o.interestRate/100/12,g=(o.amortYears||o.termYears)*12,m=u>0&&j>0?u*j*Math.pow(1+j,g)/(Math.pow(1+j,g)-1):0,p=m*12,C=u*(o.interestRate/100),N=p-C,k=p-b,P=C-f,A=N-x,R=o.interestRate-d,L=-k,D=(o.cashOut||0)-(o.closingCosts||0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-teal-50 rounded-lg p-4 border border-teal-200",children:[e.jsx("div",{className:"text-sm text-teal-600 font-medium",children:"Debts Selected"}),e.jsx("div",{className:"text-2xl font-bold text-teal-700",children:n.length}),e.jsxs("div",{className:"text-xs text-teal-500 mt-1",children:["of ",s.length," total"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Current Balance"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 font-mono",children:T(h)})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"New Loan Amount"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700 font-mono",children:T(u)}),(o.closingCosts>0||o.cashOut>0)&&e.jsxs("div",{className:"text-xs text-amber-500 mt-1",children:["+",T(o.closingCosts)," costs +",T(o.cashOut)," cash out"]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${L>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${L>=0?"text-green-600":"text-red-600"}`,children:"Annual Cash Flow Impact"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${L>=0?"text-green-700":"text-red-700"}`,children:[L>=0?"+":"",T(L)]}),e.jsx("div",{className:`text-xs mt-1 ${L>=0?"text-green-500":"text-red-500"}`,children:L>=0?"More cash available":"Less cash available"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Select Debts to Refinance"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_t(F=>({...F,selectedDebts:s.map(v=>v.id)})),className:"px-3 py-1 text-xs bg-teal-100 text-teal-700 rounded hover:bg-teal-200",children:"Select All"}),e.jsx("button",{onClick:()=>_t(F=>({...F,selectedDebts:[]})),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"})]})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 text-left w-10",children:e.jsx("input",{type:"checkbox",checked:n.length===s.length&&s.length>0,onChange:F=>{F.target.checked?_t(v=>({...v,selectedDebts:s.map(S=>S.id)})):_t(v=>({...v,selectedDebts:[]}))},className:"rounded"})}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Description"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Lender"}),e.jsx("th",{className:"py-2 px-3 text-right",children:"Balance"}),e.jsx("th",{className:"py-2 px-3 text-right",children:"Rate"}),e.jsx("th",{className:"py-2 px-3 text-right",children:"Annual Pmt"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Category"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-8 text-center text-gray-500",children:"No debts found. Add debts in the Balance Sheet view."})}):s.map(F=>{const v=Ea.selectedDebts.includes(F.id);return e.jsxs("tr",{className:`border-b hover:bg-gray-50 cursor-pointer ${v?"bg-teal-50":""}`,onClick:()=>{_t(S=>({...S,selectedDebts:v?S.selectedDebts.filter(E=>E!==F.id):[...S.selectedDebts,F.id]}))},children:[e.jsx("td",{className:"py-2 px-3",onClick:S=>S.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:v,onChange:S=>{_t(E=>({...E,selectedDebts:S.target.checked?[...E.selectedDebts,F.id]:E.selectedDebts.filter(I=>I!==F.id)}))},className:"rounded"})}),e.jsx("td",{className:"py-2 px-3 font-medium",children:F.description||""}),e.jsx("td",{className:"py-2 px-3 text-gray-600",children:F.lender||""}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:T(F.currentBalance||F.principalAmount||F.principal||0)}),e.jsxs("td",{className:"py-2 px-3 text-right font-mono",children:[(F.interestRate||0).toFixed(2),"%"]}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:T(F.annualPayment||F.totalPayment||0)}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${F.category==="realEstate"?"bg-blue-100 text-blue-700":F.category==="intermediate"?"bg-purple-100 text-purple-700":"bg-amber-100 text-amber-700"}`,children:F.category==="realEstate"?"RE":F.category==="intermediate"?"Int":"Curr"})})]},F.id)})})]})}),n.length>0&&e.jsxs("div",{className:"p-3 bg-teal-50 border-t flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-teal-700",children:[e.jsx("strong",{children:n.length})," debt(s) selected totaling ",e.jsx("strong",{className:"font-mono",children:T(h)})]}),e.jsxs("span",{className:"text-sm text-teal-600",children:["Weighted Avg Rate: ",e.jsxs("strong",{children:[d.toFixed(2),"%"]})]})]})]}),n.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsx("h3",{className:"font-semibold text-gray-800",children:"Refinance Impact Analysis"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"py-2 text-left text-gray-600",children:"Metric"}),e.jsx("th",{className:"py-2 text-right text-blue-600",children:"Current"}),e.jsx("th",{className:"py-2 text-right text-teal-600",children:"After Refi"}),e.jsx("th",{className:"py-2 text-right text-gray-600",children:"Change"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium",children:"Weighted Avg Interest Rate"}),e.jsxs("td",{className:"py-3 text-right font-mono text-blue-700",children:[d.toFixed(2),"%"]}),e.jsxs("td",{className:"py-3 text-right font-mono text-teal-700",children:[o.interestRate.toFixed(2),"%"]}),e.jsxs("td",{className:`py-3 text-right font-mono font-semibold ${R<=0?"text-green-600":"text-red-600"}`,children:[R>=0?"+":"",R.toFixed(2),"%"]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium",children:"Annual Payment"}),e.jsx("td",{className:"py-3 text-right font-mono text-blue-700",children:T(b)}),e.jsx("td",{className:"py-3 text-right font-mono text-teal-700",children:T(p)}),e.jsxs("td",{className:`py-3 text-right font-mono font-semibold ${k<=0?"text-green-600":"text-red-600"}`,children:[k>=0?"+":"",T(k)]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium pl-4 text-gray-600",children:" Principal Portion"}),e.jsx("td",{className:"py-3 text-right font-mono text-blue-600",children:T(x)}),e.jsx("td",{className:"py-3 text-right font-mono text-teal-600",children:T(N)}),e.jsxs("td",{className:`py-3 text-right font-mono ${A>=0?"text-green-600":"text-red-600"}`,children:[A>=0?"+":"",T(A)]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium pl-4 text-gray-600",children:" Interest Portion"}),e.jsx("td",{className:"py-3 text-right font-mono text-blue-600",children:T(f)}),e.jsx("td",{className:"py-3 text-right font-mono text-teal-600",children:T(C)}),e.jsxs("td",{className:`py-3 text-right font-mono ${P<=0?"text-green-600":"text-red-600"}`,children:[P>=0?"+":"",T(P)]})]}),e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("td",{className:"py-3 font-semibold",children:"Total Loan Balance"}),e.jsx("td",{className:"py-3 text-right font-mono font-semibold text-blue-700",children:T(h)}),e.jsx("td",{className:"py-3 text-right font-mono font-semibold text-teal-700",children:T(u)}),e.jsxs("td",{className:`py-3 text-right font-mono font-semibold ${u-h<=0?"text-green-600":"text-amber-600"}`,children:[u-h>=0?"+":"",T(u-h)]})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:`rounded-lg p-4 ${L>=0?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${L>=0?"text-green-600":"text-red-600"}`,children:"Annual Cash Flow Change"}),e.jsxs("div",{className:`text-xl font-bold font-mono ${L>=0?"text-green-700":"text-red-700"}`,children:[L>=0?"+":"",T(L)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:L>=0?"Improved operating cash":"Reduced operating cash"})]}),e.jsxs("div",{className:`rounded-lg p-4 ${D>=0?"bg-blue-50 border border-blue-200":"bg-amber-50 border border-amber-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${D>=0?"text-blue-600":"text-amber-600"}`,children:"Net Cash at Closing"}),e.jsxs("div",{className:`text-xl font-bold font-mono ${D>=0?"text-blue-700":"text-amber-700"}`,children:[D>=0?"+":"",T(D)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Cash out minus closing costs"})]}),e.jsxs("div",{className:"rounded-lg p-4 bg-purple-50 border border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-600",children:"Monthly Payment"}),e.jsx("div",{className:"text-xl font-bold font-mono text-purple-700",children:T(m)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["vs ",T(b/12)," current"]})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Balance Sheet Impact"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Liabilities Change:"}),e.jsxs("span",{className:`ml-2 font-mono font-semibold ${u-h<=0?"text-green-600":"text-amber-600"}`,children:[u-h>=0?"+":"",T(u-h)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Assets Change:"}),e.jsxs("span",{className:`ml-2 font-mono font-semibold ${D>=0?"text-green-600":"text-amber-600"}`,children:[D>=0?"+":"",T(D)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Net Worth Impact:"}),e.jsx("span",{className:`ml-2 font-mono font-semibold ${D-(u-h)>=0?"text-green-600":"text-red-600"}`,children:T(D-(u-h))}),e.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(closing costs)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Working Capital Impact:"}),e.jsxs("span",{className:`ml-2 font-mono font-semibold ${D-A>=0?"text-green-600":"text-red-600"}`,children:[D-A>=0?"+":"",T(D-A)]})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-teal-50",children:e.jsx("h3",{className:"font-semibold text-teal-800",children:"New Loan Terms"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest Rate (%)"}),e.jsx("input",{type:"number",step:"0.125",value:o.interestRate,onChange:F=>_t(v=>({...v,newLoanTerms:{...v.newLoanTerms,interestRate:parseFloat(F.target.value)||0}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loan Term (Years)"}),e.jsx("input",{type:"number",value:o.termYears,onChange:F=>_t(v=>({...v,newLoanTerms:{...v.newLoanTerms,termYears:parseInt(F.target.value)||0}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amortization (Years)"}),e.jsx("input",{type:"number",value:o.amortYears,onChange:F=>_t(v=>({...v,newLoanTerms:{...v.newLoanTerms,amortYears:parseInt(F.target.value)||0}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave same as term for fully amortizing"})]}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Closing Costs"}),e.jsx(ie,{value:o.closingCosts,onChange:F=>_t(v=>({...v,newLoanTerms:{...v.newLoanTerms,closingCosts:F}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Added to loan balance"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cash Out"}),e.jsx(ie,{value:o.cashOut,onChange:F=>_t(v=>({...v,newLoanTerms:{...v.newLoanTerms,cashOut:F}})),className:"w-full px-3 py-2 border rounded-lg text-right font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Additional borrowing for liquidity"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsx("h3",{className:"font-semibold text-gray-700",children:"Quick Rate Scenarios"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[5.5,6,6.5,7,7.5,8].map(F=>e.jsxs("button",{onClick:()=>_t(v=>({...v,newLoanTerms:{...v.newLoanTerms,interestRate:F}})),className:`px-3 py-2 rounded text-sm font-mono ${o.interestRate===F?"bg-teal-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[F.toFixed(1),"%"]},F))})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsx("h3",{className:"font-semibold text-gray-700",children:"Quick Term Scenarios"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[10,15,20,25,30,35].map(F=>e.jsxs("button",{onClick:()=>_t(v=>({...v,newLoanTerms:{...v.newLoanTerms,termYears:F,amortYears:F}})),className:`px-3 py-2 rounded text-sm ${o.termYears===F?"bg-teal-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[F," yr"]},F))})})]}),n.length>0&&e.jsxs("div",{className:"bg-teal-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm font-medium opacity-90",children:"Summary"}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Rate:"}),e.jsxs("span",{className:"font-mono",children:[d.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-80",children:"New Rate:"}),e.jsxs("span",{className:"font-mono",children:[o.interestRate.toFixed(2),"%"]})]}),e.jsx("hr",{className:"border-teal-400 my-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Pmt:"}),e.jsx("span",{className:"font-mono",children:T(b)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-80",children:"New Pmt:"}),e.jsx("span",{className:"font-mono",children:T(p)})]}),e.jsx("hr",{className:"border-teal-400 my-2"}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Cash Flow Impact:"}),e.jsxs("span",{className:"font-mono",children:[L>=0?"+":"",T(L)]})]})]})]})]})]})]})})()})]}),O==="transactionTracker"&&e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>W("landing"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Er,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Transaction Tracker"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[te==null?void 0:te.name,"  Record, reconcile, and enterprise operations"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>W("trackerDashboard"),className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 flex items-center gap-2",children:[e.jsx(bt,{className:"w-4 h-4"}),"Dashboard"]}),e.jsxs("button",{onClick:()=>{const s=prompt("How many blank transactions do you want to add?","100");if(s&&!isNaN(parseInt(s))){const n=parseInt(s),o=Array.from({length:n},(i,h)=>({id:`tx-${Date.now()}-${h}-${Math.random().toString(36).substr(2,5)}`,date:"",draftId:"",vendor:"",itemization:"",otherInfo:"",debit:0,credit:0,bankName:"",fixedVariable:"",enterprise:"",incomeExpenseType:"",scheduleFCategory:"",operationYear:new Date().getFullYear().toString(),taxYear:new Date().getFullYear().toString(),checkWrittenDate:"",reconciled:!1}));mt(i=>[...i,...o])}},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Rows"]}),e.jsxs("button",{onClick:()=>vi(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2 relative",children:[e.jsx(Rr,{className:"w-4 h-4"}),"Mapping",kr().length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:kr().length})]}),e.jsxs("button",{onClick:()=>{mt(s=>s.map(n=>{if(!n.itemization)return n;const o=Sn(n.itemization),i=xa(n.itemization);return{...n,fixedVariable:o.fixedVariable||n.fixedVariable,enterprise:o.enterprise||n.enterprise,incomeExpenseType:o.incomeExpenseType||n.incomeExpenseType,scheduleFCategory:i||n.scheduleFCategory}}))},className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2",children:[e.jsx(Ir,{className:"w-4 h-4"}),"Apply Mapping"]}),e.jsxs("button",{onClick:()=>Ml(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(po,{className:"w-4 h-4"}),"Paste Column"]}),e.jsxs("button",{onClick:()=>Il(!0),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4"}),"Import Bank File"]}),e.jsxs("button",{onClick:()=>{const s={id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:new Date().toISOString().slice(0,10),draftId:"",vendor:"",itemization:"",otherInfo:"",debit:0,credit:0,bankName:"",fixedVariable:"",enterprise:"",incomeExpenseType:"",scheduleFCategory:"",operationYear:new Date().getFullYear().toString(),taxYear:new Date().getFullYear().toString(),checkWrittenDate:"",reconciled:!1};mt(n=>[s,...n]),oa(s.id)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Add Transaction"]}),Re.length>0&&e.jsxs("button",{type:"button",onClick:()=>{window.confirm(`Are you sure you want to delete all ${Re.length} transactions? This cannot be undone.`)&&mt([])},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[e.jsx(ot,{className:"w-4 h-4"}),"Clear All"]})]})]}),e.jsx("main",{className:"flex-1 overflow-auto p-6 bg-gray-50",children:e.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("button",{onClick:()=>hb(!Ci),className:"w-full px-6 py-4 flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xc,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-lg",children:"Bank Account Reconciliation"}),e.jsxs("span",{className:"text-blue-200 text-sm",children:["(",[...new Set(Re.map(s=>s.bankName).filter(s=>s))].length," accounts)"]})]}),Ci?e.jsx(Qf,{className:"w-5 h-5"}):e.jsx(ti,{className:"w-5 h-5"})]}),Ci&&e.jsx("div",{className:"p-6",children:(()=>{const s=[...new Set(Re.map(i=>i.bankName).filter(i=>i))].sort();if(s.length===0)return e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(xc,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No bank accounts found in transactions."}),e.jsx("p",{className:"text-sm text-gray-400",children:"Add transactions with a Bank Account Name to start reconciling."})]});const n=i=>{if(!i)return null;if(i.includes("/")){const[h,b,x]=i.split("/");return new Date(x,h-1,b)}return new Date(i)},o=(i,h,b)=>{const x=n(i),f=n(h),d=n(b);return!(!x||f&&x<f||d&&x>d)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-8 gap-4 text-xs font-semibold text-gray-500 uppercase tracking-wide px-2",children:[e.jsx("div",{children:"Bank Account"}),e.jsx("div",{children:"Start Date"}),e.jsx("div",{children:"Last Updated"}),e.jsx("div",{className:"text-right",children:"Starting Balance"}),e.jsx("div",{className:"text-right",children:"Net Transactions"}),e.jsx("div",{className:"text-right",children:"Ending Balance"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-center",children:"Bank Link"})]}),s.map(i=>{const h=zl[i]||{startDate:"",lastUpdated:"",startingBalance:0},b=Re.filter(C=>C.bankName===i&&o(C.date,h.startDate,h.lastUpdated)),x=b.reduce((C,N)=>C+(parseFloat(N.credit)||0),0),f=b.reduce((C,N)=>C+(parseFloat(N.debit)||0),0),d=x-f,j=(parseFloat(h.startingBalance)||0)+d,g=b.filter(C=>C.reconciled).length,m=b.length,p=m>0&&g===m;return e.jsxs("div",{className:"grid grid-cols-8 gap-4 items-center py-3 px-2 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:i}),e.jsxs("div",{className:"text-xs text-gray-500",children:[m," transactions in range"]})]}),e.jsx("div",{children:e.jsx("input",{type:"date",value:h.startDate||"",onChange:C=>Ia(N=>({...N,[i]:{...N[i],startDate:C.target.value}})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm"})}),e.jsx("div",{children:e.jsx("input",{type:"date",value:h.lastUpdated||"",onChange:C=>Ia(N=>({...N,[i]:{...N[i],lastUpdated:C.target.value}})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm"})}),e.jsx("div",{children:e.jsx("input",{type:"text",value:h.startingBalanceDisplay!==void 0?h.startingBalanceDisplay:h.startingBalance?`$${parseFloat(h.startingBalance).toLocaleString()}`:"",onChange:C=>{const N=C.target.value;Ia(k=>({...k,[i]:{...k[i],startingBalanceDisplay:N}}))},onBlur:C=>{const N=C.target.value.replace(/[^0-9.-]/g,""),k=parseFloat(N)||0;Ia(P=>({...P,[i]:{...P[i],startingBalance:k.toString(),startingBalanceDisplay:k?`$${k.toLocaleString()}`:""}}))},onFocus:C=>{const N=h.startingBalance||"";Ia(k=>({...k,[i]:{...k[i],startingBalanceDisplay:N}}))},className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm text-right font-mono",placeholder:"$0"})}),e.jsxs("div",{className:`text-right font-mono text-sm font-semibold ${d>=0?"text-green-600":"text-red-600"}`,children:[d>=0?"+":"",d.toLocaleString("en-US",{style:"currency",currency:"USD"})]}),e.jsx("div",{className:`text-right font-mono text-sm font-bold ${j>=0?"text-blue-700":"text-red-700"}`,children:j.toLocaleString("en-US",{style:"currency",currency:"USD"})}),e.jsx("div",{className:"text-center",children:p?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[e.jsx(Bs,{className:"w-3 h-3"})," Reconciled"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[g,"/",m]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[h.bankUrl?e.jsx("a",{href:h.bankUrl.startsWith("http")?h.bankUrl:`https://${h.bankUrl}`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded bg-blue-100 text-blue-600 hover:bg-blue-200",title:"Open bank website",children:e.jsx(Zf,{className:"w-4 h-4"})}):null,e.jsx("input",{type:"text",value:h.bankUrl||"",onChange:C=>Ia(N=>({...N,[i]:{...N[i],bankUrl:C.target.value}})),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-xs",placeholder:"bank.com/login"})]})]},i)}),s.length>1&&(()=>{let i=0,h=0,b=0;return s.forEach(x=>{const f=zl[x]||{startDate:"",lastUpdated:"",startingBalance:0},d=Re.filter(p=>p.bankName===x&&o(p.date,f.startDate,f.lastUpdated)),u=d.reduce((p,C)=>p+(parseFloat(C.credit)||0),0),j=d.reduce((p,C)=>p+(parseFloat(C.debit)||0),0),g=u-j,m=parseFloat(f.startingBalance)||0;i+=m,h+=g,b+=m+g}),e.jsxs("div",{className:"grid grid-cols-8 gap-4 items-center py-3 px-2 bg-blue-50 rounded-lg border-2 border-blue-200 mt-2",children:[e.jsx("div",{className:"font-bold text-blue-800",children:"TOTALS"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{className:"text-right font-mono text-sm font-bold text-blue-800",children:i.toLocaleString("en-US",{style:"currency",currency:"USD"})}),e.jsxs("div",{className:`text-right font-mono text-sm font-bold ${h>=0?"text-green-700":"text-red-700"}`,children:[h>=0?"+":"",h.toLocaleString("en-US",{style:"currency",currency:"USD"})]}),e.jsx("div",{className:`text-right font-mono text-sm font-bold ${b>=0?"text-blue-800":"text-red-800"}`,children:b.toLocaleString("en-US",{style:"currency",currency:"USD"})}),e.jsx("div",{}),e.jsx("div",{})]})})()]})})()})]}),(()=>{const s=Re.filter(d=>d.reconciled),n=Re.filter(d=>!d.reconciled),o=s.reduce((d,u)=>d+(parseFloat(u.debit)||0),0),i=s.reduce((d,u)=>d+(parseFloat(u.credit)||0),0),h=n.reduce((d,u)=>d+(parseFloat(u.debit)||0),0),b=n.reduce((d,u)=>d+(parseFloat(u.credit)||0),0),x=Re.reduce((d,u)=>d+(parseFloat(u.debit)||0),0),f=Re.reduce((d,u)=>d+(parseFloat(u.credit)||0),0);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>Tt(d=>({...d,reconciledStatus:"all"})),className:`flex-1 px-6 py-4 text-center transition-colors ${Ce.reconciledStatus==="all"?"bg-blue-50 border-b-2 border-blue-500":"hover:bg-gray-50"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Re.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"All Transactions"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["$",x.toLocaleString()," debits  $",f.toLocaleString()," credits"]})]}),e.jsxs("button",{onClick:()=>Tt(d=>({...d,reconciledStatus:"unreconciled"})),className:`flex-1 px-6 py-4 text-center transition-colors border-l border-gray-200 ${Ce.reconciledStatus==="unreconciled"?"bg-amber-50 border-b-2 border-amber-500":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-700",children:n.length}),n.length>0&&e.jsx("span",{className:"w-3 h-3 bg-amber-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"Unreconciled"}),e.jsxs("div",{className:"text-xs text-amber-500 mt-1",children:["$",h.toLocaleString()," debits  $",b.toLocaleString()," credits"]})]}),e.jsxs("button",{onClick:()=>Tt(d=>({...d,reconciledStatus:"reconciled"})),className:`flex-1 px-6 py-4 text-center transition-colors border-l border-gray-200 ${Ce.reconciledStatus==="reconciled"?"bg-green-50 border-b-2 border-green-500":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:s.length}),e.jsx(Bs,{className:"w-5 h-5 text-green-500"})]}),e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Reconciled"}),e.jsxs("div",{className:"text-xs text-green-500 mt-1",children:["$",o.toLocaleString()," debits  $",i.toLocaleString()," credits"]})]})]}),Re.length>0&&e.jsxs("div",{className:"px-6 py-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Reconciliation Progress"}),e.jsxs("span",{className:"font-medium text-gray-800",children:[Math.round(s.length/Re.length*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-green-500 h-2.5 rounded-full transition-all duration-300",style:{width:`${s.length/Re.length*100}%`}})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Debits"}),e.jsxs("div",{className:"text-xl font-bold text-red-700 font-mono",children:["$",x.toLocaleString()]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Credits"}),e.jsxs("div",{className:"text-xl font-bold text-green-700 font-mono",children:["$",f.toLocaleString()]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${f-x>=0?"bg-emerald-50 border-emerald-200":"bg-orange-50 border-orange-200"}`,children:[e.jsx("div",{className:`text-sm font-medium ${f-x>=0?"text-emerald-600":"text-orange-600"}`,children:"Net Cash Flow"}),e.jsxs("div",{className:`text-xl font-bold font-mono ${f-x>=0?"text-emerald-700":"text-orange-700"}`,children:[f-x>=0?"":"-","$",Math.abs(f-x).toLocaleString()]})]}),e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4 border border-cyan-200",children:[e.jsx("div",{className:"text-sm text-cyan-600 font-medium",children:"Enterprises"}),e.jsx("div",{className:"text-xl font-bold text-cyan-700",children:[...new Set(Re.map(d=>d.enterprise).filter(d=>d))].length})]})]})]})})(),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 lg:grid-cols-12 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Search"}),e.jsx("input",{type:"text",value:Ce.search,onChange:s=>Tt(n=>({...n,search:s.target.value})),placeholder:"Search...",className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Date"}),e.jsxs("select",{value:Ce.date,onChange:s=>Tt(n=>({...n,date:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.date).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Check Ref #/Draft #"}),e.jsxs("select",{value:Ce.draftId,onChange:s=>Tt(n=>({...n,draftId:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.draftId).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Vendor"}),e.jsxs("select",{value:Ce.vendor,onChange:s=>Tt(n=>({...n,vendor:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.vendor).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Itemization"}),e.jsxs("select",{value:Ce.itemization,onChange:s=>Tt(n=>({...n,itemization:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.itemization).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Bank Account"}),e.jsxs("select",{value:Ce.bankName,onChange:s=>Tt(n=>({...n,bankName:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.bankName).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Fixed/Var"}),e.jsxs("select",{value:Ce.fixedVariable,onChange:s=>Tt(n=>({...n,fixedVariable:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.fixedVariable).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Enterprise"}),e.jsxs("select",{value:Ce.enterprise,onChange:s=>Tt(n=>({...n,enterprise:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.enterprise).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Inc/Exp Type"}),e.jsxs("select",{value:Ce.incomeExpenseType,onChange:s=>Tt(n=>({...n,incomeExpenseType:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.incomeExpenseType).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Schedule F"}),e.jsxs("select",{value:Ce.scheduleFCategory,onChange:s=>Tt(n=>({...n,scheduleFCategory:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.scheduleFCategory).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Op Year"}),e.jsxs("select",{value:Ce.operationYear,onChange:s=>Tt(n=>({...n,operationYear:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.operationYear).filter(s=>s))].sort((s,n)=>n-s).map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Tax Year"}),e.jsxs("select",{value:Ce.taxYear,onChange:s=>Tt(n=>({...n,taxYear:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs",children:[e.jsx("option",{value:"",children:"All"}),[...new Set(Re.map(s=>s.taxYear).filter(s=>s))].sort((s,n)=>n-s).map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex items-center gap-4",children:[kr().length>0&&e.jsxs("button",{onClick:()=>Tt(s=>({...s,showUnmapped:!s.showUnmapped})),className:`px-3 py-1 rounded-full text-sm flex items-center gap-2 ${Ce.showUnmapped?"bg-amber-500 text-white":"bg-amber-100 text-amber-700 hover:bg-amber-200"}`,children:[e.jsx(zh,{className:"w-4 h-4"}),Ce.showUnmapped?"Showing Unmapped Only":`Show Unmapped (${kr().length})`]}),e.jsx("button",{onClick:()=>Tt({search:"",date:"",draftId:"",vendor:"",itemization:"",bankName:"",fixedVariable:"",enterprise:"",incomeExpenseType:"",scheduleFCategory:"",operationYear:"",taxYear:"",showUnmapped:!1,reconciledStatus:"all"}),className:"px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-600 hover:bg-gray-200",children:"Clear All Filters"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:(()=>{const s=Re.filter(i=>{var h,b,x;return!(Ce.search&&!((h=i.vendor)!=null&&h.toLowerCase().includes(Ce.search.toLowerCase()))&&!((b=i.itemization)!=null&&b.toLowerCase().includes(Ce.search.toLowerCase()))&&!((x=i.draftId)!=null&&x.toLowerCase().includes(Ce.search.toLowerCase()))||Ce.date&&i.date!==Ce.date||Ce.draftId&&i.draftId!==Ce.draftId||Ce.vendor&&i.vendor!==Ce.vendor||Ce.itemization&&i.itemization!==Ce.itemization||Ce.bankName&&i.bankName!==Ce.bankName||Ce.fixedVariable&&i.fixedVariable!==Ce.fixedVariable||Ce.enterprise&&i.enterprise!==Ce.enterprise||Ce.incomeExpenseType&&i.incomeExpenseType!==Ce.incomeExpenseType||Ce.scheduleFCategory&&i.scheduleFCategory!==Ce.scheduleFCategory||Ce.operationYear&&i.operationYear!==Ce.operationYear||Ce.taxYear&&i.taxYear!==Ce.taxYear||Ce.showUnmapped&&(!i.itemization||Sn(i.itemization).mapped)||Ce.reconciledStatus==="reconciled"&&!i.reconciled||Ce.reconciledStatus==="unreconciled"&&i.reconciled)}),n=s.length>0&&s.every(i=>i.reconciled),o=s.some(i=>i.reconciled)&&!n;return e.jsxs("tr",{className:"bg-gray-100 border-b border-gray-200",children:[e.jsx("th",{className:"px-2 py-3 text-center font-semibold text-gray-700 whitespace-nowrap w-10",children:e.jsx("input",{type:"checkbox",checked:n,ref:i=>{i&&(i.indeterminate=o)},onChange:()=>{const i=s.map(h=>h.id);mt(n?h=>h.map(b=>i.includes(b.id)?{...b,reconciled:!1}:b):h=>h.map(b=>i.includes(b.id)?{...b,reconciled:!0}:b))},className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 cursor-pointer",title:n?"Unreconcile all visible":"Reconcile all visible"})}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap cursor-pointer hover:bg-gray-200 select-none",onClick:()=>El(i=>({column:"date",direction:i.column==="date"&&i.direction==="asc"?"desc":"asc"})),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Date",na.column==="date"&&e.jsx("span",{className:"text-blue-600",children:na.direction==="asc"?"":""})]})}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Check Ref #/Draft #"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap min-w-[200px]",children:"Vendor/Description"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Itemization"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Other Info"}),e.jsx("th",{className:"px-3 py-3 text-right font-semibold text-red-700 whitespace-nowrap",children:"Debit"}),e.jsx("th",{className:"px-3 py-3 text-right font-semibold text-green-700 whitespace-nowrap",children:"Credit"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Bank Account Name"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Fixed/Var"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Enterprise"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Inc/Exp Type"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Schedule F"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Op Year"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Tax Year"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 whitespace-nowrap",children:"Check Date"}),e.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-700 whitespace-nowrap",children:"Actions"})]})})()}),e.jsx("tbody",{children:Re.filter(s=>{var n,o,i;return!(Ce.search&&!((n=s.vendor)!=null&&n.toLowerCase().includes(Ce.search.toLowerCase()))&&!((o=s.itemization)!=null&&o.toLowerCase().includes(Ce.search.toLowerCase()))&&!((i=s.draftId)!=null&&i.toLowerCase().includes(Ce.search.toLowerCase()))||Ce.date&&s.date!==Ce.date||Ce.draftId&&s.draftId!==Ce.draftId||Ce.vendor&&s.vendor!==Ce.vendor||Ce.itemization&&s.itemization!==Ce.itemization||Ce.bankName&&s.bankName!==Ce.bankName||Ce.fixedVariable&&s.fixedVariable!==Ce.fixedVariable||Ce.enterprise&&s.enterprise!==Ce.enterprise||Ce.incomeExpenseType&&s.incomeExpenseType!==Ce.incomeExpenseType||Ce.scheduleFCategory&&s.scheduleFCategory!==Ce.scheduleFCategory||Ce.operationYear&&s.operationYear!==Ce.operationYear||Ce.taxYear&&s.taxYear!==Ce.taxYear||Ce.showUnmapped&&(!s.itemization||Sn(s.itemization).mapped)||Ce.reconciledStatus==="reconciled"&&!s.reconciled||Ce.reconciledStatus==="unreconciled"&&s.reconciled)}).sort((s,n)=>{if(na.column==="date"){const o=b=>{if(!b)return new Date(0);if(b.includes("/")){const[x,f,d]=b.split("/");return new Date(d,x-1,f)}return new Date(b)},i=o(s.date),h=o(n.date);return na.direction==="asc"?i-h:h-i}return 0}).map((s,n)=>{const o=s.itemization&&!Sn(s.itemization).mapped,i=!s.reconciled||la===s.id,h=g=>{if(!g)return null;if(g.includes("/")){const m=g.split("/");if(m.length===3){const[p,C,N]=m;return new Date(parseInt(N),parseInt(p)-1,parseInt(C))}}return new Date(g)};let b=0,x=parseFloat(s.credit)||0;const f=(s.itemization||"").toLowerCase().trim(),d=f.includes("corn")&&f.includes("inventory"),u=(f.includes("soybean")||f.includes("bean"))&&f.includes("inventory");if((d||u)&&s.date&&x>0){const g=h(s.date);g&&!isNaN(g.getTime())&&(Re.forEach(m=>{const p=(m.itemization||"").toLowerCase().trim(),C=h(m.date),N=parseFloat(m.credit)||0;!C||isNaN(C.getTime())||N<=0||C<=g||(d&&p.includes("corn")&&!p.includes("inventory")&&(b+=N),u&&(p.includes("soybean")||p.includes("bean"))&&!p.includes("inventory")&&(b+=N))}),x=Math.max(0,x-b))}const j=b>0;return e.jsxs("tr",{className:`border-b border-gray-100 ${n%2===0?"bg-white":"bg-gray-50"} ${s.reconciled?"bg-green-50":""} ${o&&!s.reconciled?"bg-amber-50 border-l-4 border-l-amber-400":""} ${la===s.id?"ring-2 ring-blue-400":""}`,children:[e.jsx("td",{className:"px-2 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:s.reconciled||!1,onChange:()=>{mt(g=>g.map(m=>m.id===s.id?{...m,reconciled:!m.reconciled}:m)),la===s.id&&oa(null)},className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 cursor-pointer",title:s.reconciled?"Click to unreconcile":"Click to reconcile"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.date||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,date:g.target.value}:p)),disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"MM/DD/YYYY"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.draftId||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,draftId:g.target.value}:p)),disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"Ref #"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.vendor||"",onChange:g=>{const m=g.target.value,p=s.itemization?{}:{scheduleFCategory:xa(m)};mt(C=>C.map(N=>N.id===s.id?{...N,vendor:m,...p}:N))},disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"Vendor or Description"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.itemization||"",onChange:g=>{const m=g.target.value,p=xa(m);mt(C=>C.map(N=>N.id===s.id?{...N,itemization:m,scheduleFCategory:p}:N))},disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"Itemization"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.otherInfo||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,otherInfo:g.target.value}:p)),disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"Other info"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",defaultValue:s.debit?parseFloat(s.debit).toLocaleString("en-US",{style:"currency",currency:"USD"}):"",onFocus:g=>{i&&(g.target.value=s.debit||"",g.target.select())},onBlur:g=>{if(!i)return;const m=g.target.value.replace(/[^0-9.-]/g,""),p=parseFloat(m)||0;mt(C=>C.map(N=>N.id===s.id?{...N,debit:p}:N)),g.target.value=p?p.toLocaleString("en-US",{style:"currency",currency:"USD"}):""},disabled:!i,className:`w-28 px-2 py-1 border rounded text-xs text-right font-mono ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"$0.00"},`debit-${s.id}-${s.debit||0}`)}),e.jsx("td",{className:"px-3 py-2",children:j?e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"text-xs font-mono text-right",children:[e.jsx("div",{className:"text-gray-400 line-through text-[10px]",children:parseFloat(s.credit).toLocaleString("en-US",{style:"currency",currency:"USD"})}),e.jsx("div",{className:"text-green-700 font-semibold",children:x.toLocaleString("en-US",{style:"currency",currency:"USD"})}),e.jsxs("div",{className:"text-red-500 text-[10px]",children:["-",b.toLocaleString("en-US",{style:"currency",currency:"USD"})," sales"]})]})}):e.jsx("input",{type:"text",defaultValue:s.credit?parseFloat(s.credit).toLocaleString("en-US",{style:"currency",currency:"USD"}):"",onFocus:g=>{i&&(g.target.value=s.credit||"",g.target.select())},onBlur:g=>{if(!i)return;const m=g.target.value.replace(/[^0-9.-]/g,""),p=parseFloat(m)||0;mt(C=>C.map(N=>N.id===s.id?{...N,credit:p}:N)),g.target.value=p?p.toLocaleString("en-US",{style:"currency",currency:"USD"}):""},disabled:!i,className:`w-28 px-2 py-1 border rounded text-xs text-right font-mono ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"$0.00"},`credit-${s.id}-${s.credit||0}`)}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.bankName||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,bankName:g.target.value}:p)),disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"Account name"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.fixedVariable||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,fixedVariable:g.target.value}:p)),disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"Fixed/Variable"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.enterprise||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,enterprise:g.target.value}:p)),disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"Enterprise"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.incomeExpenseType||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,incomeExpenseType:g.target.value}:p)),disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"Inc/Exp Type"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.scheduleFCategory||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,scheduleFCategory:g.target.value}:p)),disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"Schedule F"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.operationYear||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,operationYear:g.target.value}:p)),disabled:!i,className:`w-16 px-2 py-1 border rounded text-xs text-center ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"2025"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.taxYear||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,taxYear:g.target.value}:p)),disabled:!i,className:`w-16 px-2 py-1 border rounded text-xs text-center ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"2025"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:s.checkWrittenDate||"",onChange:g=>mt(m=>m.map(p=>p.id===s.id?{...p,checkWrittenDate:g.target.value}:p)),disabled:!i,className:`w-full px-2 py-1 border rounded text-xs ${i?"border-gray-200 bg-white":"border-transparent bg-transparent cursor-default"}`,placeholder:"MM/DD/YYYY"})}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.reconciled?la===s.id?e.jsx("button",{type:"button",onClick:()=>oa(null),className:"p-1 rounded bg-green-100 text-green-600 hover:bg-green-200",title:"Done editing",children:e.jsx(Bs,{className:"w-4 h-4"})}):e.jsx("button",{type:"button",onClick:()=>oa(s.id),className:"p-1 rounded bg-blue-100 text-blue-600 hover:bg-blue-200",title:"Edit",children:e.jsx(Bf,{className:"w-4 h-4"})}):null,e.jsx("button",{type:"button",onClick:g=>{g.preventDefault(),g.stopPropagation();const m=s.id;mt(p=>p.filter(C=>String(C.id)!==String(m)))},className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 cursor-pointer text-xs font-medium",children:"Delete"})]})})]},s.id)})})]}),Re.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Ir,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"font-medium",children:"No transactions yet"}),e.jsx("p",{className:"text-sm",children:"Import a bank file or add transactions manually to get started."})]})]})})]})}),db&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Import Bank File"}),e.jsx("button",{onClick:()=>{Il(!1),An([]),Ln([]),ia(!1)},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(pr,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:$a.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{onDragOver:s=>{s.preventDefault(),s.stopPropagation(),ia(!0)},onDragEnter:s=>{s.preventDefault(),s.stopPropagation(),ia(!0)},onDragLeave:s=>{s.preventDefault(),s.stopPropagation(),ia(!1)},onDrop:s=>{var o;s.preventDefault(),s.stopPropagation(),ia(!1);const n=(o=s.dataTransfer.files)==null?void 0:o[0];if(n&&(n.name.endsWith(".csv")||n.name.endsWith(".xlsx")||n.name.endsWith(".xls"))){const i=new FileReader;i.onload=h=>{var b;try{const x=(b=h.target)==null?void 0:b.result;if(typeof x=="string"){const f=u=>{const j=[];let g="",m=!1;for(let p=0;p<u.length;p++){const C=u[p];C==='"'?m&&u[p+1]==='"'?(g+='"',p++):m=!m:C===","&&!m?(j.push(g.trim()),g=""):g+=C}return j.push(g.trim()),j},d=x.split(`
`).filter(u=>u.trim());if(d.length>0){const u=f(d[0]);Ln(u);const j=d.slice(1).map((m,p)=>{const C=f(m),N={_id:p};return u.forEach((k,P)=>{N[k]=C[P]||""}),N});An(j);const g={date:"",draftId:"",vendor:"",debit:"",credit:"",amount:""};u.forEach(m=>{const p=m.toLowerCase();p.includes("date")&&!p.includes("check")&&(g.date=m),p.includes("check")&&(p.includes("num")||p.includes("#")||p.includes("id"))&&(g.draftId=m),(p.includes("description")||p.includes("vendor")||p.includes("payee")||p.includes("memo"))&&(g.vendor=m),(p==="debit"||p.includes("withdrawal")||p.includes("expense"))&&(g.debit=m),(p==="credit"||p.includes("deposit")||p.includes("income"))&&(g.credit=m),p==="amount"&&!g.debit&&!g.credit&&(g.amount=m)}),Xt(m=>({...m,...g}))}}}catch{alert("Error reading file. Please ensure it is a valid CSV or Excel file.")}},i.readAsText(n)}else alert("Please drop a CSV or Excel file (.csv, .xlsx, .xls)")},className:`border-2 border-dashed rounded-lg p-8 transition-colors cursor-pointer ${ji?"border-cyan-500 bg-cyan-50":"border-gray-300 hover:border-cyan-500"}`,children:e.jsxs("label",{className:"cursor-pointer block",children:[e.jsx(gs,{className:`w-12 h-12 mx-auto mb-3 ${ji?"text-cyan-500":"text-gray-400"}`}),e.jsx("p",{className:"font-medium text-gray-700",children:ji?"Drop file here...":"Drag & drop Excel/CSV file here"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"or click to browse"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supports .xlsx, .xls, .csv files"}),e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:s=>{var o;const n=(o=s.target.files)==null?void 0:o[0];if(n){const i=new FileReader;i.onload=h=>{var b;try{const x=(b=h.target)==null?void 0:b.result;if(typeof x=="string"){const f=u=>{const j=[];let g="",m=!1;for(let p=0;p<u.length;p++){const C=u[p];C==='"'?m&&u[p+1]==='"'?(g+='"',p++):m=!m:C===","&&!m?(j.push(g.trim()),g=""):g+=C}return j.push(g.trim()),j},d=x.split(`
`).filter(u=>u.trim());if(d.length>0){const u=f(d[0]);Ln(u);const j=d.slice(1).map((m,p)=>{const C=f(m),N={_id:p};return u.forEach((k,P)=>{N[k]=C[P]||""}),N});An(j);const g={date:"",draftId:"",vendor:"",debit:"",credit:"",amount:""};u.forEach(m=>{const p=m.toLowerCase();p.includes("date")&&!p.includes("check")&&(g.date=m),p.includes("check")&&(p.includes("num")||p.includes("#")||p.includes("id"))&&(g.draftId=m),(p.includes("description")||p.includes("vendor")||p.includes("payee")||p.includes("memo"))&&(g.vendor=m),(p==="debit"||p.includes("withdrawal")||p.includes("expense"))&&(g.debit=m),(p==="credit"||p.includes("deposit")||p.includes("income"))&&(g.credit=m),p==="amount"&&!g.debit&&!g.credit&&(g.amount=m)}),Xt(m=>({...m,...g}))}}}catch{alert("Error reading file. Please ensure it is a valid CSV or Excel file.")}},i.readAsText(n)}}})]})})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Import Settings"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Bank Account *"}),e.jsxs("select",{value:_e.bankName,onChange:s=>{const n=s.target.value;if(Xt(o=>({...o,bankName:n})),n&&Rl[n]){const o=Rl[n];Xt(i=>({...i,date:o.date||i.date,draftId:o.draftId||i.draftId,vendor:o.vendor||i.vendor,debit:o.debit||i.debit,credit:o.credit||i.credit,amount:o.amount||i.amount}))}},className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select bank account"}),[...new Set(Re.map(s=>s.bankName).filter(s=>s))].sort().map(s=>e.jsx("option",{value:s,children:s},s)),e.jsx("option",{value:"__new__",children:"+ Add new account..."})]}),_e.bankName==="__new__"&&e.jsx("input",{type:"text",placeholder:"Enter new account name",className:"w-full mt-1 px-2 py-1.5 border border-gray-300 rounded text-sm",onBlur:s=>{s.target.value&&Xt(n=>({...n,bankName:s.target.value}))},onKeyDown:s=>{s.key==="Enter"&&s.target.value&&Xt(n=>({...n,bankName:s.target.value}))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Operation Year"}),e.jsx("input",{type:"text",value:_e.operationYear,onChange:s=>Xt(n=>({...n,operationYear:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm text-center",placeholder:"2025"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tax Year"}),e.jsx("input",{type:"text",value:_e.taxYear,onChange:s=>Xt(n=>({...n,taxYear:s.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm text-center",placeholder:"2025"})]}),e.jsx("div",{className:"flex items-end",children:_e.bankName&&_e.bankName!=="__new__"&&e.jsx("button",{type:"button",onClick:()=>{xb(s=>({...s,[_e.bankName]:{date:_e.date,draftId:_e.draftId,vendor:_e.vendor,debit:_e.debit,credit:_e.credit,amount:_e.amount}})),alert(`Column mapping saved for ${_e.bankName}`)},className:"w-full px-2 py-1.5 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200",children:"Save Mapping"})})]})]}),e.jsxs("div",{className:"bg-cyan-50 border border-cyan-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-cyan-800 mb-3",children:"Map Columns"}),e.jsx("p",{className:"text-sm text-cyan-600 mb-4",children:"Map your bank file columns. Use either Debit/Credit columns OR a single Amount column (negative = expense)."}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date *"}),e.jsxs("select",{value:_e.date,onChange:s=>Xt(n=>({...n,date:s.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select column"}),Pr.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Check Ref #/Draft #"}),e.jsxs("select",{value:_e.draftId,onChange:s=>Xt(n=>({...n,draftId:s.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select column"}),Pr.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description *"}),e.jsxs("select",{value:_e.vendor,onChange:s=>Xt(n=>({...n,vendor:s.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select column"}),Pr.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Debit/Expense"}),e.jsxs("select",{value:_e.debit,onChange:s=>Xt(n=>({...n,debit:s.target.value,amount:""})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select column"}),Pr.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Credit/Deposit"}),e.jsxs("select",{value:_e.credit,onChange:s=>Xt(n=>({...n,credit:s.target.value,amount:""})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select column"}),Pr.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Or: Amount (+/-)"}),e.jsxs("select",{value:_e.amount,onChange:s=>Xt(n=>({...n,amount:s.target.value,debit:"",credit:""})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Select column"}),Pr.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),_e.amount&&e.jsx("p",{className:"text-xs text-cyan-700 mt-2",children:"Using single Amount column: negative values  Debit, positive values  Credit"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-semibold text-sm text-gray-700",children:["Preview (",$a.length," rows)"]}),e.jsx("div",{className:"overflow-x-auto max-h-64",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-gray-50 border-b",children:Pr.slice(0,8).map(s=>e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:s},s))})}),e.jsx("tbody",{children:$a.slice(0,10).map((s,n)=>e.jsx("tr",{className:"border-b border-gray-100",children:Pr.slice(0,8).map(o=>e.jsx("td",{className:"px-3 py-2 text-gray-700",children:s[o]},o))},n))})]})})]})]})}),$a.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:_e.bankName&&_e.bankName!=="__new__"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded",children:[e.jsx(xc,{className:"w-3 h-3"})," ",_e.bankName]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{Il(!1),An([]),Ln([]),ia(!1)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:()=>{if(!_e.date||!_e.vendor){alert("Please map at least Date and Description columns");return}if(!_e.debit&&!_e.credit&&!_e.amount){alert("Please map Debit/Credit columns or a single Amount column");return}if(!_e.bankName||_e.bankName==="__new__"){alert("Please select or enter a bank account name");return}const s=$a.map((n,o)=>{const i=f=>{if(!f)return 0;const d=String(f).replace(/[^0-9.-]/g,"");return Math.abs(parseFloat(d)||0)},h=n[_e.vendor]||"";let b=0,x=0;if(_e.amount){const f=String(n[_e.amount]||"").replace(/[^0-9.-]/g,""),d=parseFloat(f)||0;d<0?b=Math.abs(d):x=d}else b=i(n[_e.debit]),x=i(n[_e.credit]);return{id:`tx-${Date.now()}-${o}-${Math.random().toString(36).substr(2,5)}`,date:n[_e.date]||"",draftId:n[_e.draftId]||"",vendor:h,itemization:"",otherInfo:"",debit:b,credit:x,bankName:_e.bankName,fixedVariable:"",enterprise:"",incomeExpenseType:"",scheduleFCategory:xa(h),operationYear:_e.operationYear||new Date().getFullYear().toString(),taxYear:_e.taxYear||new Date().getFullYear().toString(),checkWrittenDate:"",reconciled:!1}});mt(n=>[...n,...s]),Il(!1),An([]),Ln([]),ia(!1),Xt({date:"",draftId:"",vendor:"",debit:"",credit:"",amount:"",bankName:"",operationYear:new Date().getFullYear().toString(),taxYear:new Date().getFullYear().toString()})},className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700",children:["Import ",$a.length," Transactions"]})]})]})]})}),mb&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Paste Column Data from Excel"}),e.jsx("button",{onClick:()=>{Ml(!1),Ol(""),Hl("")},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(pr,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-purple-700",children:[e.jsx("strong",{children:"How to use:"})," Copy a column from Excel, select which field to paste into, paste your data in the text area below, then click Apply. Data will be applied to existing transactions in order (row 1 of pasted data  transaction 1, etc.)."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Column to Paste Into"}),e.jsxs("select",{value:cr,onChange:s=>Hl(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select a column..."}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"draftId",children:"Check Ref #/Draft #"}),e.jsx("option",{value:"vendor",children:"Vendor/Description"}),e.jsx("option",{value:"itemization",children:"Itemization"}),e.jsx("option",{value:"otherInfo",children:"Other Information"}),e.jsx("option",{value:"debit",children:"Debit"}),e.jsx("option",{value:"credit",children:"Credit"}),e.jsx("option",{value:"bankName",children:"Bank Account Name"}),e.jsx("option",{value:"fixedVariable",children:"Fixed/Variable"}),e.jsx("option",{value:"enterprise",children:"Enterprise"}),e.jsx("option",{value:"incomeExpenseType",children:"Income/Expense Type"}),e.jsx("option",{value:"scheduleFCategory",children:"Schedule F Category"}),e.jsx("option",{value:"operationYear",children:"Operation Year"}),e.jsx("option",{value:"taxYear",children:"Tax Year"}),e.jsx("option",{value:"checkWrittenDate",children:"Check Written Date"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Paste Data Here",e.jsxs("span",{className:"text-gray-400 font-normal ml-2",children:["(",hs?hs.split(`
`).filter(s=>s.trim()).length:0," rows)"]})]}),e.jsx("textarea",{value:hs,onChange:s=>Ol(s.target.value),placeholder:"Paste column data from Excel here (Ctrl+V / Cmd+V)...",className:"w-full h-48 px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm resize-none"})]}),hs&&Re.length===0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-amber-700",children:[e.jsx("strong",{children:"Note:"})," You have no transactions yet. The pasted data will create new transactions. You're pasting ",hs.split(`
`).filter(s=>s.trim()).length," rows."]})}),hs&&Re.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:["Pasting ",hs.split(`
`).filter(s=>s.trim()).length," values into ",Re.length," existing transactions.",hs.split(`
`).filter(s=>s.trim()).length>Re.length&&e.jsx("span",{className:"block mt-1 text-amber-600",children:" You have more pasted rows than transactions. Extra rows will create new transactions."})]})})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{Ml(!1),Ol(""),Hl("")},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:()=>{if(!cr){alert("Please select a column to paste into");return}if(!hs.trim()){alert("Please paste some data");return}const s=hs.split(`
`).map(o=>o.trim()),n=(o,i)=>{if(i==="debit"||i==="credit"){const h=o.replace(/[^0-9.-]/g,"");return Math.abs(parseFloat(h)||0)}return o};mt(o=>{const i=[...o];return s.forEach((h,b)=>{const x=n(h,cr);let f={};if(cr==="itemization"?f={scheduleFCategory:xa(h)}:cr==="vendor"&&b<i.length&&!i[b].itemization?f={scheduleFCategory:xa(h)}:cr==="vendor"&&(f={scheduleFCategory:xa(h)}),b<i.length)i[b]={...i[b],[cr]:x,...f};else{const d={id:`tx-${Date.now()}-${b}-${Math.random().toString(36).substr(2,5)}`,date:"",draftId:"",vendor:"",itemization:"",otherInfo:"",debit:0,credit:0,bankName:"",fixedVariable:"",enterprise:"",incomeExpenseType:"",scheduleFCategory:"",operationYear:new Date().getFullYear().toString(),taxYear:new Date().getFullYear().toString(),checkWrittenDate:"",reconciled:!1,[cr]:x,...f};i.push(d)}}),i}),Ml(!1),Ol(""),Hl("")},disabled:!cr||!hs.trim(),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:["Apply to ",hs?hs.split(`
`).filter(s=>s.trim()).length:0," Rows"]})]})]})}),ub&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-5xl w-full h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Itemization Mapping"}),e.jsx("button",{onClick:()=>{vi(!1),_s({keyword:"",fixedVariable:"",enterprise:"",incomeExpenseType:""}),Tn(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(pr,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-indigo-50 flex-shrink-0",children:[e.jsx("h4",{className:"font-semibold text-indigo-800 mb-3",children:"Add New Mapping"}),e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Keyword *"}),e.jsx("input",{type:"text",value:da.keyword,onChange:s=>_s(n=>({...n,keyword:s.target.value})),placeholder:"e.g., Seed, Fertilizer",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Fixed/Variable"}),e.jsx("input",{type:"text",value:da.fixedVariable,onChange:s=>_s(n=>({...n,fixedVariable:s.target.value})),placeholder:"Fixed or Variable",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Enterprise"}),e.jsx("input",{type:"text",value:da.enterprise,onChange:s=>_s(n=>({...n,enterprise:s.target.value})),placeholder:"e.g., Corn, Cow/Calf",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Inc/Exp Type"}),e.jsx("input",{type:"text",value:da.incomeExpenseType,onChange:s=>_s(n=>({...n,incomeExpenseType:s.target.value})),placeholder:"e.g., Seed, Fuel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:()=>{if(!da.keyword.trim()){alert("Please enter a keyword");return}Dn?(Ni(s=>s.map(n=>n.id===Dn?{...da,id:Dn}:n)),Tn(null)):Ni(s=>[...s,{...da,id:Date.now()}]),_s({keyword:"",fixedVariable:"",enterprise:"",incomeExpenseType:""})},className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:Dn?"Update":"Add"}),Dn&&e.jsx("button",{onClick:()=>{Tn(null),_s({keyword:"",fixedVariable:"",enterprise:"",incomeExpenseType:""})},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-6",children:[kr().length>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx(zh,{className:"w-4 h-4"}),"Unmapped Items (",[...new Set(kr().map(s=>s.itemization))].length," unique)"]}),e.jsx("p",{className:"text-sm text-amber-700 mb-3",children:"These itemizations don't match any mapping. Click to quick-add a mapping."}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto",children:[...new Set(kr().map(s=>s.itemization))].sort().map(s=>e.jsx("button",{onClick:()=>_s(n=>({...n,keyword:s})),className:"px-3 py-1 bg-amber-100 text-amber-800 rounded-full text-sm hover:bg-amber-200",children:s},s))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-3",children:["Current Mappings (",ca.length,")"]}),ca.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Rr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No mappings defined yet. Add a mapping above to get started."})]}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-[40vh] overflow-y-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Keyword"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Fixed/Variable"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Enterprise"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Inc/Exp Type"}),e.jsx("th",{className:"px-4 py-2 text-center font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:ca.map((s,n)=>e.jsxs("tr",{className:n%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 font-medium",children:s.keyword}),e.jsx("td",{className:"px-4 py-2",children:s.fixedVariable||""}),e.jsx("td",{className:"px-4 py-2",children:s.enterprise||""}),e.jsx("td",{className:"px-4 py-2",children:s.incomeExpenseType||""}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>{_s({keyword:s.keyword,fixedVariable:s.fixedVariable||"",enterprise:s.enterprise||"",incomeExpenseType:s.incomeExpenseType||""}),Tn(s.id)},className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:e.jsx(Vh,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>{window.confirm("Delete this mapping?")&&Ni(o=>o.filter(i=>i.id!==s.id))},className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:e.jsx(ot,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between flex-shrink-0 bg-white",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[ca.length," mappings  ",kr().length," unmapped transactions"]}),e.jsx("button",{onClick:()=>{vi(!1),_s({keyword:"",fixedVariable:"",enterprise:"",incomeExpenseType:""}),Tn(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Done"})]})]})})]}),O==="trackerDashboard"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>W("landing"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Er,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-900",children:["Tracker Dashboard",qs!=="all"&&e.jsxs("span",{className:"ml-2 text-violet-600",children:[" ",qs]})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[te==null?void 0:te.name,"  Financial analytics from Transaction Tracker"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-violet-50 px-4 py-2 rounded-lg border border-violet-200",children:[e.jsx(Ms,{className:"w-4 h-4 text-violet-600"}),e.jsxs("select",{value:qs,onChange:s=>wi(s.target.value),className:"bg-transparent text-violet-700 font-semibold text-sm focus:outline-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Years"}),[...new Set(Re.map(s=>s.operationYear).filter(s=>s))].sort((s,n)=>n-s).map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("button",{onClick:()=>W("transactionTracker"),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 flex items-center gap-2",children:[e.jsx(Ir,{className:"w-4 h-4"}),"View Transactions"]})]})]}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto space-y-6",children:(()=>{const s=P=>{if(!P)return null;if(P.includes("/")){const A=P.split("/");if(A.length===3){const[R,L,D]=A;return new Date(parseInt(D),parseInt(R)-1,parseInt(L))}}return new Date(P)},n=P=>{const A=parseFloat(P.credit)||0;if(A<=0)return A;const R=(P.itemization||"").toLowerCase().trim(),L=R.includes("corn")&&R.includes("inventory"),D=(R.includes("soybean")||R.includes("bean"))&&R.includes("inventory");if(!L&&!D||!P.date)return A;const F=s(P.date);if(!F||isNaN(F.getTime()))return A;let v=0;return Re.forEach(S=>{const E=(S.itemization||"").toLowerCase().trim(),I=s(S.date),H=parseFloat(S.credit)||0;!I||isNaN(I.getTime())||H<=0||I<=F||(L&&E.includes("corn")&&!E.includes("inventory")&&(v+=H),D&&(E.includes("soybean")||E.includes("bean"))&&!E.includes("inventory")&&(v+=H))}),Math.max(0,A-v)},o=qs==="all"?Re:Re.filter(P=>P.operationYear===qs),i=o.reduce((P,A)=>P+(parseFloat(A.debit)||0),0),h=o.reduce((P,A)=>P+n(A),0),b=h-i,x={};o.forEach(P=>{const A=P.enterprise||"Unassigned";x[A]||(x[A]={debit:0,credit:0}),x[A].debit+=parseFloat(P.debit)||0,x[A].credit+=n(P)});const f={};o.forEach(P=>{const A=P.incomeExpenseType||"Unassigned";f[A]||(f[A]={debit:0,credit:0}),f[A].debit+=parseFloat(P.debit)||0,f[A].credit+=n(P)});const d={};o.forEach(P=>{const A=P.itemization||"Uncategorized";d[A]||(d[A]={debit:0,credit:0,count:0}),d[A].debit+=parseFloat(P.debit)||0,d[A].credit+=n(P),d[A].count+=1});const u={};o.forEach(P=>{const A=P.fixedVariable||"Unassigned";u[A]||(u[A]={debit:0,credit:0,items:{}}),u[A].debit+=parseFloat(P.debit)||0,u[A].credit+=n(P);const R=P.itemization||"Uncategorized";u[A].items[R]||(u[A].items[R]={debit:0,credit:0}),u[A].items[R].debit+=parseFloat(P.debit)||0,u[A].items[R].credit+=n(P)});const j={};o.forEach(P=>{if(!P.date)return;const A=P.date.split("/");if(A.length>=2){const R=`${A[0]}/${A[2]||new Date().getFullYear()}`;j[R]||(j[R]={debit:0,credit:0}),j[R].debit+=parseFloat(P.debit)||0,j[R].credit+=n(P)}});const g={};Re.forEach(P=>{const A=P.operationYear||"Unknown";g[A]||(g[A]={debit:0,credit:0,count:0}),g[A].debit+=parseFloat(P.debit)||0,g[A].credit+=n(P),g[A].count+=1});const m={};o.forEach(P=>{P.vendor&&(m[P.vendor]||(m[P.vendor]={debit:0,credit:0}),m[P.vendor].debit+=parseFloat(P.debit)||0,m[P.vendor].credit+=n(P))});const p=Object.entries(m).sort((P,A)=>A[1].debit-P[1].debit).slice(0,10),C=Object.entries(m).filter(([P,A])=>A.debit>=25e3).sort((P,A)=>A[1].debit-P[1].debit),N=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"],k=(P,A,R,L)=>{const D=A>0?P/A*100:0;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-32 text-sm text-gray-600 truncate",title:L,children:L}),e.jsxs("div",{className:"flex-1 bg-gray-100 rounded-full h-6 relative overflow-hidden",children:[e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${D}%`,backgroundColor:R}}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-gray-700",children:["$",P.toLocaleString()]})]})]})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-5 border-l-4 border-green-500",children:[e.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total Income"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 font-mono",children:["$",h.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[o.filter(P=>(parseFloat(P.credit)||0)>0).length," transactions"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-5 border-l-4 border-red-500",children:[e.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total Expenses"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600 font-mono",children:["$",i.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[o.filter(P=>(parseFloat(P.debit)||0)>0).length," transactions"]})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow p-5 border-l-4 ${b>=0?"border-emerald-500":"border-orange-500"}`,children:[e.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Net Income"}),e.jsxs("div",{className:`text-2xl font-bold font-mono ${b>=0?"text-emerald-600":"text-orange-600"}`,children:[b>=0?"":"-","$",Math.abs(b).toLocaleString()]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:b>=0?"Profit":"Loss"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-5 border-l-4 border-violet-500",children:[e.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total Transactions"}),e.jsx("div",{className:"text-2xl font-bold text-violet-600",children:o.length}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[o.filter(P=>P.reconciled).length," reconciled"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-5 h-5 text-blue-500"}),"By Enterprise"]}),e.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[Object.entries(x).sort((P,A)=>A[1].debit+A[1].credit-(P[1].debit+P[1].credit)).map(([P,A],R)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-700 truncate flex-1",title:P,children:P}),e.jsxs("div",{className:"flex gap-3 text-sm font-mono ml-4",children:[A.credit>0&&e.jsxs("span",{className:"text-green-600",children:["+$",A.credit.toLocaleString()]}),A.debit>0&&e.jsxs("span",{className:"text-red-600",children:["-$",A.debit.toLocaleString()]})]})]},P)),Object.keys(x).length===0&&e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No enterprise data available"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5 text-green-500"}),"By Inc/Exp Type"]}),e.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[Object.entries(f).sort((P,A)=>A[1].debit+A[1].credit-(P[1].debit+P[1].credit)).map(([P,A],R)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-700 truncate flex-1",title:P,children:P}),e.jsxs("div",{className:"flex gap-3 text-sm font-mono ml-4",children:[A.credit>0&&e.jsxs("span",{className:"text-green-600",children:["+$",A.credit.toLocaleString()]}),A.debit>0&&e.jsxs("span",{className:"text-red-600",children:["-$",A.debit.toLocaleString()]})]})]},P)),Object.keys(f).length===0&&e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No type data available"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Yn,{className:"w-5 h-5 text-amber-500"}),"Itemization Categories"]}),e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[Object.entries(d).filter(([P,A])=>A.debit>0||A.credit>0).sort((P,A)=>A[1].debit+A[1].credit-(P[1].debit+P[1].credit)).map(([P,A],R)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm text-gray-700 truncate block",title:P,children:P}),e.jsxs("span",{className:"text-xs text-gray-400",children:[A.count," transaction",A.count!==1?"s":""]})]}),e.jsxs("div",{className:"flex gap-4 text-sm font-mono ml-4",children:[A.credit>0&&e.jsxs("span",{className:"text-green-600",children:["+$",A.credit.toLocaleString()]}),A.debit>0&&e.jsxs("span",{className:"text-red-600",children:["-$",A.debit.toLocaleString()]})]})]},P)),Object.keys(d).filter(P=>d[P].debit>0||d[P].credit>0).length===0&&e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No itemization data available"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx($r,{className:"w-5 h-5 text-purple-500"}),"Fixed / Variable"]}),e.jsxs("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:[Object.entries(u).sort((P,A)=>A[1].debit+A[1].credit-(P[1].debit+P[1].credit)).map(([P,A],R)=>{const L=Object.values(u).reduce((H,Y)=>H+Y.debit,0);Object.values(u).reduce((H,Y)=>H+Y.credit,0);const D=L>0?(A.debit/L*100).toFixed(1):0,F=P.toLowerCase().includes("fixed"),v=P.toLowerCase().includes("variable"),S=F?"#8B5CF6":v?"#06B6D4":"#F59E0B",E=F?"bg-purple-50":v?"bg-cyan-50":"bg-amber-50",I=F?"border-purple-200":v?"border-cyan-200":"border-amber-200";return e.jsxs("div",{className:`${E} border ${I} rounded-lg p-4`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:P}),e.jsxs("div",{className:"flex gap-3 text-sm font-mono",children:[A.credit>0&&e.jsxs("span",{className:"text-green-600",children:["+$",A.credit.toLocaleString()]}),A.debit>0&&e.jsxs("span",{className:"text-red-600",children:["-$",A.debit.toLocaleString()]})]})]}),A.debit>0&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${D}%`,backgroundColor:S}})}),e.jsx("div",{className:"space-y-1 pl-2 border-l-2",style:{borderColor:S},children:Object.entries(A.items).sort((H,Y)=>Y[1].debit+Y[1].credit-(H[1].debit+H[1].credit)).map(([H,Y])=>e.jsxs("div",{className:"flex justify-between text-sm py-1",children:[e.jsx("span",{className:"text-gray-600 truncate flex-1",title:H,children:H}),e.jsxs("div",{className:"flex gap-3 font-mono ml-2",children:[Y.credit>0&&e.jsxs("span",{className:"text-green-600",children:["+$",Y.credit.toLocaleString()]}),Y.debit>0&&e.jsxs("span",{className:"text-red-600",children:["-$",Y.debit.toLocaleString()]})]})]},H))})]},P)}),Object.keys(u).length===0&&e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No data available"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ya,{className:"w-5 h-5 text-cyan-500"}),"Top 10 Vendors by Spend"]}),e.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[p.map(([P,A],R)=>{var L,D;return e.jsx("div",{children:k(A.debit,((D=(L=p[0])==null?void 0:L[1])==null?void 0:D.debit)||1,N[R%N.length],P)},P)}),p.length===0&&e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No vendor data available"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(lc,{className:"w-5 h-5 text-red-500"}),"Vendors Over $25K",e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-semibold rounded-full",children:C.length})]}),e.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[C.map(([P,A],R)=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-red-50 rounded-lg border border-red-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800 truncate flex-1",title:P,children:P}),e.jsxs("span",{className:"font-mono text-sm font-bold text-red-700 ml-4",children:["$",A.debit.toLocaleString()]})]},P)),C.length===0&&e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No vendors over $25,000"})]}),C.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total from vendors over $25K:"}),e.jsxs("span",{className:"font-mono text-lg font-bold text-red-700",children:["$",C.reduce((P,[A,R])=>P+R.debit,0).toLocaleString()]})]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-indigo-500"}),"By Operation Year",e.jsx("span",{className:"text-sm font-normal text-gray-400 ml-2",children:"(click to filter)"})]}),e.jsxs("div",{className:"space-y-4",children:[Object.entries(g).sort((P,A)=>A[0].localeCompare(P[0])).map(([P,A])=>e.jsxs("button",{onClick:()=>wi(qs===P?"all":P),className:`w-full text-left rounded-lg p-4 transition-all ${qs===P?"bg-violet-100 ring-2 ring-violet-500":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:`font-bold text-lg ${qs===P?"text-violet-700":"text-gray-800"}`,children:[P,qs===P&&e.jsx("span",{className:"ml-2 text-sm font-normal",children:"(viewing)"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[A.count," transactions"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Income"}),e.jsxs("div",{className:"font-mono text-green-600",children:["$",A.credit.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Expenses"}),e.jsxs("div",{className:"font-mono text-red-600",children:["$",A.debit.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Net"}),e.jsxs("div",{className:`font-mono ${A.credit-A.debit>=0?"text-emerald-600":"text-orange-600"}`,children:[A.credit-A.debit>=0?"":"-","$",Math.abs(A.credit-A.debit).toLocaleString()]})]})]})]},P)),Object.keys(g).length===0&&e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No year data available"})]})]})}),o.length===0&&Re.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow p-12 text-center",children:[e.jsx(Ms,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsxs("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:["No Data for ",qs]}),e.jsx("p",{className:"text-gray-400 mb-6",children:"No transactions found for the selected operation year."}),e.jsx("button",{onClick:()=>wi("all"),className:"px-6 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700",children:"View All Years"})]}),Re.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow p-12 text-center",children:[e.jsx(bt,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"No Transaction Data"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Add transactions in the Transaction Tracker to see analytics here."}),e.jsx("button",{onClick:()=>W("transactionTracker"),className:"px-6 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700",children:"Go to Transaction Tracker"})]})]})})()})})]})}),O==="transactionReports"&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-teal-50",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"mb-6 no-print",children:[e.jsxs("button",{onClick:()=>W("landing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(Er,{className:"w-4 h-4"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Ge,{className:"w-7 h-7 text-emerald-600"}),"Transaction Reports"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[te==null?void 0:te.name,"  Profit & Loss Analysis"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:async()=>{if(!window.html2pdf){const u=document.createElement("script");u.src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js",document.head.appendChild(u),await new Promise(j=>u.onload=j)}const s=document.getElementById("print-area"),n={pl:"Profit_Loss_Report",monthlyIncome:"Monthly_Income_Report",monthlyExpenses:"Monthly_Expense_Report",monthlyCashFlow:"Monthly_Cash_Flow_Report",scheduleF:"Schedule_F_Tax_Report"}[Et]||"Report",o=((te==null?void 0:te.name)||"Client").replace(/[^a-zA-Z0-9]/g,"_"),i=new Date().toISOString().split("T")[0],h=`${o}_${n}_${i}.pdf`,b=s.cloneNode(!0);b.querySelectorAll(".no-print").forEach(u=>u.remove());const x=b.querySelector('.hidden.print\\:block, [class*="hidden"][class*="print:block"]');x&&(x.style.display="block");const f=document.createElement("div");f.innerHTML=`
                        <div style="margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #059669;">
                          <h1 style="font-size: 24px; font-weight: bold; color: #1f2937; margin: 0;">${(te==null?void 0:te.name)||"Client"}</h1>
                          <h2 style="font-size: 18px; color: #374151; margin: 5px 0;">
                            ${Et==="pl"?"Profit & Loss Report":Et==="monthlyIncome"?"Monthly Income Report":Et==="monthlyExpenses"?"Monthly Expense Report":Et==="monthlyCashFlow"?"Monthly Cash Flow Report":"Schedule F Tax Report"}
                          </h2>
                          <p style="font-size: 12px; color: #6b7280; margin: 0;">Generated: ${new Date().toLocaleDateString()}</p>
                        </div>
                      `,f.appendChild(b);const d={margin:[.5,.5,.5,.5],filename:h,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0,scrollY:0},jsPDF:{unit:"in",format:"letter",orientation:"landscape"},pagebreak:{mode:["avoid-all","css","legacy"]}};window.html2pdf().set(d).from(f).save()},className:"px-4 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 flex items-center gap-2 no-print",children:[e.jsx(gs,{className:"w-4 h-4"}),"Download PDF"]}),e.jsxs("button",{onClick:()=>W("transactionTracker"),className:"px-4 py-2 bg-cyan-100 text-cyan-700 rounded-lg hover:bg-cyan-200 flex items-center gap-2 no-print",children:[e.jsx(Yn,{className:"w-4 h-4"}),"Transaction Tracker"]}),e.jsxs("button",{onClick:()=>W("trackerDashboard"),className:"px-4 py-2 bg-violet-100 text-violet-700 rounded-lg hover:bg-violet-200 flex items-center gap-2 no-print",children:[e.jsx(bt,{className:"w-4 h-4"}),"Dashboard"]})]})]})]}),e.jsxs("div",{id:"print-area",children:[e.jsxs("div",{className:"hidden print:block mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:te==null?void 0:te.name}),e.jsxs("h2",{className:"text-lg text-gray-700",children:[Et==="pl"&&"Profit & Loss Report",Et==="monthlyIncome"&&"Monthly Income Report",Et==="monthlyExpenses"&&"Monthly Expense Report",Et==="monthlyCashFlow"&&"Monthly Cash Flow Report",Et==="scheduleF"&&"Schedule F Tax Report"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Generated: ",new Date().toLocaleDateString()]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow mb-6 no-print",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-1 px-4 overflow-x-auto",children:[{id:"pl",label:"P&L Report",icon:Ge},{id:"monthlyIncome",label:"Monthly Income",icon:lt},{id:"monthlyExpenses",label:"Monthly Expenses",icon:Ms},{id:"monthlyCashFlow",label:"Monthly Cash Flow",icon:vt},{id:"scheduleF",label:"Schedule F",icon:Ot}].map(s=>e.jsxs("button",{onClick:()=>$l(s.id),className:`flex items-center gap-2 px-4 py-3 font-medium text-sm border-b-2 transition-colors whitespace-nowrap ${Et===s.id?"border-emerald-600 text-emerald-600 bg-emerald-50":"border-transparent text-gray-600 hover:text-emerald-600 hover:bg-emerald-50"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),Et==="pl"&&e.jsx(e.Fragment,{children:(()=>{const s=[...new Set(Re.map(m=>m.operationYear).filter(m=>m))].sort((m,p)=>p-m);if(rt.length===0&&s.length>0){const m=s.slice(0,Math.min(3,s.length));setTimeout(()=>Cn(m),0)}const n=m=>{if(!m)return null;if(m.includes("/")){const p=m.split("/");if(p.length===3){const[C,N,k]=p;return new Date(parseInt(k),parseInt(C)-1,parseInt(N))}}return new Date(m)},o=m=>{const p=parseFloat(m.credit)||0;if(p<=0)return p;const C=(m.itemization||"").toLowerCase().trim(),N=C.includes("corn")&&C.includes("inventory"),k=(C.includes("soybean")||C.includes("bean"))&&C.includes("inventory");if(!N&&!k||!m.date)return p;const P=n(m.date);if(!P||isNaN(P.getTime()))return p;let A=0;return Re.forEach(R=>{const L=(R.itemization||"").toLowerCase().trim(),D=n(R.date),F=parseFloat(R.credit)||0;!D||isNaN(D.getTime())||F<=0||D<=P||(N&&L.includes("corn")&&!L.includes("inventory")&&(A+=F),k&&(L.includes("soybean")||L.includes("bean"))&&!L.includes("inventory")&&(A+=F))}),Math.max(0,p-A)},i=m=>{const p=Re.filter(E=>E.operationYear===m),C=E=>{const I=(E.fixedVariable||"").toLowerCase().trim(),H=(E.itemization||"").toLowerCase().trim();return I.includes("transfer")||H.includes("transfer")||H.includes("principal")||H.includes("asset sale")||H.includes("asset purchase")||H.includes("equipment sale")||H.includes("equipment purchase")||H.includes("machinery sale")||H.includes("machinery purchase")||H.includes("vehicle sale")||H.includes("vehicle purchase")||H.includes("land sale")||H.includes("land purchase")||H.includes("property sale")||H.includes("property purchase")},N={},k={},P={};p.forEach(E=>{const I=E.itemization||"Uncategorized",H=E.fixedVariable||"Unassigned",Y=o(E),_=parseFloat(E.debit)||0;C(E)?(P[I]||(P[I]={credit:0,debit:0}),Y>0&&(P[I].credit+=Y),_>0&&(P[I].debit+=_)):(Y>0&&(N[H]||(N[H]={}),N[H][I]=(N[H][I]||0)+Y),_>0&&(k[H]||(k[H]={}),k[H][I]=(k[H][I]||0)+_))});const A=Object.values(N).reduce((E,I)=>E+Object.values(I).reduce((H,Y)=>H+Y,0),0),R=Object.values(k).reduce((E,I)=>E+Object.values(I).reduce((H,Y)=>H+Y,0),0),L=Object.values(P).reduce((E,I)=>E+I.credit,0),D=Object.values(P).reduce((E,I)=>E+I.debit,0),F=A-R,v={};Object.entries(N).forEach(([E,I])=>{v[E]=Object.values(I).reduce((H,Y)=>H+Y,0)});const S={};return Object.entries(k).forEach(([E,I])=>{S[E]=Object.values(I).reduce((H,Y)=>H+Y,0)}),{year:m,incomeByFV:N,expenseByFV:k,incomeTotalsByFV:v,expenseTotalsByFV:S,balanceSheetByCategory:P,totalIncome:A,totalExpenses:R,totalBalanceSheetIn:L,totalBalanceSheetOut:D,netIncome:F,transactionCount:p.length}},h=m=>{const p=new Set;return rt.forEach(C=>{const N=i(C),k=m==="income"?N.incomeByFV:N.expenseByFV;Object.keys(k).forEach(P=>p.add(P))}),Array.from(p).sort((C,N)=>C.toLowerCase()==="fixed"?-1:N.toLowerCase()==="fixed"?1:C.toLowerCase()==="variable"?-1:N.toLowerCase()==="variable"?1:C.localeCompare(N))},b=(m,p)=>{const C={};return rt.forEach(N=>{const k=i(N),A=(m==="income"?k.incomeByFV:k.expenseByFV)[p]||{};Object.entries(A).forEach(([R,L])=>{C[R]=(C[R]||0)+L})}),Object.entries(C).sort((N,k)=>k[1]-N[1]).map(([N])=>N)},x=()=>{const m={};return rt.forEach(p=>{const C=i(p);Object.entries(C.balanceSheetByCategory).forEach(([N,k])=>{m[N]=(m[N]||0)+k.credit+k.debit})}),Object.entries(m).sort((p,C)=>C[1]-p[1]).map(([p])=>p)},f=h("income"),d=h("expense"),u=x(),j=m=>m.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),g=(m,p)=>!p||p===0?null:(m-p)/Math.abs(p)*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Select Years to Compare (up to 3)"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.map(m=>e.jsx("button",{onClick:()=>{Cn(p=>p.includes(m)?p.filter(C=>C!==m):p.length<3?[...p,m].sort((C,N)=>N-C):p)},className:`px-4 py-2 rounded-lg font-medium transition-colors ${rt.includes(m)?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:m},m)),s.length===0&&e.jsx("p",{className:"text-gray-500",children:"No transaction years available. Add transactions with operation years to generate reports."})]})]}),rt.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-emerald-600 text-white",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Profit & Loss Statement"}),e.jsxs("p",{className:"text-emerald-100 text-sm",children:["Comparing ",rt.join(", ")]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b-2 border-gray-200",children:[e.jsx("th",{className:"px-6 py-4 text-left font-bold text-gray-700 w-1/3",children:"Category"}),rt.map((m,p)=>e.jsxs("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:[m,p>0&&e.jsxs("span",{className:"block text-xs font-normal text-gray-500",children:["vs ",rt[p-1]]})]},m))]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"bg-green-50 border-b-2 border-green-200",children:e.jsx("td",{colSpan:rt.length+1,className:"px-6 py-3 font-bold text-green-800 text-lg",children:"INCOME"})}),f.map(m=>e.jsxs(Jt.Fragment,{children:[e.jsxs("tr",{className:"bg-green-50/50 border-b border-green-100",children:[e.jsx("td",{className:"px-6 py-2 font-semibold text-green-700 pl-6",children:m}),rt.map(p=>{const N=i(p).incomeTotalsByFV[m]||0;return e.jsx("td",{className:"px-6 py-2 text-right font-mono text-green-600 text-sm",children:j(N)},p)})]}),b("income",m).map(p=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-2 text-gray-600 pl-12 text-sm",children:p}),rt.map((C,N)=>{const P=(i(C).incomeByFV[m]||{})[p]||0,A=rt[N-1],R=A?i(A):null,L=R?(R.incomeByFV[m]||{})[p]||0:null,D=L!==null&&L!==0?g(P,L):null;return e.jsxs("td",{className:"px-6 py-2 text-right font-mono text-sm",children:[e.jsx("span",{className:"text-green-700",children:j(P)}),D!==null&&e.jsxs("span",{className:`block text-xs ${D>=0?"text-green-600":"text-red-600"}`,children:[D>=0?"":""," ",Math.abs(D).toFixed(1),"%"]})]},C)})]},`income-${m}-${p}`))]},`income-fv-${m}`)),e.jsxs("tr",{className:"bg-green-100 border-b-2 border-green-300 font-bold",children:[e.jsx("td",{className:"px-6 py-3 text-green-800",children:"Total Income"}),rt.map((m,p)=>{const C=i(m),N=rt[p-1],k=N?i(N):null,P=k?g(C.totalIncome,k.totalIncome):null;return e.jsxs("td",{className:"px-6 py-3 text-right font-mono text-green-800",children:[j(C.totalIncome),P!==null&&e.jsxs("span",{className:`block text-xs ${P>=0?"text-green-600":"text-red-600"}`,children:[P>=0?"":""," ",Math.abs(P).toFixed(1),"%"]})]},m)})]}),e.jsx("tr",{className:"bg-red-50 border-b-2 border-red-200",children:e.jsx("td",{colSpan:rt.length+1,className:"px-6 py-3 font-bold text-red-800 text-lg",children:"EXPENSES"})}),d.map(m=>e.jsxs(Jt.Fragment,{children:[e.jsxs("tr",{className:"bg-red-50/50 border-b border-red-100",children:[e.jsx("td",{className:"px-6 py-2 font-semibold text-red-700 pl-6",children:m}),rt.map(p=>{const N=i(p).expenseTotalsByFV[m]||0;return e.jsx("td",{className:"px-6 py-2 text-right font-mono text-red-600 text-sm",children:j(N)},p)})]}),b("expense",m).map(p=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-2 text-gray-600 pl-12 text-sm",children:p}),rt.map((C,N)=>{const P=(i(C).expenseByFV[m]||{})[p]||0,A=rt[N-1],R=A?i(A):null,L=R?(R.expenseByFV[m]||{})[p]||0:null,D=L!==null&&L!==0?g(P,L):null;return e.jsxs("td",{className:"px-6 py-2 text-right font-mono text-sm",children:[e.jsx("span",{className:"text-red-700",children:j(P)}),D!==null&&e.jsxs("span",{className:`block text-xs ${D<=0?"text-green-600":"text-red-600"}`,children:[D>=0?"":""," ",Math.abs(D).toFixed(1),"%"]})]},C)})]},`expense-${m}-${p}`))]},`expense-fv-${m}`)),e.jsxs("tr",{className:"bg-red-100 border-b-2 border-red-300 font-bold",children:[e.jsx("td",{className:"px-6 py-3 text-red-800",children:"Total Expenses"}),rt.map((m,p)=>{const C=i(m),N=rt[p-1],k=N?i(N):null,P=k?g(C.totalExpenses,k.totalExpenses):null;return e.jsxs("td",{className:"px-6 py-3 text-right font-mono text-red-800",children:[j(C.totalExpenses),P!==null&&e.jsxs("span",{className:`block text-xs ${P<=0?"text-green-600":"text-red-600"}`,children:[P>=0?"":""," ",Math.abs(P).toFixed(1),"%"]})]},m)})]}),u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"bg-blue-50 border-b-2 border-blue-200",children:e.jsx("td",{colSpan:rt.length+1,className:"px-6 py-3 font-bold text-blue-800 text-lg",children:"BALANCE SHEET / CASH FLOW ITEMS (Not P&L)"})}),e.jsx("tr",{className:"bg-blue-50/30",children:e.jsx("td",{colSpan:rt.length+1,className:"px-6 py-1 text-xs text-blue-600 italic",children:"Includes: Transfers, Principal Payments, Asset Sales & Purchases"})}),u.map(m=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-3 text-gray-700 pl-10",children:m}),rt.map(p=>{const N=i(p).balanceSheetByCategory[m]||{credit:0,debit:0};return e.jsxs("td",{className:"px-6 py-3 text-right font-mono",children:[N.credit>0&&e.jsxs("div",{className:"text-blue-600",children:["In: ",j(N.credit)]}),N.debit>0&&e.jsxs("div",{className:"text-blue-800",children:["Out: ",j(N.debit)]}),N.credit===0&&N.debit===0&&e.jsx("span",{className:"text-gray-400",children:"-"})]},p)})]},`balancesheet-${m}`)),e.jsxs("tr",{className:"bg-blue-100 border-b-2 border-blue-300 font-bold",children:[e.jsx("td",{className:"px-6 py-3 text-blue-800",children:"Total Balance Sheet Items"}),rt.map(m=>{const p=i(m),C=p.totalBalanceSheetIn-p.totalBalanceSheetOut;return e.jsxs("td",{className:"px-6 py-3 text-right font-mono text-blue-800",children:[e.jsxs("div",{className:"text-xs",children:["In: ",j(p.totalBalanceSheetIn)]}),e.jsxs("div",{className:"text-xs",children:["Out: ",j(p.totalBalanceSheetOut)]}),e.jsxs("div",{className:`font-bold ${C>=0?"text-blue-600":"text-blue-900"}`,children:["Net: ",j(C)]})]},m)})]})]}),e.jsxs("tr",{className:"bg-emerald-100 border-t-4 border-emerald-400",children:[e.jsx("td",{className:"px-6 py-4 font-bold text-emerald-900 text-lg",children:"NET INCOME"}),rt.map((m,p)=>{const C=i(m),N=rt[p-1],k=N?i(N):null,P=k?g(C.netIncome,k.netIncome):null;return e.jsxs("td",{className:`px-6 py-4 text-right font-mono font-bold text-lg ${C.netIncome>=0?"text-emerald-700":"text-red-700"}`,children:[j(C.netIncome),P!==null&&e.jsxs("span",{className:`block text-sm ${P>=0?"text-green-600":"text-red-600"}`,children:[P>=0?"":""," ",Math.abs(P).toFixed(1),"%"]})]},m)})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-3 text-gray-500 text-sm",children:"Transaction Count"}),rt.map(m=>{const p=i(m);return e.jsxs("td",{className:"px-6 py-3 text-right text-gray-500 text-sm",children:[p.transactionCount," transactions"]},m)})]})]})]})})]}),rt.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:rt.map(m=>{const p=i(m),C=p.totalIncome>0?p.netIncome/p.totalIncome*100:0;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:[m," Summary"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Income"}),e.jsx("span",{className:"font-mono font-bold text-green-600",children:j(p.totalIncome)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Expenses"}),e.jsx("span",{className:"font-mono font-bold text-red-600",children:j(p.totalExpenses)})]}),e.jsxs("div",{className:"border-t-2 border-gray-200 pt-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-800 font-bold",children:"Net Income"}),e.jsx("span",{className:`font-mono font-bold text-xl ${p.netIncome>=0?"text-emerald-600":"text-red-600"}`,children:j(p.netIncome)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Profit Margin"}),e.jsxs("span",{className:`font-medium ${C>=0?"text-emerald-600":"text-red-600"}`,children:[C.toFixed(1),"%"]})]})]})]},m)})})]})})()}),Et==="monthlyIncome"&&e.jsx("div",{className:"space-y-6",children:(()=>{const s=[...new Set(Re.map(D=>D.operationYear).filter(D=>D))].sort((D,F)=>F-D),n=String(or),o=s.map(D=>String(D));s.length>0&&!o.includes(n)&&setTimeout(()=>Pn(s[0]),0);const i=D=>{if(!D)return null;if(D.includes("/")){const F=D.split("/");if(F.length===3){const[v,S,E]=F;return new Date(parseInt(E),parseInt(v)-1,parseInt(S))}}return new Date(D)},h=D=>{const F=(D.fixedVariable||"").toLowerCase().trim(),v=(D.itemization||"").toLowerCase().trim();return F.includes("transfer")||v.includes("transfer")||v.includes("principal")||v.includes("asset sale")||v.includes("asset purchase")||v.includes("equipment sale")||v.includes("equipment purchase")||v.includes("machinery sale")||v.includes("machinery purchase")||v.includes("vehicle sale")||v.includes("vehicle purchase")||v.includes("land sale")||v.includes("land purchase")||v.includes("property sale")||v.includes("property purchase")},b=Re.filter(D=>String(D.operationYear)===String(or)&&(parseFloat(D.credit)||0)>0),x=b.filter(D=>!h(D)),f=b.filter(D=>h(D)),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=D=>{const F=parseFloat(D.credit)||0;if(F<=0)return F;const v=(D.itemization||"").toLowerCase().trim(),S=v.includes("corn")&&v.includes("inventory"),E=(v.includes("soybean")||v.includes("bean"))&&v.includes("inventory");if(!S&&!E||!D.date)return F;const I=i(D.date);if(!I||isNaN(I.getTime()))return F;let H=0;return Re.forEach(Y=>{const _=(Y.itemization||"").toLowerCase().trim(),K=i(Y.date),re=parseFloat(Y.credit)||0;!K||isNaN(K.getTime())||re<=0||K<=I||(S&&_.includes("corn")&&!_.includes("inventory")&&(H+=re),E&&(_.includes("soybean")||_.includes("bean"))&&!_.includes("inventory")&&(H+=re))}),Math.max(0,F-H)},j=D=>{const F={},v={},S={},E={};return D.forEach(I=>{const H=I.itemization||"Uncategorized",Y=I.fixedVariable||"Unassigned",_=u(I),K=i(I.date);if(!(_<=0)&&(F[Y]||(F[Y]={},v[Y]={},S[Y]={},E[Y]=0,d.forEach((re,he)=>v[Y][he]=0)),F[Y][H]||(F[Y][H]={},S[Y][H]=0,d.forEach((re,he)=>F[Y][H][he]=0)),K&&!isNaN(K.getTime()))){const re=K.getMonth();F[Y][H][re]+=_,v[Y][re]+=_,S[Y][H]+=_,E[Y]+=_}}),{byFV:F,monthlyTotalsByFV:v,categoryTotalsByFV:S,fvTotals:E}},g=j(x),m=j(f),p=Object.values(g.fvTotals).reduce((D,F)=>D+F,0),C={};d.forEach((D,F)=>{C[F]=Object.values(g.monthlyTotalsByFV).reduce((v,S)=>v+(S[F]||0),0)});const N=Object.values(m.fvTotals).reduce((D,F)=>D+F,0),k=D=>!D||D===0?"-":"$"+D.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),A=(()=>{const D=new Set(Object.keys(g.byFV)),F=["fixed","variable","other variable","non farm income","other fixed","unassigned"];return Array.from(D).sort((v,S)=>{const E=v.toLowerCase(),I=S.toLowerCase(),H=F.indexOf(E),Y=F.indexOf(I);return H!==-1&&Y!==-1?H-Y:H!==-1?-1:Y!==-1?1:v.localeCompare(S)})})(),R={Fixed:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",header:"bg-blue-100"},Variable:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",header:"bg-green-100"},"Non Farm Income":{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-800",header:"bg-purple-100"},"Other Variable":{bg:"bg-teal-50",border:"border-teal-200",text:"text-teal-800",header:"bg-teal-100"},"Other Fixed":{bg:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-800",header:"bg-indigo-100"},Unassigned:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",header:"bg-gray-100"}},L=D=>R[D]||{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",header:"bg-gray-100"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Monthly Income Report"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Itemized income by month for the selected operating year"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Operating Year:"}),e.jsx("select",{value:or,onChange:D=>Pn(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:s.map(D=>e.jsx("option",{value:D,children:D},D))})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Operating Income"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",p.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),A.filter(D=>g.fvTotals[D]>0).map(D=>{const F=L(D);return e.jsxs("div",{className:`${F.bg} rounded-lg shadow p-4 border ${F.border}`,children:[e.jsx("div",{className:`text-sm ${F.text}`,children:D}),e.jsxs("div",{className:`text-2xl font-bold ${F.text}`,children:["$",(g.fvTotals[D]||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]},D)}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Avg Monthly Income"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-600",children:["$",(p/12).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),N>0&&e.jsxs("div",{className:"bg-slate-50 rounded-lg shadow p-4 border border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Balance Sheet Items"}),e.jsxs("div",{className:"text-2xl font-bold text-slate-700",children:["$",N.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-4",children:e.jsxs("h3",{className:"text-lg font-bold",children:["Operating Income by Category - ",or]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 sticky left-0 bg-gray-50 min-w-[250px]",children:"Category"}),d.map((D,F)=>e.jsx("th",{className:"text-right py-3 px-3 font-semibold text-gray-700 min-w-[90px]",children:D},F)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 bg-gray-100 min-w-[100px]",children:"Total"})]})}),e.jsx("tbody",{children:A.filter(D=>g.byFV[D]&&Object.keys(g.byFV[D]).length>0).map(D=>{const F=L(D),v=Object.keys(g.byFV[D]).sort();return e.jsxs(Jt.Fragment,{children:[e.jsx("tr",{className:`${F.header} border-b-2 ${F.border}`,children:e.jsxs("td",{colSpan:14,className:`px-4 py-3 font-bold ${F.text} text-base`,children:[D.toUpperCase()," INCOME"]})}),v.map((S,E)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${E%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700 sticky left-0 bg-inherit",children:S}),d.map((I,H)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:k(g.byFV[D][S][H])},H)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-medium text-gray-800 bg-gray-100",children:k(g.categoryTotalsByFV[D][S])})]},`${D}-${S}`)),e.jsxs("tr",{className:`${F.bg} border-b-2 ${F.border}`,children:[e.jsxs("td",{className:`py-2 px-4 font-semibold ${F.text} sticky left-0 ${F.bg}`,children:["Total ",D," Income"]}),d.map((S,E)=>e.jsx("td",{className:`py-2 px-3 text-right font-mono font-semibold ${F.text}`,children:k(g.monthlyTotalsByFV[D][E])},E)),e.jsxs("td",{className:`py-2 px-4 text-right font-mono font-bold ${F.text} ${F.header}`,children:["$",(g.fvTotals[D]||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]},D)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-green-100 border-t-2 border-green-300 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-green-800 sticky left-0 bg-green-100 text-base",children:"TOTAL OPERATING INCOME"}),d.map((D,F)=>e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-800",children:k(C[F])},F)),e.jsxs("td",{className:"py-3 px-4 text-right font-mono text-green-900 bg-green-200 text-lg",children:["$",p.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]})})]}),N>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-100 px-6 py-4 border-b border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:["Balance Sheet / Cash Flow Items - ",or]}),e.jsx("p",{className:"text-sm text-slate-600",children:"Transfers, Asset Sales (not included in Operating Income)"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 sticky left-0 bg-gray-50 min-w-[250px]",children:"Category"}),d.map((D,F)=>e.jsx("th",{className:"text-right py-3 px-3 font-semibold text-gray-700 min-w-[90px]",children:D},F)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 bg-gray-100 min-w-[100px]",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:Object.keys(m.byFV).flatMap(D=>Object.keys(m.byFV[D]).sort()).filter((D,F,v)=>v.indexOf(D)===F).sort().map((D,F)=>{const v={};let S=0;return d.forEach((E,I)=>{let H=0;Object.keys(m.byFV).forEach(Y=>{m.byFV[Y][D]&&(H+=m.byFV[Y][D][I]||0)}),v[I]=H,S+=H}),e.jsxs("tr",{className:F%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 font-medium text-gray-800 sticky left-0 bg-inherit",children:D}),d.map((E,I)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:k(v[I])},I)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-gray-800 bg-gray-100",children:k(S)})]},D)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-50 border-t-2 border-slate-200 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-slate-800 sticky left-0 bg-slate-50",children:"Total Balance Sheet Items"}),d.map((D,F)=>{let v=0;return Object.values(m.monthlyTotalsByFV).forEach(S=>{v+=S[F]||0}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-slate-700",children:k(v)},F)}),e.jsxs("td",{className:"py-3 px-4 text-right font-mono text-slate-800 bg-slate-100 text-lg",children:["$",N.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Top Operating Income Categories"}),e.jsx("div",{className:"space-y-3",children:Object.entries(g.byFV).flatMap(([D,F])=>Object.entries(F).map(([v,S])=>({category:v,fvGroup:D,total:Object.values(S).reduce((E,I)=>E+I,0)}))).sort((D,F)=>F.total-D.total).slice(0,10).map(({category:D,fvGroup:F,total:v},S)=>{const E=p>0?v/p*100:0,I=L(F);return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-8 text-center font-bold text-gray-400",children:S+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsxs("span",{className:"font-medium text-gray-800",children:[D,e.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded ${I.bg} ${I.text}`,children:F})]}),e.jsxs("span",{className:"font-mono font-semibold text-gray-700",children:["$",v.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${E}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[E.toFixed(1),"% of total"]})]})]},D)})})]}),b.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(lt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"No Income Data"}),e.jsxs("p",{className:"text-gray-500",children:["No income transactions found for ",or,"."]}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Import transactions in the Transaction Tracker to see income data here."})]})]})})()}),Et==="monthlyExpenses"&&e.jsx("div",{className:"space-y-6",children:(()=>{const s=[...new Set(Re.map(L=>L.operationYear).filter(L=>L))].sort((L,D)=>D-L),n=String(lr),o=s.map(L=>String(L));s.length>0&&!o.includes(n)&&setTimeout(()=>Fn(s[0]),0);const i=L=>{if(!L)return null;if(L.includes("/")){const D=L.split("/");if(D.length===3){const[F,v,S]=D;return new Date(parseInt(S),parseInt(F)-1,parseInt(v))}}return new Date(L)},h=L=>{const D=(L.fixedVariable||"").toLowerCase().trim(),F=(L.itemization||"").toLowerCase().trim();return D.includes("transfer")||F.includes("transfer")||F.includes("principal")||F.includes("asset sale")||F.includes("asset purchase")||F.includes("equipment sale")||F.includes("equipment purchase")||F.includes("machinery sale")||F.includes("machinery purchase")||F.includes("vehicle sale")||F.includes("vehicle purchase")||F.includes("land sale")||F.includes("land purchase")||F.includes("property sale")||F.includes("property purchase")},b=Re.filter(L=>String(L.operationYear)===String(lr)&&(parseFloat(L.debit)||0)>0),x=b.filter(L=>!h(L)),f=b.filter(L=>h(L)),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=L=>{const D={},F={},v={},S={};return L.forEach(E=>{const I=E.itemization||"Uncategorized",H=E.fixedVariable||"Unassigned",Y=parseFloat(E.debit)||0,_=i(E.date);if(D[H]||(D[H]={},F[H]={},v[H]={},S[H]=0,d.forEach((K,re)=>F[H][re]=0)),D[H][I]||(D[H][I]={},v[H][I]=0,d.forEach((K,re)=>D[H][I][re]=0)),_&&!isNaN(_.getTime())){const K=_.getMonth();D[H][I][K]+=Y,F[H][K]+=Y,v[H][I]+=Y,S[H]+=Y}}),{byFV:D,monthlyTotalsByFV:F,categoryTotalsByFV:v,fvTotals:S}},j=u(x),g=u(f),m=Object.values(j.fvTotals).reduce((L,D)=>L+D,0),p={};d.forEach((L,D)=>{p[D]=Object.values(j.monthlyTotalsByFV).reduce((F,v)=>F+(v[D]||0),0)});const C=Object.values(g.fvTotals).reduce((L,D)=>L+D,0),N=L=>!L||L===0?"-":"$"+L.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),P=(()=>{const L=new Set(Object.keys(j.byFV)),D=["fixed","variable","other variable","non farm expense","other fixed","unassigned"];return Array.from(L).sort((F,v)=>{const S=F.toLowerCase(),E=v.toLowerCase(),I=D.indexOf(S),H=D.indexOf(E);return I!==-1&&H!==-1?I-H:I!==-1?-1:H!==-1?1:F.localeCompare(v)})})(),A={Fixed:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",header:"bg-blue-100"},Variable:{bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-800",header:"bg-amber-100"},"Non Farm Expense":{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-800",header:"bg-purple-100"},"Other Variable":{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",header:"bg-orange-100"},"Other Fixed":{bg:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-800",header:"bg-indigo-100"},Unassigned:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",header:"bg-gray-100"}},R=L=>A[L]||{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",header:"bg-gray-100"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Monthly Expense Report"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Itemized expenses by month for the selected operating year"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Operating Year:"}),e.jsx("select",{value:lr,onChange:L=>Fn(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:s.map(L=>e.jsx("option",{value:L,children:L},L))})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Operating Expenses"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),P.filter(L=>j.fvTotals[L]>0).map(L=>{const D=R(L);return e.jsxs("div",{className:`${D.bg} rounded-lg shadow p-4 border ${D.border}`,children:[e.jsx("div",{className:`text-sm ${D.text}`,children:L}),e.jsxs("div",{className:`text-2xl font-bold ${D.text}`,children:["$",(j.fvTotals[L]||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]},L)}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Avg Monthly Expense"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",(m/12).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),C>0&&e.jsxs("div",{className:"bg-slate-50 rounded-lg shadow p-4 border border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Balance Sheet Items"}),e.jsxs("div",{className:"text-2xl font-bold text-slate-700",children:["$",C.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-4",children:e.jsxs("h3",{className:"text-lg font-bold",children:["Operating Expenses by Category - ",lr]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 sticky left-0 bg-gray-50 min-w-[250px]",children:"Category"}),d.map((L,D)=>e.jsx("th",{className:"text-right py-3 px-3 font-semibold text-gray-700 min-w-[90px]",children:L},D)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 bg-gray-100 min-w-[100px]",children:"Total"})]})}),e.jsx("tbody",{children:P.filter(L=>j.byFV[L]&&Object.keys(j.byFV[L]).length>0).map(L=>{const D=R(L),F=Object.keys(j.byFV[L]).sort();return e.jsxs(Jt.Fragment,{children:[e.jsx("tr",{className:`${D.header} border-b-2 ${D.border}`,children:e.jsxs("td",{colSpan:14,className:`px-4 py-3 font-bold ${D.text} text-base`,children:[L.toUpperCase()," EXPENSES"]})}),F.map((v,S)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${S%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700 sticky left-0 bg-inherit",children:v}),d.map((E,I)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:N(j.byFV[L][v][I])},I)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-medium text-gray-800 bg-gray-100",children:N(j.categoryTotalsByFV[L][v])})]},`${L}-${v}`)),e.jsxs("tr",{className:`${D.bg} border-b-2 ${D.border}`,children:[e.jsxs("td",{className:`py-2 px-4 font-semibold ${D.text} sticky left-0 ${D.bg}`,children:["Total ",L," Expenses"]}),d.map((v,S)=>e.jsx("td",{className:`py-2 px-3 text-right font-mono font-semibold ${D.text}`,children:N(j.monthlyTotalsByFV[L][S])},S)),e.jsxs("td",{className:`py-2 px-4 text-right font-mono font-bold ${D.text} ${D.header}`,children:["$",(j.fvTotals[L]||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]},L)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-emerald-100 border-t-2 border-emerald-300 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-emerald-800 sticky left-0 bg-emerald-100 text-base",children:"TOTAL OPERATING EXPENSES"}),d.map((L,D)=>e.jsx("td",{className:"py-3 px-3 text-right font-mono text-emerald-800",children:N(p[D])},D)),e.jsxs("td",{className:"py-3 px-4 text-right font-mono text-emerald-900 bg-emerald-200 text-lg",children:["$",m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]})})]}),C>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-purple-100 px-6 py-4 border-b border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-800",children:["Balance Sheet / Cash Flow Items - ",lr]}),e.jsx("p",{className:"text-sm text-purple-600",children:"Transfers, Principal Payments, Asset Purchases (not included in Operating Expenses)"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 sticky left-0 bg-gray-50 min-w-[250px]",children:"Category"}),d.map((L,D)=>e.jsx("th",{className:"text-right py-3 px-3 font-semibold text-gray-700 min-w-[90px]",children:L},D)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 bg-gray-100 min-w-[100px]",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:Object.keys(g.byFV).flatMap(L=>Object.keys(g.byFV[L]).sort()).filter((L,D,F)=>F.indexOf(L)===D).sort().map((L,D)=>{const F={};let v=0;return d.forEach((S,E)=>{let I=0;Object.keys(g.byFV).forEach(H=>{g.byFV[H][L]&&(I+=g.byFV[H][L][E]||0)}),F[E]=I,v+=I}),e.jsxs("tr",{className:D%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 font-medium text-gray-800 sticky left-0 bg-inherit",children:L}),d.map((S,E)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-gray-600",children:N(F[E])},E)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-gray-800 bg-gray-100",children:N(v)})]},L)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-purple-50 border-t-2 border-purple-200 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-purple-800 sticky left-0 bg-purple-50",children:"Total Balance Sheet Items"}),d.map((L,D)=>{let F=0;return Object.values(g.monthlyTotalsByFV).forEach(v=>{F+=v[D]||0}),e.jsx("td",{className:"py-3 px-3 text-right font-mono text-purple-700",children:N(F)},D)}),e.jsxs("td",{className:"py-3 px-4 text-right font-mono text-purple-800 bg-purple-100 text-lg",children:["$",C.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Top Operating Expense Categories"}),e.jsx("div",{className:"space-y-3",children:Object.entries(j.byFV).flatMap(([L,D])=>Object.entries(D).map(([F,v])=>({category:F,fvGroup:L,total:Object.values(v).reduce((S,E)=>S+E,0)}))).sort((L,D)=>D.total-L.total).slice(0,10).map(({category:L,fvGroup:D,total:F},v)=>{const S=m>0?F/m*100:0,E=R(D);return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-8 text-center font-bold text-gray-400",children:v+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsxs("span",{className:"font-medium text-gray-800",children:[L,e.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded ${E.bg} ${E.text}`,children:D})]}),e.jsxs("span",{className:"font-mono font-semibold text-gray-700",children:["$",F.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full",style:{width:`${S}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[S.toFixed(1),"% of total"]})]})]},L)})})]}),b.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Ms,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"No Expense Data"}),e.jsxs("p",{className:"text-gray-500",children:["No expense transactions found for ",lr,"."]}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Import transactions in the Transaction Tracker to see expense data here."})]})]})})()}),Et==="monthlyCashFlow"&&e.jsx("div",{className:"space-y-6",children:(()=>{const s=[...new Set(Re.map(F=>F.operationYear).filter(F=>F))].sort((F,v)=>v-F),n=String(ir),o=s.map(F=>String(F));s.length>0&&!o.includes(n)&&setTimeout(()=>kn(s[0]),0);const i=F=>{if(!F)return null;if(F.includes("/")){const v=F.split("/");if(v.length===3){const[S,E,I]=v;return new Date(parseInt(I),parseInt(S)-1,parseInt(E))}}return new Date(F)},h=F=>{const v=(F.fixedVariable||"").toLowerCase().trim(),S=(F.itemization||"").toLowerCase().trim();return v.includes("transfer")||S.includes("transfer")||S.includes("principal")||S.includes("asset sale")||S.includes("asset purchase")||S.includes("equipment sale")||S.includes("equipment purchase")||S.includes("machinery sale")||S.includes("machinery purchase")||S.includes("vehicle sale")||S.includes("vehicle purchase")||S.includes("land sale")||S.includes("land purchase")||S.includes("property sale")||S.includes("property purchase")},b=F=>{const v=parseFloat(F.credit)||0;if(v<=0)return v;const S=(F.itemization||"").toLowerCase().trim(),E=S.includes("corn")&&S.includes("inventory"),I=(S.includes("soybean")||S.includes("bean"))&&S.includes("inventory");if(!E&&!I||!F.date)return v;const H=i(F.date);if(!H||isNaN(H.getTime()))return v;let Y=0;return Re.forEach(_=>{const K=(_.itemization||"").toLowerCase().trim(),re=i(_.date),he=parseFloat(_.credit)||0;!re||isNaN(re.getTime())||he<=0||re<=H||(E&&K.includes("corn")&&!K.includes("inventory")&&(Y+=he),I&&(K.includes("soybean")||K.includes("bean"))&&!K.includes("inventory")&&(Y+=he))}),Math.max(0,v-Y)},x=Re.filter(F=>String(F.operationYear)===String(ir)),f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d={};f.forEach((F,v)=>{d[v]={operatingIncome:0,operatingExpenses:0,balanceSheetIn:0,balanceSheetOut:0,incomeByCategory:{},expenseByCategory:{},balanceSheetInByCategory:{},balanceSheetOutByCategory:{}}});let u=0,j=0,g=0,m=0;const p={},C={},N={},k={};x.forEach(F=>{const v=i(F.date);if(!v||isNaN(v.getTime()))return;const S=v.getMonth(),E=F.itemization||"Uncategorized",I=b(F),H=parseFloat(F.debit)||0,Y=h(F);I>0&&(Y?(d[S].balanceSheetIn+=I,g+=I,d[S].balanceSheetInByCategory[E]=(d[S].balanceSheetInByCategory[E]||0)+I,N[E]=(N[E]||0)+I):(d[S].operatingIncome+=I,u+=I,d[S].incomeByCategory[E]=(d[S].incomeByCategory[E]||0)+I,p[E]=(p[E]||0)+I)),H>0&&(Y?(d[S].balanceSheetOut+=H,m+=H,d[S].balanceSheetOutByCategory[E]=(d[S].balanceSheetOutByCategory[E]||0)+H,k[E]=(k[E]||0)+H):(d[S].operatingExpenses+=H,j+=H,d[S].expenseByCategory[E]=(d[S].expenseByCategory[E]||0)+H,C[E]=(C[E]||0)+H))});const P=u-j,A=g-m,R=P+A,L=F=>{if(!F&&F!==0)return"-";const S="$"+Math.abs(F).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return F<0?`(${S})`:S},D=F=>!F&&F!==0?"text-gray-400":F>=0?"text-green-600":"text-red-600";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Monthly Cash Flow Report"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cash inflows and outflows by month for the selected operating year"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Operating Year:"}),e.jsx("select",{value:ir,onChange:F=>kn(F.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:s.map(F=>e.jsx("option",{value:F,children:F},F))})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg shadow p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Operating Income"}),e.jsxs("div",{className:"text-xl font-bold text-green-700",children:["$",u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg shadow p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600",children:"Operating Expenses"}),e.jsxs("div",{className:"text-xl font-bold text-red-700",children:["$",j.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:`rounded-lg shadow p-4 border ${P>=0?"bg-emerald-50 border-emerald-200":"bg-orange-50 border-orange-200"}`,children:[e.jsx("div",{className:`text-sm ${P>=0?"text-emerald-600":"text-orange-600"}`,children:"Net Operating"}),e.jsx("div",{className:`text-xl font-bold ${P>=0?"text-emerald-700":"text-orange-700"}`,children:L(P)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg shadow p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600",children:"Balance Sheet In"}),e.jsxs("div",{className:"text-xl font-bold text-blue-700",children:["$",g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg shadow p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600",children:"Balance Sheet Out"}),e.jsxs("div",{className:"text-xl font-bold text-purple-700",children:["$",m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:`rounded-lg shadow p-4 border ${R>=0?"bg-teal-50 border-teal-200":"bg-rose-50 border-rose-200"}`,children:[e.jsx("div",{className:`text-sm ${R>=0?"text-teal-600":"text-rose-600"}`,children:"Total Net Cash Flow"}),e.jsx("div",{className:`text-xl font-bold ${R>=0?"text-teal-700":"text-rose-700"}`,children:L(R)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white px-6 py-4",children:e.jsxs("h3",{className:"text-lg font-bold",children:["Monthly Cash Flow Summary - ",ir]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 sticky left-0 bg-gray-50 min-w-[200px]",children:"Category"}),f.map((F,v)=>e.jsx("th",{className:"text-right py-3 px-3 font-semibold text-gray-700 min-w-[90px]",children:F},v)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 bg-gray-100 min-w-[110px]",children:"Total"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"bg-green-50 border-b border-green-200",children:[e.jsx("td",{className:"py-2 px-4 font-semibold text-green-800 sticky left-0 bg-green-50",children:"Operating Income"}),f.map((F,v)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-green-700",children:L(d[v].operatingIncome)},v)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-bold text-green-800 bg-green-100",children:L(u)})]}),e.jsxs("tr",{className:"bg-red-50 border-b border-red-200",children:[e.jsx("td",{className:"py-2 px-4 font-semibold text-red-800 sticky left-0 bg-red-50",children:"Operating Expenses"}),f.map((F,v)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-red-700",children:d[v].operatingExpenses>0?`(${L(d[v].operatingExpenses)})`:"-"},v)),e.jsxs("td",{className:"py-2 px-4 text-right font-mono font-bold text-red-800 bg-red-100",children:["(",L(j),")"]})]}),e.jsxs("tr",{className:"bg-gray-100 border-b-2 border-gray-300",children:[e.jsx("td",{className:"py-3 px-4 font-bold text-gray-800 sticky left-0 bg-gray-100",children:"Net Operating Cash Flow"}),f.map((F,v)=>{const S=d[v].operatingIncome-d[v].operatingExpenses;return e.jsx("td",{className:`py-3 px-3 text-right font-mono font-semibold ${D(S)}`,children:L(S)},v)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold bg-gray-200 ${D(P)}`,children:L(P)})]}),e.jsxs("tr",{className:"bg-blue-50 border-b border-blue-200",children:[e.jsx("td",{className:"py-2 px-4 font-semibold text-blue-800 sticky left-0 bg-blue-50",children:"Balance Sheet Inflows"}),f.map((F,v)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-blue-700",children:L(d[v].balanceSheetIn)},v)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-bold text-blue-800 bg-blue-100",children:L(g)})]}),e.jsxs("tr",{className:"bg-purple-50 border-b border-purple-200",children:[e.jsx("td",{className:"py-2 px-4 font-semibold text-purple-800 sticky left-0 bg-purple-50",children:"Balance Sheet Outflows"}),f.map((F,v)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-700",children:d[v].balanceSheetOut>0?`(${L(d[v].balanceSheetOut)})`:"-"},v)),e.jsxs("td",{className:"py-2 px-4 text-right font-mono font-bold text-purple-800 bg-purple-100",children:["(",L(m),")"]})]}),e.jsxs("tr",{className:"bg-gray-100 border-b-2 border-gray-300",children:[e.jsx("td",{className:"py-3 px-4 font-bold text-gray-800 sticky left-0 bg-gray-100",children:"Net Balance Sheet Cash Flow"}),f.map((F,v)=>{const S=d[v].balanceSheetIn-d[v].balanceSheetOut;return e.jsx("td",{className:`py-3 px-3 text-right font-mono font-semibold ${D(S)}`,children:L(S)},v)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold bg-gray-200 ${D(A)}`,children:L(A)})]})]}),e.jsx("tfoot",{children:e.jsxs("tr",{className:`border-t-2 ${R>=0?"bg-teal-100 border-teal-300":"bg-rose-100 border-rose-300"}`,children:[e.jsx("td",{className:`py-3 px-4 font-bold text-lg sticky left-0 ${R>=0?"text-teal-800 bg-teal-100":"text-rose-800 bg-rose-100"}`,children:"TOTAL NET CASH FLOW"}),f.map((F,v)=>{const S=d[v].operatingIncome-d[v].operatingExpenses+(d[v].balanceSheetIn-d[v].balanceSheetOut);return e.jsx("td",{className:`py-3 px-3 text-right font-mono font-bold ${D(S)}`,children:L(S)},v)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold text-lg ${R>=0?"bg-teal-200 text-teal-900":"bg-rose-200 text-rose-900"}`,children:L(R)})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4",children:e.jsxs("h3",{className:"text-lg font-bold",children:["Cumulative Cash Flow - ",ir]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 sticky left-0 bg-gray-50 min-w-[200px]",children:"Category"}),f.map((F,v)=>e.jsx("th",{className:"text-right py-3 px-3 font-semibold text-gray-700 min-w-[90px]",children:F},v))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 px-4 font-semibold text-gray-800 sticky left-0 bg-white",children:"Cumulative Operating"}),(()=>{let F=0;return f.map((v,S)=>(F+=d[S].operatingIncome-d[S].operatingExpenses,e.jsx("td",{className:`py-3 px-3 text-right font-mono font-semibold ${D(F)}`,children:L(F)},S)))})()]}),e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-semibold text-gray-800 sticky left-0 bg-gray-50",children:"Cumulative Total"}),(()=>{let F=0;return f.map((v,S)=>(F+=d[S].operatingIncome-d[S].operatingExpenses+(d[S].balanceSheetIn-d[S].balanceSheetOut),e.jsx("td",{className:`py-3 px-3 text-right font-mono font-bold ${D(F)}`,children:L(F)},S)))})()]})]})]})})]}),Object.keys(p).length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-green-100 px-6 py-4 border-b border-green-200",children:e.jsx("h3",{className:"text-lg font-bold text-green-800",children:"Operating Income by Category"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 sticky left-0 bg-gray-50 min-w-[250px]",children:"Category"}),f.map((F,v)=>e.jsx("th",{className:"text-right py-3 px-3 font-semibold text-gray-700 min-w-[90px]",children:F},v)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 bg-gray-100 min-w-[100px]",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:Object.entries(p).sort((F,v)=>v[1]-F[1]).map(([F,v],S)=>e.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 text-gray-700 sticky left-0 bg-inherit",children:F}),f.map((E,I)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-green-600",children:L(d[I].incomeByCategory[F]||0)},I)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-green-700 bg-gray-100",children:L(v)})]},F))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-green-50 border-t-2 border-green-200 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-green-800 sticky left-0 bg-green-50",children:"Total Operating Income"}),f.map((F,v)=>e.jsx("td",{className:"py-3 px-3 text-right font-mono text-green-700",children:L(d[v].operatingIncome)},v)),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-800 bg-green-100",children:L(u)})]})})]})})]}),Object.keys(C).length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-red-100 px-6 py-4 border-b border-red-200",children:e.jsx("h3",{className:"text-lg font-bold text-red-800",children:"Operating Expenses by Category"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 sticky left-0 bg-gray-50 min-w-[250px]",children:"Category"}),f.map((F,v)=>e.jsx("th",{className:"text-right py-3 px-3 font-semibold text-gray-700 min-w-[90px]",children:F},v)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 bg-gray-100 min-w-[100px]",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:Object.entries(C).sort((F,v)=>v[1]-F[1]).map(([F,v],S)=>e.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 text-gray-700 sticky left-0 bg-inherit",children:F}),f.map((E,I)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-red-600",children:L(d[I].expenseByCategory[F]||0)},I)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-red-700 bg-gray-100",children:L(v)})]},F))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-red-50 border-t-2 border-red-200 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-red-800 sticky left-0 bg-red-50",children:"Total Operating Expenses"}),f.map((F,v)=>e.jsx("td",{className:"py-3 px-3 text-right font-mono text-red-700",children:L(d[v].operatingExpenses)},v)),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-red-800 bg-red-100",children:L(j)})]})})]})})]}),(Object.keys(N).length>0||Object.keys(k).length>0)&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-100 px-6 py-4 border-b border-slate-200",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Balance Sheet / Cash Flow Items"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Transfers, Principal Payments, Asset Sales/Purchases"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 sticky left-0 bg-gray-50 min-w-[250px]",children:"Category"}),f.map((F,v)=>e.jsx("th",{className:"text-right py-3 px-3 font-semibold text-gray-700 min-w-[90px]",children:F},v)),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 bg-gray-100 min-w-[100px]",children:"Total"})]})}),e.jsxs("tbody",{children:[Object.keys(N).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"bg-blue-50 border-b border-blue-200",children:e.jsx("td",{colSpan:14,className:"py-2 px-4 font-semibold text-blue-800",children:"INFLOWS"})}),Object.entries(N).sort((F,v)=>v[1]-F[1]).map(([F,v],S)=>e.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700 sticky left-0 bg-inherit",children:F}),f.map((E,I)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-blue-600",children:L(d[I].balanceSheetInByCategory[F]||0)},I)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-blue-700 bg-gray-100",children:L(v)})]},`in-${F}`))]}),Object.keys(k).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"bg-purple-50 border-b border-purple-200",children:e.jsx("td",{colSpan:14,className:"py-2 px-4 font-semibold text-purple-800",children:"OUTFLOWS"})}),Object.entries(k).sort((F,v)=>v[1]-F[1]).map(([F,v],S)=>e.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 pl-8 text-gray-700 sticky left-0 bg-inherit",children:F}),f.map((E,I)=>e.jsx("td",{className:"py-2 px-3 text-right font-mono text-purple-600",children:L(d[I].balanceSheetOutByCategory[F]||0)},I)),e.jsx("td",{className:"py-2 px-4 text-right font-mono font-semibold text-purple-700 bg-gray-100",children:L(v)})]},`out-${F}`))]})]}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-50 border-t-2 border-slate-200 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-slate-800 sticky left-0 bg-slate-50",children:"Net Balance Sheet"}),f.map((F,v)=>{const S=d[v].balanceSheetIn-d[v].balanceSheetOut;return e.jsx("td",{className:`py-3 px-3 text-right font-mono ${D(S)}`,children:L(S)},v)}),e.jsx("td",{className:`py-3 px-4 text-right font-mono bg-slate-100 ${D(A)}`,children:L(A)})]})})]})})]}),x.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(vt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"No Transaction Data"}),e.jsxs("p",{className:"text-gray-500",children:["No transactions found for ",ir,"."]}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Import transactions in the Transaction Tracker to see cash flow data here."})]})]})})()}),Et==="scheduleF"&&e.jsx("div",{className:"space-y-6",children:(()=>{const s=[...new Set(Re.map(N=>N.taxYear).filter(N=>N))].sort((N,k)=>k-N),n=String(ge),o=s.map(N=>String(N));s.length>0&&!o.includes(n)&&setTimeout(()=>ve(s[0]),0);const i=Re.filter(N=>N.taxYear&&String(N.taxYear)===String(ge)),h=[{line:"1a",label:"Sales of livestock and other resale items",key:"Line 1a - Crop Sales"},{line:"1b",label:"Cost or other basis of livestock or items",key:null},{line:"2",label:"Sales of livestock, produce, grains, and other products you raised",key:"Line 4a - Livestock Sales"},{line:"3a",label:"Cooperative distributions (Form 1099-PATR)",key:"Line 3a - Cooperative Distributions"},{line:"4a",label:"Agricultural program payments",key:"Line 4a - Agricultural Program Payments"},{line:"5a",label:"Commodity Credit Corporation (CCC) loans reported",key:"Line 5a - CCC Loans"},{line:"6",label:"Crop insurance proceeds",key:"Line 7 - Crop Insurance"},{line:"7",label:"Custom hire (machine work) income",key:"Line 8 - Custom Hire"},{line:"8",label:"Other income",key:"Line 34 - Other"}],b=[{line:"12",label:"Car and truck expenses",key:"Line 12 - Car & Truck"},{line:"13",label:"Chemicals",key:"Line 13 - Chemicals"},{line:"14",label:"Conservation expenses",key:"Line 14 - Conservation"},{line:"15",label:"Custom hire (machine work)",key:"Line 15 - Custom Hire"},{line:"16",label:"Depreciation and section 179 expense",key:"Line 16 - Depreciation"},{line:"17",label:"Employee benefit programs",key:null},{line:"18",label:"Feed",key:"Line 18 - Feed"},{line:"19",label:"Fertilizers and lime",key:"Line 19 - Fertilizer"},{line:"20",label:"Freight and trucking",key:"Line 20 - Freight"},{line:"21",label:"Gasoline, fuel, and oil",key:"Line 21 - Fuel"},{line:"22",label:"Insurance (other than health)",key:"Line 22 - Insurance"},{line:"23",label:"Interest",key:"Line 23 - Interest"},{line:"24",label:"Labor hired",key:"Line 24 - Labor Hired"},{line:"25",label:"Pension and profit-sharing plans",key:null},{line:"26",label:"Rent or lease",key:"Line 25 - Rent/Lease"},{line:"27",label:"Repairs and maintenance",key:"Line 26 - Repairs"},{line:"28",label:"Seeds and plants",key:"Line 27 - Seeds/Plants"},{line:"29",label:"Storage and warehousing",key:"Line 28 - Storage"},{line:"30",label:"Supplies",key:"Line 29 - Supplies"},{line:"31",label:"Taxes",key:"Line 30 - Taxes"},{line:"32",label:"Utilities",key:"Line 31 - Utilities"},{line:"33",label:"Veterinary, breeding, and medicine",key:"Line 32 - Vet/Breeding"},{line:"34",label:"Other expenses",key:"Line 34 - Other"}],x={},f={},d={},u={},j=N=>{const k=(N.itemization||"").toLowerCase().trim();return k.includes("asset purchase")||k.includes("equipment purchase")||k.includes("machinery purchase")||k.includes("vehicle purchase")||k.includes("truck purchase")||k.includes("tractor purchase")||k.includes("implement purchase")||k.includes("capital purchase")};i.forEach(N=>{let k=N.scheduleFCategory||"";const P=parseFloat(N.credit)||0,A=parseFloat(N.debit)||0,R=N.itemization||"Uncategorized";j(N)&&A>0&&(k="Line 16 - Depreciation"),P>0&&k&&(x[k]=(x[k]||0)+P,d[k]||(d[k]={}),d[k][R]=(d[k][R]||0)+P),A>0&&k&&(f[k]=(f[k]||0)+A,u[k]||(u[k]={}),u[k][R]=(u[k][R]||0)+A)});const g=Object.values(x).reduce((N,k)=>N+k,0),m=Object.values(f).reduce((N,k)=>N+k,0),p=g-m,C=N=>!N&&N!==0?"-":"$"+Math.abs(N).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-6 h-6 text-emerald-600"}),"Schedule F - Profit or Loss From Farming"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tax year data organized by IRS Schedule F line items"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tax Year:"}),e.jsx("select",{value:ge,onChange:N=>ve(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg font-semibold text-gray-700 bg-white",children:s.map(N=>e.jsx("option",{value:N,children:N},N))})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg shadow p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Total Gross Income"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:C(g)}),e.jsx("div",{className:"text-xs text-green-500 mt-1",children:"Lines 1a through 8"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg shadow p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm text-red-600",children:"Total Expenses"}),e.jsx("div",{className:"text-2xl font-bold text-red-700",children:C(m)}),e.jsx("div",{className:"text-xs text-red-500 mt-1",children:"Lines 12 through 34"})]}),e.jsxs("div",{className:`rounded-lg shadow p-4 border ${p>=0?"bg-emerald-50 border-emerald-200":"bg-orange-50 border-orange-200"}`,children:[e.jsx("div",{className:`text-sm ${p>=0?"text-emerald-600":"text-orange-600"}`,children:"Net Farm Profit or (Loss)"}),e.jsxs("div",{className:`text-2xl font-bold ${p>=0?"text-emerald-700":"text-orange-700"}`,children:[p<0?"(":"",C(p),p<0?")":""]}),e.jsx("div",{className:`text-xs mt-1 ${p>=0?"text-emerald-500":"text-orange-500"}`,children:"Line 36 - Gross income minus expenses"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Part I  Farm IncomeCash Method"}),e.jsxs("p",{className:"text-green-100 text-sm",children:["Tax Year ",ge]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 w-20",children:"Line"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 w-40",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:h.map((N,k)=>{const P=N.key&&x[N.key]||0,A=N.key?d[N.key]||{}:{},R=Object.keys(A).length>0,L=lb[N.line];return e.jsxs(Jt.Fragment,{children:[e.jsxs("tr",{className:`${k%2===0?"bg-white":"bg-gray-50"} ${R?"cursor-pointer hover:bg-green-50":""}`,onClick:()=>R&&ob(D=>({...D,[N.line]:!D[N.line]})),children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-600",children:N.line}),e.jsx("td",{className:"py-3 px-4 text-gray-800",children:e.jsxs("div",{className:"flex items-center gap-2",children:[R&&e.jsx(al,{className:`w-4 h-4 text-gray-400 transition-transform ${L?"rotate-90":""}`}),N.label]})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-700 font-semibold",children:P>0?C(P):"-"})]}),L&&R&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"bg-green-50 px-4 py-2",children:e.jsx("div",{className:"ml-8 space-y-1",children:Object.entries(A).sort((D,F)=>F[1]-D[1]).map(([D,F])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:D}),e.jsx("span",{className:"font-mono text-green-600",children:C(F)})]},D))})})})]},N.line)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-green-100 border-t-2 border-green-300 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-green-800",children:"9"}),e.jsx("td",{className:"py-3 px-4 text-green-800",children:"Gross income (add lines 1c through 8)"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-green-800 text-lg",children:C(g)})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-rose-600 text-white px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Part II  Farm ExpensesCash Method"}),e.jsx("p",{className:"text-red-100 text-sm",children:"Do not include personal or living expenses"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 w-20",children:"Line"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 w-40",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:b.map((N,k)=>{const P=N.key&&f[N.key]||0,A=N.key?u[N.key]||{}:{},R=Object.keys(A).length>0,L=ib[N.line];return e.jsxs(Jt.Fragment,{children:[e.jsxs("tr",{className:`${k%2===0?"bg-white":"bg-gray-50"} ${R?"cursor-pointer hover:bg-red-50":""}`,onClick:()=>R&&cb(D=>({...D,[N.line]:!D[N.line]})),children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-600",children:N.line}),e.jsx("td",{className:"py-3 px-4 text-gray-800",children:e.jsxs("div",{className:"flex items-center gap-2",children:[R&&e.jsx(al,{className:`w-4 h-4 text-gray-400 transition-transform ${L?"rotate-90":""}`}),N.label]})}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-red-700 font-semibold",children:P>0?C(P):"-"})]}),L&&R&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"bg-red-50 px-4 py-2",children:e.jsx("div",{className:"ml-8 space-y-1",children:Object.entries(A).sort((D,F)=>F[1]-D[1]).map(([D,F])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:D}),e.jsx("span",{className:"font-mono text-red-600",children:C(F)})]},D))})})})]},N.line)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-red-100 border-t-2 border-red-300 font-bold",children:[e.jsx("td",{className:"py-3 px-4 text-red-800",children:"35"}),e.jsx("td",{className:"py-3 px-4 text-red-800",children:"Total expenses (add lines 12 through 34)"}),e.jsx("td",{className:"py-3 px-4 text-right font-mono text-red-800 text-lg",children:C(m)})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:`px-6 py-4 ${p>=0?"bg-gradient-to-r from-emerald-600 to-teal-600":"bg-gradient-to-r from-orange-600 to-amber-600"} text-white`,children:e.jsx("h3",{className:"text-lg font-bold",children:"Net Farm Profit or (Loss)"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("table",{className:"w-full text-sm",children:e.jsx("tbody",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 font-medium text-gray-600",children:"36"}),e.jsx("td",{className:"py-3 text-gray-800",children:"Subtract line 35 from line 9"}),e.jsxs("td",{className:`py-3 text-right font-mono text-xl font-bold ${p>=0?"text-emerald-700":"text-orange-700"}`,children:[p<0?"(":"",C(p),p<0?")":""]})]})})}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Note:"})," This report is for reference purposes only. Consult with your tax professional for final tax preparation. Additional adjustments may be required for inventory changes, depreciation calculations, and other tax-specific items."]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[e.jsx("strong",{children:"Capital purchases:"})," Asset, equipment, machinery, and vehicle purchases are included on Line 16 (Depreciation) as they are eligible for depreciation or Section 179 expense deduction."]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[e.jsx("strong",{children:"Excluded items:"})," Transactions without a Tax Year are excluded from this report. Non-taxable items such as crop inventory, transfers, loan proceeds, principal payments, and personal income/expenses should have an empty Tax Year field in the Transaction Tracker."]})]})]})]}),i.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(Ot,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"No Taxable Transaction Data"}),e.jsxs("p",{className:"text-gray-500",children:["No transactions with Tax Year ",ge," found."]}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Transactions must have a Tax Year assigned in the Transaction Tracker to appear on Schedule F."})]})]})})()})]})]})})}),ct==="swine"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:[{id:"overview",label:"Overview",icon:Ht},{id:"inventory",label:"Inventory",icon:ho},{id:"production",label:"Production",icon:lt},{id:"feed",label:"Feed",icon:Ps},{id:"sales",label:"Sales",icon:vt},{id:"expenses",label:"Expenses",icon:Ot},{id:"analysis",label:"Analysis",icon:bt}].map(s=>e.jsxs("button",{className:"flex items-center gap-2 px-5 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300",children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx(ho,{className:"w-20 h-20 text-pink-300 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Swine Enterprise"}),e.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"Coming Soon"}),e.jsx("p",{className:"text-gray-500 max-w-lg mx-auto",children:"Track farrow-to-finish operations, feeder pig production, breeding herd management, feed costs, health protocols, and market hog sales. This module is under development."}),e.jsxs("div",{className:"mt-8 flex flex-wrap justify-center gap-3",children:[e.jsx("span",{className:"px-4 py-2 bg-pink-100 text-pink-700 rounded-full text-sm font-medium",children:"Sow Inventory"}),e.jsx("span",{className:"px-4 py-2 bg-pink-100 text-pink-700 rounded-full text-sm font-medium",children:"Farrowing"}),e.jsx("span",{className:"px-4 py-2 bg-pink-100 text-pink-700 rounded-full text-sm font-medium",children:"Nursery"}),e.jsx("span",{className:"px-4 py-2 bg-pink-100 text-pink-700 rounded-full text-sm font-medium",children:"Finishing"}),e.jsx("span",{className:"px-4 py-2 bg-pink-100 text-pink-700 rounded-full text-sm font-medium",children:"Feed Tracking"}),e.jsx("span",{className:"px-4 py-2 bg-pink-100 text-pink-700 rounded-full text-sm font-medium",children:"Market Sales"})]})]})})]})]})]})}uc.createRoot(document.getElementById("root")).render(e.jsx(Jt.StrictMode,{children:e.jsx(dj,{})}));
